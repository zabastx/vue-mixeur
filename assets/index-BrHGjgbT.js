const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DRACOLoader-RMPxq2x9.js","assets/three-B27hEisu.js","assets/GLTFLoader-BMuO6Fuf.js","assets/OBJLoader-Cabgzp0F.js","assets/FBXLoader-lnwG5a-S.js","assets/fflate.module-lXf-65b9.js"])))=>i.map(i=>d[i]);
import{i as gu,p as Ef,F as Ie,s as je,a as Xo,t as Mf,r as $r,b as N,c as ra,d as xe,w as Te,e as Lt,n as Ge,g as yu,o as sa,f as Ve,h as ia,j as Le,k as nt,l as Oo,m as _u,q as Mn,u as p,v as F,x as zm,y as Hm,z as Af,A as Wt,B as jm,C as L,D as Lr,E as Wm,G as J,H as Pf,I as B,J as E,K as S,L as U,M as T,N as ue,O as St,P as wt,T as bu,Q as Re,R as De,S as wu,U as ne,V as ot,W as zn,X as ze,Y as xu,Z as If,_ as _o,$ as Gm,a0 as j,a1 as ke,a2 as Ce,a3 as Rf,a4 as Km,a5 as Ym,a6 as sr,a7 as Et,a8 as Nn,a9 as no,aa as Xm,ab as oo,ac as Ps,ad as Zm,ae as Of,af as Qm,ag as aa,ah as kf,ai as Jm}from"./icons-CticbwbE.js";import{C as Df,V as ee,M as Vr,T as kr,Q as Dt,S as Tl,a as Ne,R as Bf,P as Su,b as So,B as dn,c as Ht,d as un,L as $n,e as Ir,f as Cu,D as Is,g as la,F as Bc,h as qs,i as me,j as qf,k as Lf,l as Cn,m as Vf,n as Tu,o as ro,p as K,U as Ls,q as Bi,r as Gr,s as qi,O as Ur,t as ev,u as El,v as Ff,w as tv,x as Nf,y as qn,z as nv,A as Ml,E as $f,G as Eu,H as Mu,I as ir,J as Uf,K as Jn,N as ov,W as Eo,X as Al,Y as Dr,Z as rv,_ as zf,$ as Xt,a0 as $t,a1 as Zs,a2 as ss,a3 as sv,a4 as iv,a5 as $a,a6 as av,a7 as lv,a8 as Zo,a9 as uv,aa as zi,ab as cv,ac as dv,ad as fv,ae as pv,af as Pl,ag as hv,ah as mv,ai as vv,aj as gv,ak as yv,al as _v,am as bv,an as nn,ao as is,ap as $o,aq as Qs,ar as Ua,as as qc,at as wv,au as xv,av as Sv,aw as En,ax as Il,ay as Cv,az as Tv,aA as Ev,aB as Hf,aC as Mv}from"./three-B27hEisu.js";import{u as Js}from"./fflate.module-lXf-65b9.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function Lc(n){return typeof n=="string"?`'${n}'`:new Av().serialize(n)}const Av=(function(){class n{#e=new Map;compare(t,o){const r=typeof t,i=typeof o;return r==="string"&&i==="string"?t.localeCompare(o):r==="number"&&i==="number"?t-o:String.prototype.localeCompare.call(this.serialize(t,!0),this.serialize(o,!0))}serialize(t,o){if(t===null)return"null";switch(typeof t){case"string":return o?t:`'${t}'`;case"bigint":return`${t}n`;case"object":return this.$object(t);case"function":return this.$function(t)}return String(t)}serializeObject(t){const o=Object.prototype.toString.call(t);if(o!=="[object Object]")return this.serializeBuiltInType(o.length<10?`unknown:${o}`:o.slice(8,-1),t);const r=t.constructor,i=r===Object||r===void 0?"":r.name;if(i!==""&&globalThis[i]===r)return this.serializeBuiltInType(i,t);if(typeof t.toJSON=="function"){const s=t.toJSON();return i+(s!==null&&typeof s=="object"?this.$object(s):`(${this.serialize(s)})`)}return this.serializeObjectEntries(i,Object.entries(t))}serializeBuiltInType(t,o){const r=this["$"+t];if(r)return r.call(this,o);if(typeof o?.entries=="function")return this.serializeObjectEntries(t,o.entries());throw new Error(`Cannot serialize ${t}`)}serializeObjectEntries(t,o){const r=Array.from(o).sort((s,a)=>this.compare(s[0],a[0]));let i=`${t}{`;for(let s=0;s<r.length;s++){const[a,l]=r[s];i+=`${this.serialize(a,!0)}:${this.serialize(l)}`,s<r.length-1&&(i+=",")}return i+"}"}$object(t){let o=this.#e.get(t);return o===void 0&&(this.#e.set(t,`#${this.#e.size}`),o=this.serializeObject(t),this.#e.set(t,o)),o}$function(t){const o=Function.prototype.toString.call(t);return o.slice(-15)==="[native code] }"?`${t.name||""}()[native]`:`${t.name}(${t.length})${o.replace(/\s*\n\s*/g,"")}`}$Array(t){let o="[";for(let r=0;r<t.length;r++)o+=this.serialize(t[r]),r<t.length-1&&(o+=",");return o+"]"}$Date(t){try{return`Date(${t.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(t){return`ArrayBuffer[${new Uint8Array(t).join(",")}]`}$Set(t){return`Set${this.$Array(Array.from(t).sort((o,r)=>this.compare(o,r)))}`}$Map(t){return this.serializeObjectEntries("Map",t.entries())}}for(const e of["Error","RegExp","URL"])n.prototype["$"+e]=function(t){return`${e}(${t})`};for(const e of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])n.prototype["$"+e]=function(t){return`${e}[${t.join(",")}]`};for(const e of["BigInt64Array","BigUint64Array"])n.prototype["$"+e]=function(t){return`${e}[${t.join("n,")}${t.length>0?"n":""}]`};return n})();function so(n,e){return n===e||Lc(n)===Lc(e)}function za(n,e,t){const o=n.findIndex(a=>so(a,e)),r=n.findIndex(a=>so(a,t));if(o===-1||r===-1)return[];const[i,s]=[o,r].sort((a,l)=>a-l);return n.slice(i,s+1)}function zr(n,e=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY){return Math.min(t,Math.max(e,n))}function ei(n,e){let t=n;const o=e.toString(),r=o.indexOf("."),i=r>=0?o.length-r:0;if(i>0){const s=10**i;t=Math.round(t*s)/s}return t}function Pv(n,e,t,o){e=Number(e),t=Number(t);const r=(n-(Number.isNaN(e)?0:e))%o;let i=ei(Math.abs(r)*2>=o?n+Math.sign(r)*(o-Math.abs(r)):n-r,o);return Number.isNaN(e)?!Number.isNaN(t)&&i>t&&(i=Math.floor(ei(t/o,o))*o):i<e?i=e:!Number.isNaN(t)&&i>t&&(i=e+Math.floor(ei((t-e)/o,o))*o),i=ei(i,o),i}function Be(n,e){const t=typeof n=="string"&&!e?`${n}Context`:e,o=Symbol(t);return[s=>{const a=gu(o,s);if(a||a===null)return a;throw new Error(`Injection \`${o.toString()}\` not found. Component must be used within ${Array.isArray(n)?`one of the following components: ${n.join(", ")}`:`\`${n}\``}`)},s=>(Ef(o,s),s)]}function et(){let n=document.activeElement;if(n==null)return null;for(;n!=null&&n.shadowRoot!=null&&n.shadowRoot.activeElement!=null;)n=n.shadowRoot.activeElement;return n}function Hr(n,e,t){const o=t.originalEvent.target,r=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&o.addEventListener(n,e,{once:!0}),o.dispatchEvent(r)}function eo(n){return n==null}function Rl(n,e){return eo(n)?!1:Array.isArray(n)?n.some(t=>so(t,e)):so(n,e)}function Au(n){return n?n.flatMap(e=>e.type===Ie?Au(e.children):[e]):[]}const Iv=["INPUT","TEXTAREA"];function jf(n,e,t,o={}){if(!e||o.enableIgnoredElement&&Iv.includes(e.nodeName))return null;const{arrowKeyOptions:r="both",attributeName:i="[data-reka-collection-item]",itemsArray:s=[],loop:a=!0,dir:l="ltr",preventScroll:u=!0,focus:c=!1}=o,[d,f,h,m,v,g]=[n.key==="ArrowRight",n.key==="ArrowLeft",n.key==="ArrowUp",n.key==="ArrowDown",n.key==="Home",n.key==="End"],y=h||m,_=d||f;if(!v&&!g&&(!y&&!_||r==="vertical"&&_||r==="horizontal"&&y))return null;const b=t?Array.from(t.querySelectorAll(i)):s;if(!b.length)return null;u&&n.preventDefault();let x=null;return _||y?x=Wf(b,e,{goForward:y?m:l==="ltr"?d:f,loop:a}):v?x=b.at(0)||null:g&&(x=b.at(-1)||null),c&&x?.focus(),x}function Wf(n,e,t,o=n.length){if(--o===0)return null;const r=n.indexOf(e),i=t.goForward?r+1:r-1;if(!t.loop&&(i<0||i>=n.length))return null;const s=(i+n.length)%n.length,a=n[s];return a?a.hasAttribute("disabled")&&a.getAttribute("disabled")!=="false"?Wf(n,a,t,o):a:null}const[ua]=Be("ConfigProvider");function Rv(n,e){var t;const o=je();return nt(()=>{o.value=n()},{...e,flush:(t=e?.flush)!==null&&t!==void 0?t:"sync"}),$r(o)}function Ov(n,e,t={}){let o,r,i,s=!0;const a=()=>{s=!0,i()};Te(n,a,{flush:"sync",...t});const l=typeof e=="function"?e:e.get,u=typeof e=="function"?void 0:e.set,c=ra((d,f)=>(r=d,i=f,{get(){return s&&(o=l(o),s=!1),r(),o},set(h){u?.(h)}}));return c.trigger=a,c}function ar(n,e){return yu()?(sa(n,e),!0):!1}function Co(){const n=new Set,e=i=>{n.delete(i)};return{on:i=>{n.add(i);const s=()=>e(i);return ar(s),{off:s}},off:e,trigger:(...i)=>Promise.all(Array.from(n).map(s=>s(...i))),clear:()=>{n.clear()}}}function kv(n){let e=!1,t;const o=ia(!0);return((...r)=>(e||(t=o.run(()=>n(...r)),e=!0),t))}const on=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Dv=n=>typeof n<"u",Bv=Object.prototype.toString,qv=n=>Bv.call(n)==="[object Object]",Hi=()=>{},Lv=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),Vc=Vv();function Vv(){var n,e,t;return on&&!!(!((n=window)===null||n===void 0||(n=n.navigator)===null||n===void 0)&&n.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window)===null||e===void 0||(e=e.navigator)===null||e===void 0?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test((t=window)===null||t===void 0?void 0:t.navigator.userAgent))}function Ha(...n){if(n.length!==1)return Mf(...n);const e=n[0];return typeof e=="function"?$r(ra(()=>({get:e,set:Hi}))):N(e)}function Fv(n,e){function t(...o){return new Promise((r,i)=>{Promise.resolve(n(()=>e.apply(this,o),{fn:e,thisArg:this,args:o})).then(r).catch(i)})}return t}function Nv(n,e={}){let t,o,r=Hi;const i=l=>{clearTimeout(l),r(),r=Hi};let s;return l=>{const u=xe(n),c=xe(e.maxWait);return t&&i(t),u<=0||c!==void 0&&c<=0?(o&&(i(o),o=void 0),Promise.resolve(l())):new Promise((d,f)=>{r=e.rejectOnCancel?f:d,s=l,c&&!o&&(o=setTimeout(()=>{t&&i(t),o=void 0,d(s())},c)),t=setTimeout(()=>{o&&i(o),o=void 0,d(l())},u)})}}function Fc(n,e=!1,t="Timeout"){return new Promise((o,r)=>{setTimeout(e?()=>r(t):o,n)})}function $v(n,...e){return e.some(t=>t in n)}function ja(n){return Array.isArray(n)?n:[n]}function Gf(n){return Oo()}function Kf(n){if(!on)return n;let e=0,t,o;const r=()=>{e-=1,o&&e<=0&&(o.stop(),t=void 0,o=void 0)};return((...i)=>(e+=1,o||(o=ia(!0),t=o.run(()=>n(...i))),ar(r),t))}function Uv(n){return Lt(n)?Mn(new Proxy({},{get(e,t,o){return p(Reflect.get(n.value,t,o))},set(e,t,o){return Lt(n.value[t])&&!Lt(o)?n.value[t].value=o:n.value[t]=o,!0},deleteProperty(e,t){return Reflect.deleteProperty(n.value,t)},has(e,t){return Reflect.has(n.value,t)},ownKeys(){return Object.keys(n.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}})):Mn(n)}function Pu(n){return Uv(F(n))}function ca(n,...e){const t=e.flat(),o=t[0];return Pu(()=>Object.fromEntries(typeof o=="function"?Object.entries(Ve(n)).filter(([r,i])=>!o(xe(i),r)):Object.entries(Ve(n)).filter(r=>!t.includes(r[0]))))}function Iu(n,e=1e4){return ra((t,o)=>{let r=xe(n),i;const s=()=>setTimeout(()=>{r=xe(n),o()},xe(e));return ar(()=>{clearTimeout(i)}),{get(){return t(),r},set(a){r=a,o(),clearTimeout(i),i=s()}}})}function Ru(n,e=200,t={}){return Fv(Nv(e,t),n)}function zv(n,e={}){if(!Lt(n))return Ve(n);const t=Array.isArray(n.value)?Array.from({length:n.value.length}):{};for(const o in n.value)t[o]=ra(()=>({get(){return n.value[o]},set(r){var i;if(!((i=xe(e.replaceRef))!==null&&i!==void 0)||i)if(Array.isArray(n.value)){const s=[...n.value];s[o]=r,n.value=s}else{const s={...n.value,[o]:r};Object.setPrototypeOf(s,Object.getPrototypeOf(n.value)),n.value=s}else n.value[o]=r}}));return t}function Hv(n,e){Gf()&&_u(n,e)}function jv(n,e=!0,t){Gf()?Le(n,t):e?n():Ge(n)}function Ol(n,e=!1){function t(d,{flush:f="sync",deep:h=!1,timeout:m,throwOnTimeout:v}={}){let g=null;const y=[new Promise(_=>{g=Te(n,b=>{d(b)!==e&&(g?g():Ge(()=>g?.()),_(b))},{flush:f,deep:h,immediate:!0})})];return m!=null&&y.push(Fc(m,v).then(()=>xe(n)).finally(()=>g?.())),Promise.race(y)}function o(d,f){if(!Lt(d))return t(b=>b===d,f);const{flush:h="sync",deep:m=!1,timeout:v,throwOnTimeout:g}=f??{};let y=null;const _=[new Promise(b=>{y=Te([n,d],([x,C])=>{e!==(x===C)&&(y?y():Ge(()=>y?.()),b(x))},{flush:h,deep:m,immediate:!0})})];return v!=null&&_.push(Fc(v,g).then(()=>xe(n)).finally(()=>(y?.(),xe(n)))),Promise.race(_)}function r(d){return t(f=>!!f,d)}function i(d){return o(null,d)}function s(d){return o(void 0,d)}function a(d){return t(Number.isNaN,d)}function l(d,f){return t(h=>{const m=Array.from(h);return m.includes(d)||m.includes(xe(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return t(()=>(h+=1,h>=d),f)}return Array.isArray(xe(n))?{toMatch:t,toContains:l,changed:u,changedTimes:c,get not(){return Ol(n,!e)}}:{toMatch:t,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:a,toBeUndefined:s,changed:u,changedTimes:c,get not(){return Ol(n,!e)}}}function Wv(n){return Ol(n)}function da(n,e,t={}){const{immediate:o=!0,immediateCallback:r=!1}=t,i=je(!1);let s;function a(){s&&(clearTimeout(s),s=void 0)}function l(){i.value=!1,a()}function u(...c){r&&n(),a(),i.value=!0,s=setTimeout(()=>{i.value=!1,s=void 0,n(...c)},xe(e))}return o&&(i.value=!0,on&&u()),ar(l),{isPending:Xo(i),start:u,stop:l}}function Gv(n=1e3,e={}){const{controls:t=!1,callback:o}=e,r=da(o??Hi,n,e),i=F(()=>!r.isPending.value);return t?{ready:i,...r}:i}function Kv(n,e,t){return Te(n,e,{...t,immediate:!0})}function Yv(n,e,t){return Te(n,e,{...t,once:!0})}const to=on?window:void 0,Xv=on?window.document:void 0;function jt(n){var e;const t=xe(n);return(e=t?.$el)!==null&&e!==void 0?e:t}function We(...n){const e=(o,r,i,s)=>(o.addEventListener(r,i,s),()=>o.removeEventListener(r,i,s)),t=F(()=>{const o=ja(xe(n[0])).filter(r=>r!=null);return o.every(r=>typeof r!="string")?o:void 0});return Kv(()=>{var o,r;return[(o=(r=t.value)===null||r===void 0?void 0:r.map(i=>jt(i)))!==null&&o!==void 0?o:[to].filter(i=>i!=null),ja(xe(t.value?n[1]:n[0])),ja(p(t.value?n[2]:n[1])),xe(t.value?n[3]:n[2])]},([o,r,i,s],a,l)=>{if(!o?.length||!r?.length||!i?.length)return;const u=qv(s)?{...s}:s,c=o.flatMap(d=>r.flatMap(f=>i.map(h=>e(d,f,h,u))));l(()=>{c.forEach(d=>d())})},{flush:"post"})}function Ou(){const n=je(!1),e=Oo();return e&&Le(()=>{n.value=!0},e),n}function Yf(n){const e=Ou();return F(()=>(e.value,!!n()))}function Zv(n){return typeof n=="function"?n:typeof n=="string"?e=>e.key===n:Array.isArray(n)?e=>n.includes(e.key):()=>!0}function ku(...n){let e,t,o={};n.length===3?(e=n[0],t=n[1],o=n[2]):n.length===2?typeof n[1]=="object"?(e=!0,t=n[0],o=n[1]):(e=n[0],t=n[1]):(e=!0,t=n[0]);const{target:r=to,eventName:i="keydown",passive:s=!1,dedupe:a=!1}=o,l=Zv(e);return We(r,i,c=>{c.repeat&&xe(a)||l(c)&&t(c)},s)}function Xf(n,e={}){const{immediate:t=!0,fpsLimit:o=null,window:r=to,once:i=!1}=e,s=je(!1),a=F(()=>{const h=xe(o);return h?1e3/h:null});let l=0,u=null;function c(h){if(!s.value||!r)return;l||(l=h);const m=h-l;if(a.value&&m<a.value){u=r.requestAnimationFrame(c);return}if(l=h,n({delta:m,timestamp:h}),i){s.value=!1,u=null;return}u=r.requestAnimationFrame(c)}function d(){!s.value&&r&&(s.value=!0,l=0,u=r.requestAnimationFrame(c))}function f(){s.value=!1,u!=null&&r&&(r.cancelAnimationFrame(u),u=null)}return t&&d(),ar(f),{isActive:$r(s),pause:f,resume:d}}function Qv(n){return JSON.parse(JSON.stringify(n))}function Jv(n){const e=Oo(),t=Ov(()=>null,()=>e.proxy.$el);return zm(t.trigger),Le(t.trigger),t}const ti={speed:2,margin:30,direction:"both"};function eg(n){n.scrollLeft>n.scrollWidth-n.clientWidth&&(n.scrollLeft=Math.max(0,n.scrollWidth-n.clientWidth)),n.scrollTop>n.scrollHeight-n.clientHeight&&(n.scrollTop=Math.max(0,n.scrollHeight-n.clientHeight))}function tg(n,e={}){var t,o,r,i;const{pointerTypes:s,preventDefault:a,stopPropagation:l,exact:u,onMove:c,onEnd:d,onStart:f,initialValue:h,axis:m="both",draggingElement:v=to,containerElement:g,handle:y=n,buttons:_=[0],restrictInView:b,autoScroll:x=!1}=e,C=N((t=xe(h))!==null&&t!==void 0?t:{x:0,y:0}),k=N(),P=re=>s?s.includes(re.pointerType):!0,R=re=>{xe(a)&&re.preventDefault(),xe(l)&&re.stopPropagation()},M=xe(x),A=typeof M=="object"?{speed:(o=xe(M.speed))!==null&&o!==void 0?o:ti.speed,margin:(r=xe(M.margin))!==null&&r!==void 0?r:ti.margin,direction:(i=M.direction)!==null&&i!==void 0?i:ti.direction}:ti,O=re=>typeof re=="number"?[re,re]:[re.x,re.y],D=(re,pe,Ee)=>{const{clientWidth:Pe,clientHeight:Ae,scrollLeft:be,scrollTop:Ue,scrollWidth:lt,scrollHeight:Ft}=re,[dt,Yt]=O(A.margin),[Nt,hn]=O(A.speed);let Vo=0,Fo=0;(A.direction==="x"||A.direction==="both")&&(Ee.x<dt&&be>0?Vo=-Nt:Ee.x+pe.width>Pe-dt&&be<lt-Pe&&(Vo=Nt)),(A.direction==="y"||A.direction==="both")&&(Ee.y<Yt&&Ue>0?Fo=-hn:Ee.y+pe.height>Ae-Yt&&Ue<Ft-Ae&&(Fo=hn)),(Vo||Fo)&&re.scrollBy({left:Vo,top:Fo,behavior:"auto"})};let V=null;const $=()=>{const re=xe(g);re&&!V&&(V=setInterval(()=>{const pe=xe(n).getBoundingClientRect(),{x:Ee,y:Pe}=C.value,Ae={x:Ee-re.scrollLeft,y:Pe-re.scrollTop};Ae.x>=0&&Ae.y>=0&&(D(re,pe,Ae),Ae.x+=re.scrollLeft,Ae.y+=re.scrollTop,C.value=Ae)},1e3/60))},Y=()=>{V&&(clearInterval(V),V=null)},W=(re,pe,Ee,Pe)=>{const[Ae,be]=typeof Ee=="number"?[Ee,Ee]:[Ee.x,Ee.y],{clientWidth:Ue,clientHeight:lt}=pe;return re.x<Ae||re.x+Pe.width>Ue-Ae||re.y<be||re.y+Pe.height>lt-be},G=()=>{if(xe(e.disabled)||!k.value)return;const re=xe(g);if(!re)return;const pe=xe(n).getBoundingClientRect(),{x:Ee,y:Pe}=C.value;W({x:Ee-re.scrollLeft,y:Pe-re.scrollTop},re,A.margin,pe)?$():Y()};xe(x)&&Te(C,G);const Q=re=>{var pe;if(!xe(_).includes(re.button)||xe(e.disabled)||!P(re)||xe(u)&&re.target!==xe(n))return;const Ee=xe(g),Pe=Ee==null||(pe=Ee.getBoundingClientRect)===null||pe===void 0?void 0:pe.call(Ee),Ae=xe(n).getBoundingClientRect(),be={x:re.clientX-(Ee?Ae.left-Pe.left+(x?0:Ee.scrollLeft):Ae.left),y:re.clientY-(Ee?Ae.top-Pe.top+(x?0:Ee.scrollTop):Ae.top)};f?.(be,re)!==!1&&(k.value=be,R(re))},ge=re=>{if(xe(e.disabled)||!P(re)||!k.value)return;const pe=xe(g);pe instanceof HTMLElement&&eg(pe);const Ee=xe(n).getBoundingClientRect();let{x:Pe,y:Ae}=C.value;if((m==="x"||m==="both")&&(Pe=re.clientX-k.value.x,pe&&(Pe=Math.min(Math.max(0,Pe),pe.scrollWidth-Ee.width))),(m==="y"||m==="both")&&(Ae=re.clientY-k.value.y,pe&&(Ae=Math.min(Math.max(0,Ae),pe.scrollHeight-Ee.height))),xe(x)&&pe&&(V===null&&D(pe,Ee,{x:Pe,y:Ae}),Pe+=pe.scrollLeft,Ae+=pe.scrollTop),pe&&(b||x)){if(m!=="y"){const be=Pe-pe.scrollLeft;be<0?Pe=pe.scrollLeft:be>pe.clientWidth-Ee.width&&(Pe=pe.clientWidth-Ee.width+pe.scrollLeft)}if(m!=="x"){const be=Ae-pe.scrollTop;be<0?Ae=pe.scrollTop:be>pe.clientHeight-Ee.height&&(Ae=pe.clientHeight-Ee.height+pe.scrollTop)}}C.value={x:Pe,y:Ae},c?.(C.value,re),R(re)},ce=re=>{xe(e.disabled)||!P(re)||k.value&&(k.value=void 0,x&&Y(),d?.(C.value,re),R(re))};if(on){const re=()=>{var pe;return{capture:(pe=e.capture)!==null&&pe!==void 0?pe:!0,passive:!xe(a)}};We(y,"pointerdown",Q,re),We(v,"pointermove",ge,re),We(v,"pointerup",ce,re)}return{...zv(C),position:C,isDragging:F(()=>!!k.value),style:F(()=>`
      left: ${C.value.x}px;
      top: ${C.value.y}px;
      ${x?"text-wrap: nowrap;":""}
    `)}}function Mo(n,e,t={}){const{window:o=to,...r}=t;let i;const s=Yf(()=>o&&"ResizeObserver"in o),a=()=>{i&&(i.disconnect(),i=void 0)},l=Te(F(()=>{const c=xe(n);return Array.isArray(c)?c.map(d=>jt(d)):[jt(c)]}),c=>{if(a(),s.value&&o){i=new ResizeObserver(e);for(const d of c)d&&i.observe(d,r)}},{immediate:!0,flush:"post"}),u=()=>{a(),l()};return ar(u),{isSupported:s,stop:u}}function ng(n={}){const{initialValue:e=""}=n,t=Yf(()=>typeof window<"u"&&"EyeDropper"in window),o=je(e);async function r(i){if(!t.value)return;const s=await new window.EyeDropper().open(i);return o.value=s.sRGBHex,s}return{isSupported:t,sRGBHex:o,open:r}}const og={json:"application/json",text:"text/plain"};function ji(n){return n&&$v(n,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}const rg=/^(?:[a-z][a-z\d+\-.]*:)?\/\//i;function sg(n){return rg.test(n)}function Ss(n){return typeof Headers<"u"&&n instanceof Headers?Object.fromEntries(n.entries()):n}function mr(n,...e){return n==="overwrite"?async t=>{let o;for(let r=e.length-1;r>=0;r--)if(e[r]!=null){o=e[r];break}return o?{...t,...await o(t)}:t}:async t=>{for(const o of e)o&&(t={...t,...await o(t)});return t}}function ig(n={}){const e=n.combination||"chain",t=n.options||{},o=n.fetchOptions||{};function r(i,...s){const a=F(()=>{const c=xe(n.baseUrl),d=xe(i);return c&&!sg(d)?lg(c,d):d});let l=t,u=o;return s.length>0&&(ji(s[0])?l={...l,...s[0],beforeFetch:mr(e,t.beforeFetch,s[0].beforeFetch),afterFetch:mr(e,t.afterFetch,s[0].afterFetch),onFetchError:mr(e,t.onFetchError,s[0].onFetchError)}:u={...u,...s[0],headers:{...Ss(u.headers)||{},...Ss(s[0].headers)||{}}}),s.length>1&&ji(s[1])&&(l={...l,...s[1],beforeFetch:mr(e,t.beforeFetch,s[1].beforeFetch),afterFetch:mr(e,t.afterFetch,s[1].afterFetch),onFetchError:mr(e,t.onFetchError,s[1].onFetchError)}),ag(a,u,l)}return r}function ag(n,...e){var t,o;const r=typeof AbortController=="function";let i={},s={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const a={method:"GET",type:"text",payload:void 0};e.length>0&&(ji(e[0])?s={...s,...e[0]}:i=e[0]),e.length>1&&ji(e[1])&&(s={...s,...e[1]});const{fetch:l=(t=to?.fetch)!==null&&t!==void 0?t:(o=globalThis)===null||o===void 0?void 0:o.fetch,initialData:u,timeout:c}=s,d=Co(),f=Co(),h=Co(),m=je(!1),v=je(!1),g=je(!1),y=je(null),_=je(null),b=je(null),x=je(u||null),C=F(()=>r&&v.value);let k,P;const R=G=>{r&&(k?.abort(G),k=new AbortController,k.signal.onabort=()=>g.value=!0,i={...i,signal:k.signal})},M=G=>{v.value=G,m.value=!G};c&&(P=da(R,c,{immediate:!1}));let A=0;const O=async(G=!1)=>{var Q;R(),M(!0),b.value=null,y.value=null,g.value=!1,A+=1;const ge=A,ce={method:a.method,headers:{}},re=xe(a.payload);if(re){var pe;const be=Ss(ce.headers),Ue=Object.getPrototypeOf(re);!a.payloadType&&re&&(Ue===Object.prototype||Array.isArray(Ue))&&!(re instanceof FormData)&&(a.payloadType="json"),a.payloadType&&(be["Content-Type"]=(pe=og[a.payloadType])!==null&&pe!==void 0?pe:a.payloadType),ce.body=a.payloadType==="json"?JSON.stringify(re):re}let Ee=!1;const Pe={url:xe(n),options:{...ce,...i},cancel:()=>{Ee=!0}};if(s.beforeFetch&&Object.assign(Pe,await s.beforeFetch(Pe)),Ee||!l)return M(!1),Promise.resolve(null);let Ae=null;return P&&P.start(),l(Pe.url,{...ce,...Pe.options,headers:{...Ss(ce.headers),...Ss((Q=Pe.options)===null||Q===void 0?void 0:Q.headers)}}).then(async be=>{if(_.value=be,y.value=be.status,Ae=await be.clone()[a.type](),!be.ok)throw x.value=u||null,new Error(be.statusText);return s.afterFetch&&({data:Ae}=await s.afterFetch({data:Ae,response:be,context:Pe,execute:O})),x.value=Ae,d.trigger(be),be}).catch(async be=>{let Ue=be.message||be.name;if(s.onFetchError&&({error:Ue,data:Ae}=await s.onFetchError({data:Ae,error:be,response:_.value,context:Pe,execute:O})),b.value=Ue,s.updateDataOnError&&(x.value=Ae),f.trigger(be),G)throw be;return null}).finally(()=>{ge===A&&M(!1),P&&P.stop(),h.trigger(null)})},D=Ha(s.refetch);Te([D,Ha(n)],([G])=>G&&O(),{deep:!0});const V={isFinished:$r(m),isFetching:$r(v),statusCode:y,response:_,error:b,data:x,canAbort:C,aborted:g,abort:R,execute:O,onFetchResponse:d.on,onFetchError:f.on,onFetchFinally:h.on,get:$("GET"),put:$("PUT"),post:$("POST"),delete:$("DELETE"),patch:$("PATCH"),head:$("HEAD"),options:$("OPTIONS"),json:W("json"),text:W("text"),blob:W("blob"),arrayBuffer:W("arrayBuffer"),formData:W("formData")};function $(G){return(Q,ge)=>{if(!v.value)return a.method=G,a.payload=Q,a.payloadType=ge,Lt(a.payload)&&Te([D,Ha(a.payload)],([ce])=>ce&&O(),{deep:!0}),{...V,then(ce,re){return Y().then(ce,re)}}}}function Y(){return new Promise((G,Q)=>{Wv(m).toBe(!0).then(()=>G(V)).catch(Q)})}function W(G){return()=>{if(!v.value)return a.type=G,{...V,then(Q,ge){return Y().then(Q,ge)}}}}return s.immediate&&Promise.resolve().then(()=>O()),{...V,then(G,Q){return Y().then(G,Q)}}}function lg(n,e){return!n.endsWith("/")&&!e.startsWith("/")?`${n}/${e}`:n.endsWith("/")&&e.startsWith("/")?`${n.slice(0,-1)}${e}`:`${n}${e}`}const ug={multiple:!0,accept:"*",reset:!1,directory:!1};function cg(n){if(!n)return null;if(n instanceof FileList)return n;const e=new DataTransfer;for(const t of n)e.items.add(t);return e.files}function dg(n={}){const{document:e=Xv}=n,t=N(cg(n.initialFiles)),{on:o,trigger:r}=Co(),{on:i,trigger:s}=Co(),a=F(()=>{var d;const f=(d=jt(n.input))!==null&&d!==void 0?d:e?e.createElement("input"):void 0;return f&&(f.type="file",f.onchange=h=>{t.value=h.target.files,r(t.value)},f.oncancel=()=>{s()}),f}),l=()=>{t.value=null,a.value&&a.value.value&&(a.value.value="",r(null))},u=d=>{const f=a.value;f&&(f.multiple=xe(d.multiple),f.accept=xe(d.accept),f.webkitdirectory=xe(d.directory),Lv(d,"capture")&&(f.capture=xe(d.capture)))},c=d=>{const f=a.value;if(!f)return;const h={...ug,...n,...d};u(h),xe(h.reset)&&l(),f.click()};return nt(()=>{u(n)}),{files:$r(t),open:c,reset:l,onCancel:i,onChange:o}}function fg(n=Jv()){const e=je(),t=()=>{const o=jt(n);o&&(e.value=o.parentElement)};return jv(t),Te(()=>xe(n),t),e}function st(n,e,t,o={}){var r,i;const{clone:s=!1,passive:a=!1,eventName:l,deep:u=!1,defaultValue:c,shouldEmit:d}=o,f=Oo(),h=t||f?.emit||(f==null||(r=f.$emit)===null||r===void 0?void 0:r.bind(f))||(f==null||(i=f.proxy)===null||i===void 0||(i=i.$emit)===null||i===void 0?void 0:i.bind(f?.proxy));let m=l;e||(e="modelValue"),m=m||`update:${e.toString()}`;const v=_=>s?typeof s=="function"?s(_):Qv(_):_,g=()=>Dv(n[e])?v(n[e]):c,y=_=>{d?d(_)&&h(m,_):h(m,_)};if(a){const _=N(g());let b=!1;return Te(()=>n[e],x=>{b||(b=!0,_.value=v(x),Ge(()=>b=!1))}),Te(_,x=>{!b&&(x!==n[e]||u)&&y(x)},{deep:u}),_}else return F({get(){return g()},set(_){y(_)}})}function Wa(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in n?!1:Symbol.toStringTag in n?Object.prototype.toString.call(n)==="[object Module]":!0}function kl(n,e,t=".",o){if(!Wa(e))return kl(n,{},t,o);const r=Object.assign({},e);for(const i in n){if(i==="__proto__"||i==="constructor")continue;const s=n[i];s!=null&&(o&&o(r,i,s,t)||(Array.isArray(s)&&Array.isArray(r[i])?r[i]=[...s,...r[i]]:Wa(s)&&Wa(r[i])?r[i]=kl(s,r[i],(t?`${t}.`:"")+i.toString(),o):r[i]=s))}return r}function pg(n){return(...e)=>e.reduce((t,o)=>kl(t,o,"",n),{})}const hg=pg(),mg=Kf(()=>{const n=N(new Map),e=N(),t=F(()=>{for(const s of n.value.values())if(s)return!0;return!1}),o=ua({scrollBody:N(!0)});let r=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",Vc&&r?.(),e.value=void 0};return Te(t,(s,a)=>{if(!on)return;if(!s){a&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,u={padding:l,margin:0},c=o.scrollBody?.value?typeof o.scrollBody.value=="object"?hg({padding:o.scrollBody.value.padding===!0?l:o.scrollBody.value.padding,margin:o.scrollBody.value.margin===!0?l:o.scrollBody.value.margin},u):u:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof c.padding=="number"?`${c.padding}px`:String(c.padding),document.body.style.marginRight=typeof c.margin=="number"?`${c.margin}px`:String(c.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),Vc&&(r=We(document,"touchmove",d=>vg(d),{passive:!1})),Ge(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),n});function fa(n){const e=Math.random().toString(36).substring(2,7),t=mg();t.value.set(e,n??!1);const o=F({get:()=>t.value.get(e)??!1,set:r=>t.value.set(e,r)});return Hv(()=>{t.value.delete(e)}),o}function Zf(n){const e=window.getComputedStyle(n);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&n.clientWidth<n.scrollWidth||e.overflowY==="auto"&&n.clientHeight<n.scrollHeight)return!0;{const t=n.parentNode;return!(t instanceof Element)||t.tagName==="BODY"?!1:Zf(t)}}function vg(n){const e=n||window.event,t=e.target;return t instanceof Element&&Zf(t)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function bn(n){const e=ua({dir:N("ltr")});return F(()=>n?.value||e.dir?.value||"ltr")}function Rn(n){const e=Oo(),t=e?.type.emits,o={};return t?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),t?.forEach(r=>{o[Hm(Af(r))]=(...i)=>n(r,...i)}),o}let Ga=0;function Du(){nt(n=>{if(!on)return;const e=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",e[0]??Nc()),document.body.insertAdjacentElement("beforeend",e[1]??Nc()),Ga++,n(()=>{Ga===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(t=>t.remove()),Ga--})})}function Nc(){const n=document.createElement("span");return n.setAttribute("data-reka-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}function lr(n){return F(()=>xe(n)?!!jt(n)?.closest("form"):!0)}function Z(){const n=Oo(),e=N(),t=F(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:jt(e)),o=Object.assign({},n.exposed),r={};for(const s in n.props)Object.defineProperty(r,s,{enumerable:!0,configurable:!0,get:()=>n.props[s]});if(Object.keys(o).length>0)for(const s in o)Object.defineProperty(r,s,{enumerable:!0,configurable:!0,get:()=>o[s]});Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>n.vnode.el}),n.exposed=r;function i(s){if(e.value=s,!!s&&(Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>s instanceof Element?s:s.$el}),!(s instanceof Element)&&!Object.hasOwn(s,"$el"))){const a=s.$.exposed,l=Object.assign({},r);for(const u in a)Object.defineProperty(l,u,{enumerable:!0,configurable:!0,get:()=>a[u]});n.exposed=l}}return{forwardRef:i,currentRef:e,currentElement:t}}function ko(n){const e=Oo(),t=Object.keys(e?.type.props??{}).reduce((r,i)=>{const s=(e?.type.props[i]).default;return s!==void 0&&(r[i]=s),r},{}),o=Mf(n);return F(()=>{const r={},i=e?.vnode.props??{};return Object.keys(i).forEach(s=>{r[Af(s)]=i[s]}),Object.keys({...t,...r}).reduce((s,a)=>(o.value[a]!==void 0&&(s[a]=o.value[a]),s),{})})}function Gt(n,e){const t=ko(n),o=e?Rn(e):{};return F(()=>({...t.value,...o}))}function gg(n,e){const t=Iu(!1,300);ar(()=>{t.value=!1});const o=N(null),r=Co();function i(){o.value=null,t.value=!1}function s(a,l){const u=a.currentTarget,c={x:a.clientX,y:a.clientY},d=yg(c,u.getBoundingClientRect()),f=_g(c,d,1),h=bg(l.getBoundingClientRect()),m=xg([...f,...h]);o.value=m,t.value=!0}return nt(a=>{if(n.value&&e.value){const l=c=>s(c,e.value),u=c=>s(c,n.value);n.value.addEventListener("pointerleave",l),e.value.addEventListener("pointerleave",u),a(()=>{n.value?.removeEventListener("pointerleave",l),e.value?.removeEventListener("pointerleave",u)})}}),nt(a=>{if(o.value){const l=u=>{if(!o.value||!(u.target instanceof Element))return;const c=u.target,d={x:u.clientX,y:u.clientY},f=n.value?.contains(c)||e.value?.contains(c),h=!wg(d,o.value),m=!!c.closest("[data-grace-area-trigger]");f?i():(h||m)&&(i(),r.trigger())};n.value?.ownerDocument.addEventListener("pointermove",l),a(()=>n.value?.ownerDocument.removeEventListener("pointermove",l))}}),{isPointerInTransit:t,onPointerExit:r.on}}function yg(n,e){const t=Math.abs(e.top-n.y),o=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,o,r,i)){case i:return"left";case r:return"right";case t:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function _g(n,e,t=5){const o=[];switch(e){case"top":o.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":o.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":o.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":o.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return o}function bg(n){const{top:e,right:t,bottom:o,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:o},{x:r,y:o}]}function wg(n,e){const{x:t,y:o}=n;let r=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i].x,l=e[i].y,u=e[s].x,c=e[s].y;l>o!=c>o&&t<(u-a)*(o-l)/(c-l)+a&&(r=!r)}return r}function xg(n){const e=n.slice();return e.sort((t,o)=>t.x<o.x?-1:t.x>o.x?1:t.y<o.y?-1:t.y>o.y?1:0),Sg(e)}function Sg(n){if(n.length<=1)return n.slice();const e=[];for(let o=0;o<n.length;o++){const r=n[o];for(;e.length>=2;){const i=e[e.length-1],s=e[e.length-2];if((i.x-s.x)*(r.y-s.y)>=(i.y-s.y)*(r.x-s.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let o=n.length-1;o>=0;o--){const r=n[o];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(r.y-s.y)>=(i.y-s.y)*(r.x-s.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Cg=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},vr=new WeakMap,ni=new WeakMap,oi={},Ka=0,Qf=function(n){return n&&(n.host||Qf(n.parentNode))},Tg=function(n,e){return e.map(function(t){if(n.contains(t))return t;var o=Qf(t);return o&&n.contains(o)?o:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},Eg=function(n,e,t,o){var r=Tg(e,Array.isArray(n)?n:[n]);oi[t]||(oi[t]=new WeakMap);var i=oi[t],s=[],a=new Set,l=new Set(r),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};r.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))c(f);else try{var h=f.getAttribute(o),m=h!==null&&h!=="false",v=(vr.get(f)||0)+1,g=(i.get(f)||0)+1;vr.set(f,v),i.set(f,g),s.push(f),v===1&&m&&ni.set(f,!0),g===1&&f.setAttribute(t,"true"),m||f.setAttribute(o,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return c(e),a.clear(),Ka++,function(){s.forEach(function(d){var f=vr.get(d)-1,h=i.get(d)-1;vr.set(d,f),i.set(d,h),f||(ni.has(d)||d.removeAttribute(o),ni.delete(d)),h||d.removeAttribute(t)}),Ka--,Ka||(vr=new WeakMap,vr=new WeakMap,ni=new WeakMap,oi={})}},Mg=function(n,e,t){t===void 0&&(t="data-aria-hidden");var o=Array.from(Array.isArray(n)?n:[n]),r=Cg(n);return r?(o.push.apply(o,Array.from(r.querySelectorAll("[aria-live], script"))),Eg(o,r,t,"aria-hidden")):function(){return null}};function pa(n){let e;Te(()=>jt(n),t=>{t?e=Mg(t):e&&e()}),Wt(()=>{e&&e()})}function Rt(n,e="reka"){return n||`${e}-${jm?.()}`}function Ag(n){const e=ua({locale:N("en")});return F(()=>n?.value||e.locale?.value||"en")}function Pg(n,e){const t=N(),o=(i,s)=>{if(e.multiple&&Array.isArray(n.value))if(e.selectionBehavior==="replace")n.value=[i],t.value=i;else{const a=n.value.findIndex(l=>s(l));a!==-1?n.value=n.value.filter((l,u)=>u!==a):n.value=[...n.value,i]}else e.selectionBehavior==="replace"?n.value={...i}:!Array.isArray(n.value)&&s(n.value)?n.value=void 0:n.value={...i};return n.value};function r(i,s,a,l){if(!t?.value||!e.multiple||!Array.isArray(n.value))return;const c=a().filter(f=>f.ref.dataset.disabled!=="").find(f=>f.ref===s)?.value;if(!c)return;let d=null;switch(i){case"prev":case"next":{d=za(l,t.value,c);break}case"first":{d=za(l,t.value,l?.[0]);break}case"last":{d=za(l,t.value,l?.[l.length-1]);break}}n.value=d}return{firstValue:t,onSelectItem:o,handleMultipleReplace:r}}function Jf(n){const e=N(),t=F(()=>e.value?.width??0),o=F(()=>e.value?.height??0);return Le(()=>{const r=jt(n);if(r){e.value={width:r.offsetWidth,height:r.offsetHeight};const i=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let l,u;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,u=d.blockSize}else l=r.offsetWidth,u=r.offsetHeight;e.value={width:l,height:u}});return i.observe(r,{box:"border-box"}),()=>i.unobserve(r)}else e.value=void 0}),{width:t,height:o}}function Bu(n,e){const t=N(n);function o(i){return e[t.value][i]??t.value}return{state:t,dispatch:i=>{t.value=o(i)}}}function ha(n){const e=Iu("",1e3);return{search:e,handleTypeaheadSearch:(r,i)=>{e.value=e.value+r;{const s=et(),a=i.map(f=>({...f,textValue:f.value?.textValue??f.ref.textContent?.trim()??""})),l=a.find(f=>f.ref===s),u=a.map(f=>f.textValue),c=ep(u,e.value,l?.textValue),d=a.find(f=>f.textValue===c);return d&&d.ref.focus(),d?.ref}},resetTypeahead:()=>{e.value=""}}}function qu(n,e){return n.map((t,o)=>n[(e+o)%n.length])}function ep(n,e,t){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let s=qu(n,Math.max(i,0));r.length===1&&(s=s.filter(u=>u!==t));const l=s.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return l!==t?l:void 0}function Ig(n,e){const t=N({}),o=N("none"),r=N(n),i=n.value?"mounted":"unmounted";let s;const a=e.value?.ownerDocument.defaultView??to,{state:l,dispatch:u}=Bu(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),c=g=>{if(on){const y=new CustomEvent(g,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(y)}};Te(n,async(g,y)=>{const _=y!==g;if(await Ge(),_){const b=o.value,x=ri(e.value);g?(u("MOUNT"),c("enter"),x==="none"&&c("after-enter")):x==="none"||x==="undefined"||t.value?.display==="none"?(u("UNMOUNT"),c("leave"),c("after-leave")):y&&b!==x?(u("ANIMATION_OUT"),c("leave")):(u("UNMOUNT"),c("after-leave"))}},{immediate:!0});const d=g=>{const y=ri(e.value),_=y.includes(CSS.escape(g.animationName)),b=l.value==="mounted"?"enter":"leave";if(g.target===e.value&&_&&(c(`after-${b}`),u("ANIMATION_END"),!r.value)){const x=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",s=a?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=x)})}g.target===e.value&&y==="none"&&u("ANIMATION_END")},f=g=>{g.target===e.value&&(o.value=ri(e.value))},h=Te(e,(g,y)=>{g?(t.value=getComputedStyle(g),g.addEventListener("animationstart",f),g.addEventListener("animationcancel",d),g.addEventListener("animationend",d)):(u("ANIMATION_END"),s!==void 0&&a?.clearTimeout(s),y?.removeEventListener("animationstart",f),y?.removeEventListener("animationcancel",d),y?.removeEventListener("animationend",d))},{immediate:!0}),m=Te(l,()=>{const g=ri(e.value);o.value=l.value==="mounted"?g:"none"});return Wt(()=>{h(),m()}),{isPresent:F(()=>["mounted","unmountSuspended"].includes(l.value))}}function ri(n){return n&&getComputedStyle(n).animationName||"none"}var Vt=L({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(n,{slots:e,expose:t}){const{present:o,forceMount:r}=Ve(n),i=N(),{isPresent:s}=Ig(o,i);t({present:s});let a=e.default({present:s.value});a=Au(a||[]);const l=Oo();if(a&&a?.length>1){const u=l?.parent?.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${u}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(c=>`  - ${c}`).join(`
`)].join(`
`))}return()=>r.value||o.value||s.value?Lr(e.default({present:s.value})[0],{ref:u=>{const c=jt(u);return typeof c?.hasAttribute>"u"||(c?.hasAttribute("data-reka-popper-content-wrapper")?i.value=c.firstElementChild:i.value=c),c}}):null}});const Dl=L({name:"PrimitiveSlot",inheritAttrs:!1,setup(n,{attrs:e,slots:t}){return()=>{if(!t.default)return null;const o=Au(t.default()),r=o.findIndex(l=>l.type!==Wm);if(r===-1)return o;const i=o[r];delete i.props?.ref;const s=i.props?J(e,i.props):e,a=Pf({...i,props:{}},s);return o.length===1?a:(o[r]=a,o)}}}),Rg=["area","img","input"],de=L({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(n,{attrs:e,slots:t}){const o=n.asChild?"template":n.as;return typeof o=="string"&&Rg.includes(o)?()=>Lr(o,e):o!=="template"?()=>Lr(n.as,e,{default:t.default}):()=>Lr(Dl,e,{default:t.default})}});function Ao(){const n=N(),e=F(()=>["#text","#comment"].includes(n.value?.$el.nodeName)?n.value?.$el.nextElementSibling:jt(n));return{primitiveElement:n,currentElement:e}}const[tp,Og]=Be("CollapsibleRoot");var kg=L({__name:"CollapsibleRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:open"],setup(n,{expose:e,emit:t}){const o=n,i=st(o,"open",t,{defaultValue:o.defaultOpen,passive:o.open===void 0}),{disabled:s,unmountOnHide:a}=Ve(o);return Og({contentId:"",disabled:s,open:i,unmountOnHide:a,onOpenToggle:()=>{s.value||(i.value=!i.value)}}),e({open:i}),Z(),(l,u)=>(E(),B(p(de),{as:l.as,"as-child":o.asChild,"data-state":p(i)?"open":"closed","data-disabled":p(s)?"":void 0},{default:S(()=>[U(l.$slots,"default",{open:p(i)})]),_:3},8,["as","as-child","data-state","data-disabled"]))}}),Dg=kg,Bg=L({inheritAttrs:!1,__name:"CollapsibleContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["contentFound"],setup(n,{emit:e}){const t=n,o=e,r=tp();r.contentId||=Rt(void 0,"reka-collapsible-content");const i=N(),{forwardRef:s,currentElement:a}=Z(),l=N(0),u=N(0),c=F(()=>r.open.value),d=N(c.value),f=N();Te(()=>[c.value,i.value?.present],async()=>{await Ge();const m=a.value;if(!m)return;f.value=f.value||{transitionDuration:m.style.transitionDuration,animationName:m.style.animationName},m.style.transitionDuration="0s",m.style.animationName="none";const v=m.getBoundingClientRect();u.value=v.height,l.value=v.width,d.value||(m.style.transitionDuration=f.value.transitionDuration,m.style.animationName=f.value.animationName)},{immediate:!0});const h=F(()=>d.value&&r.open.value);return Le(()=>{requestAnimationFrame(()=>{d.value=!1})}),We(a,"beforematch",m=>{requestAnimationFrame(()=>{r.onOpenToggle(),o("contentFound")})}),(m,v)=>(E(),B(p(Vt),{ref_key:"presentRef",ref:i,present:m.forceMount||p(r).open.value,"force-mount":!0},{default:S(({present:g})=>[T(p(de),J(m.$attrs,{id:p(r).contentId,ref:p(s),"as-child":t.asChild,as:m.as,hidden:g?void 0:p(r).unmountOnHide.value?"":"until-found","data-state":h.value?void 0:p(r).open.value?"open":"closed","data-disabled":p(r).disabled?.value?"":void 0,style:{"--reka-collapsible-content-height":`${u.value}px`,"--reka-collapsible-content-width":`${l.value}px`}}),{default:S(()=>[!p(r).unmountOnHide.value||g?U(m.$slots,"default",{key:0}):ue("v-if",!0)]),_:2},1040,["id","as-child","as","hidden","data-state","data-disabled","style"])]),_:3},8,["present"]))}}),qg=Bg,Lg=L({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n;Z();const t=tp();return(o,r)=>(E(),B(p(de),{type:o.as==="button"?"button":void 0,as:o.as,"as-child":e.asChild,"aria-controls":p(t).contentId,"aria-expanded":p(t).open.value,"data-state":p(t).open.value?"open":"closed","data-disabled":p(t).disabled?.value?"":void 0,disabled:p(t).disabled?.value,onClick:p(t).onOpenToggle},{default:S(()=>[U(o.$slots,"default")]),_:3},8,["type","as","as-child","aria-controls","aria-expanded","data-state","data-disabled","disabled","onClick"]))}}),Vg=Lg;function Fg({type:n,defaultValue:e,modelValue:t}){const o=t||e;return t!==void 0||e!==void 0?Array.isArray(o)?"multiple":"single":n??"single"}function Ng({type:n,defaultValue:e,modelValue:t}){return n||Fg({type:n,defaultValue:e,modelValue:t})}function $g({type:n,defaultValue:e}){return e!==void 0?e:n==="single"?void 0:[]}function Ug(n,e){const t=F(()=>Ng(n)),o=st(n,"modelValue",e,{defaultValue:$g(n),passive:n.modelValue===void 0,deep:!0});function r(s){if(t.value==="single")o.value=so(s,o.value)?void 0:s;else{const a=Array.isArray(o.value)?[...o.value||[]]:[o.value].filter(Boolean);if(Rl(a,s)){const l=a.findIndex(u=>so(u,s));a.splice(l,1)}else a.push(s);o.value=a}}const i=F(()=>t.value==="single");return{modelValue:o,changeModelValue:r,isSingle:i}}const[ma,zg]=Be("AccordionRoot");var Hg=L({__name:"AccordionRoot",props:{collapsible:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},orientation:{type:String,required:!1,default:"vertical"},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},type:{type:String,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,o=e,{dir:r,disabled:i,unmountOnHide:s}=Ve(t),a=bn(r),{modelValue:l,changeModelValue:u,isSingle:c}=Ug(t,o),{forwardRef:d,currentElement:f}=Z();return zg({disabled:i,direction:a,orientation:t.orientation,parentElement:f,isSingle:c,collapsible:t.collapsible,modelValue:l,changeModelValue:u,unmountOnHide:s}),(h,m)=>(E(),B(p(de),{ref:p(d),"as-child":h.asChild,as:h.as},{default:S(()=>[U(h.$slots,"default",{modelValue:p(l)})]),_:3},8,["as-child","as"]))}}),jg=Hg,Bl=(function(n){return n.Open="open",n.Closed="closed",n})(Bl||{});const[Lu,Wg]=Be("AccordionItem");var Gg=L({__name:"AccordionItem",props:{disabled:{type:Boolean,required:!1},value:{type:String,required:!0},unmountOnHide:{type:Boolean,required:!1,default:void 0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n,{expose:e}){const t=n,o=ma(),r=F(()=>o.isSingle.value?t.value===o.modelValue.value:Array.isArray(o.modelValue.value)&&o.modelValue.value.includes(t.value)),i=F(()=>o.disabled.value||t.disabled),s=F(()=>i.value?"":void 0),a=F(()=>r.value?Bl.Open:Bl.Closed);e({open:r,dataDisabled:s});const{currentRef:l,currentElement:u}=Z();Wg({open:r,dataState:a,disabled:i,dataDisabled:s,triggerId:"",currentRef:l,currentElement:u,value:F(()=>t.value)});function c(d){const f=d.target;if(Array.from(o.parentElement.value?.querySelectorAll("[data-reka-collection-item]")??[]).findIndex(v=>v===f)===-1)return null;jf(d,f,o.parentElement.value,{arrowKeyOptions:o.orientation,dir:o.direction.value,focus:!0})}return(d,f)=>(E(),B(p(Dg),{"data-orientation":p(o).orientation,"data-disabled":s.value,"data-state":a.value,disabled:i.value,open:r.value,as:t.as,"as-child":t.asChild,"unmount-on-hide":t.unmountOnHide??p(o).unmountOnHide.value,onKeydown:St(c,["up","down","left","right","home","end"])},{default:S(()=>[U(d.$slots,"default",{open:r.value})]),_:3},8,["data-orientation","data-disabled","data-state","disabled","open","as","as-child","unmount-on-hide"]))}}),Kg=Gg,Yg=L({__name:"AccordionContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,t=ma(),o=Lu();return Z(),(r,i)=>(E(),B(p(qg),{role:"region","as-child":e.asChild,as:r.as,"force-mount":e.forceMount,"aria-labelledby":p(o).triggerId,"data-state":p(o).dataState.value,"data-disabled":p(o).dataDisabled.value,"data-orientation":p(t).orientation,style:{"--reka-accordion-content-width":"var(--reka-collapsible-content-width)","--reka-accordion-content-height":"var(--reka-collapsible-content-height)"},onContentFound:i[0]||(i[0]=s=>p(t).changeModelValue(p(o).value.value))},{default:S(()=>[U(r.$slots,"default")]),_:3},8,["as-child","as","force-mount","aria-labelledby","data-state","data-disabled","data-orientation"]))}}),Xg=Yg,Zg=L({__name:"AccordionHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h3"}},setup(n){const e=n,t=ma(),o=Lu();return Z(),(r,i)=>(E(),B(p(de),{as:e.as,"as-child":e.asChild,"data-orientation":p(t).orientation,"data-state":p(o).dataState.value,"data-disabled":p(o).dataDisabled.value},{default:S(()=>[U(r.$slots,"default")]),_:3},8,["as","as-child","data-orientation","data-state","data-disabled"]))}}),Qg=Zg,Jg=L({__name:"AccordionTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,t=ma(),o=Lu();o.triggerId||=Rt(void 0,"reka-accordion-trigger");function r(){const i=t.isSingle.value&&o.open.value&&!t.collapsible;o.disabled.value||i||t.changeModelValue(o.value.value)}return(i,s)=>(E(),B(p(Vg),{id:p(o).triggerId,ref:p(o).currentRef,"data-reka-collection-item":"",as:e.as,"as-child":e.asChild,"aria-disabled":p(o).disabled.value||void 0,"aria-expanded":p(o).open.value||!1,"data-disabled":p(o).dataDisabled.value,"data-orientation":p(t).orientation,"data-state":p(o).dataState.value,disabled:p(o).disabled.value,onClick:r},{default:S(()=>[U(i.$slots,"default")]),_:3},8,["id","as","as-child","aria-disabled","aria-expanded","data-disabled","data-orientation","data-state","disabled"]))}}),ey=Jg;const[Hn,ty]=Be("DialogRoot");var ny=L({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(n,{emit:e}){const t=n,r=st(t,"open",e,{defaultValue:t.defaultOpen,passive:t.open===void 0}),i=N(),s=N(),{modal:a}=Ve(t);return ty({open:r,modal:a,openModal:()=>{r.value=!0},onOpenChange:l=>{r.value=l},onOpenToggle:()=>{r.value=!r.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:s}),(l,u)=>U(l.$slots,"default",{open:p(r),close:()=>r.value=!1})}}),oy=ny,ry=L({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n;Z();const t=Hn();return(o,r)=>(E(),B(p(de),J(e,{type:o.as==="button"?"button":void 0,onClick:r[0]||(r[0]=i=>p(t).onOpenChange(!1))}),{default:S(()=>[U(o.$slots,"default")]),_:3},16,["type"]))}}),sy=ry;const iy="dismissableLayer.pointerDownOutside",ay="dismissableLayer.focusOutside";function np(n,e){const t=e.closest("[data-dismissable-layer]"),o=n.dataset.dismissableLayer===""?n:n.querySelector("[data-dismissable-layer]"),r=Array.from(n.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(t&&(o===t||r.indexOf(o)<r.indexOf(t)))}function ly(n,e,t=!0){const o=e?.value?.ownerDocument??globalThis?.document,r=N(!1),i=N(()=>{});return nt(s=>{if(!on||!xe(t))return;const a=async u=>{const c=u.target;if(!(!e?.value||!c)){if(np(e.value,c)){r.value=!1;return}if(u.target&&!r.value){let f=function(){Hr(iy,n,d)};const d={originalEvent:u};u.pointerType==="touch"?(o.removeEventListener("click",i.value),i.value=f,o.addEventListener("click",i.value,{once:!0})):f()}else o.removeEventListener("click",i.value);r.value=!1}},l=window.setTimeout(()=>{o.addEventListener("pointerdown",a)},0);s(()=>{window.clearTimeout(l),o.removeEventListener("pointerdown",a),o.removeEventListener("click",i.value)})}),{onPointerDownCapture:()=>{xe(t)&&(r.value=!0)}}}function uy(n,e,t=!0){const o=e?.value?.ownerDocument??globalThis?.document,r=N(!1);return nt(i=>{if(!on||!xe(t))return;const s=async a=>{if(!e?.value)return;await Ge(),await Ge();const l=a.target;!e.value||!l||np(e.value,l)||a.target&&!r.value&&Hr(ay,n,{originalEvent:a})};o.addEventListener("focusin",s),i(()=>o.removeEventListener("focusin",s))}),{onFocusCapture:()=>{xe(t)&&(r.value=!0)},onBlurCapture:()=>{xe(t)&&(r.value=!1)}}}const en=Mn({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,originalBodyPointerEvents:void 0,branches:new Set});var cy=L({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(n,{emit:e}){const t=n,o=e,{forwardRef:r,currentElement:i}=Z(),s=F(()=>i.value?.ownerDocument??globalThis.document),a=F(()=>en.layersRoot),l=F(()=>i.value?Array.from(a.value).indexOf(i.value):-1),u=F(()=>en.layersWithOutsidePointerEventsDisabled.size>0),c=F(()=>{const h=Array.from(a.value),[m]=[...en.layersWithOutsidePointerEventsDisabled].slice(-1),v=h.indexOf(m);return l.value>=v}),d=ly(async h=>{const m=[...en.branches].some(v=>v?.contains(h.target));!c.value||m||(o("pointerDownOutside",h),o("interactOutside",h),await Ge(),h.defaultPrevented||o("dismiss"))},i),f=uy(h=>{[...en.branches].some(v=>v?.contains(h.target))||(o("focusOutside",h),o("interactOutside",h),h.defaultPrevented||o("dismiss"))},i);return ku("Escape",h=>{l.value===a.value.size-1&&(o("escapeKeyDown",h),h.defaultPrevented||o("dismiss"))}),nt(h=>{i.value&&(t.disableOutsidePointerEvents&&(en.layersWithOutsidePointerEventsDisabled.size===0&&(en.originalBodyPointerEvents=s.value.body.style.pointerEvents,s.value.body.style.pointerEvents="none"),en.layersWithOutsidePointerEventsDisabled.add(i.value)),a.value.add(i.value),h(()=>{t.disableOutsidePointerEvents&&en.layersWithOutsidePointerEventsDisabled.size===1&&!eo(en.originalBodyPointerEvents)&&(s.value.body.style.pointerEvents=en.originalBodyPointerEvents)}))}),nt(h=>{h(()=>{i.value&&(a.value.delete(i.value),en.layersWithOutsidePointerEventsDisabled.delete(i.value))})}),(h,m)=>(E(),B(p(de),{ref:p(r),"as-child":h.asChild,as:h.as,"data-dismissable-layer":"",style:wt({pointerEvents:u.value?c.value?"auto":"none":void 0}),onFocusCapture:p(f).onFocusCapture,onBlurCapture:p(f).onBlurCapture,onPointerdownCapture:p(d).onPointerDownCapture},{default:S(()=>[U(h.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),Vs=cy,dy=L({__name:"DismissableLayerBranch",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,{forwardRef:t,currentElement:o}=Z();return Le(()=>{en.branches.add(o.value)}),Wt(()=>{en.branches.delete(o.value)}),(r,i)=>(E(),B(p(de),J({ref:p(t)},e),{default:S(()=>[U(r.$slots,"default")]),_:3},16))}}),fy=dy;const py=kv(()=>N([]));function hy(){const n=py();return{add(e){const t=n.value[0];e!==t&&t?.pause(),n.value=$c(n.value,e),n.value.unshift(e)},remove(e){n.value=$c(n.value,e),n.value[0]?.resume()}}}function $c(n,e){const t=[...n],o=t.indexOf(e);return o!==-1&&t.splice(o,1),t}const Ya="focusScope.autoFocusOnMount",Xa="focusScope.autoFocusOnUnmount",Uc={bubbles:!1,cancelable:!0};function Li(n,{select:e=!1}={}){const t=et();for(const o of n)if(vo(o,{select:e}),et()!==t)return!0}function my(n){const e=Vu(n),t=zc(e,n),o=zc(e.reverse(),n);return[t,o]}function Vu(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const r=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||r?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function zc(n,e){for(const t of n)if(!vy(t,{upTo:e}))return t}function vy(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function gy(n){return n instanceof HTMLInputElement&&"select"in n}function vo(n,{select:e=!1}={}){if(n&&n.focus){const t=et();n.focus({preventScroll:!0}),n!==t&&gy(n)&&e&&n.select()}}var yy=L({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(n,{emit:e}){const t=n,o=e,{currentRef:r,currentElement:i}=Z(),s=N(null),a=hy(),l=Mn({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});nt(c=>{if(!on)return;const d=i.value;if(!t.trapped)return;function f(g){if(l.paused||!d)return;const y=g.target;d.contains(y)?s.value=y:vo(s.value,{select:!0})}function h(g){if(l.paused||!d)return;const y=g.relatedTarget;y!==null&&(d.contains(y)||vo(s.value,{select:!0}))}function m(g){d.contains(s.value)||vo(d)}document.addEventListener("focusin",f),document.addEventListener("focusout",h);const v=new MutationObserver(m);d&&v.observe(d,{childList:!0,subtree:!0}),c(()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",h),v.disconnect()})}),nt(async c=>{const d=i.value;if(await Ge(),!d)return;a.add(l);const f=et();if(!d.contains(f)){const m=new CustomEvent(Ya,Uc);d.addEventListener(Ya,v=>o("mountAutoFocus",v)),d.dispatchEvent(m),m.defaultPrevented||(Li(Vu(d),{select:!0}),et()===f&&vo(d))}c(()=>{d.removeEventListener(Ya,g=>o("mountAutoFocus",g));const m=new CustomEvent(Xa,Uc),v=g=>{o("unmountAutoFocus",g)};d.addEventListener(Xa,v),d.dispatchEvent(m),setTimeout(()=>{m.defaultPrevented||vo(f??document.body,{select:!0}),d.removeEventListener(Xa,v),a.remove(l)},0)})});function u(c){if(!t.loop&&!t.trapped||l.paused)return;const d=c.key==="Tab"&&!c.altKey&&!c.ctrlKey&&!c.metaKey,f=et();if(d&&f){const h=c.currentTarget,[m,v]=my(h);m&&v?!c.shiftKey&&f===v?(c.preventDefault(),t.loop&&vo(m,{select:!0})):c.shiftKey&&f===m&&(c.preventDefault(),t.loop&&vo(v,{select:!0})):f===h&&c.preventDefault()}}return(c,d)=>(E(),B(p(de),{ref_key:"currentRef",ref:r,tabindex:"-1","as-child":c.asChild,as:c.as,onKeydown:u},{default:S(()=>[U(c.$slots,"default")]),_:3},8,["as-child","as"]))}}),va=yy;const _y="menu.itemSelect",ql=["Enter"," "],by=["ArrowDown","PageUp","Home"],op=["ArrowUp","PageDown","End"],wy=[...by,...op],xy={ltr:[...ql,"ArrowRight"],rtl:[...ql,"ArrowLeft"]},Sy={ltr:["ArrowLeft"],rtl:["ArrowRight"]};function Fu(n){return n?"open":"closed"}function Wi(n){return n==="indeterminate"}function Nu(n){return Wi(n)?"indeterminate":n?"checked":"unchecked"}function Ll(n){const e=et();for(const t of n)if(t===e||(t.focus(),et()!==e))return}function Cy(n,e){const{x:t,y:o}=n;let r=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i].x,l=e[i].y,u=e[s].x,c=e[s].y;l>o!=c>o&&t<(u-a)*(o-l)/(c-l)+a&&(r=!r)}return r}function Ty(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return Cy(t,e)}function Rs(n){return n.pointerType==="mouse"}var Ey=L({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,o=e,r=Hn(),{forwardRef:i,currentElement:s}=Z();return r.titleId||=Rt(void 0,"reka-dialog-title"),r.descriptionId||=Rt(void 0,"reka-dialog-description"),Le(()=>{r.contentElement=s,et()!==document.body&&(r.triggerElement.value=et())}),(a,l)=>(E(),B(p(va),{"as-child":"",loop:"",trapped:t.trapFocus,onMountAutoFocus:l[5]||(l[5]=u=>o("openAutoFocus",u)),onUnmountAutoFocus:l[6]||(l[6]=u=>o("closeAutoFocus",u))},{default:S(()=>[T(p(Vs),J({id:p(r).contentId,ref:p(i),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":p(r).descriptionId,"aria-labelledby":p(r).titleId,"data-state":p(Fu)(p(r).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=u=>p(r).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=u=>o("escapeKeyDown",u)),onFocusOutside:l[2]||(l[2]=u=>o("focusOutside",u)),onInteractOutside:l[3]||(l[3]=u=>o("interactOutside",u)),onPointerDownOutside:l[4]||(l[4]=u=>o("pointerDownOutside",u))}),{default:S(()=>[U(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),rp=Ey,My=L({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,o=e,r=Hn(),i=Rn(o),{forwardRef:s,currentElement:a}=Z();return pa(a),(l,u)=>(E(),B(rp,J({...t,...p(i)},{ref:p(s),"trap-focus":p(r).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:u[0]||(u[0]=c=>{c.defaultPrevented||(c.preventDefault(),p(r).triggerElement.value?.focus())}),onPointerDownOutside:u[1]||(u[1]=c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&c.preventDefault()}),onFocusOutside:u[2]||(u[2]=c=>{c.preventDefault()})}),{default:S(()=>[U(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),Ay=My,Py=L({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,r=Rn(e);Z();const i=Hn(),s=N(!1),a=N(!1);return(l,u)=>(E(),B(rp,J({...t,...p(r)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:u[0]||(u[0]=c=>{c.defaultPrevented||(s.value||p(i).triggerElement.value?.focus(),c.preventDefault()),s.value=!1,a.value=!1}),onInteractOutside:u[1]||(u[1]=c=>{c.defaultPrevented||(s.value=!0,c.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const d=c.target;p(i).triggerElement.value?.contains(d)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&a.value&&c.preventDefault()})}),{default:S(()=>[U(l.$slots,"default")]),_:3},16))}}),Iy=Py,Ry=L({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,o=e,r=Hn(),i=Rn(o),{forwardRef:s}=Z();return(a,l)=>(E(),B(p(Vt),{present:a.forceMount||p(r).open.value},{default:S(()=>[p(r).modal.value?(E(),B(Ay,J({key:0,ref:p(s)},{...t,...p(i),...a.$attrs}),{default:S(()=>[U(a.$slots,"default")]),_:3},16)):(E(),B(Iy,J({key:1,ref:p(s)},{...t,...p(i),...a.$attrs}),{default:S(()=>[U(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Oy=Ry,ky=L({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(n){const e=n;Z();const t=Hn();return(o,r)=>(E(),B(p(de),J(e,{id:p(t).descriptionId}),{default:S(()=>[U(o.$slots,"default")]),_:3},16,["id"]))}}),Dy=ky,By=L({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=Hn();return fa(!0),Z(),(t,o)=>(E(),B(p(de),{as:t.as,"as-child":t.asChild,"data-state":p(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:S(()=>[U(t.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),qy=By,Ly=L({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=Hn(),{forwardRef:t}=Z();return(o,r)=>p(e)?.modal.value?(E(),B(p(Vt),{key:0,present:o.forceMount||p(e).open.value},{default:S(()=>[T(qy,J(o.$attrs,{ref:p(t),as:o.as,"as-child":o.asChild}),{default:S(()=>[U(o.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):ue("v-if",!0)}}),Vy=Ly,Fy=L({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(n){const e=Ou();return(t,o)=>p(e)||t.forceMount?(E(),B(bu,{key:0,to:t.to,disabled:t.disabled,defer:t.defer},[U(t.$slots,"default")],8,["to","disabled","defer"])):ue("v-if",!0)}}),Fs=Fy,Ny=L({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(Fs),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),$y=Ny,Uy=L({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(n){const e=n,t=Hn();return Z(),(o,r)=>(E(),B(p(de),J(e,{id:p(t).titleId}),{default:S(()=>[U(o.$slots,"default")]),_:3},16,["id"]))}}),zy=Uy,Hy=L({__name:"DialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,t=Hn(),{forwardRef:o,currentElement:r}=Z();return t.contentId||=Rt(void 0,"reka-dialog-content"),Le(()=>{t.triggerElement.value=r.value}),(i,s)=>(E(),B(p(de),J(e,{ref:p(o),type:i.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":p(t).open.value||!1,"aria-controls":p(t).open.value?p(t).contentId:void 0,"data-state":p(t).open.value?"open":"closed",onClick:p(t).onOpenToggle}),{default:S(()=>[U(i.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),jy=Hy;const Hc="data-reka-collection-item";function pt(n={}){const{key:e="",isProvider:t=!1}=n,o=`${e}CollectionProvider`;let r;if(t){const c=N(new Map);r={collectionRef:N(),itemMap:c},Ef(o,r)}else r=gu(o);const i=(c=!1)=>{const d=r.collectionRef.value;if(!d)return[];const f=Array.from(d.querySelectorAll(`[${Hc}]`)),m=Array.from(r.itemMap.value.values()).sort((v,g)=>f.indexOf(v.ref)-f.indexOf(g.ref));return c?m:m.filter(v=>v.ref.dataset.disabled!=="")},s=L({name:"CollectionSlot",inheritAttrs:!1,setup(c,{slots:d,attrs:f}){const{primitiveElement:h,currentElement:m}=Ao();return Te(m,()=>{r.collectionRef.value=m.value}),()=>Lr(Dl,{ref:h,...f},d)}}),a=L({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(c,{slots:d,attrs:f}){const{primitiveElement:h,currentElement:m}=Ao();return nt(v=>{if(m.value){const g=wu(m.value);r.itemMap.value.set(g,{ref:m.value,value:c.value}),v(()=>r.itemMap.value.delete(g))}}),()=>Lr(Dl,{...f,[Hc]:"",ref:h},d)}}),l=F(()=>Array.from(r.itemMap.value.values())),u=F(()=>r.itemMap.value.size);return{getItems:i,reactiveItems:l,itemMapSize:u,CollectionSlot:s,CollectionItem:a}}const Wy="rovingFocusGroup.onEntryFocus",Gy={bubbles:!1,cancelable:!0},$u={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ky(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function Yy(n,e,t){const o=Ky(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return $u[o]}function sp(n,e=!1){const t=et();for(const o of n)if(o===t||(o.focus({preventScroll:e}),et()!==t))return}function Xy(n,e){return n.map((t,o)=>n[(e+o)%n.length])}const[Zy,Qy]=Be("RovingFocusGroup");var Jy=L({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(n,{expose:e,emit:t}){const o=n,r=t,{loop:i,orientation:s,dir:a}=Ve(o),l=bn(a),u=st(o,"currentTabStopId",r,{defaultValue:o.defaultCurrentTabStopId,passive:o.currentTabStopId===void 0}),c=N(!1),d=N(!1),f=N(0),{getItems:h,CollectionSlot:m}=pt({isProvider:!0});function v(y){const _=!d.value;if(y.currentTarget&&y.target===y.currentTarget&&_&&!c.value){const b=new CustomEvent(Wy,Gy);if(y.currentTarget.dispatchEvent(b),r("entryFocus",b),!b.defaultPrevented){const x=h().map(M=>M.ref).filter(M=>M.dataset.disabled!==""),C=x.find(M=>M.getAttribute("data-active")===""),k=x.find(M=>M.getAttribute("data-highlighted")===""),P=x.find(M=>M.id===u.value),R=[C,k,P,...x].filter(Boolean);sp(R,o.preventScrollOnEntryFocus)}}d.value=!1}function g(){setTimeout(()=>{d.value=!1},1)}return e({getItems:h}),Qy({loop:i,dir:l,orientation:s,currentTabStopId:u,onItemFocus:y=>{u.value=y},onItemShiftTab:()=>{c.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(y,_)=>(E(),B(p(m),null,{default:S(()=>[T(p(de),{tabindex:c.value||f.value===0?-1:0,"data-orientation":p(s),as:y.as,"as-child":y.asChild,dir:p(l),style:{outline:"none"},onMousedown:_[0]||(_[0]=b=>d.value=!0),onMouseup:g,onFocus:v,onBlur:_[1]||(_[1]=b=>c.value=!1)},{default:S(()=>[U(y.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Kr=Jy,e_=L({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=n,t=Zy(),o=Rt(),r=F(()=>e.tabStopId||o),i=F(()=>t.currentTabStopId.value===r.value),{getItems:s,CollectionItem:a}=pt();Le(()=>{e.focusable&&t.onFocusableItemAdd()}),Wt(()=>{e.focusable&&t.onFocusableItemRemove()});function l(u){if(u.key==="Tab"&&u.shiftKey){t.onItemShiftTab();return}if(u.target!==u.currentTarget)return;const c=Yy(u,t.orientation.value,t.dir.value);if(c!==void 0){if(u.metaKey||u.ctrlKey||u.altKey||!e.allowShiftKey&&u.shiftKey)return;u.preventDefault();let d=[...s().map(f=>f.ref).filter(f=>f.dataset.disabled!=="")];if(c==="last")d.reverse();else if(c==="prev"||c==="next"){c==="prev"&&d.reverse();const f=d.indexOf(u.currentTarget);d=t.loop.value?Xy(d,f+1):d.slice(f+1)}Ge(()=>sp(d))}}return(u,c)=>(E(),B(p(a),null,{default:S(()=>[T(p(de),{tabindex:i.value?0:-1,"data-orientation":p(t).orientation.value,"data-active":u.active?"":void 0,"data-disabled":u.focusable?void 0:"",as:u.as,"as-child":u.asChild,onMousedown:c[0]||(c[0]=d=>{u.focusable?p(t).onItemFocus(r.value):d.preventDefault()}),onFocus:c[1]||(c[1]=d=>p(t).onItemFocus(r.value)),onKeydown:l},{default:S(()=>[U(u.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),Ns=e_,t_=L({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){return(e,t)=>(E(),B(p(de),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal",top:"-1px",left:"-1px"}},{default:S(()=>[U(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),Yr=t_,n_=L({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(n){const e=n,{primitiveElement:t,currentElement:o}=Ao(),r=F(()=>e.checked??e.value);return Te(r,(i,s)=>{if(!o.value)return;const a=o.value,l=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(c&&i!==s){const d=new Event("input",{bubbles:!0}),f=new Event("change",{bubbles:!0});c.call(a,i),a.dispatchEvent(d),a.dispatchEvent(f)}}),(i,s)=>(E(),B(Yr,J({ref_key:"primitiveElement",ref:t},{...e,...i.$attrs},{as:"input"}),null,16))}}),jc=n_,o_=L({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(n){const e=n,t=F(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),o=F(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((r,i)=>typeof r=="object"?Object.entries(r).map(([s,a])=>({name:`${e.name}[${i}][${s}]`,value:a})):{name:`${e.name}[${i}]`,value:r}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([r,i])=>({name:`${e.name}[${r}]`,value:i})):[]);return(r,i)=>(E(),ne(Ie,null,[ue(" We render single input if it's required "),t.value?(E(),B(jc,J({key:r.name},{...e,...r.$attrs},{name:r.name,value:r.value}),null,16,["name","value"])):(E(!0),ne(Ie,{key:1},ot(o.value,s=>(E(),B(jc,J({key:s.name},{ref_for:!0},{...e,...r.$attrs},{name:s.name,value:s.value}),null,16,["name","value"]))),128))],2112))}}),Xr=o_;const[r_,s_]=Be("CheckboxGroupRoot");var i_=L({__name:"CheckboxGroupRoot",props:{defaultValue:{type:Array,required:!1},modelValue:{type:Array,required:!1},rovingFocus:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1},as:{type:null,required:!1},asChild:{type:Boolean,required:!1},dir:{type:String,required:!1},orientation:{type:String,required:!1},loop:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,o=e,{disabled:r,rovingFocus:i,dir:s}=Ve(t),a=bn(s),{primitiveElement:l,currentElement:u}=Ao(),c=lr(u),d=st(t,"modelValue",o,{defaultValue:t.defaultValue??[],passive:t.modelValue===void 0}),f=F(()=>i.value?{loop:t.loop,dir:a.value,orientation:t.orientation}:{});return s_({modelValue:d,rovingFocus:i,disabled:r}),(h,m)=>(E(),B(zn(p(i)?p(Kr):p(de)),J({ref_key:"primitiveElement",ref:l,as:h.as,"as-child":h.asChild},f.value),{default:S(()=>[U(h.$slots,"default"),p(c)&&h.name?(E(),B(p(Xr),{key:0,name:h.name,value:p(d),required:h.required},null,8,["name","value","required"])):ue("v-if",!0)]),_:3},16,["as","as-child"]))}}),ip=i_;function Gi(n){return n==="indeterminate"}function ap(n){return Gi(n)?"indeterminate":n?"checked":"unchecked"}const[a_,l_]=Be("CheckboxRoot");var u_=L({inheritAttrs:!1,__name:"CheckboxRoot",props:{defaultValue:{type:[Boolean,String],required:!1},modelValue:{type:[Boolean,String,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},value:{type:null,required:!1,default:"on"},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,o=e,{forwardRef:r,currentElement:i}=Z(),s=r_(null),a=st(t,"modelValue",o,{defaultValue:t.defaultValue,passive:t.modelValue===void 0}),l=F(()=>s?.disabled.value||t.disabled),u=F(()=>eo(s?.modelValue.value)?a.value==="indeterminate"?"indeterminate":a.value:Rl(s.modelValue.value,t.value));function c(){if(eo(s?.modelValue.value))a.value=Gi(a.value)?!0:!a.value;else{const h=[...s.modelValue.value||[]];if(Rl(h,t.value)){const m=h.findIndex(v=>so(v,t.value));h.splice(m,1)}else h.push(t.value);s.modelValue.value=h}}const d=lr(i),f=F(()=>t.id&&i.value?document.querySelector(`[for="${t.id}"]`)?.innerText:void 0);return l_({disabled:l,state:u}),(h,m)=>(E(),B(zn(p(s)?.rovingFocus.value?p(Ns):p(de)),J(h.$attrs,{id:h.id,ref:p(r),role:"checkbox","as-child":h.asChild,as:h.as,type:h.as==="button"?"button":void 0,"aria-checked":p(Gi)(u.value)?"mixed":u.value,"aria-required":h.required,"aria-label":h.$attrs["aria-label"]||f.value,"data-state":p(ap)(u.value),"data-disabled":l.value?"":void 0,disabled:l.value,focusable:p(s)?.rovingFocus.value?!l.value:void 0,onKeydown:St(ze(()=>{},["prevent"]),["enter"]),onClick:c}),{default:S(()=>[U(h.$slots,"default",{modelValue:p(a),state:u.value}),p(d)&&h.name&&!p(s)?(E(),B(p(Xr),{key:0,type:"checkbox",checked:!!u.value,name:h.name,value:h.value,disabled:l.value,required:h.required},null,8,["checked","name","value","disabled","required"])):ue("v-if",!0)]),_:3},16,["id","as-child","as","type","aria-checked","aria-required","aria-label","data-state","data-disabled","disabled","focusable","onKeydown"]))}}),lp=u_,c_=L({__name:"CheckboxIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const{forwardRef:e}=Z(),t=a_();return(o,r)=>(E(),B(p(Vt),{present:o.forceMount||p(Gi)(p(t).state.value)||p(t).state.value===!0},{default:S(()=>[T(p(de),J({ref:p(e),"data-state":p(ap)(p(t).state.value),"data-disabled":p(t).disabled.value?"":void 0,style:{pointerEvents:"none"},"as-child":o.asChild,as:o.as},o.$attrs),{default:S(()=>[U(o.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),d_=c_;const[up,f_]=Be("PopperRoot");var p_=L({inheritAttrs:!1,__name:"PopperRoot",setup(n){const e=N();return f_({anchor:e,onAnchorChange:t=>e.value=t}),(t,o)=>U(t.$slots,"default")}}),$s=p_,h_=L({__name:"PopperAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,{forwardRef:t,currentElement:o}=Z(),r=up();return xu(()=>{r.onAnchorChange(e.reference??o.value)}),(i,s)=>(E(),B(p(de),{ref:p(t),as:i.as,"as-child":i.asChild},{default:S(()=>[U(i.$slots,"default")]),_:3},8,["as","as-child"]))}}),Us=h_;const m_={key:0,d:"M0 0L6 6L12 0"},v_={key:1,d:"M0 0L4.58579 4.58579C5.36683 5.36683 6.63316 5.36684 7.41421 4.58579L12 0"};var g_=L({__name:"Arrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(de),J(e,{width:t.width,height:t.height,viewBox:t.asChild?void 0:"0 0 12 6",preserveAspectRatio:t.asChild?void 0:"none"}),{default:S(()=>[U(t.$slots,"default",{},()=>[t.rounded?(E(),ne("path",v_)):(E(),ne("path",m_))])]),_:3},16,["width","height","viewBox","preserveAspectRatio"]))}}),y_=g_;function __(n){return n!==null}function b_(n){return{name:"transformOrigin",options:n,fn(e){const{placement:t,rects:o,middlewareData:r}=e,s=r.arrow?.centerOffset!==0,a=s?0:n.arrowWidth,l=s?0:n.arrowHeight,[u,c]=Vl(t),d={start:"0%",center:"50%",end:"100%"}[c],f=(r.arrow?.x??0)+a/2,h=(r.arrow?.y??0)+l/2;let m="",v="";return u==="bottom"?(m=s?d:`${f}px`,v=`${-l}px`):u==="top"?(m=s?d:`${f}px`,v=`${o.floating.height+l}px`):u==="right"?(m=`${-l}px`,v=s?d:`${h}px`):u==="left"&&(m=`${o.floating.width+l}px`,v=s?d:`${h}px`),{data:{x:m,y:v}}}}}function Vl(n){const[e,t="center"]=n.split("-");return[e,t]}const w_=["top","right","bottom","left"],Po=Math.min,an=Math.max,Ki=Math.round,si=Math.floor,Fn=n=>({x:n,y:n}),x_={left:"right",right:"left",bottom:"top",top:"bottom"},S_={start:"end",end:"start"};function Fl(n,e,t){return an(n,Po(e,t))}function io(n,e){return typeof n=="function"?n(e):n}function ao(n){return n.split("-")[0]}function Zr(n){return n.split("-")[1]}function Uu(n){return n==="x"?"y":"x"}function zu(n){return n==="y"?"height":"width"}const C_=new Set(["top","bottom"]);function Vn(n){return C_.has(ao(n))?"y":"x"}function Hu(n){return Uu(Vn(n))}function T_(n,e,t){t===void 0&&(t=!1);const o=Zr(n),r=Hu(n),i=zu(r);let s=r==="x"?o===(t?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=Yi(s)),[s,Yi(s)]}function E_(n){const e=Yi(n);return[Nl(n),e,Nl(e)]}function Nl(n){return n.replace(/start|end/g,e=>S_[e])}const Wc=["left","right"],Gc=["right","left"],M_=["top","bottom"],A_=["bottom","top"];function P_(n,e,t){switch(n){case"top":case"bottom":return t?e?Gc:Wc:e?Wc:Gc;case"left":case"right":return e?M_:A_;default:return[]}}function I_(n,e,t,o){const r=Zr(n);let i=P_(ao(n),t==="start",o);return r&&(i=i.map(s=>s+"-"+r),e&&(i=i.concat(i.map(Nl)))),i}function Yi(n){return n.replace(/left|right|bottom|top/g,e=>x_[e])}function R_(n){return{top:0,right:0,bottom:0,left:0,...n}}function cp(n){return typeof n!="number"?R_(n):{top:n,right:n,bottom:n,left:n}}function Xi(n){const{x:e,y:t,width:o,height:r}=n;return{width:o,height:r,top:t,left:e,right:e+o,bottom:t+r,x:e,y:t}}function Kc(n,e,t){let{reference:o,floating:r}=n;const i=Vn(e),s=Hu(e),a=zu(s),l=ao(e),u=i==="y",c=o.x+o.width/2-r.width/2,d=o.y+o.height/2-r.height/2,f=o[a]/2-r[a]/2;let h;switch(l){case"top":h={x:c,y:o.y-r.height};break;case"bottom":h={x:c,y:o.y+o.height};break;case"right":h={x:o.x+o.width,y:d};break;case"left":h={x:o.x-r.width,y:d};break;default:h={x:o.x,y:o.y}}switch(Zr(e)){case"start":h[s]-=f*(t&&u?-1:1);break;case"end":h[s]+=f*(t&&u?-1:1);break}return h}const O_=async(n,e,t)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:s}=t,a=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:n,floating:e,strategy:r}),{x:c,y:d}=Kc(u,o,l),f=o,h={},m=0;for(let v=0;v<a.length;v++){const{name:g,fn:y}=a[v],{x:_,y:b,data:x,reset:C}=await y({x:c,y:d,initialPlacement:o,placement:f,strategy:r,middlewareData:h,rects:u,platform:s,elements:{reference:n,floating:e}});c=_??c,d=b??d,h={...h,[g]:{...h[g],...x}},C&&m<=50&&(m++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(u=C.rects===!0?await s.getElementRects({reference:n,floating:e,strategy:r}):C.rects),{x:c,y:d}=Kc(u,f,l)),v=-1)}return{x:c,y:d,placement:f,strategy:r,middlewareData:h}};async function Os(n,e){var t;e===void 0&&(e={});const{x:o,y:r,platform:i,rects:s,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=io(e,n),m=cp(h),g=a[f?d==="floating"?"reference":"floating":d],y=Xi(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(g)))==null||t?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),_=d==="floating"?{x:o,y:r,width:s.floating.width,height:s.floating.height}:s.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},C=Xi(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:b,strategy:l}):_);return{top:(y.top-C.top+m.top)/x.y,bottom:(C.bottom-y.bottom+m.bottom)/x.y,left:(y.left-C.left+m.left)/x.x,right:(C.right-y.right+m.right)/x.x}}const k_=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:o,placement:r,rects:i,platform:s,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=io(n,e)||{};if(u==null)return{};const d=cp(c),f={x:t,y:o},h=Hu(r),m=zu(h),v=await s.getDimensions(u),g=h==="y",y=g?"top":"left",_=g?"bottom":"right",b=g?"clientHeight":"clientWidth",x=i.reference[m]+i.reference[h]-f[h]-i.floating[m],C=f[h]-i.reference[h],k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let P=k?k[b]:0;(!P||!await(s.isElement==null?void 0:s.isElement(k)))&&(P=a.floating[b]||i.floating[m]);const R=x/2-C/2,M=P/2-v[m]/2-1,A=Po(d[y],M),O=Po(d[_],M),D=A,V=P-v[m]-O,$=P/2-v[m]/2+R,Y=Fl(D,$,V),W=!l.arrow&&Zr(r)!=null&&$!==Y&&i.reference[m]/2-($<D?A:O)-v[m]/2<0,G=W?$<D?$-D:$-V:0;return{[h]:f[h]+G,data:{[h]:Y,centerOffset:$-Y-G,...W&&{alignmentOffset:G}},reset:W}}}),D_=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,o;const{placement:r,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...g}=io(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const y=ao(r),_=Vn(a),b=ao(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(u.floating)),C=f||(b||!v?[Yi(a)]:E_(a)),k=m!=="none";!f&&k&&C.push(...I_(a,v,m,x));const P=[a,...C],R=await Os(e,g),M=[];let A=((o=i.flip)==null?void 0:o.overflows)||[];if(c&&M.push(R[y]),d){const $=T_(r,s,x);M.push(R[$[0]],R[$[1]])}if(A=[...A,{placement:r,overflows:M}],!M.every($=>$<=0)){var O,D;const $=(((O=i.flip)==null?void 0:O.index)||0)+1,Y=P[$];if(Y&&(!(d==="alignment"?_!==Vn(Y):!1)||A.every(Q=>Vn(Q.placement)===_?Q.overflows[0]>0:!0)))return{data:{index:$,overflows:A},reset:{placement:Y}};let W=(D=A.filter(G=>G.overflows[0]<=0).sort((G,Q)=>G.overflows[1]-Q.overflows[1])[0])==null?void 0:D.placement;if(!W)switch(h){case"bestFit":{var V;const G=(V=A.filter(Q=>{if(k){const ge=Vn(Q.placement);return ge===_||ge==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(ge=>ge>0).reduce((ge,ce)=>ge+ce,0)]).sort((Q,ge)=>Q[1]-ge[1])[0])==null?void 0:V[0];G&&(W=G);break}case"initialPlacement":W=a;break}if(r!==W)return{reset:{placement:W}}}return{}}}};function Yc(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Xc(n){return w_.some(e=>n[e]>=0)}const B_=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:o="referenceHidden",...r}=io(n,e);switch(o){case"referenceHidden":{const i=await Os(e,{...r,elementContext:"reference"}),s=Yc(i,t.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Xc(s)}}}case"escaped":{const i=await Os(e,{...r,altBoundary:!0}),s=Yc(i,t.floating);return{data:{escapedOffsets:s,escaped:Xc(s)}}}default:return{}}}}},dp=new Set(["left","top"]);async function q_(n,e){const{placement:t,platform:o,elements:r}=n,i=await(o.isRTL==null?void 0:o.isRTL(r.floating)),s=ao(t),a=Zr(t),l=Vn(t)==="y",u=dp.has(s)?-1:1,c=i&&l?-1:1,d=io(e,n);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const L_=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,o;const{x:r,y:i,placement:s,middlewareData:a}=e,l=await q_(e,n);return s===((t=a.offset)==null?void 0:t.placement)&&(o=a.arrow)!=null&&o.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:s}}}}},V_=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:o,placement:r}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:g=>{let{x:y,y:_}=g;return{x:y,y:_}}},...l}=io(n,e),u={x:t,y:o},c=await Os(e,l),d=Vn(ao(r)),f=Uu(d);let h=u[f],m=u[d];if(i){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",_=h+c[g],b=h-c[y];h=Fl(_,h,b)}if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",_=m+c[g],b=m-c[y];m=Fl(_,m,b)}const v=a.fn({...e,[f]:h,[d]:m});return{...v,data:{x:v.x-t,y:v.y-o,enabled:{[f]:i,[d]:s}}}}}},F_=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:o,placement:r,rects:i,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=io(n,e),c={x:t,y:o},d=Vn(r),f=Uu(d);let h=c[f],m=c[d];const v=io(a,e),g=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const b=f==="y"?"height":"width",x=i.reference[f]-i.floating[b]+g.mainAxis,C=i.reference[f]+i.reference[b]-g.mainAxis;h<x?h=x:h>C&&(h=C)}if(u){var y,_;const b=f==="y"?"width":"height",x=dp.has(ao(r)),C=i.reference[d]-i.floating[b]+(x&&((y=s.offset)==null?void 0:y[d])||0)+(x?0:g.crossAxis),k=i.reference[d]+i.reference[b]+(x?0:((_=s.offset)==null?void 0:_[d])||0)-(x?g.crossAxis:0);m<C?m=C:m>k&&(m=k)}return{[f]:h,[d]:m}}}},N_=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,o;const{placement:r,rects:i,platform:s,elements:a}=e,{apply:l=()=>{},...u}=io(n,e),c=await Os(e,u),d=ao(r),f=Zr(r),h=Vn(r)==="y",{width:m,height:v}=i.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=f===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g=f==="end"?"top":"bottom");const _=v-c.top-c.bottom,b=m-c.left-c.right,x=Po(v-c[g],_),C=Po(m-c[y],b),k=!e.middlewareData.shift;let P=x,R=C;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=b),(o=e.middlewareData.shift)!=null&&o.enabled.y&&(P=_),k&&!f){const A=an(c.left,0),O=an(c.right,0),D=an(c.top,0),V=an(c.bottom,0);h?R=m-2*(A!==0||O!==0?A+O:an(c.left,c.right)):P=v-2*(D!==0||V!==0?D+V:an(c.top,c.bottom))}await l({...e,availableWidth:R,availableHeight:P});const M=await s.getDimensions(a.floating);return m!==M.width||v!==M.height?{reset:{rects:!0}}:{}}}};function ga(){return typeof window<"u"}function ur(n){return ju(n)?(n.nodeName||"").toLowerCase():"#document"}function cn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function jn(n){var e;return(e=(ju(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function ju(n){return ga()?n instanceof Node||n instanceof cn(n).Node:!1}function An(n){return ga()?n instanceof Element||n instanceof cn(n).Element:!1}function Un(n){return ga()?n instanceof HTMLElement||n instanceof cn(n).HTMLElement:!1}function Zc(n){return!ga()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof cn(n).ShadowRoot}const $_=new Set(["inline","contents"]);function zs(n){const{overflow:e,overflowX:t,overflowY:o,display:r}=Pn(n);return/auto|scroll|overlay|hidden|clip/.test(e+o+t)&&!$_.has(r)}const U_=new Set(["table","td","th"]);function z_(n){return U_.has(ur(n))}const H_=[":popover-open",":modal"];function ya(n){return H_.some(e=>{try{return n.matches(e)}catch{return!1}})}const j_=["transform","translate","scale","rotate","perspective"],W_=["transform","translate","scale","rotate","perspective","filter"],G_=["paint","layout","strict","content"];function Wu(n){const e=Gu(),t=An(n)?Pn(n):n;return j_.some(o=>t[o]?t[o]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||W_.some(o=>(t.willChange||"").includes(o))||G_.some(o=>(t.contain||"").includes(o))}function K_(n){let e=Io(n);for(;Un(e)&&!jr(e);){if(Wu(e))return e;if(ya(e))return null;e=Io(e)}return null}function Gu(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Y_=new Set(["html","body","#document"]);function jr(n){return Y_.has(ur(n))}function Pn(n){return cn(n).getComputedStyle(n)}function _a(n){return An(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Io(n){if(ur(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Zc(n)&&n.host||jn(n);return Zc(e)?e.host:e}function fp(n){const e=Io(n);return jr(e)?n.ownerDocument?n.ownerDocument.body:n.body:Un(e)&&zs(e)?e:fp(e)}function ks(n,e,t){var o;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=fp(n),i=r===((o=n.ownerDocument)==null?void 0:o.body),s=cn(r);if(i){const a=$l(s);return e.concat(s,s.visualViewport||[],zs(r)?r:[],a&&t?ks(a):[])}return e.concat(r,ks(r,[],t))}function $l(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function pp(n){const e=Pn(n);let t=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const r=Un(n),i=r?n.offsetWidth:t,s=r?n.offsetHeight:o,a=Ki(t)!==i||Ki(o)!==s;return a&&(t=i,o=s),{width:t,height:o,$:a}}function Ku(n){return An(n)?n:n.contextElement}function Fr(n){const e=Ku(n);if(!Un(e))return Fn(1);const t=e.getBoundingClientRect(),{width:o,height:r,$:i}=pp(e);let s=(i?Ki(t.width):t.width)/o,a=(i?Ki(t.height):t.height)/r;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const X_=Fn(0);function hp(n){const e=cn(n);return!Gu()||!e.visualViewport?X_:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Z_(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==cn(n)?!1:e}function or(n,e,t,o){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=Ku(n);let s=Fn(1);e&&(o?An(o)&&(s=Fr(o)):s=Fr(n));const a=Z_(i,t,o)?hp(i):Fn(0);let l=(r.left+a.x)/s.x,u=(r.top+a.y)/s.y,c=r.width/s.x,d=r.height/s.y;if(i){const f=cn(i),h=o&&An(o)?cn(o):o;let m=f,v=$l(m);for(;v&&o&&h!==m;){const g=Fr(v),y=v.getBoundingClientRect(),_=Pn(v),b=y.left+(v.clientLeft+parseFloat(_.paddingLeft))*g.x,x=y.top+(v.clientTop+parseFloat(_.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=b,u+=x,m=cn(v),v=$l(m)}}return Xi({width:c,height:d,x:l,y:u})}function ba(n,e){const t=_a(n).scrollLeft;return e?e.left+t:or(jn(n)).left+t}function mp(n,e){const t=n.getBoundingClientRect(),o=t.left+e.scrollLeft-ba(n,t),r=t.top+e.scrollTop;return{x:o,y:r}}function Q_(n){let{elements:e,rect:t,offsetParent:o,strategy:r}=n;const i=r==="fixed",s=jn(o),a=e?ya(e.floating):!1;if(o===s||a&&i)return t;let l={scrollLeft:0,scrollTop:0},u=Fn(1);const c=Fn(0),d=Un(o);if((d||!d&&!i)&&((ur(o)!=="body"||zs(s))&&(l=_a(o)),Un(o))){const h=or(o);u=Fr(o),c.x=h.x+o.clientLeft,c.y=h.y+o.clientTop}const f=s&&!d&&!i?mp(s,l):Fn(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:t.y*u.y-l.scrollTop*u.y+c.y+f.y}}function J_(n){return Array.from(n.getClientRects())}function eb(n){const e=jn(n),t=_a(n),o=n.ownerDocument.body,r=an(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),i=an(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let s=-t.scrollLeft+ba(n);const a=-t.scrollTop;return Pn(o).direction==="rtl"&&(s+=an(e.clientWidth,o.clientWidth)-r),{width:r,height:i,x:s,y:a}}const Qc=25;function tb(n,e){const t=cn(n),o=jn(n),r=t.visualViewport;let i=o.clientWidth,s=o.clientHeight,a=0,l=0;if(r){i=r.width,s=r.height;const c=Gu();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}const u=ba(o);if(u<=0){const c=o.ownerDocument,d=c.body,f=getComputedStyle(d),h=c.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,m=Math.abs(o.clientWidth-d.clientWidth-h);m<=Qc&&(i-=m)}else u<=Qc&&(i+=u);return{width:i,height:s,x:a,y:l}}const nb=new Set(["absolute","fixed"]);function ob(n,e){const t=or(n,!0,e==="fixed"),o=t.top+n.clientTop,r=t.left+n.clientLeft,i=Un(n)?Fr(n):Fn(1),s=n.clientWidth*i.x,a=n.clientHeight*i.y,l=r*i.x,u=o*i.y;return{width:s,height:a,x:l,y:u}}function Jc(n,e,t){let o;if(e==="viewport")o=tb(n,t);else if(e==="document")o=eb(jn(n));else if(An(e))o=ob(e,t);else{const r=hp(n);o={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Xi(o)}function vp(n,e){const t=Io(n);return t===e||!An(t)||jr(t)?!1:Pn(t).position==="fixed"||vp(t,e)}function rb(n,e){const t=e.get(n);if(t)return t;let o=ks(n,[],!1).filter(a=>An(a)&&ur(a)!=="body"),r=null;const i=Pn(n).position==="fixed";let s=i?Io(n):n;for(;An(s)&&!jr(s);){const a=Pn(s),l=Wu(s);!l&&a.position==="fixed"&&(r=null),(i?!l&&!r:!l&&a.position==="static"&&!!r&&nb.has(r.position)||zs(s)&&!l&&vp(n,s))?o=o.filter(c=>c!==s):r=a,s=Io(s)}return e.set(n,o),o}function sb(n){let{element:e,boundary:t,rootBoundary:o,strategy:r}=n;const s=[...t==="clippingAncestors"?ya(e)?[]:rb(e,this._c):[].concat(t),o],a=s[0],l=s.reduce((u,c)=>{const d=Jc(e,c,r);return u.top=an(d.top,u.top),u.right=Po(d.right,u.right),u.bottom=Po(d.bottom,u.bottom),u.left=an(d.left,u.left),u},Jc(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ib(n){const{width:e,height:t}=pp(n);return{width:e,height:t}}function ab(n,e,t){const o=Un(e),r=jn(e),i=t==="fixed",s=or(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Fn(0);function u(){l.x=ba(r)}if(o||!o&&!i)if((ur(e)!=="body"||zs(r))&&(a=_a(e)),o){const h=or(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else r&&u();i&&!o&&r&&u();const c=r&&!o&&!i?mp(r,a):Fn(0),d=s.left+a.scrollLeft-l.x-c.x,f=s.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:s.width,height:s.height}}function Za(n){return Pn(n).position==="static"}function ed(n,e){if(!Un(n)||Pn(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return jn(n)===t&&(t=t.ownerDocument.body),t}function gp(n,e){const t=cn(n);if(ya(n))return t;if(!Un(n)){let r=Io(n);for(;r&&!jr(r);){if(An(r)&&!Za(r))return r;r=Io(r)}return t}let o=ed(n,e);for(;o&&z_(o)&&Za(o);)o=ed(o,e);return o&&jr(o)&&Za(o)&&!Wu(o)?t:o||K_(n)||t}const lb=async function(n){const e=this.getOffsetParent||gp,t=this.getDimensions,o=await t(n.floating);return{reference:ab(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function ub(n){return Pn(n).direction==="rtl"}const cb={convertOffsetParentRelativeRectToViewportRelativeRect:Q_,getDocumentElement:jn,getClippingRect:sb,getOffsetParent:gp,getElementRects:lb,getClientRects:J_,getDimensions:ib,getScale:Fr,isElement:An,isRTL:ub};function yp(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function db(n,e){let t=null,o;const r=jn(n);function i(){var a;clearTimeout(o),(a=t)==null||a.disconnect(),t=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=n.getBoundingClientRect(),{left:c,top:d,width:f,height:h}=u;if(a||e(),!f||!h)return;const m=si(d),v=si(r.clientWidth-(c+f)),g=si(r.clientHeight-(d+h)),y=si(c),b={rootMargin:-m+"px "+-v+"px "+-g+"px "+-y+"px",threshold:an(0,Po(1,l))||1};let x=!0;function C(k){const P=k[0].intersectionRatio;if(P!==l){if(!x)return s();P?s(!1,P):o=setTimeout(()=>{s(!1,1e-7)},1e3)}P===1&&!yp(u,n.getBoundingClientRect())&&s(),x=!1}try{t=new IntersectionObserver(C,{...b,root:r.ownerDocument})}catch{t=new IntersectionObserver(C,b)}t.observe(n)}return s(!0),i}function fb(n,e,t,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=o,u=Ku(n),c=r||i?[...u?ks(u):[],...ks(e)]:[];c.forEach(y=>{r&&y.addEventListener("scroll",t,{passive:!0}),i&&y.addEventListener("resize",t)});const d=u&&a?db(u,t):null;let f=-1,h=null;s&&(h=new ResizeObserver(y=>{let[_]=y;_&&_.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(e)})),t()}),u&&!l&&h.observe(u),h.observe(e));let m,v=l?or(n):null;l&&g();function g(){const y=or(n);v&&!yp(v,y)&&t(),v=y,m=requestAnimationFrame(g)}return t(),()=>{var y;c.forEach(_=>{r&&_.removeEventListener("scroll",t),i&&_.removeEventListener("resize",t)}),d?.(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const pb=L_,hb=V_,td=D_,mb=N_,vb=B_,gb=k_,yb=F_,_b=(n,e,t)=>{const o=new Map,r={platform:cb,...t},i={...r.platform,_c:o};return O_(n,e,{...r,platform:i})};function bb(n){return n!=null&&typeof n=="object"&&"$el"in n}function Ul(n){if(bb(n)){const e=n.$el;return ju(e)&&ur(e)==="#comment"?null:e}return n}function Rr(n){return typeof n=="function"?n():p(n)}function wb(n){return{name:"arrow",options:n,fn(e){const t=Ul(Rr(n.element));return t==null?{}:gb({element:t,padding:n.padding}).fn(e)}}}function _p(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function nd(n,e){const t=_p(n);return Math.round(e*t)/t}function xb(n,e,t){t===void 0&&(t={});const o=t.whileElementsMounted,r=F(()=>{var P;return(P=Rr(t.open))!=null?P:!0}),i=F(()=>Rr(t.middleware)),s=F(()=>{var P;return(P=Rr(t.placement))!=null?P:"bottom"}),a=F(()=>{var P;return(P=Rr(t.strategy))!=null?P:"absolute"}),l=F(()=>{var P;return(P=Rr(t.transform))!=null?P:!0}),u=F(()=>Ul(n.value)),c=F(()=>Ul(e.value)),d=N(0),f=N(0),h=N(a.value),m=N(s.value),v=je({}),g=N(!1),y=F(()=>{const P={position:h.value,left:"0",top:"0"};if(!c.value)return P;const R=nd(c.value,d.value),M=nd(c.value,f.value);return l.value?{...P,transform:"translate("+R+"px, "+M+"px)",..._p(c.value)>=1.5&&{willChange:"transform"}}:{position:h.value,left:R+"px",top:M+"px"}});let _;function b(){if(u.value==null||c.value==null)return;const P=r.value;_b(u.value,c.value,{middleware:i.value,placement:s.value,strategy:a.value}).then(R=>{d.value=R.x,f.value=R.y,h.value=R.strategy,m.value=R.placement,v.value=R.middlewareData,g.value=P!==!1})}function x(){typeof _=="function"&&(_(),_=void 0)}function C(){if(x(),o===void 0){b();return}if(u.value!=null&&c.value!=null){_=o(u.value,c.value,b);return}}function k(){r.value||(g.value=!1)}return Te([i,s,a,r],b,{flush:"sync"}),Te([u,c],C,{flush:"sync"}),Te(r,k,{flush:"sync"}),yu()&&sa(x),{x:Xo(d),y:Xo(f),strategy:Xo(h),placement:Xo(m),middlewareData:Xo(v),isPositioned:Xo(g),floatingStyles:y,update:b}}const bp={side:"bottom",sideOffset:0,sideFlip:!0,align:"center",alignOffset:0,alignFlip:!0,arrowPadding:0,hideShiftedArrow:!0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[Sb,Cb]=Be("PopperContent");var Tb=L({inheritAttrs:!1,__name:"PopperContent",props:If({side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...bp}),emits:["placed"],setup(n,{emit:e}){const t=n,o=e,r=up(),{forwardRef:i,currentElement:s}=Z(),a=N(),l=N(),{width:u,height:c}=Jf(l),d=F(()=>t.side+(t.align!=="center"?`-${t.align}`:"")),f=F(()=>typeof t.collisionPadding=="number"?t.collisionPadding:{top:0,right:0,bottom:0,left:0,...t.collisionPadding}),h=F(()=>Array.isArray(t.collisionBoundary)?t.collisionBoundary:[t.collisionBoundary]),m=F(()=>({padding:f.value,boundary:h.value.filter(__),altBoundary:h.value.length>0})),v=F(()=>({mainAxis:t.sideFlip,crossAxis:t.alignFlip})),g=Rv(()=>[pb({mainAxis:t.sideOffset+c.value,alignmentAxis:t.alignOffset}),t.prioritizePosition&&t.avoidCollisions&&td({...m.value,...v.value}),t.avoidCollisions&&hb({mainAxis:!0,crossAxis:!!t.prioritizePosition,limiter:t.sticky==="partial"?yb():void 0,...m.value}),!t.prioritizePosition&&t.avoidCollisions&&td({...m.value,...v.value}),mb({...m.value,apply:({elements:D,rects:V,availableWidth:$,availableHeight:Y})=>{const{width:W,height:G}=V.reference,Q=D.floating.style;Q.setProperty("--reka-popper-available-width",`${$}px`),Q.setProperty("--reka-popper-available-height",`${Y}px`),Q.setProperty("--reka-popper-anchor-width",`${W}px`),Q.setProperty("--reka-popper-anchor-height",`${G}px`)}}),l.value&&wb({element:l.value,padding:t.arrowPadding}),b_({arrowWidth:u.value,arrowHeight:c.value}),t.hideWhenDetached&&vb({strategy:"referenceHidden",...m.value})]),y=F(()=>t.reference??r.anchor.value),{floatingStyles:_,placement:b,isPositioned:x,middlewareData:C}=xb(y,a,{strategy:t.positionStrategy,placement:d,whileElementsMounted:(...D)=>fb(...D,{layoutShift:!t.disableUpdateOnLayoutShift,animationFrame:t.updatePositionStrategy==="always"}),middleware:g}),k=F(()=>Vl(b.value)[0]),P=F(()=>Vl(b.value)[1]);xu(()=>{x.value&&o("placed")});const R=F(()=>{const D=C.value.arrow?.centerOffset!==0;return t.hideShiftedArrow&&D}),M=N("");nt(()=>{s.value&&(M.value=window.getComputedStyle(s.value).zIndex)});const A=F(()=>C.value.arrow?.x??0),O=F(()=>C.value.arrow?.y??0);return Cb({placedSide:k,onArrowChange:D=>l.value=D,arrowX:A,arrowY:O,shouldHideArrow:R}),(D,V)=>(E(),ne("div",{ref_key:"floatingRef",ref:a,"data-reka-popper-content-wrapper":"",style:wt({...p(_),transform:p(x)?p(_).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:M.value,"--reka-popper-transform-origin":[p(C).transformOrigin?.x,p(C).transformOrigin?.y].join(" "),...p(C).hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}})},[T(p(de),J({ref:p(i)},D.$attrs,{"as-child":t.asChild,as:D.as,"data-side":k.value,"data-align":P.value,style:{animation:p(x)?void 0:"none"}}),{default:S(()=>[U(D.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4))}}),wa=Tb;const Eb={top:"bottom",right:"left",bottom:"top",left:"right"};var Mb=L({inheritAttrs:!1,__name:"PopperArrow",props:{width:{type:Number,required:!1},height:{type:Number,required:!1},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(n){const{forwardRef:e}=Z(),t=Sb(),o=F(()=>Eb[t.placedSide.value]);return(r,i)=>(E(),ne("span",{ref:s=>{p(t).onArrowChange(s)},style:wt({position:"absolute",left:p(t).arrowX?.value?`${p(t).arrowX?.value}px`:void 0,top:p(t).arrowY?.value?`${p(t).arrowY?.value}px`:void 0,[o.value]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[p(t).placedSide.value],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[p(t).placedSide.value],visibility:p(t).shouldHideArrow.value?"hidden":void 0})},[T(y_,J(r.$attrs,{ref:p(e),style:{display:"block"},as:r.as,"as-child":r.asChild,rounded:r.rounded,width:r.width,height:r.height}),{default:S(()=>[U(r.$slots,"default")]),_:3},16,["as","as-child","rounded","width","height"])],4))}}),Yu=Mb;function gr(n,e,t){let o=t.initialDeps??[],r;function i(){var s,a,l,u;let c;t.key&&((s=t.debug)!=null&&s.call(t))&&(c=Date.now());const d=n();if(!(d.length!==o.length||d.some((m,v)=>o[v]!==m)))return r;o=d;let h;if(t.key&&((a=t.debug)!=null&&a.call(t))&&(h=Date.now()),r=e(...d),t.key&&((l=t.debug)!=null&&l.call(t))){const m=Math.round((Date.now()-c)*100)/100,v=Math.round((Date.now()-h)*100)/100,g=v/16,y=(_,b)=>{for(_=String(_);_.length<b;)_=" "+_;return _};console.info(`%c ${y(v,5)} /${y(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,t?.key)}return(u=t?.onChange)==null||u.call(t,r),r}return i.updateDeps=s=>{o=s},i}function od(n,e){if(n===void 0)throw new Error("Unexpected undefined");return n}const Ab=(n,e)=>Math.abs(n-e)<1.01,Pb=(n,e,t)=>{let o;return function(...r){n.clearTimeout(o),o=n.setTimeout(()=>e.apply(this,r),t)}},rd=n=>{const{offsetWidth:e,offsetHeight:t}=n;return{width:e,height:t}},Ib=n=>n,Rb=n=>{const e=Math.max(n.startIndex-n.overscan,0),t=Math.min(n.endIndex+n.overscan,n.count-1),o=[];for(let r=e;r<=t;r++)o.push(r);return o},Ob=(n,e)=>{const t=n.scrollElement;if(!t)return;const o=n.targetWindow;if(!o)return;const r=s=>{const{width:a,height:l}=s;e({width:Math.round(a),height:Math.round(l)})};if(r(rd(t)),!o.ResizeObserver)return()=>{};const i=new o.ResizeObserver(s=>{const a=()=>{const l=s[0];if(l?.borderBoxSize){const u=l.borderBoxSize[0];if(u){r({width:u.inlineSize,height:u.blockSize});return}}r(rd(t))};n.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},sd={passive:!0},id=typeof window>"u"?!0:"onscrollend"in window,kb=(n,e)=>{const t=n.scrollElement;if(!t)return;const o=n.targetWindow;if(!o)return;let r=0;const i=n.options.useScrollendEvent&&id?()=>{}:Pb(o,()=>{e(r,!1)},n.options.isScrollingResetDelay),s=c=>()=>{const{horizontal:d,isRtl:f}=n.options;r=d?t.scrollLeft*(f&&-1||1):t.scrollTop,i(),e(r,c)},a=s(!0),l=s(!1);l(),t.addEventListener("scroll",a,sd);const u=n.options.useScrollendEvent&&id;return u&&t.addEventListener("scrollend",l,sd),()=>{t.removeEventListener("scroll",a),u&&t.removeEventListener("scrollend",l)}},Db=(n,e,t)=>{if(e?.borderBoxSize){const o=e.borderBoxSize[0];if(o)return Math.round(o[t.options.horizontal?"inlineSize":"blockSize"])}return n[t.options.horizontal?"offsetWidth":"offsetHeight"]},Bb=(n,{adjustments:e=0,behavior:t},o)=>{var r,i;const s=n+e;(i=(r=o.scrollElement)==null?void 0:r.scrollTo)==null||i.call(r,{[o.options.horizontal?"left":"top"]:s,behavior:t})};class qb{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const o=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(r=>{r.forEach(i=>{const s=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var r;(r=o())==null||r.disconnect(),t=null},observe:r=>{var i;return(i=o())==null?void 0:i.observe(r,{box:"border-box"})},unobserve:r=>{var i;return(i=o())==null?void 0:i.unobserve(r)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([o,r])=>{typeof r>"u"&&delete t[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ib,rangeExtractor:Rb,onChange:()=>{},measureElement:Db,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var o,r;(r=(o=this.options).onChange)==null||r.call(o,this,t)},this.maybeNotify=gr(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,o)=>{const r=new Map,i=new Map;for(let s=o-1;s>=0;s--){const a=t[s];if(r.has(a.lane))continue;const l=i.get(a.lane);if(l==null||a.end>l.end?i.set(a.lane,a):a.end<l.end&&r.set(a.lane,!0),r.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((s,a)=>s.end===a.end?s.index-a.index:s.end-a.end)[0]:void 0},this.getMeasurementOptions=gr(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,o,r,i,s)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:o,scrollMargin:r,getItemKey:i,enabled:s}),{key:!1}),this.getMeasurements=gr(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:o,scrollMargin:r,getItemKey:i,enabled:s},a)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let c=l;c<t;c++){const d=i(c),f=this.options.lanes===1?u[c-1]:this.getFurthestMeasurement(u,c),h=f?f.end+this.options.gap:o+r,m=a.get(d),v=typeof m=="number"?m:this.options.estimateSize(c),g=h+v,y=f?f.lane:c%this.options.lanes;u[c]={index:c,start:h,size:v,end:g,key:d,lane:y}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=gr(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,o,r,i)=>this.range=t.length>0&&o>0?Lb({measurements:t,outerSize:o,scrollOffset:r,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=gr(()=>{let t=null,o=null;const r=this.calculateRange();return r&&(t=r.startIndex,o=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,o]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,o]},(t,o,r,i,s)=>i===null||s===null?[]:t({startIndex:i,endIndex:s,overscan:o,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const o=this.options.indexAttribute,r=t.getAttribute(o);return r?parseInt(r,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(t,o)=>{const r=this.indexFromElement(t),i=this.measurementsCache[r];if(!i)return;const s=i.key,a=this.elementsCache.get(s);a!==t&&(a&&this.observer.unobserve(a),this.observer.observe(t),this.elementsCache.set(s,t)),t.isConnected&&this.resizeItem(r,this.options.measureElement(t,o,this))},this.resizeItem=(t,o)=>{const r=this.measurementsCache[t];if(!r)return;const i=this.itemSizeCache.get(r.key)??r.size,s=o-i;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,s,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,o)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((o,r)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(r))});return}this._measureElement(t,void 0)},this.getVirtualItems=gr(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,o)=>{const r=[];for(let i=0,s=t.length;i<s;i++){const a=t[i],l=o[a];r.push(l)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const o=this.getMeasurements();if(o.length!==0)return od(o[wp(0,o.length-1,r=>od(o[r]).start,t)])},this.getOffsetForAlignment=(t,o,r=0)=>{const i=this.getSize(),s=this.getScrollOffset();o==="auto"&&(o=t>=s+i?"end":"start"),o==="center"?t+=(r-i)/2:o==="end"&&(t-=i);const a=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(a,t),0)},this.getOffsetForIndex=(t,o="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const r=this.measurementsCache[t];if(!r)return;const i=this.getSize(),s=this.getScrollOffset();if(o==="auto")if(r.end>=s+i-this.options.scrollPaddingEnd)o="end";else if(r.start<=s+this.options.scrollPaddingStart)o="start";else return[s,o];const a=o==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,o,r.size),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:o="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,o),{adjustments:void 0,behavior:r})},this.scrollToIndex=(t,{align:o="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let i=0;const s=10,a=u=>{if(!this.targetWindow)return;const c=this.getOffsetForIndex(t,u);if(!c){console.warn("Failed to get offset for index:",t);return}const[d,f]=c;this._scrollToOffset(d,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const h=this.getScrollOffset(),m=this.getOffsetForIndex(t,f);if(!m){console.warn("Failed to get offset for index:",t);return}Ab(m[0],h)||l(f)})},l=u=>{this.targetWindow&&(i++,i<s?this.targetWindow.requestAnimationFrame(()=>a(u)):console.warn(`Failed to scroll to index ${t} after ${s} attempts.`))};a(o)},this.scrollBy=(t,{behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var t;const o=this.getMeasurements();let r;if(o.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((t=o[o.length-1])==null?void 0:t.end)??0;else{const i=Array(this.options.lanes).fill(null);let s=o.length-1;for(;s>=0&&i.some(a=>a===null);){const a=o[s];i[a.lane]===null&&(i[a.lane]=a.end),s--}r=Math.max(...i.filter(a=>a!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:o,behavior:r})=>{this.options.scrollToFn(t,{behavior:r,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const wp=(n,e,t,o)=>{for(;n<=e;){const r=(n+e)/2|0,i=t(r);if(i<o)n=r+1;else if(i>o)e=r-1;else return r}return n>0?n-1:0};function Lb({measurements:n,outerSize:e,scrollOffset:t,lanes:o}){const r=n.length-1,i=l=>n[l].start;if(n.length<=o)return{startIndex:0,endIndex:r};let s=wp(0,r,i,t),a=s;if(o===1)for(;a<r&&n[a].end<t+e;)a++;else if(o>1){const l=Array(o).fill(0);for(;a<r&&l.some(c=>c<t+e);){const c=n[a];l[c.lane]=c.end,a++}const u=Array(o).fill(t+e);for(;s>=0&&u.some(c=>c>=t);){const c=n[s];u[c.lane]=c.start,s--}s=Math.max(0,s-s%o),a=Math.min(r,a+(o-1-a%o))}return{startIndex:s,endIndex:a}}function Vb(n){const e=new qb(p(n)),t=je(e),o=e._didMount();return Te(()=>p(n).getScrollElement(),r=>{r&&e._willUpdate()},{immediate:!0}),Te(()=>p(n),r=>{e.setOptions({...r,onChange:(i,s)=>{var a;_o(t),(a=r.onChange)==null||a.call(r,i,s)}}),e._willUpdate(),_o(t)},{immediate:!0}),sa(o),t}function Fb(n){return Vb(F(()=>({observeElementRect:Ob,observeElementOffset:kb,scrollToFn:Bb,...p(n)})))}function xp(n){const e=ua({nonce:N()});return F(()=>n?.value||e.nonce?.value)}var Nb=L({__name:"MenuAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(Us),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),Xu=Nb,$b=L({__name:"MenuArrow",props:{width:{type:Number,required:!1},height:{type:Number,required:!1},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(Yu),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),Sp=$b;function Ub(){const n=N(!1);return Le(()=>{We("keydown",()=>{n.value=!0},{capture:!0,passive:!0}),We(["pointerdown","pointermove"],()=>{n.value=!1},{capture:!0,passive:!0})}),n}const zb=Kf(Ub),[cr,Cp]=Be(["MenuRoot","MenuSub"],"MenuContext"),[Hs,Hb]=Be("MenuRoot");var jb=L({__name:"MenuRoot",props:{open:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(n,{emit:e}){const t=n,o=e,{modal:r,dir:i}=Ve(t),s=bn(i),a=st(t,"open",o),l=N(),u=zb();return Cp({open:a,onOpenChange:c=>{a.value=c},content:l,onContentChange:c=>{l.value=c}}),Hb({onClose:()=>{a.value=!1},isUsingKeyboardRef:u,dir:s,modal:r}),(c,d)=>(E(),B(p($s),null,{default:S(()=>[U(c.$slots,"default")]),_:3}))}}),Tp=jb;const[Zu,Wb]=Be("MenuContent");var Gb=L({__name:"MenuContentImpl",props:If({loop:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},disableOutsideScroll:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...bp}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(n,{emit:e}){const t=n,o=e,r=cr(),i=Hs(),{trapFocus:s,disableOutsidePointerEvents:a,loop:l}=Ve(t);Du(),fa(a.value);const u=N(""),c=N(0),d=N(0),f=N(null),h=N("right"),m=N(0),v=N(null),g=N(),{forwardRef:y,currentElement:_}=Z(),{handleTypeaheadSearch:b}=ha();Te(_,M=>{r.onContentChange(M)}),Wt(()=>{window.clearTimeout(c.value)});function x(M){return h.value===f.value?.side&&Ty(M,f.value?.area)}async function C(M){o("openAutoFocus",M),!M.defaultPrevented&&(M.preventDefault(),_.value?.focus({preventScroll:!0}))}function k(M){if(M.defaultPrevented)return;const O=M.target.closest("[data-reka-menu-content]")===M.currentTarget,D=M.ctrlKey||M.altKey||M.metaKey,V=M.key.length===1,$=jf(M,et(),_.value,{loop:l.value,arrowKeyOptions:"vertical",dir:i?.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if($)return $?.focus();if(M.code==="Space")return;const Y=g.value?.getItems()??[];if(O&&(M.key==="Tab"&&M.preventDefault(),!D&&V&&b(M.key,Y)),M.target!==_.value||!wy.includes(M.key))return;M.preventDefault();const W=[...Y.map(G=>G.ref)];op.includes(M.key)&&W.reverse(),Ll(W)}function P(M){M?.currentTarget?.contains?.(M.target)||(window.clearTimeout(c.value),u.value="")}function R(M){if(!Rs(M))return;const A=M.target,O=m.value!==M.clientX;if(M?.currentTarget?.contains(A)&&O){const D=M.clientX>m.value?"right":"left";h.value=D,m.value=M.clientX}}return Wb({onItemEnter:M=>!!x(M),onItemLeave:M=>{x(M)||(_.value?.focus(),v.value=null)},onTriggerLeave:M=>!!x(M),searchRef:u,pointerGraceTimerRef:d,onPointerGraceIntentChange:M=>{f.value=M}}),(M,A)=>(E(),B(p(va),{"as-child":"",trapped:p(s),onMountAutoFocus:C,onUnmountAutoFocus:A[7]||(A[7]=O=>o("closeAutoFocus",O))},{default:S(()=>[T(p(Vs),{"as-child":"","disable-outside-pointer-events":p(a),onEscapeKeyDown:A[2]||(A[2]=O=>o("escapeKeyDown",O)),onPointerDownOutside:A[3]||(A[3]=O=>o("pointerDownOutside",O)),onFocusOutside:A[4]||(A[4]=O=>o("focusOutside",O)),onInteractOutside:A[5]||(A[5]=O=>o("interactOutside",O)),onDismiss:A[6]||(A[6]=O=>o("dismiss"))},{default:S(()=>[T(p(Kr),{ref_key:"rovingFocusGroupRef",ref:g,"current-tab-stop-id":v.value,"onUpdate:currentTabStopId":A[0]||(A[0]=O=>v.value=O),"as-child":"",orientation:"vertical",dir:p(i).dir.value,loop:p(l),onEntryFocus:A[1]||(A[1]=O=>{o("entryFocus",O),p(i).isUsingKeyboardRef.value||O.preventDefault()})},{default:S(()=>[T(p(wa),{ref:p(y),role:"menu",as:M.as,"as-child":M.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":p(Fu)(p(r).open.value),dir:p(i).dir.value,side:M.side,"side-offset":M.sideOffset,align:M.align,"align-offset":M.alignOffset,"avoid-collisions":M.avoidCollisions,"collision-boundary":M.collisionBoundary,"collision-padding":M.collisionPadding,"arrow-padding":M.arrowPadding,"prioritize-position":M.prioritizePosition,"position-strategy":M.positionStrategy,"update-position-strategy":M.updatePositionStrategy,sticky:M.sticky,"hide-when-detached":M.hideWhenDetached,reference:M.reference,onKeydown:k,onBlur:P,onPointermove:R},{default:S(()=>[U(M.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),Qu=Gb,Kb=L({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,t=Zu(),{forwardRef:o}=Z(),{CollectionItem:r}=pt(),i=N(!1);async function s(l){l.defaultPrevented||Rs(l)&&(e.disabled?t.onItemLeave(l):t.onItemEnter(l)||l.currentTarget?.focus({preventScroll:!0}))}async function a(l){await Ge(),!l.defaultPrevented&&Rs(l)&&t.onItemLeave(l)}return(l,u)=>(E(),B(p(r),{value:{textValue:l.textValue}},{default:S(()=>[T(p(de),J({ref:p(o),role:"menuitem",tabindex:"-1"},l.$attrs,{as:l.as,"as-child":l.asChild,"aria-disabled":l.disabled||void 0,"data-disabled":l.disabled?"":void 0,"data-highlighted":i.value?"":void 0,onPointermove:s,onPointerleave:a,onFocus:u[0]||(u[0]=async c=>{await Ge(),!(c.defaultPrevented||l.disabled)&&(i.value=!0)}),onBlur:u[1]||(u[1]=async c=>{await Ge(),!c.defaultPrevented&&(i.value=!1)})}),{default:S(()=>[U(l.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),Ep=Kb,Yb=L({__name:"MenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(n,{emit:e}){const t=n,o=e,{forwardRef:r,currentElement:i}=Z(),s=Hs(),a=Zu(),l=N(!1);async function u(){const c=i.value;if(!t.disabled&&c){const d=new CustomEvent(_y,{bubbles:!0,cancelable:!0});o("select",d),await Ge(),d.defaultPrevented?l.value=!1:s.onClose()}}return(c,d)=>(E(),B(Ep,J(t,{ref:p(r),onClick:u,onPointerdown:d[0]||(d[0]=()=>{l.value=!0}),onPointerup:d[1]||(d[1]=async f=>{await Ge(),!f.defaultPrevented&&(l.value||f.currentTarget?.click())}),onKeydown:d[2]||(d[2]=async f=>{const h=p(a).searchRef.value!=="";c.disabled||h&&f.key===" "||p(ql).includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})}),{default:S(()=>[U(c.$slots,"default")]),_:3},16))}}),xa=Yb;const[Xb,Mp]=Be(["MenuCheckboxItem","MenuRadioItem"],"MenuItemIndicatorContext");var Zb=L({__name:"MenuItemIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=Xb({modelValue:N(!1)});return(t,o)=>(E(),B(p(Vt),{present:t.forceMount||p(Wi)(p(e).modelValue.value)||p(e).modelValue.value===!0},{default:S(()=>[T(p(de),{as:t.as,"as-child":t.asChild,"data-state":p(Nu)(p(e).modelValue.value)},{default:S(()=>[U(t.$slots,"default")]),_:3},8,["as","as-child","data-state"])]),_:3},8,["present"]))}}),Ap=Zb,Qb=L({__name:"MenuCheckboxItem",props:{modelValue:{type:[Boolean,String],required:!1,default:!1},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select","update:modelValue"],setup(n,{emit:e}){const t=n,o=e,r=ca(t,["modelValue"]),i=ko(r),s=st(t,"modelValue",o);return Mp({modelValue:s}),(a,l)=>(E(),B(xa,J({role:"menuitemcheckbox"},p(i),{"aria-checked":p(Wi)(p(s))?"mixed":p(s),"data-state":p(Nu)(p(s)),onSelect:l[0]||(l[0]=async u=>{o("select",u),p(Wi)(p(s))?s.value=!0:s.value=!p(s)})}),{default:S(()=>[U(a.$slots,"default",{modelValue:p(s)})]),_:3},16,["aria-checked","data-state"]))}}),Pp=Qb,Jb=L({__name:"MenuRootContentModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,o=e,r=Gt(t,o),i=cr(),{forwardRef:s,currentElement:a}=Z();return pa(a),(l,u)=>(E(),B(Qu,J(p(r),{ref:p(s),"trap-focus":p(i).open.value,"disable-outside-pointer-events":p(i).open.value,"disable-outside-scroll":!0,onDismiss:u[0]||(u[0]=c=>p(i).onOpenChange(!1)),onFocusOutside:u[1]||(u[1]=ze(c=>o("focusOutside",c),["prevent"]))}),{default:S(()=>[U(l.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),e0=Jb,t0=L({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const r=Gt(n,e),i=cr();return(s,a)=>(E(),B(Qu,J(p(r),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:a[0]||(a[0]=l=>p(i).onOpenChange(!1))}),{default:S(()=>[U(s.$slots,"default")]),_:3},16))}}),n0=t0,o0=L({__name:"MenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const r=Gt(n,e),i=cr(),s=Hs();return(a,l)=>(E(),B(p(Vt),{present:a.forceMount||p(i).open.value},{default:S(()=>[p(s).modal.value?(E(),B(e0,Re(J({key:0},{...a.$attrs,...p(r)})),{default:S(()=>[U(a.$slots,"default")]),_:3},16)):(E(),B(n0,Re(J({key:1},{...a.$attrs,...p(r)})),{default:S(()=>[U(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Ip=o0,r0=L({__name:"MenuGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(de),J({role:"group"},e),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),Ju=r0,s0=L({__name:"MenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(n){const e=n;return(t,o)=>(E(),B(p(de),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),Rp=s0,i0=L({__name:"MenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(Fs),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),Op=i0;const[a0,l0]=Be("MenuRadioGroup");var u0=L({__name:"MenuRadioGroup",props:{modelValue:{type:null,required:!1,default:""},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,o=e,r=ca(t,["modelValue"]),i=ko(r),s=st(t,"modelValue",o);return l0({modelValue:s,onValueChange:a=>{s.value=a}}),(a,l)=>(E(),B(Ju,Re(De(p(i))),{default:S(()=>[U(a.$slots,"default",{modelValue:p(s)})]),_:3},16))}}),kp=u0,c0=L({__name:"MenuRadioItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(n,{emit:e}){const t=n,o=e,r=ca(t,["value"]),i=ko(r),{value:s}=Ve(t),a=a0(),l=F(()=>a.modelValue.value===s?.value);return Mp({modelValue:l}),(u,c)=>(E(),B(xa,J({role:"menuitemradio"},p(i),{"aria-checked":l.value,"data-state":p(Nu)(l.value),onSelect:c[0]||(c[0]=async d=>{o("select",d),p(a).onValueChange(p(s))})}),{default:S(()=>[U(u.$slots,"default")]),_:3},16,["aria-checked","data-state"]))}}),Dp=c0,d0=L({__name:"MenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(de),J(e,{role:"separator","aria-orientation":"horizontal"}),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),Bp=d0;const[qp,f0]=Be("MenuSub");var p0=L({__name:"MenuSub",props:{open:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(n,{emit:e}){const t=n,r=st(t,"open",e,{defaultValue:!1,passive:t.open===void 0}),i=cr(),s=N(),a=N();return nt(l=>{i?.open.value===!1&&(r.value=!1),l(()=>r.value=!1)}),Cp({open:r,onOpenChange:l=>{r.value=l},content:a,onContentChange:l=>{a.value=l}}),f0({triggerId:"",contentId:"",trigger:s,onTriggerChange:l=>{s.value=l}}),(l,u)=>(E(),B(p($s),null,{default:S(()=>[U(l.$slots,"default")]),_:3}))}}),Lp=p0,h0=L({__name:"MenuSubContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1,default:!0},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const r=Gt(n,e),i=cr(),s=Hs(),a=qp(),{forwardRef:l,currentElement:u}=Z();return a.contentId||=Rt(void 0,"reka-menu-sub-content"),(c,d)=>(E(),B(p(Vt),{present:c.forceMount||p(i).open.value},{default:S(()=>[T(Qu,J(p(r),{id:p(a).contentId,ref:p(l),"aria-labelledby":p(a).triggerId,align:"start",side:p(s).dir.value==="rtl"?"left":"right","disable-outside-pointer-events":!1,"disable-outside-scroll":!1,"trap-focus":!1,onOpenAutoFocus:d[0]||(d[0]=ze(f=>{p(s).isUsingKeyboardRef.value&&p(u)?.focus()},["prevent"])),onCloseAutoFocus:d[1]||(d[1]=ze(()=>{},["prevent"])),onFocusOutside:d[2]||(d[2]=f=>{f.defaultPrevented||f.target!==p(a).trigger.value&&p(i).onOpenChange(!1)}),onEscapeKeyDown:d[3]||(d[3]=f=>{p(s).onClose(),f.preventDefault()}),onKeydown:d[4]||(d[4]=f=>{const h=f.currentTarget?.contains(f.target),m=p(Sy)[p(s).dir.value].includes(f.key);h&&m&&(p(i).onOpenChange(!1),p(a).trigger.value?.focus(),f.preventDefault())})}),{default:S(()=>[U(c.$slots,"default")]),_:3},16,["id","aria-labelledby","side"])]),_:3},8,["present"]))}}),Vp=h0,m0=L({__name:"MenuSubTrigger",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,t=cr(),o=Hs(),r=qp(),i=Zu(),s=N(null);r.triggerId||=Rt(void 0,"reka-menu-sub-trigger");function a(){s.value&&window.clearTimeout(s.value),s.value=null}Wt(()=>{a()});function l(d){!Rs(d)||i.onItemEnter(d)||!e.disabled&&!t.open.value&&!s.value&&(i.onPointerGraceIntentChange(null),s.value=window.setTimeout(()=>{t.onOpenChange(!0),a()},100))}async function u(d){if(!Rs(d))return;a();const f=t.content.value?.getBoundingClientRect();if(f?.width){const h=t.content.value?.dataset.side,m=h==="right",v=m?-5:5,g=f[m?"left":"right"],y=f[m?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:g,y:f.top},{x:y,y:f.top},{x:y,y:f.bottom},{x:g,y:f.bottom}],side:h}),window.clearTimeout(i.pointerGraceTimerRef.value),i.pointerGraceTimerRef.value=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d))return;i.onPointerGraceIntentChange(null)}}async function c(d){const f=i.searchRef.value!=="";e.disabled||f&&d.key===" "||xy[o.dir.value].includes(d.key)&&(t.onOpenChange(!0),await Ge(),t.content.value?.focus(),d.preventDefault())}return(d,f)=>(E(),B(Xu,{"as-child":""},{default:S(()=>[T(Ep,J(e,{id:p(r).triggerId,ref:h=>{p(r)?.onTriggerChange(h?.$el)},"aria-haspopup":"menu","aria-expanded":p(t).open.value,"aria-controls":p(r).contentId,"data-state":p(Fu)(p(t).open.value),onClick:f[0]||(f[0]=async h=>{e.disabled||h.defaultPrevented||(h.currentTarget.focus(),p(t).open.value||p(t).onOpenChange(!0))}),onPointermove:l,onPointerleave:u,onKeydown:c}),{default:S(()=>[U(d.$slots,"default")]),_:3},16,["id","aria-expanded","aria-controls","data-state"])]),_:3}))}}),Fp=m0,v0=L({__name:"ContextMenuArrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Sp),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),g0=v0,y0=L({__name:"ContextMenuCheckboxItem",props:{modelValue:{type:[Boolean,String],required:!1},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select","update:modelValue"],setup(n,{emit:e}){const t=n,r=Rn(e);return Z(),(i,s)=>(E(),B(p(Pp),Re(De({...t,...p(r)})),{default:S(()=>[U(i.$slots,"default")]),_:3},16))}}),_0=y0;const[Np,b0]=Be("ContextMenuRoot");var w0=L({inheritAttrs:!1,__name:"ContextMenuRoot",props:{pressOpenDelay:{type:Number,required:!1,default:700},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(n,{emit:e}){const t=n,o=e,{dir:r,modal:i,pressOpenDelay:s}=Ve(t);Z();const a=bn(r),l=N(!1),u=N();return b0({open:l,onOpenChange:c=>{l.value=c},dir:a,modal:i,triggerElement:u,pressOpenDelay:s}),Te(l,c=>{o("update:open",c)}),(c,d)=>(E(),B(p(Tp),{open:l.value,"onUpdate:open":d[0]||(d[0]=f=>l.value=f),dir:p(a),modal:p(i)},{default:S(()=>[U(c.$slots,"default")]),_:3},8,["open","dir","modal"]))}}),x0=w0,S0=L({__name:"ContextMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1,default:0},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1,default:!0},collisionBoundary:{type:null,required:!1,default:()=>[]},collisionPadding:{type:[Number,Object],required:!1,default:0},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1,default:"partial"},hideWhenDetached:{type:Boolean,required:!1,default:!1},positionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(n,{emit:e}){const r=Gt(n,e);Z();const i=Np(),s=N(!1);return(a,l)=>(E(),B(p(Ip),J(p(r),{side:"right","side-offset":2,align:"start","update-position-strategy":"always",style:{"--reka-context-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-context-menu-content-available-width":"var(--reka-popper-available-width)","--reka-context-menu-content-available-height":"var(--reka-popper-available-height)","--reka-context-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-context-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:l[0]||(l[0]=u=>{!u.defaultPrevented&&s.value&&u.preventDefault(),s.value=!1}),onInteractOutside:l[1]||(l[1]=u=>{u.detail.originalEvent.button===2&&u.target===p(i).triggerElement.value&&u.preventDefault(),!u.defaultPrevented&&!p(i).modal.value&&(s.value=!0)})}),{default:S(()=>[U(a.$slots,"default")]),_:3},16))}}),C0=S0,T0=L({__name:"ContextMenuGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Ju),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),E0=T0,M0=L({__name:"ContextMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(n,{emit:e}){const t=n,r=Rn(e);return Z(),(i,s)=>(E(),B(p(xa),Re(De({...t,...p(r)})),{default:S(()=>[U(i.$slots,"default")]),_:3},16))}}),A0=M0,P0=L({__name:"ContextMenuItemIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Ap),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),I0=P0,R0=L({__name:"ContextMenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Rp),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),O0=R0,k0=L({__name:"ContextMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(Op),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),D0=k0,B0=L({__name:"ContextMenuRadioGroup",props:{modelValue:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=Rn(e);return Z(),(i,s)=>(E(),B(p(kp),Re(De({...t,...p(r)})),{default:S(()=>[U(i.$slots,"default")]),_:3},16))}}),q0=B0,L0=L({__name:"ContextMenuRadioItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(n,{emit:e}){const t=n,r=Rn(e);return Z(),(i,s)=>(E(),B(p(Dp),Re(De({...t,...p(r)})),{default:S(()=>[U(i.$slots,"default")]),_:3},16))}}),V0=L0,F0=L({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Bp),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),N0=F0,$0=L({__name:"ContextMenuSub",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(n,{emit:e}){const t=n,o=e;Z();const r=st(t,"open",o,{defaultValue:t.defaultOpen,passive:t.open===void 0});return(i,s)=>(E(),B(p(Lp),{open:p(r),"onUpdate:open":s[0]||(s[0]=a=>Lt(r)?r.value=a:null)},{default:S(()=>[U(i.$slots,"default",{open:p(r)})]),_:3},8,["open"]))}}),U0=$0,z0=L({__name:"ContextMenuSubContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const r=Gt(n,e);return Z(),(i,s)=>(E(),B(p(Vp),J(p(r),{style:{"--reka-context-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-context-menu-content-available-width":"var(--reka-popper-available-width)","--reka-context-menu-content-available-height":"var(--reka-popper-available-height)","--reka-context-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-context-menu-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:S(()=>[U(i.$slots,"default")]),_:3},16))}}),H0=z0,j0=L({__name:"ContextMenuSubTrigger",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Fp),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),W0=j0;function ad(n){return n.pointerType!=="mouse"}var G0=L({inheritAttrs:!1,__name:"ContextMenuTrigger",props:{disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=n,{disabled:t}=Ve(e),{forwardRef:o,currentElement:r}=Z(),i=Np(),s=N({x:0,y:0}),a=F(()=>({getBoundingClientRect:()=>({width:0,height:0,left:s.value.x,right:s.value.x,top:s.value.y,bottom:s.value.y,...s.value})})),l=N(0);function u(){window.clearTimeout(l.value)}function c(m){s.value={x:m.clientX,y:m.clientY},i.onOpenChange(!0)}async function d(m){t.value||(await Ge(),m.defaultPrevented||(u(),c(m),m.preventDefault()))}async function f(m){t.value||(await Ge(),ad(m)&&!m.defaultPrevented&&(u(),l.value=window.setTimeout(()=>c(m),i.pressOpenDelay.value)))}async function h(m){t.value||(await Ge(),ad(m)&&!m.defaultPrevented&&u())}return Le(()=>{r.value&&(i.triggerElement.value=r.value)}),(m,v)=>(E(),ne(Ie,null,[T(p(Xu),{as:"template",reference:a.value},null,8,["reference"]),T(p(de),J({ref:p(o),as:m.as,"as-child":m.asChild,"data-state":p(i).open.value?"open":"closed","data-disabled":p(t)?"":void 0,style:{WebkitTouchCallout:"none",pointerEvents:"auto"}},m.$attrs,{onContextmenu:d,onPointerdown:f,onPointermove:h,onPointercancel:h,onPointerup:h}),{default:S(()=>[U(m.$slots,"default")]),_:3},16,["as","as-child","data-state","data-disabled"])],64))}}),K0=G0;const[dr,Y0]=Be("PopoverRoot");var X0=L({__name:"PopoverRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},modal:{type:Boolean,required:!1,default:!1}},emits:["update:open"],setup(n,{emit:e}){const t=n,o=e,{modal:r}=Ve(t),i=st(t,"open",o,{defaultValue:t.defaultOpen,passive:t.open===void 0}),s=N(),a=N(!1);return Y0({contentId:"",triggerId:"",modal:r,open:i,onOpenChange:l=>{i.value=l},onOpenToggle:()=>{i.value=!i.value},triggerElement:s,hasCustomAnchor:a}),(l,u)=>(E(),B(p($s),null,{default:S(()=>[U(l.$slots,"default",{open:p(i),close:()=>i.value=!1})]),_:3}))}}),Z0=X0,Q0=L({__name:"PopoverAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;Z();const t=dr();return Gm(()=>{t.hasCustomAnchor.value=!0}),Wt(()=>{t.hasCustomAnchor.value=!1}),(o,r)=>(E(),B(p(Us),Re(De(e)),{default:S(()=>[U(o.$slots,"default")]),_:3},16))}}),J0=Q0,ew=L({__name:"PopoverArrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Yu),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),tw=ew,nw=L({__name:"PopoverClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n;Z();const t=dr();return(o,r)=>(E(),B(p(de),{type:o.as==="button"?"button":void 0,as:o.as,"as-child":e.asChild,onClick:r[0]||(r[0]=i=>p(t).onOpenChange(!1))},{default:S(()=>[U(o.$slots,"default")]),_:3},8,["type","as","as-child"]))}}),ow=nw,rw=L({__name:"PopoverContentImpl",props:{trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,o=e,r=ko(ca(t,"trapFocus","disableOutsidePointerEvents")),{forwardRef:i}=Z(),s=dr();return Du(),(a,l)=>(E(),B(p(va),{"as-child":"",loop:"",trapped:a.trapFocus,onMountAutoFocus:l[5]||(l[5]=u=>o("openAutoFocus",u)),onUnmountAutoFocus:l[6]||(l[6]=u=>o("closeAutoFocus",u))},{default:S(()=>[T(p(Vs),{"as-child":"","disable-outside-pointer-events":a.disableOutsidePointerEvents,onPointerDownOutside:l[0]||(l[0]=u=>o("pointerDownOutside",u)),onInteractOutside:l[1]||(l[1]=u=>o("interactOutside",u)),onEscapeKeyDown:l[2]||(l[2]=u=>o("escapeKeyDown",u)),onFocusOutside:l[3]||(l[3]=u=>o("focusOutside",u)),onDismiss:l[4]||(l[4]=u=>p(s).onOpenChange(!1))},{default:S(()=>[T(p(wa),J(p(r),{id:p(s).contentId,ref:p(i),"data-state":p(s).open.value?"open":"closed","aria-labelledby":p(s).triggerId,style:{"--reka-popover-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-popover-content-available-width":"var(--reka-popper-available-width)","--reka-popover-content-available-height":"var(--reka-popper-available-height)","--reka-popover-trigger-width":"var(--reka-popper-anchor-width)","--reka-popover-trigger-height":"var(--reka-popper-anchor-height)"},role:"dialog"}),{default:S(()=>[U(a.$slots,"default")]),_:3},16,["id","data-state","aria-labelledby"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),$p=rw,sw=L({__name:"PopoverContentModal",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,o=e,r=dr(),i=N(!1);fa(!0);const s=Gt(t,o),{forwardRef:a,currentElement:l}=Z();return pa(l),(u,c)=>(E(),B($p,J(p(s),{ref:p(a),"trap-focus":p(r).open.value,"disable-outside-pointer-events":"",onCloseAutoFocus:c[0]||(c[0]=ze(d=>{o("closeAutoFocus",d),i.value||p(r).triggerElement.value?.focus()},["prevent"])),onPointerDownOutside:c[1]||(c[1]=d=>{o("pointerDownOutside",d);const f=d.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,m=f.button===2||h;i.value=m}),onFocusOutside:c[2]||(c[2]=ze(()=>{},["prevent"]))}),{default:S(()=>[U(u.$slots,"default")]),_:3},16,["trap-focus"]))}}),iw=sw,aw=L({__name:"PopoverContentNonModal",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,o=e,r=dr(),i=N(!1),s=N(!1),a=Gt(t,o);return(l,u)=>(E(),B($p,J(p(a),{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:u[0]||(u[0]=c=>{o("closeAutoFocus",c),c.defaultPrevented||(i.value||p(r).triggerElement.value?.focus(),c.preventDefault()),i.value=!1,s.value=!1}),onInteractOutside:u[1]||(u[1]=async c=>{o("interactOutside",c),c.defaultPrevented||(i.value=!0,c.detail.originalEvent.type==="pointerdown"&&(s.value=!0));const d=c.target;p(r).triggerElement.value?.contains(d)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&s.value&&c.preventDefault()})}),{default:S(()=>[U(l.$slots,"default")]),_:3},16))}}),lw=aw,uw=L({__name:"PopoverContent",props:{forceMount:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,o=e,r=dr(),i=Gt(t,o),{forwardRef:s}=Z();return r.contentId||=Rt(void 0,"reka-popover-content"),(a,l)=>(E(),B(p(Vt),{present:a.forceMount||p(r).open.value},{default:S(()=>[p(r).modal.value?(E(),B(iw,J({key:0},p(i),{ref:p(s)}),{default:S(()=>[U(a.$slots,"default")]),_:3},16)):(E(),B(lw,J({key:1},p(i),{ref:p(s)}),{default:S(()=>[U(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),cw=uw,dw=L({__name:"PopoverPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(Fs),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),fw=dw,pw=L({__name:"PopoverTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,t=dr(),{forwardRef:o,currentElement:r}=Z();return t.triggerId||=Rt(void 0,"reka-popover-trigger"),Le(()=>{t.triggerElement.value=r.value}),(i,s)=>(E(),B(zn(p(t).hasCustomAnchor.value?p(de):p(Us)),{"as-child":""},{default:S(()=>[T(p(de),{id:p(t).triggerId,ref:p(o),type:i.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":p(t).open.value,"aria-controls":p(t).contentId,"data-state":p(t).open.value?"open":"closed",as:i.as,"as-child":e.asChild,onClick:p(t).onOpenToggle},{default:S(()=>[U(i.$slots,"default")]),_:3},8,["id","type","aria-expanded","aria-controls","data-state","as","as-child","onClick"])]),_:3}))}}),hw=pw,mw=L({__name:"MenubarArrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Sp),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),vw=mw,gw=L({__name:"MenubarCheckboxItem",props:{modelValue:{type:[Boolean,String],required:!1},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select","update:modelValue"],setup(n,{emit:e}){const t=n,r=Rn(e);return Z(),(i,s)=>(E(),B(p(Pp),Re(De({...t,...p(r)})),{default:S(()=>[U(i.$slots,"default")]),_:3},16))}}),yw=gw;const[Sa,_w]=Be("MenubarRoot");var bw=L({__name:"MenubarRoot",props:{modelValue:{type:String,required:!1},defaultValue:{type:String,required:!1},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,o=e,{forwardRef:r}=Z(),{CollectionSlot:i}=pt({key:"Menubar",isProvider:!0}),s=st(t,"modelValue",o,{defaultValue:t.defaultValue??"",passive:t.modelValue===void 0}),a=N(null),{dir:l,loop:u}=Ve(t),c=bn(l);return _w({modelValue:s,dir:c,loop:u,onMenuOpen:d=>{s.value=d,a.value=d},onMenuClose:()=>{s.value=""},onMenuToggle:d=>{s.value=s.value?"":d,a.value=d}}),(d,f)=>(E(),B(p(i),null,{default:S(()=>[T(p(Kr),{"current-tab-stop-id":a.value,"onUpdate:currentTabStopId":f[0]||(f[0]=h=>a.value=h),orientation:"horizontal",loop:p(u),dir:p(c),"as-child":""},{default:S(()=>[T(p(de),{ref:p(r),role:"menubar"},{default:S(()=>[U(d.$slots,"default",{modelValue:p(s)})]),_:3},512)]),_:3},8,["current-tab-stop-id","loop","dir"])]),_:3}))}}),ww=bw;const[ec,xw]=Be("MenubarMenu");var Sw=L({__name:"MenubarMenu",props:{value:{type:String,required:!1}},setup(n){const t=Rt(n.value),o=Sa();Z();const r=N(),i=N(!1),s=F(()=>o.modelValue.value===t);return Te(s,()=>{s.value||(i.value=!1)}),xw({value:t,triggerElement:r,triggerId:t,contentId:"",wasKeyboardTriggerOpenRef:i}),(a,l)=>(E(),B(p(Tp),{open:s.value,modal:!1,dir:p(o).dir.value,"onUpdate:open":l[0]||(l[0]=u=>{u||p(o).onMenuClose()})},{default:S(()=>[U(a.$slots,"default")]),_:3},8,["open","dir"]))}}),Cw=Sw,Tw=L({__name:"MenubarContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1,default:"start"},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(n,{emit:e}){const r=Gt(n,e);Z();const i=Sa(),s=ec();s.contentId||=Rt(void 0,"reka-menubar-content");const{getItems:a}=pt({key:"Menubar"}),l=N(!1);function u(c){const f=c.target.hasAttribute("data-reka-menubar-subtrigger"),m=(i.dir.value==="rtl"?"ArrowRight":"ArrowLeft")===c.key;if(!m&&f)return;let g=a().filter(b=>b.ref.dataset.disabled!=="").map(b=>b.ref.dataset.value);m&&g.reverse();const y=g.indexOf(s.value);g=i.loop.value?qu(g,y+1):g.slice(y+1);const[_]=g;_&&i.onMenuOpen(_)}return(c,d)=>(E(),B(p(Ip),J(p(r),{id:p(s).contentId,"data-reka-menubar-content":"","aria-labelledby":p(s).triggerId,style:{"--reka-menubar-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-menubar-content-available-width":"var(--reka-popper-available-width)","--reka-menubar-content-available-height":"var(--reka-popper-available-height)","--reka-menubar-trigger-width":"var(--reka-popper-anchor-width)","--reka-menubar-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:d[0]||(d[0]=f=>{!p(i).modelValue.value&&!l.value&&p(s).triggerElement.value?.focus(),l.value=!1,f.preventDefault()}),onFocusOutside:d[1]||(d[1]=f=>{const h=f.target;p(a)().filter(v=>v.ref.dataset.disabled!=="").some(v=>v.ref.contains(h))&&f.preventDefault()}),onInteractOutside:d[2]||(d[2]=f=>{l.value=!0}),onEntryFocus:d[3]||(d[3]=f=>{p(s).wasKeyboardTriggerOpenRef.value||f.preventDefault()}),onKeydown:St(u,["arrow-right","arrow-left"])}),{default:S(()=>[U(c.$slots,"default")]),_:3},16,["id","aria-labelledby"]))}}),Ew=Tw,Mw=L({__name:"MenubarGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Ju),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),Aw=Mw,Pw=L({__name:"MenubarItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(n,{emit:e}){const t=n,r=Rn(e);return Z(),(i,s)=>(E(),B(p(xa),Re(De({...t,...p(r)})),{default:S(()=>[U(i.$slots,"default")]),_:3},16))}}),Iw=Pw,Rw=L({__name:"MenubarItemIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Ap),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),Ow=Rw,kw=L({__name:"MenubarLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Rp),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),Dw=kw,Bw=L({__name:"MenubarPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(Op),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),qw=Bw,Lw=L({__name:"MenubarRadioGroup",props:{modelValue:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=Rn(e);return Z(),(i,s)=>(E(),B(p(kp),Re(De({...t,...p(r)})),{default:S(()=>[U(i.$slots,"default")]),_:3},16))}}),Vw=Lw,Fw=L({__name:"MenubarRadioItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(n,{emit:e}){const r=Gt(n,e);return Z(),(i,s)=>(E(),B(p(Dp),Re(De(p(r))),{default:S(()=>[U(i.$slots,"default")]),_:3},16))}}),Nw=Fw,$w=L({__name:"MenubarSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Bp),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),Uw=$w,zw=L({__name:"MenubarSub",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(n,{emit:e}){const t=n,o=e;Z();const r=st(t,"open",o,{defaultValue:t.defaultOpen??!1,passive:t.open===void 0});return(i,s)=>(E(),B(p(Lp),{open:p(r),"onUpdate:open":s[0]||(s[0]=a=>Lt(r)?r.value=a:null)},{default:S(()=>[U(i.$slots,"default",{open:p(r)})]),_:3},8,["open"]))}}),Hw=zw,jw=L({__name:"MenubarSubContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const r=Gt(n,e);Z();const{getItems:i}=pt({key:"Menubar"}),s=Sa(),a=ec();function l(u){if(u.target.hasAttribute("data-reka-menubar-subtrigger"))return;let f=i().filter(v=>v.ref.dataset.disabled!=="").map(v=>v.ref.dataset.value);const h=f.indexOf(a.value);f=s.loop.value?qu(f,h+1):f.slice(h+1);const[m]=f;m&&s.onMenuOpen(m)}return(u,c)=>(E(),B(p(Vp),J(p(r),{"data-reka-menubar-content":"",style:{"--reka-menubar-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-menubar-content-available-width":"var(--reka-popper-available-width)","--reka-menubar-content-available-height":"var(--reka-popper-available-height)","--reka-menubar-trigger-width":"var(--reka-popper-anchor-width)","--reka-menubar-trigger-height":"var(--reka-popper-anchor-height)"},onKeydown:St(l,["arrow-right"])}),{default:S(()=>[U(u.$slots,"default")]),_:3},16))}}),Ww=jw,Gw=L({__name:"MenubarSubTrigger",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(Fp),J(e,{"data-reka-menubar-subtrigger":""}),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),Kw=Gw,Yw=L({__name:"MenubarTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=Sa(),t=ec(),{forwardRef:o,currentElement:r}=Z(),{CollectionItem:i}=pt({key:"Menubar"}),s=N(!1),a=F(()=>e.modelValue.value===t.value);return Le(()=>{t.triggerElement=r}),(l,u)=>(E(),B(p(Ns),{"as-child":"",focusable:!l.disabled,"tab-stop-id":p(t).value},{default:S(()=>[T(p(i),null,{default:S(()=>[T(p(Xu),{"as-child":""},{default:S(()=>[T(p(de),{id:p(t).triggerId,ref:p(o),as:l.as,"as-child":l.asChild,type:l.as==="button"?"button":void 0,role:"menuitem","aria-haspopup":"menu","aria-expanded":a.value,"aria-controls":a.value?p(t).contentId:void 0,"data-highlighted":s.value?"":void 0,"data-state":a.value?"open":"closed","data-disabled":l.disabled?"":void 0,disabled:l.disabled,"data-value":p(t).value,onPointerdown:u[0]||(u[0]=c=>{!l.disabled&&c.button===0&&c.ctrlKey===!1&&(p(e).onMenuOpen(p(t).value),a.value||c.preventDefault())}),onPointerenter:u[1]||(u[1]=()=>{p(e).modelValue.value&&!a.value&&(p(e).onMenuOpen(p(t).value),p(r)?.focus())}),onKeydown:u[2]||(u[2]=St(c=>{l.disabled||(["Enter"," "].includes(c.key)&&p(e).onMenuToggle(p(t).value),c.key==="ArrowDown"&&p(e).onMenuOpen(p(t).value),["Enter"," ","ArrowDown"].includes(c.key)&&(p(t).wasKeyboardTriggerOpenRef.value=!0,c.preventDefault()))},["enter","space","arrow-down"])),onFocus:u[3]||(u[3]=c=>s.value=!0),onBlur:u[4]||(u[4]=c=>s.value=!1)},{default:S(()=>[U(l.$slots,"default")]),_:3},8,["id","as","as-child","type","aria-expanded","aria-controls","data-highlighted","data-state","data-disabled","disabled","data-value"])]),_:3})]),_:3})]),_:3},8,["focusable","tab-stop-id"]))}}),Xw=Yw;let Qa=new Map,zl=!1;try{zl=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let Zi=!1;try{Zi=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Up={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class zp{format(e){let t="";if(!zl&&this.options.signDisplay!=null?t=Qw(this.numberFormatter,this.options.signDisplay,e):t=this.numberFormatter.format(e),this.options.style==="unit"&&!Zi){var o;let{unit:r,unitDisplay:i="short",locale:s}=this.resolvedOptions();if(!r)return t;let a=(o=Up[r])===null||o===void 0?void 0:o[i];t+=a[s]||a.default}return t}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,t){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,t);if(t<e)throw new RangeError("End date must be >= start date");return`${this.format(e)}  ${this.format(t)}`}formatRangeToParts(e,t){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,t);if(t<e)throw new RangeError("End date must be >= start date");let o=this.numberFormatter.formatToParts(e),r=this.numberFormatter.formatToParts(t);return[...o.map(i=>({...i,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...r.map(i=>({...i,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!zl&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!Zi&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,t={}){this.numberFormatter=Zw(e,t),this.options=t}}function Zw(n,e={}){let{numberingSystem:t}=e;if(t&&n.includes("-nu-")&&(n.includes("-u-")||(n+="-u-"),n+=`-nu-${t}`),e.style==="unit"&&!Zi){var o;let{unit:s,unitDisplay:a="short"}=e;if(!s)throw new Error('unit option must be provided with style: "unit"');if(!(!((o=Up[s])===null||o===void 0)&&o[a]))throw new Error(`Unsupported unit ${s} with unitDisplay = ${a}`);e={...e,style:"decimal"}}let r=n+(e?Object.entries(e).sort((s,a)=>s[0]<a[0]?-1:1).join():"");if(Qa.has(r))return Qa.get(r);let i=new Intl.NumberFormat(n,e);return Qa.set(r,i),i}function Qw(n,e,t){if(e==="auto")return n.format(t);if(e==="never")return n.format(Math.abs(t));{let o=!1;if(e==="always"?o=t>0||Object.is(t,0):e==="exceptZero"&&(Object.is(t,-0)||Object.is(t,0)?t=Math.abs(t):o=t>0),o){let r=n.format(-t),i=n.format(t),s=r.replace(i,"").replace(/\u200e|\u061C/,"");return[...s].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),r.replace(i,"!!!").replace(s,"+").replace("!!!",i)}else return n.format(t)}}const Jw=new RegExp("^.*\\(.*\\).*$"),ex=["latn","arab","hanidec","deva","beng","fullwide"];class Hp{parse(e){return Ja(this.locale,this.options,e).parse(e)}isValidPartialNumber(e,t,o){return Ja(this.locale,this.options,e).isValidPartialNumber(e,t,o)}getNumberingSystem(e){return Ja(this.locale,this.options,e).options.numberingSystem}constructor(e,t={}){this.locale=e,this.options=t}}const ld=new Map;function Ja(n,e,t){let o=ud(n,e);if(!n.includes("-nu-")&&!o.isValidPartialNumber(t)){for(let r of ex)if(r!==o.options.numberingSystem){let i=ud(n+(n.includes("-u-")?"-nu-":"-u-nu-")+r,e);if(i.isValidPartialNumber(t))return i}}return o}function ud(n,e){let t=n+(e?Object.entries(e).sort((r,i)=>r[0]<i[0]?-1:1).join():""),o=ld.get(t);return o||(o=new tx(n,e),ld.set(t,o)),o}class tx{parse(e){let t=this.sanitize(e);if(this.symbols.group&&(t=yr(t,this.symbols.group,"")),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(t=t.replace(this.symbols.minusSign,"-")),t=t.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let s=t.indexOf("-");t=t.replace("-",""),t=t.replace("+","");let a=t.indexOf(".");a===-1&&(a=t.length),t=t.replace(".",""),a-2===0?t=`0.${t}`:a-2===-1?t=`0.0${t}`:a-2===-2?t="0.00":t=`${t.slice(0,a-2)}.${t.slice(a-2)}`,s>-1&&(t=`-${t}`)}let o=t?+t:NaN;if(isNaN(o))return NaN;if(this.options.style==="percent"){var r,i;let s={...this.options,style:"decimal",minimumFractionDigits:Math.min(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)+2,20),maximumFractionDigits:Math.min(((i=this.options.maximumFractionDigits)!==null&&i!==void 0?i:0)+2,20)};return new Hp(this.locale,s).parse(new zp(this.locale,s).format(o))}return this.options.currencySign==="accounting"&&Jw.test(e)&&(o=-1*o),o}sanitize(e){return e=e.replace(this.symbols.literals,""),this.symbols.minusSign&&(e=e.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(e=e.replace(",",this.symbols.decimal),e=e.replace("",this.symbols.decimal)),this.symbols.group&&(e=yr(e,".",this.symbols.group))),this.symbols.group===""&&e.includes("'")&&(e=yr(e,"'",this.symbols.group)),this.options.locale==="fr-FR"&&this.symbols.group&&(e=yr(e," ",this.symbols.group),e=yr(e,/\u00A0/g,this.symbols.group)),e}isValidPartialNumber(e,t=-1/0,o=1/0){return e=this.sanitize(e),this.symbols.minusSign&&e.startsWith(this.symbols.minusSign)&&t<0?e=e.slice(this.symbols.minusSign.length):this.symbols.plusSign&&e.startsWith(this.symbols.plusSign)&&o>0&&(e=e.slice(this.symbols.plusSign.length)),this.symbols.group&&e.startsWith(this.symbols.group)||this.symbols.decimal&&e.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(e=yr(e,this.symbols.group,"")),e=e.replace(this.symbols.numeral,""),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,"")),e.length===0)}constructor(e,t={}){this.locale=e,t.roundingIncrement!==1&&t.roundingIncrement!=null&&(t.maximumFractionDigits==null&&t.minimumFractionDigits==null?(t.maximumFractionDigits=0,t.minimumFractionDigits=0):t.maximumFractionDigits==null?t.maximumFractionDigits=t.minimumFractionDigits:t.minimumFractionDigits==null&&(t.minimumFractionDigits=t.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(e,t),this.options=this.formatter.resolvedOptions(),this.symbols=ox(e,this.formatter,this.options,t);var o,r;this.options.style==="percent"&&(((o=this.options.minimumFractionDigits)!==null&&o!==void 0?o:0)>18||((r=this.options.maximumFractionDigits)!==null&&r!==void 0?r:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const cd=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),nx=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function ox(n,e,t,o){var r,i,s,a;let l=new Intl.NumberFormat(n,{...t,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),u=l.formatToParts(-10000.111),c=l.formatToParts(10000.111),d=nx.map(A=>l.formatToParts(A));var f;let h=(f=(r=u.find(A=>A.type==="minusSign"))===null||r===void 0?void 0:r.value)!==null&&f!==void 0?f:"-",m=(i=c.find(A=>A.type==="plusSign"))===null||i===void 0?void 0:i.value;!m&&(o?.signDisplay==="exceptZero"||o?.signDisplay==="always")&&(m="+");let g=(s=new Intl.NumberFormat(n,{...t,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(A=>A.type==="decimal"))===null||s===void 0?void 0:s.value,y=(a=u.find(A=>A.type==="group"))===null||a===void 0?void 0:a.value,_=u.filter(A=>!cd.has(A.type)).map(A=>dd(A.value)),b=d.flatMap(A=>A.filter(O=>!cd.has(O.type)).map(O=>dd(O.value))),x=[...new Set([..._,...b])].sort((A,O)=>O.length-A.length),C=x.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${x.join("|")}|[\\p{White_Space}]`,"gu"),k=[...new Intl.NumberFormat(t.locale,{useGrouping:!1}).format(9876543210)].reverse(),P=new Map(k.map((A,O)=>[A,O])),R=new RegExp(`[${k.join("")}]`,"g");return{minusSign:h,plusSign:m,decimal:g,group:y,literals:C,numeral:R,index:A=>String(P.get(A))}}function yr(n,e,t){return n.replaceAll?n.replaceAll(e,t):n.split(e).join(t)}function dd(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function jp(n){const{disabled:e}=n,t=N(),o=Co(),r=()=>window.clearTimeout(t.value),i=f=>{r(),!e.value&&(o.trigger(),t.value=window.setTimeout(()=>{i(60)},f))},s=()=>{i(400)},a=()=>{r()},l=N(!1),u=F(()=>jt(n.target)),c=f=>{f.button!==0||l.value||(f.preventDefault(),l.value=!0,s())},d=()=>{l.value=!1,a()};return on&&(We(u||window,"pointerdown",c),We(window,"pointerup",d),We(window,"pointercancel",d)),{isPressed:l,onTrigger:o.on}}function fd(n,e=N({})){return Pu(()=>new zp(n.value,e.value))}function rx(n,e=N({})){return Pu(()=>new Hp(n.value,e.value))}function pd(n,e,t){let o=n==="+"?e+t:e-t;if(e%1!==0||t%1!==0){const r=e.toString().split("."),i=t.toString().split("."),s=r[1]&&r[1].length||0,a=i[1]&&i[1].length||0,l=10**Math.max(s,a);e=Math.round(e*l),t=Math.round(t*l),o=n==="+"?e+t:e-t,o/=l}return o}const[tc,sx]=Be("NumberFieldRoot");var ix=L({inheritAttrs:!1,__name:"NumberFieldRoot",props:{defaultValue:{type:Number,required:!1,default:void 0},modelValue:{type:[Number,null],required:!1},min:{type:Number,required:!1},max:{type:Number,required:!1},step:{type:Number,required:!1,default:1},stepSnapping:{type:Boolean,required:!1,default:!0},focusOnChange:{type:Boolean,required:!1,default:!0},formatOptions:{type:null,required:!1},locale:{type:String,required:!1},disabled:{type:Boolean,required:!1},readonly:{type:Boolean,required:!1},disableWheelChange:{type:Boolean,required:!1},invertWheelChange:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,o=e,{disabled:r,readonly:i,disableWheelChange:s,invertWheelChange:a,min:l,max:u,step:c,stepSnapping:d,formatOptions:f,id:h,locale:m}=Ve(t),v=st(t,"modelValue",o,{defaultValue:t.defaultValue,passive:t.modelValue===void 0}),{primitiveElement:g,currentElement:y}=Ao(),_=Ag(m),b=lr(y),x=N(),C=F(()=>!eo(v.value)&&(Q(v.value)===l.value||l.value&&!isNaN(v.value)?pd("-",v.value,c.value)<l.value:!1)),k=F(()=>!eo(v.value)&&(Q(v.value)===u.value||u.value&&!isNaN(v.value)?pd("+",v.value,c.value)>u.value:!1));function P(ce,re=1){if(t.focusOnChange&&x.value?.focus(),t.disabled||t.readonly)return;const pe=D.parse(x.value?.value??"");isNaN(pe)?v.value=l.value??0:ce==="increase"?v.value=Q(pe+(c.value??1)*re):v.value=Q(pe-(c.value??1)*re)}function R(ce=1){P("increase",ce)}function M(ce=1){P("decrease",ce)}function A(ce){ce==="min"&&l.value!==void 0?v.value=Q(l.value):ce==="max"&&u.value!==void 0&&(v.value=Q(u.value))}const O=fd(_,f),D=rx(_,f),V=F(()=>O.resolvedOptions().maximumFractionDigits>0?"decimal":"numeric"),$=fd(_,f),Y=F(()=>eo(v.value)||isNaN(v.value)?"":$.format(v.value));function W(ce){return D.isValidPartialNumber(ce,l.value,u.value)}function G(ce){x.value&&(x.value.value=ce)}function Q(ce){let re;return c.value===void 0||isNaN(c.value)||!d.value?re=zr(ce,l.value,u.value):re=Pv(ce,l.value,u.value,c.value),re=D.parse(O.format(re)),re}function ge(ce){const re=D.parse(ce);return v.value=isNaN(re)?void 0:Q(re),ce.length?(isNaN(re),G(Y.value)):G(ce)}return sx({modelValue:v,handleDecrease:M,handleIncrease:R,handleMinMaxValue:A,inputMode:V,inputEl:x,onInputElement:ce=>x.value=ce,textValue:Y,validate:W,applyInputValue:ge,disabled:r,readonly:i,disableWheelChange:s,invertWheelChange:a,max:u,min:l,isDecreaseDisabled:C,isIncreaseDisabled:k,id:h}),(ce,re)=>(E(),B(p(de),J(ce.$attrs,{ref_key:"primitiveElement",ref:g,role:"group",as:ce.as,"as-child":ce.asChild,"data-disabled":p(r)?"":void 0,"data-readonly":p(i)?"":void 0}),{default:S(()=>[U(ce.$slots,"default",{modelValue:p(v),textValue:Y.value}),p(b)&&ce.name?(E(),B(p(Xr),{key:0,type:"text",value:p(v),name:ce.name,disabled:p(r),readonly:p(i),required:ce.required},null,8,["value","name","disabled","readonly","required"])):ue("v-if",!0)]),_:3},16,["as","as-child","data-disabled","data-readonly"]))}}),ax=ix,lx=L({__name:"NumberFieldDecrement",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,t=tc(),o=F(()=>t.disabled?.value||t.readonly.value||e.disabled||t.isDecreaseDisabled.value),{primitiveElement:r,currentElement:i}=Ao(),{isPressed:s,onTrigger:a}=jp({target:i,disabled:o});return a(()=>{t.handleDecrease()}),(l,u)=>(E(),B(p(de),J(e,{ref_key:"primitiveElement",ref:r,tabindex:"-1","aria-label":"Decrease",type:l.as==="button"?"button":void 0,style:{userSelect:p(s)?"none":void 0},disabled:o.value?"":void 0,"data-disabled":o.value?"":void 0,"data-pressed":p(s)?"true":void 0,onContextmenu:u[0]||(u[0]=ze(()=>{},["prevent"]))}),{default:S(()=>[U(l.$slots,"default")]),_:3},16,["type","style","disabled","data-disabled","data-pressed"]))}}),ux=lx,cx=L({__name:"NumberFieldIncrement",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,t=tc(),o=F(()=>t.disabled?.value||t.readonly.value||e.disabled||t.isIncreaseDisabled.value),{primitiveElement:r,currentElement:i}=Ao(),{isPressed:s,onTrigger:a}=jp({target:i,disabled:o});return a(()=>{t.handleIncrease()}),(l,u)=>(E(),B(p(de),J(e,{ref_key:"primitiveElement",ref:r,tabindex:"-1","aria-label":"Increase",type:l.as==="button"?"button":void 0,style:{userSelect:p(s)?"none":void 0},disabled:o.value?"":void 0,"data-disabled":o.value?"":void 0,"data-pressed":p(s)?"true":void 0,onContextmenu:u[0]||(u[0]=ze(()=>{},["prevent"]))}),{default:S(()=>[U(l.$slots,"default")]),_:3},16,["type","style","disabled","data-disabled","data-pressed"]))}}),dx=cx,fx=L({__name:"NumberFieldInput",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(n){const e=n,{primitiveElement:t,currentElement:o}=Ao(),r=tc();function i(l){r.disableWheelChange.value||l.target===et()&&(Math.abs(l.deltaY)<=Math.abs(l.deltaX)||(l.preventDefault(),l.deltaY>0?r.invertWheelChange.value?r.handleDecrease():r.handleIncrease():l.deltaY<0&&(r.invertWheelChange.value?r.handleIncrease():r.handleDecrease())))}Le(()=>{r.onInputElement(o.value)});const s=N(r.textValue.value);Te(()=>r.textValue.value,()=>{s.value=r.textValue.value},{immediate:!0,deep:!0});function a(){requestAnimationFrame(()=>{s.value=r.textValue.value})}return(l,u)=>(E(),B(p(de),J(e,{id:p(r).id.value,ref_key:"primitiveElement",ref:t,value:s.value,role:"spinbutton",type:"text",tabindex:"0",inputmode:p(r).inputMode.value,disabled:p(r).disabled.value?"":void 0,"data-disabled":p(r).disabled.value?"":void 0,readonly:p(r).readonly.value?"":void 0,"data-readonly":p(r).readonly.value?"":void 0,autocomplete:"off",autocorrect:"off",spellcheck:"false","aria-roledescription":"Number field","aria-valuenow":p(r).modelValue.value,"aria-valuemin":p(r).min.value,"aria-valuemax":p(r).max.value,onKeydown:[u[0]||(u[0]=St(ze(c=>p(r).handleIncrease(),["prevent"]),["up"])),u[1]||(u[1]=St(ze(c=>p(r).handleDecrease(),["prevent"]),["down"])),u[2]||(u[2]=St(ze(c=>p(r).handleIncrease(10),["prevent"]),["page-up"])),u[3]||(u[3]=St(ze(c=>p(r).handleDecrease(10),["prevent"]),["page-down"])),u[4]||(u[4]=St(ze(c=>p(r).handleMinMaxValue("min"),["prevent"]),["home"])),u[5]||(u[5]=St(ze(c=>p(r).handleMinMaxValue("max"),["prevent"]),["end"])),u[8]||(u[8]=St(c=>p(r).applyInputValue(c.target?.value),["enter"]))],onWheel:i,onBeforeinput:u[6]||(u[6]=c=>{const d=c.target;let f=d.value.slice(0,d.selectionStart??void 0)+(c.data??"")+d.value.slice(d.selectionEnd??void 0);p(r).validate(f)||c.preventDefault()}),onInput:u[7]||(u[7]=c=>{const d=c.target;s.value=d.value}),onChange:a,onBlur:u[9]||(u[9]=c=>p(r).applyInputValue(c.target?.value))}),{default:S(()=>[U(l.$slots,"default")]),_:3},16,["id","value","inputmode","disabled","data-disabled","readonly","data-readonly","aria-valuenow","aria-valuemin","aria-valuemax"]))}}),px=fx;const hx="radio.select";function mx(n,e,t){Hr(hx,t,{originalEvent:n,value:e})}var vx=L({__name:"Radio",props:{id:{type:String,required:!1},value:{type:null,required:!1},disabled:{type:Boolean,required:!1,default:!1},checked:{type:Boolean,required:!1,default:void 0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:checked","select"],setup(n,{emit:e}){const t=n,o=e,r=st(t,"checked",o,{passive:t.checked===void 0}),{value:i}=Ve(t),{forwardRef:s,currentElement:a}=Z(),l=lr(a),u=F(()=>t.id&&a.value?document.querySelector(`[for="${t.id}"]`)?.innerText??t.value:void 0);function c(d){t.disabled||mx(d,t.value,f=>{o("select",f),!f?.defaultPrevented&&(r.value=!0,l.value&&f.stopPropagation())})}return(d,f)=>(E(),B(p(de),J(d.$attrs,{id:d.id,ref:p(s),role:"radio",type:d.as==="button"?"button":void 0,as:d.as,"aria-checked":p(r),"aria-label":u.value,"as-child":d.asChild,disabled:d.disabled?"":void 0,"data-state":p(r)?"checked":"unchecked","data-disabled":d.disabled?"":void 0,value:p(i),required:d.required,name:d.name,onClick:ze(c,["stop"])}),{default:S(()=>[U(d.$slots,"default",{checked:p(r)}),p(l)&&d.name?(E(),B(p(Xr),{key:0,type:"radio",tabindex:"-1",value:p(i),checked:!!p(r),name:d.name,disabled:d.disabled,required:d.required},null,8,["value","checked","name","disabled","required"])):ue("v-if",!0)]),_:3},16,["id","type","as","aria-checked","aria-label","as-child","disabled","data-state","data-disabled","value","required","name"]))}}),gx=vx;const[yx,_x]=Be("RadioGroupRoot");var bx=L({__name:"RadioGroupRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},disabled:{type:Boolean,required:!1,default:!1},orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,o=e,{forwardRef:r,currentElement:i}=Z(),s=st(t,"modelValue",o,{defaultValue:t.defaultValue,passive:t.modelValue===void 0}),{disabled:a,loop:l,orientation:u,name:c,required:d,dir:f}=Ve(t),h=bn(f),m=lr(i);return _x({modelValue:s,changeModelValue:v=>{s.value=v},disabled:a,loop:l,orientation:u,name:c?.value,required:d}),(v,g)=>(E(),B(p(Kr),{"as-child":"",orientation:p(u),dir:p(h),loop:p(l)},{default:S(()=>[T(p(de),{ref:p(r),role:"radiogroup","data-disabled":p(a)?"":void 0,"as-child":v.asChild,as:v.as,"aria-orientation":p(u),"aria-required":p(d),dir:p(h)},{default:S(()=>[U(v.$slots,"default",{modelValue:p(s)}),p(m)&&p(c)?(E(),B(p(Xr),{key:0,required:p(d),disabled:p(a),value:p(s),name:p(c)},null,8,["required","disabled","value","name"])):ue("v-if",!0)]),_:3},8,["data-disabled","as-child","as","aria-orientation","aria-required","dir"])]),_:3},8,["orientation","dir","loop"]))}}),wx=bx;const[cO,xx]=Be("RadioGroupItem");var Sx=L({inheritAttrs:!1,__name:"RadioGroupItem",props:{id:{type:String,required:!1},value:{type:null,required:!1},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["select"],setup(n,{emit:e}){const t=n,o=e,{forwardRef:r,currentElement:i}=Z(),s=yx(),a=F(()=>s.disabled.value||t.disabled),l=F(()=>s.required.value||t.required),u=F(()=>so(s.modelValue?.value,t.value));xx({disabled:a,checked:u});const c=N(!1),d=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];We("keydown",h=>{d.includes(h.key)&&(c.value=!0)}),We("keyup",()=>{c.value=!1});function f(){setTimeout(()=>{c.value&&i.value?.click()},0)}return(h,m)=>(E(),B(p(Ns),{checked:u.value,disabled:a.value,"as-child":"",focusable:!a.value,active:u.value},{default:S(()=>[T(gx,J({...h.$attrs,...t},{ref:p(r),checked:u.value,required:l.value,disabled:a.value,"onUpdate:checked":m[0]||(m[0]=v=>p(s).changeModelValue(h.value)),onSelect:m[1]||(m[1]=v=>o("select",v)),onKeydown:m[2]||(m[2]=St(ze(()=>{},["prevent"]),["enter"])),onFocus:f}),{default:S(()=>[U(h.$slots,"default",{checked:u.value,required:l.value,disabled:a.value})]),_:3},16,["checked","required","disabled"])]),_:3},8,["checked","disabled","focusable","active"]))}}),Cx=Sx;const[fn,Tx]=Be("ScrollAreaRoot");var Ex=L({__name:"ScrollAreaRoot",props:{type:{type:String,required:!1,default:"hover"},dir:{type:String,required:!1},scrollHideDelay:{type:Number,required:!1,default:600},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n,{expose:e}){const t=n,o=N(0),r=N(0),i=N(),s=N(),a=N(),l=N(),u=N(!1),c=N(!1),{type:d,dir:f,scrollHideDelay:h}=Ve(t),m=bn(f);function v(){i.value?.scrollTo({top:0})}function g(){i.value?.scrollTo({top:0,left:0})}e({viewport:i,scrollTop:v,scrollTopLeft:g});const{forwardRef:y,currentElement:_}=Z();return Tx({type:d,dir:m,scrollHideDelay:h,scrollArea:_,viewport:i,onViewportChange:b=>{i.value=b||void 0},content:s,onContentChange:b=>{s.value=b},scrollbarX:a,scrollbarXEnabled:u,scrollbarY:l,scrollbarYEnabled:c,onScrollbarXChange:b=>{a.value=b||void 0},onScrollbarYChange:b=>{l.value=b||void 0},onScrollbarXEnabledChange:b=>{u.value=b},onScrollbarYEnabledChange:b=>{c.value=b},onCornerWidthChange:b=>{o.value=b},onCornerHeightChange:b=>{r.value=b}}),(b,x)=>(E(),B(p(de),{ref:p(y),"as-child":t.asChild,as:b.as,dir:p(m),style:wt({position:"relative","--reka-scroll-area-corner-width":`${o.value}px`,"--reka-scroll-area-corner-height":`${r.value}px`})},{default:S(()=>[U(b.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),Mx=Ex,Ax=L({__name:"ScrollAreaCornerImpl",setup(n){const e=fn(),t=N(0),o=N(0),r=F(()=>!!t.value&&!!o.value);function i(){const a=e.scrollbarX.value?.offsetHeight||0;e.onCornerHeightChange(a),o.value=a}function s(){const a=e.scrollbarY.value?.offsetWidth||0;e.onCornerWidthChange(a),t.value=a}return Mo(e.scrollbarX.value,i),Mo(e.scrollbarY.value,s),Te(()=>e.scrollbarX.value,i),Te(()=>e.scrollbarY.value,s),(a,l)=>r.value?(E(),B(p(de),J({key:0,style:{width:`${t.value}px`,height:`${o.value}px`,position:"absolute",right:p(e).dir.value==="ltr"?0:void 0,left:p(e).dir.value==="rtl"?0:void 0,bottom:0}},a.$parent?.$props),{default:S(()=>[U(a.$slots,"default")]),_:3},16,["style"])):ue("v-if",!0)}}),Px=Ax,Ix=L({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,{forwardRef:t}=Z(),o=fn(),r=F(()=>!!o.scrollbarX.value&&!!o.scrollbarY.value),i=F(()=>o.type.value!=="scroll"&&r.value);return(s,a)=>i.value?(E(),B(Px,J({key:0},e,{ref:p(t)}),{default:S(()=>[U(s.$slots,"default")]),_:3},16)):ue("v-if",!0)}}),Rx=Ix;function Wp(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const o=(e[1]-e[0])/(n[1]-n[0]);return e[0]+o*(t-n[0])}}function Ca(n){const e=Gp(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,o=(n.scrollbar.size-t)*e;return Math.max(o,18)}function Gp(n,e){const t=n/e;return Number.isNaN(t)?0:t}function Ox(n,e=()=>{}){let t={left:n.scrollLeft,top:n.scrollTop},o=0;return(function r(){const i={left:n.scrollLeft,top:n.scrollTop},s=t.left!==i.left,a=t.top!==i.top;(s||a)&&e(),t=i,o=window.requestAnimationFrame(r)})(),()=>window.cancelAnimationFrame(o)}function hd(n,e,t="ltr"){const o=Ca(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-r,s=e.content-e.viewport,a=i-o,l=t==="ltr"?[0,s]:[s*-1,0],u=zr(n,l[0],l[1]);return Wp([0,s],[0,a])(u)}function ii(n){return n?Number.parseInt(n,10):0}function kx(n,e,t,o="ltr"){const r=Ca(t),i=r/2,s=e||i,a=r-s,l=t.scrollbar.paddingStart+s,u=t.scrollbar.size-t.scrollbar.paddingEnd-a,c=t.content-t.viewport,d=o==="ltr"?[0,c]:[c*-1,0];return Wp([l,u],d)(n)}function md(n,e){return n>0&&n<e}var Dx=L({__name:"ScrollAreaScrollbarX",setup(n){const e=fn(),t=Ta(),{forwardRef:o,currentElement:r}=Z();Le(()=>{r.value&&e.onScrollbarXChange(r.value)});const i=F(()=>t.sizes.value);return(s,a)=>(E(),B(Kp,{ref:p(o),"is-horizontal":!0,"data-orientation":"horizontal",style:wt({bottom:0,left:p(e).dir.value==="rtl"?"var(--reka-scroll-area-corner-width)":0,right:p(e).dir.value==="ltr"?"var(--reka-scroll-area-corner-width)":0,"--reka-scroll-area-thumb-width":i.value?`${p(Ca)(i.value)}px`:void 0}),onOnDragScroll:a[0]||(a[0]=l=>p(t).onDragScroll(l.x))},{default:S(()=>[U(s.$slots,"default")]),_:3},8,["style"]))}}),Bx=Dx,qx=L({__name:"ScrollAreaScrollbarY",setup(n){const e=fn(),t=Ta(),{forwardRef:o,currentElement:r}=Z();Le(()=>{r.value&&e.onScrollbarYChange(r.value)});const i=F(()=>t.sizes.value);return(s,a)=>(E(),B(Kp,{ref:p(o),"is-horizontal":!1,"data-orientation":"vertical",style:wt({top:0,right:p(e).dir.value==="ltr"?0:void 0,left:p(e).dir.value==="rtl"?0:void 0,bottom:"var(--reka-scroll-area-corner-height)","--reka-scroll-area-thumb-height":i.value?`${p(Ca)(i.value)}px`:void 0}),onOnDragScroll:a[0]||(a[0]=l=>p(t).onDragScroll(l.y))},{default:S(()=>[U(s.$slots,"default")]),_:3},8,["style"]))}}),Lx=qx,Vx=L({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean,required:!1}},setup(n){const e=fn(),t=js(),{forwardRef:o}=Z(),r=N(!1),i=Ru(()=>{if(e.viewport.value){const s=e.viewport.value.offsetWidth<e.viewport.value.scrollWidth,a=e.viewport.value.offsetHeight<e.viewport.value.scrollHeight;r.value=t.isHorizontal.value?s:a}},10);return Le(()=>i()),Mo(e.viewport,i),Mo(e.content,i),(s,a)=>(E(),B(p(Vt),{present:s.forceMount||r.value},{default:S(()=>[T(oc,J(s.$attrs,{ref:p(o),"data-state":r.value?"visible":"hidden"}),{default:S(()=>[U(s.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),nc=Vx,Fx=L({inheritAttrs:!1,__name:"ScrollAreaScrollbarGlimpse",props:{forceMount:{type:Boolean,required:!1}},setup(n){const e=fn(),t=js(),{forwardRef:o}=Z(),{state:r,dispatch:i}=Bu("hidden",{hidden:{POINTER_ENTER:"glimpse",SCROLL:"scrolling"},glimpse:{HIDE:"hidden",POINTER_LEAVE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"glimpse"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}}),s=F(()=>r.value!=="hidden");function a(){i("POINTER_ENTER")}function l(){i("POINTER_LEAVE")}const u=Ru(()=>i("SCROLL_END"),100);return nt(c=>{if(r.value==="glimpse"){const d=window.setTimeout(()=>i("HIDE"),e.scrollHideDelay.value);c(()=>{window.clearTimeout(d)})}}),nt(c=>{if(r.value==="idle"){const d=window.setTimeout(()=>i("HIDE"),e.scrollHideDelay.value);c(()=>{window.clearTimeout(d)})}}),nt(c=>{const d=e.viewport.value,f=t.isHorizontal.value?"scrollLeft":"scrollTop";if(d){let h=d[f];const m=()=>{const v=d[f];h!==v&&(i("SCROLL"),u()),h=v};d.addEventListener("scroll",m),c(()=>{d.removeEventListener("scroll",m)})}}),Le(()=>{const c=e.scrollArea.value;c&&(c.addEventListener("pointerenter",a),c.addEventListener("pointerleave",l))}),Wt(()=>{const c=e.scrollArea.value;c&&(c.removeEventListener("pointerenter",a),c.removeEventListener("pointerleave",l))}),(c,d)=>(E(),B(p(Vt),{present:c.forceMount||s.value},{default:S(()=>[T(nc,J(c.$attrs,{ref:p(o),"data-state":s.value?"visible":"hidden"}),{default:S(()=>[U(c.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Nx=Fx,$x=L({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean,required:!1}},setup(n){const e=fn(),{forwardRef:t}=Z();let o;const r=N(!1);function i(){window.clearTimeout(o),r.value=!0}function s(){o=window.setTimeout(()=>{r.value=!1},e.scrollHideDelay.value)}return Le(()=>{const a=e.scrollArea.value;a&&(a.addEventListener("pointerenter",i),a.addEventListener("pointerleave",s))}),Wt(()=>{const a=e.scrollArea.value;a&&(window.clearTimeout(o),a.removeEventListener("pointerenter",i),a.removeEventListener("pointerleave",s))}),(a,l)=>(E(),B(p(Vt),{present:a.forceMount||r.value},{default:S(()=>[T(nc,J(a.$attrs,{ref:p(t),"data-state":r.value?"visible":"hidden"}),{default:S(()=>[U(a.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Ux=$x,zx=L({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean,required:!1}},setup(n){const e=fn(),t=js(),{forwardRef:o}=Z(),{state:r,dispatch:i}=Bu("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}}),s=F(()=>r.value!=="hidden");nt(l=>{if(r.value==="idle"){const u=window.setTimeout(()=>i("HIDE"),e.scrollHideDelay.value);l(()=>{window.clearTimeout(u)})}});const a=Ru(()=>i("SCROLL_END"),100);return nt(l=>{const u=e.viewport.value,c=t.isHorizontal.value?"scrollLeft":"scrollTop";if(u){let d=u[c];const f=()=>{const h=u[c];d!==h&&(i("SCROLL"),a()),d=h};u.addEventListener("scroll",f),l(()=>{u.removeEventListener("scroll",f)})}}),(l,u)=>(E(),B(p(Vt),{present:l.forceMount||s.value},{default:S(()=>[T(oc,J(l.$attrs,{ref:p(o),"data-state":s.value?"visible":"hidden"}),{default:S(()=>[U(l.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Hx=zx;const[js,jx]=Be("ScrollAreaScrollbar");var Wx=L({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{type:String,required:!1,default:"vertical"},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(n){const e=n,{forwardRef:t}=Z(),o=fn(),r=F(()=>e.orientation==="horizontal");Te(r,()=>{r.value?o.onScrollbarXEnabledChange(!0):o.onScrollbarYEnabledChange(!0)},{immediate:!0}),Wt(()=>{o.onScrollbarXEnabledChange(!1),o.onScrollbarYEnabledChange(!1)});const{orientation:i,forceMount:s,asChild:a,as:l}=Ve(e);return jx({orientation:i,forceMount:s,isHorizontal:r,as:l,asChild:a}),(u,c)=>p(o).type.value==="hover"?(E(),B(Ux,J({key:0},u.$attrs,{ref:p(t),"force-mount":p(s)}),{default:S(()=>[U(u.$slots,"default")]),_:3},16,["force-mount"])):p(o).type.value==="scroll"?(E(),B(Hx,J({key:1},u.$attrs,{ref:p(t),"force-mount":p(s)}),{default:S(()=>[U(u.$slots,"default")]),_:3},16,["force-mount"])):p(o).type.value==="glimpse"?(E(),B(Nx,J({key:2},u.$attrs,{ref:p(t),"force-mount":p(s)}),{default:S(()=>[U(u.$slots,"default")]),_:3},16,["force-mount"])):p(o).type.value==="auto"?(E(),B(nc,J({key:3},u.$attrs,{ref:p(t),"force-mount":p(s)}),{default:S(()=>[U(u.$slots,"default")]),_:3},16,["force-mount"])):p(o).type.value==="always"?(E(),B(oc,J({key:4},u.$attrs,{ref:p(t),"data-state":"visible"}),{default:S(()=>[U(u.$slots,"default")]),_:3},16)):ue("v-if",!0)}}),Gx=Wx;const[Ta,Kx]=Be("ScrollAreaScrollbarVisible");var Yx=L({__name:"ScrollAreaScrollbarVisible",setup(n){const e=fn(),t=js(),{forwardRef:o}=Z(),r=N({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),i=F(()=>{const y=Gp(r.value.viewport,r.value.content);return y>0&&y<1}),s=N(),a=N(0);function l(y,_){if(h.value){const b=e.viewport.value.scrollLeft+y.deltaY;e.viewport.value.scrollLeft=b,md(b,_)&&y.preventDefault()}else{const b=e.viewport.value.scrollTop+y.deltaY;e.viewport.value.scrollTop=b,md(b,_)&&y.preventDefault()}}function u(y,_){h.value?a.value=_.x:a.value=_.y}function c(y){a.value=0}function d(y){r.value=y}function f(y,_){return kx(y,a.value,r.value,_)}const h=F(()=>t.isHorizontal.value);function m(y){h.value?e.viewport.value.scrollLeft=f(y,e.dir.value):e.viewport.value.scrollTop=f(y)}function v(){if(h.value){if(e.viewport.value&&s.value){const y=e.viewport.value.scrollLeft,_=hd(y,r.value,e.dir.value);s.value.style.transform=`translate3d(${_}px, 0, 0)`}}else if(e.viewport.value&&s.value){const y=e.viewport.value.scrollTop,_=hd(y,r.value);s.value.style.transform=`translate3d(0, ${_}px, 0)`}}function g(y){s.value=y}return Kx({sizes:r,hasThumb:i,handleWheelScroll:l,handleThumbDown:u,handleThumbUp:c,handleSizeChange:d,onThumbPositionChange:v,onThumbChange:g,onDragScroll:m}),(y,_)=>h.value?(E(),B(Bx,J({key:0},y.$attrs,{ref:p(o)}),{default:S(()=>[U(y.$slots,"default")]),_:3},16)):(E(),B(Lx,J({key:1},y.$attrs,{ref:p(o)}),{default:S(()=>[U(y.$slots,"default")]),_:3},16))}}),oc=Yx,Xx=L({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean,required:!0}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(n,{emit:e}){const t=n,o=e,r=fn(),i=Ta(),s=js(),{forwardRef:a,currentElement:l}=Z(),u=N(""),c=N();function d(y){if(c.value){const _=y.clientX-c.value?.left,b=y.clientY-c.value?.top;o("onDragScroll",{x:_,y:b})}}function f(y){y.button===0&&(y.target.setPointerCapture(y.pointerId),c.value=l.value.getBoundingClientRect(),u.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",r.viewport&&(r.viewport.value.style.scrollBehavior="auto"),d(y))}function h(y){d(y)}function m(y){const _=y.target;_.hasPointerCapture(y.pointerId)&&_.releasePointerCapture(y.pointerId),document.body.style.webkitUserSelect=u.value,r.viewport&&(r.viewport.value.style.scrollBehavior=""),c.value=void 0}function v(y){const _=y.target,b=l.value?.contains(_),x=i.sizes.value.content-i.sizes.value.viewport;b&&i.handleWheelScroll(y,x)}Le(()=>{document.addEventListener("wheel",v,{passive:!1})}),Wt(()=>{document.removeEventListener("wheel",v)});function g(){l.value&&(t.isHorizontal?i.handleSizeChange({content:r.viewport.value?.scrollWidth??0,viewport:r.viewport.value?.offsetWidth??0,scrollbar:{size:l.value.clientWidth??0,paddingStart:ii(getComputedStyle(l.value).paddingLeft),paddingEnd:ii(getComputedStyle(l.value).paddingRight)}}):i.handleSizeChange({content:r.viewport.value?.scrollHeight??0,viewport:r.viewport.value?.offsetHeight??0,scrollbar:{size:l.value?.clientHeight??0,paddingStart:ii(getComputedStyle(l.value).paddingTop),paddingEnd:ii(getComputedStyle(l.value).paddingBottom)}}),i.onThumbPositionChange())}return Mo(l,g),Mo(r.content,g),(y,_)=>(E(),B(p(de),{ref:p(a),style:{position:"absolute"},"data-scrollbarimpl":"",as:p(s).as.value,"as-child":p(s).asChild.value,onPointerdown:f,onPointermove:h,onPointerup:m},{default:S(()=>[U(y.$slots,"default")]),_:3},8,["as","as-child"]))}}),Kp=Xx,Zx=L({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,t=fn(),o=Ta();function r(f){const m=f.target.getBoundingClientRect(),v=f.clientX-m.left,g=f.clientY-m.top;o.handleThumbDown(f,{x:v,y:g})}function i(f){o.handleThumbUp(f)}const{forwardRef:s,currentElement:a}=Z(),l=N(),u=F(()=>t.viewport.value);function c(){if(!l.value){const f=Ox(u.value,o.onThumbPositionChange);l.value=f,o.onThumbPositionChange()}}const d=F(()=>o.sizes.value);return Yv(d,()=>{o.onThumbChange(a.value),u.value&&(o.onThumbPositionChange(),u.value.addEventListener("scroll",c))}),Wt(()=>{u.value.removeEventListener("scroll",c),t.viewport.value?.removeEventListener("scroll",c)}),(f,h)=>(E(),B(p(de),{ref:p(s),"data-state":p(o).hasThumb?"visible":"hidden",style:{width:"var(--reka-scroll-area-thumb-width)",height:"var(--reka-scroll-area-thumb-height)"},"as-child":e.asChild,as:f.as,onPointerdown:r,onPointerup:i},{default:S(()=>[U(f.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),Qx=Zx,Jx=L({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n,{expose:e}){const t=n,{nonce:o}=Ve(t),r=xp(o),i=fn(),s=N();Le(()=>{i.onViewportChange(s.value),i.onContentChange(l.value)}),e({viewportElement:s});const{forwardRef:a,currentElement:l}=Z();return(u,c)=>(E(),ne(Ie,null,[j("div",J({ref_key:"viewportElement",ref:s,"data-reka-scroll-area-viewport":"",style:{overflowX:p(i).scrollbarXEnabled.value?"scroll":"hidden",overflowY:p(i).scrollbarYEnabled.value?"scroll":"hidden"}},u.$attrs,{tabindex:0}),[T(p(de),{ref:p(a),style:wt({minWidth:p(i).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":t.asChild,as:u.as},{default:S(()=>[U(u.$slots,"default")]),_:3},8,["style","as-child","as"])],16),T(p(de),{as:"style",nonce:p(r)},{default:S(()=>c[0]||(c[0]=[ke(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-reka-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")])),_:1,__:[0]},8,["nonce"])],64))}}),e1=Jx;const t1=[" ","Enter","ArrowUp","ArrowDown"],n1=[" ","Enter"],Sn=10;function Ds(n,e,t){return n===void 0?!1:Array.isArray(n)?n.some(o=>Hl(o,e,t)):Hl(n,e,t)}function Hl(n,e,t){return n===void 0||e===void 0?!1:typeof n=="string"?n===e:typeof t=="function"?t(n,e):typeof t=="string"?n?.[t]===e?.[t]:so(n,e)}function o1(n){return n==null||n===""||Array.isArray(n)&&n.length===0}const r1={key:0,value:""},[Do,Yp]=Be("SelectRoot");var s1=L({inheritAttrs:!1,__name:"SelectRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1,default:void 0},by:{type:[String,Function],required:!1},dir:{type:String,required:!1},multiple:{type:Boolean,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","update:open"],setup(n,{emit:e}){const t=n,o=e,{required:r,disabled:i,multiple:s,dir:a}=Ve(t),l=st(t,"modelValue",o,{defaultValue:t.defaultValue??(s.value?[]:void 0),passive:t.modelValue===void 0,deep:!0}),u=st(t,"open",o,{defaultValue:t.defaultOpen,passive:t.open===void 0}),c=N(),d=N(),f=N({x:0,y:0}),h=F(()=>s.value&&Array.isArray(l.value)?l.value?.length===0:eo(l.value));pt({isProvider:!0});const m=bn(a),v=lr(c),g=N(new Set),y=F(()=>Array.from(g.value).map(x=>x.value).join(";"));function _(x){if(s.value){const C=Array.isArray(l.value)?[...l.value]:[],k=C.findIndex(P=>Hl(P,x,t.by));k===-1?C.push(x):C.splice(k,1),l.value=[...C]}else l.value=x}function b(x){return Array.from(g.value).find(C=>Ds(x,C.value,t.by))}return Yp({triggerElement:c,onTriggerChange:x=>{c.value=x},valueElement:d,onValueElementChange:x=>{d.value=x},contentId:"",modelValue:l,onValueChange:_,by:t.by,open:u,multiple:s,required:r,onOpenChange:x=>{u.value=x},dir:m,triggerPointerDownPosRef:f,disabled:i,isEmptyModelValue:h,optionsSet:g,onOptionAdd:x=>{const C=b(x.value);C&&g.value.delete(C),g.value.add(x)},onOptionRemove:x=>{const C=b(x.value);C&&g.value.delete(C)}}),(x,C)=>(E(),B(p($s),null,{default:S(()=>[U(x.$slots,"default",{modelValue:p(l),open:p(u)}),p(v)?(E(),B(l1,{key:y.value,"aria-hidden":"true",tabindex:"-1",multiple:p(s),required:p(r),name:x.name,autocomplete:x.autocomplete,disabled:p(i),value:p(l)},{default:S(()=>[p(eo)(p(l))?(E(),ne("option",r1)):ue("v-if",!0),(E(!0),ne(Ie,null,ot(Array.from(g.value),k=>(E(),ne("option",J({key:k.value??""},{ref_for:!0},k),null,16))),128))]),_:1},8,["multiple","required","name","autocomplete","disabled","value"])):ue("v-if",!0)]),_:3}))}}),i1=s1,a1=L({__name:"BubbleSelect",props:{autocomplete:{type:String,required:!1},autofocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},form:{type:String,required:!1},multiple:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},size:{type:Number,required:!1},value:{type:null,required:!1}},setup(n){const e=n,t=N(),o=Do();Te(()=>e.value,(i,s)=>{const a=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(a,"value").set;if(i!==s&&u&&t.value){const c=new Event("change",{bubbles:!0});u.call(t.value,i),t.value.dispatchEvent(c)}});function r(i){o.onValueChange(i.target.value)}return(i,s)=>(E(),B(p(Yr),{"as-child":""},{default:S(()=>[j("select",J({ref_key:"selectElement",ref:t},e,{onInput:r}),[U(i.$slots,"default")],16)]),_:3}))}}),l1=a1,u1=L({__name:"SelectPopperPosition",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1,default:"start"},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1,default:Sn},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const t=ko(n);return(o,r)=>(E(),B(p(wa),J(p(t),{style:{boxSizing:"border-box","--reka-select-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-select-content-available-width":"var(--reka-popper-available-width)","--reka-select-content-available-height":"var(--reka-popper-available-height)","--reka-select-trigger-width":"var(--reka-popper-anchor-width)","--reka-select-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:S(()=>[U(o.$slots,"default")]),_:3},16))}}),c1=u1;const Xp={onViewportChange:()=>{},itemTextRefCallback:()=>{},itemRefCallback:()=>{}},[Bo,Zp]=Be("SelectContent");var d1=L({__name:"SelectContentImpl",props:{position:{type:String,required:!1,default:"item-aligned"},bodyLock:{type:Boolean,required:!1,default:!0},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1,default:"start"},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1,default:!0}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(n,{emit:e}){const t=n,o=e,r=Do();Du(),fa(t.bodyLock);const{CollectionSlot:i,getItems:s}=pt(),a=N();pa(a);const{search:l,handleTypeaheadSearch:u}=ha(),c=N(),d=N(),f=N(),h=N(!1),m=N(!1),v=N(!1);function g(){d.value&&a.value&&Ll([d.value,a.value])}Te(h,()=>{g()});const{onOpenChange:y,triggerPointerDownPosRef:_}=r;nt(k=>{if(!a.value)return;let P={x:0,y:0};const R=A=>{P={x:Math.abs(Math.round(A.pageX)-(_.value?.x??0)),y:Math.abs(Math.round(A.pageY)-(_.value?.y??0))}},M=A=>{A.pointerType!=="touch"&&(P.x<=10&&P.y<=10?A.preventDefault():a.value?.contains(A.target)||y(!1),document.removeEventListener("pointermove",R),_.value=null)};_.value!==null&&(document.addEventListener("pointermove",R),document.addEventListener("pointerup",M,{capture:!0,once:!0})),k(()=>{document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",M,{capture:!0})})});function b(k){const P=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!P&&k.key.length===1&&u(k.key,s()),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let M=[...s().map(A=>A.ref)];if(["ArrowUp","End"].includes(k.key)&&(M=M.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const A=k.target,O=M.indexOf(A);M=M.slice(O+1)}setTimeout(()=>Ll(M)),k.preventDefault()}}const x=F(()=>t.position==="popper"?t:{}),C=ko(x.value);return Zp({content:a,viewport:c,onViewportChange:k=>{c.value=k},itemRefCallback:(k,P,R)=>{const M=!m.value&&!R,A=Ds(r.modelValue.value,P,r.by);if(r.multiple.value){if(v.value)return;(A||M)&&(d.value=k,A&&(v.value=!0))}else(A||M)&&(d.value=k);M&&(m.value=!0)},selectedItem:d,selectedItemText:f,onItemLeave:()=>{a.value?.focus()},itemTextRefCallback:(k,P,R)=>{const M=!m.value&&!R;(Ds(r.modelValue.value,P,r.by)||M)&&(f.value=k)},focusSelectedItem:g,position:t.position,isPositioned:h,searchRef:l}),(k,P)=>(E(),B(p(i),null,{default:S(()=>[T(p(va),{"as-child":"",onMountAutoFocus:P[6]||(P[6]=ze(()=>{},["prevent"])),onUnmountAutoFocus:P[7]||(P[7]=R=>{o("closeAutoFocus",R),!R.defaultPrevented&&(p(r).triggerElement.value?.focus({preventScroll:!0}),R.preventDefault())})},{default:S(()=>[T(p(Vs),{"as-child":"","disable-outside-pointer-events":k.disableOutsidePointerEvents,onFocusOutside:P[2]||(P[2]=ze(()=>{},["prevent"])),onDismiss:P[3]||(P[3]=R=>p(r).onOpenChange(!1)),onEscapeKeyDown:P[4]||(P[4]=R=>o("escapeKeyDown",R)),onPointerDownOutside:P[5]||(P[5]=R=>o("pointerDownOutside",R))},{default:S(()=>[(E(),B(zn(k.position==="popper"?c1:m1),J({...k.$attrs,...p(C)},{id:p(r).contentId,ref:R=>{const M=p(jt)(R);M?.hasAttribute("data-reka-popper-content-wrapper")?a.value=M.firstElementChild:a.value=M},role:"listbox","data-state":p(r).open.value?"open":"closed",dir:p(r).dir.value,style:{display:"flex",flexDirection:"column",outline:"none"},onContextmenu:P[0]||(P[0]=ze(()=>{},["prevent"])),onPlaced:P[1]||(P[1]=R=>h.value=!0),onKeydown:b}),{default:S(()=>[U(k.$slots,"default")]),_:3},16,["id","data-state","dir","onKeydown"]))]),_:3},8,["disable-outside-pointer-events"])]),_:3})]),_:3}))}}),f1=d1;const[rc,p1]=Be("SelectItemAlignedPosition");var h1=L({inheritAttrs:!1,__name:"SelectItemAlignedPosition",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["placed"],setup(n,{emit:e}){const t=n,o=e,{getItems:r}=pt(),i=Do(),s=Bo(),a=N(!1),l=N(!0),u=N(),{forwardRef:c,currentElement:d}=Z(),{viewport:f,selectedItem:h,selectedItemText:m,focusSelectedItem:v}=s;function g(){if(i.triggerElement.value&&i.valueElement.value&&u.value&&d.value&&f?.value&&h?.value&&m?.value){const b=i.triggerElement.value.getBoundingClientRect(),x=d.value.getBoundingClientRect(),C=i.valueElement.value.getBoundingClientRect(),k=m.value.getBoundingClientRect();if(i.dir.value!=="rtl"){const Ue=k.left-x.left,lt=C.left-Ue,Ft=b.left-lt,dt=b.width+Ft,Yt=Math.max(dt,x.width),Nt=window.innerWidth-Sn,hn=zr(lt,Sn,Math.max(Sn,Nt-Yt));u.value.style.minWidth=`${dt}px`,u.value.style.left=`${hn}px`}else{const Ue=x.right-k.right,lt=window.innerWidth-C.right-Ue,Ft=window.innerWidth-b.right-lt,dt=b.width+Ft,Yt=Math.max(dt,x.width),Nt=window.innerWidth-Sn,hn=zr(lt,Sn,Math.max(Sn,Nt-Yt));u.value.style.minWidth=`${dt}px`,u.value.style.right=`${hn}px`}const P=r().map(Ue=>Ue.ref),R=window.innerHeight-Sn*2,M=f.value.scrollHeight,A=window.getComputedStyle(d.value),O=Number.parseInt(A.borderTopWidth,10),D=Number.parseInt(A.paddingTop,10),V=Number.parseInt(A.borderBottomWidth,10),$=Number.parseInt(A.paddingBottom,10),Y=O+D+M+$+V,W=Math.min(h.value.offsetHeight*5,Y),G=window.getComputedStyle(f.value),Q=Number.parseInt(G.paddingTop,10),ge=Number.parseInt(G.paddingBottom,10),ce=b.top+b.height/2-Sn,re=R-ce,pe=h.value.offsetHeight/2,Ee=h.value.offsetTop+pe,Pe=O+D+Ee,Ae=Y-Pe;if(Pe<=ce){const Ue=h.value===P[P.length-1];u.value.style.bottom="0px";const lt=d.value.clientHeight-f.value.offsetTop-f.value.offsetHeight,Ft=Math.max(re,pe+(Ue?ge:0)+lt+V),dt=Pe+Ft;u.value.style.height=`${dt}px`}else{const Ue=h.value===P[0];u.value.style.top="0px";const Ft=Math.max(ce,O+f.value.offsetTop+(Ue?Q:0)+pe)+Ae;u.value.style.height=`${Ft}px`,f.value.scrollTop=Pe-ce+f.value.offsetTop}u.value.style.margin=`${Sn}px 0`,u.value.style.minHeight=`${W}px`,u.value.style.maxHeight=`${R}px`,o("placed"),requestAnimationFrame(()=>a.value=!0)}}const y=N("");Le(async()=>{await Ge(),g(),d.value&&(y.value=window.getComputedStyle(d.value).zIndex)});function _(b){b&&l.value===!0&&(g(),v?.(),l.value=!1)}return Mo(i.triggerElement,()=>{g()}),p1({contentWrapper:u,shouldExpandOnScrollRef:a,onScrollButtonChange:_}),(b,x)=>(E(),ne("div",{ref_key:"contentWrapperElement",ref:u,style:wt({display:"flex",flexDirection:"column",position:"fixed",zIndex:y.value})},[T(p(de),J({ref:p(c),style:{boxSizing:"border-box",maxHeight:"100%"}},{...b.$attrs,...t}),{default:S(()=>[U(b.$slots,"default")]),_:3},16)],4))}}),m1=h1,v1=L({__name:"SelectArrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(n){const e=n,t=Bo(Xp);return(o,r)=>p(t).position==="popper"?(E(),B(p(Yu),Re(J({key:0},e)),{default:S(()=>[U(o.$slots,"default")]),_:3},16)):ue("v-if",!0)}}),g1=v1,y1=L({inheritAttrs:!1,__name:"SelectProvider",props:{context:{type:Object,required:!0}},setup(n){return Yp(n.context),Zp(Xp),(t,o)=>U(t.$slots,"default")}}),_1=y1;const b1={key:1};var w1=L({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(n,{emit:e}){const t=n,r=Gt(t,e),i=Do(),s=N();Le(()=>{s.value=new DocumentFragment});const a=N(),l=F(()=>t.forceMount||i.open.value),u=N(l.value);return Te(l,()=>{setTimeout(()=>u.value=l.value)}),(c,d)=>l.value||u.value||a.value?.present?(E(),B(p(Vt),{key:0,ref_key:"presenceRef",ref:a,present:l.value},{default:S(()=>[T(f1,Re(De({...p(r),...c.$attrs})),{default:S(()=>[U(c.$slots,"default")]),_:3},16)]),_:3},8,["present"])):s.value?(E(),ne("div",b1,[(E(),B(bu,{to:s.value},[T(_1,{context:p(i)},{default:S(()=>[U(c.$slots,"default")]),_:3},8,["context"])],8,["to"]))])):ue("v-if",!0)}}),x1=w1;const[S1,C1]=Be("SelectGroup");var T1=L({__name:"SelectGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,t=Rt(void 0,"reka-select-group");return C1({id:t}),(o,r)=>(E(),B(p(de),J({role:"group"},e,{"aria-labelledby":p(t)}),{default:S(()=>[U(o.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),E1=T1,M1=L({__name:"SelectIcon",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){return(e,t)=>(E(),B(p(de),{"aria-hidden":"true",as:e.as,"as-child":e.asChild},{default:S(()=>[U(e.$slots,"default",{},()=>[t[0]||(t[0]=ke(""))])]),_:3},8,["as","as-child"]))}}),A1=M1;const[Qp,P1]=Be("SelectItem");var I1=L({__name:"SelectItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(n,{emit:e}){const t=n,o=e,{disabled:r}=Ve(t),i=Do(),s=Bo(),{forwardRef:a,currentElement:l}=Z(),{CollectionItem:u}=pt(),c=F(()=>Ds(i.modelValue?.value,t.value,i.by)),d=N(!1),f=N(t.textValue??""),h=Rt(void 0,"reka-select-item-text"),m="select.select";async function v(x){if(x.defaultPrevented)return;const C={originalEvent:x,value:t.value};Hr(m,g,C)}async function g(x){await Ge(),o("select",x),!x.defaultPrevented&&(r.value||(i.onValueChange(t.value),i.multiple.value||i.onOpenChange(!1)))}async function y(x){await Ge(),!x.defaultPrevented&&(r.value?s.onItemLeave?.():x.currentTarget?.focus({preventScroll:!0}))}async function _(x){await Ge(),!x.defaultPrevented&&x.currentTarget===et()&&s.onItemLeave?.()}async function b(x){await Ge(),!(x.defaultPrevented||s.searchRef?.value!==""&&x.key===" ")&&(n1.includes(x.key)&&v(x),x.key===" "&&x.preventDefault())}if(t.value==="")throw new Error("A <SelectItem /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Le(()=>{l.value&&s.itemRefCallback(l.value,t.value,t.disabled)}),P1({value:t.value,disabled:r,textId:h,isSelected:c,onItemTextChange:x=>{f.value=((f.value||x?.textContent)??"").trim()}}),(x,C)=>(E(),B(p(u),{value:{textValue:f.value}},{default:S(()=>[T(p(de),{ref:p(a),role:"option","aria-labelledby":p(h),"data-highlighted":d.value?"":void 0,"aria-selected":c.value,"data-state":c.value?"checked":"unchecked","aria-disabled":p(r)||void 0,"data-disabled":p(r)?"":void 0,tabindex:p(r)?void 0:-1,as:x.as,"as-child":x.asChild,onFocus:C[0]||(C[0]=k=>d.value=!0),onBlur:C[1]||(C[1]=k=>d.value=!1),onPointerup:v,onPointerdown:C[2]||(C[2]=k=>{k.currentTarget.focus({preventScroll:!0})}),onTouchend:C[3]||(C[3]=ze(()=>{},["prevent","stop"])),onPointermove:y,onPointerleave:_,onKeydown:b},{default:S(()=>[U(x.$slots,"default")]),_:3},8,["aria-labelledby","data-highlighted","aria-selected","data-state","aria-disabled","data-disabled","tabindex","as","as-child"])]),_:3},8,["value"]))}}),R1=I1,O1=L({__name:"SelectItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=n,t=Qp();return(o,r)=>p(t).isSelected.value?(E(),B(p(de),J({key:0,"aria-hidden":"true"},e),{default:S(()=>[U(o.$slots,"default")]),_:3},16)):ue("v-if",!0)}}),k1=O1,D1=L({inheritAttrs:!1,__name:"SelectItemText",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=n,t=Do(),o=Bo(),r=Qp(),{forwardRef:i,currentElement:s}=Z(),a=F(()=>({value:r.value,disabled:r.disabled.value,textContent:s.value?.textContent??r.value?.toString()??""}));return Le(()=>{s.value&&(r.onItemTextChange(s.value),o.itemTextRefCallback(s.value,r.value,r.disabled.value),t.onOptionAdd(a.value))}),Wt(()=>{t.onOptionRemove(a.value)}),(l,u)=>(E(),B(p(de),J({id:p(r).textId,ref:p(i)},{...e,...l.$attrs}),{default:S(()=>[U(l.$slots,"default")]),_:3},16,["id"]))}}),B1=D1,q1=L({__name:"SelectLabel",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(n){const e=n,t=S1({id:""});return(o,r)=>(E(),B(p(de),J(e,{id:p(t).id}),{default:S(()=>[U(o.$slots,"default")]),_:3},16,["id"]))}}),L1=q1,V1=L({__name:"SelectPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(Fs),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),F1=V1,N1=L({__name:"SelectScrollButtonImpl",emits:["autoScroll"],setup(n,{emit:e}){const t=e,{getItems:o}=pt(),r=Bo(),i=N(null);function s(){i.value!==null&&(window.clearInterval(i.value),i.value=null)}nt(()=>{o().map(c=>c.ref).find(c=>c===et())?.scrollIntoView({block:"nearest"})});function a(){i.value===null&&(i.value=window.setInterval(()=>{t("autoScroll")},50))}function l(){r.onItemLeave?.(),i.value===null&&(i.value=window.setInterval(()=>{t("autoScroll")},50))}return _u(()=>s()),(u,c)=>(E(),B(p(de),J({"aria-hidden":"true",style:{flexShrink:0}},u.$parent?.$props,{onPointerdown:a,onPointermove:l,onPointerleave:c[0]||(c[0]=()=>{s()})}),{default:S(()=>[U(u.$slots,"default")]),_:3},16))}}),Jp=N1,$1=L({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=Bo(),t=e.position==="item-aligned"?rc():void 0,{forwardRef:o,currentElement:r}=Z(),i=N(!1);return nt(s=>{if(e.viewport?.value&&e.isPositioned?.value){let l=function(){const u=a.scrollHeight-a.clientHeight;i.value=Math.ceil(a.scrollTop)<u};const a=e.viewport.value;l(),a.addEventListener("scroll",l),s(()=>a.removeEventListener("scroll",l))}}),Te(r,()=>{r.value&&t?.onScrollButtonChange(r.value)}),(s,a)=>i.value?(E(),B(Jp,{key:0,ref:p(o),onAutoScroll:a[0]||(a[0]=()=>{const{viewport:l,selectedItem:u}=p(e);l?.value&&u?.value&&(l.value.scrollTop=l.value.scrollTop+u.value.offsetHeight)})},{default:S(()=>[U(s.$slots,"default")]),_:3},512)):ue("v-if",!0)}}),U1=$1,z1=L({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=Bo(),t=e.position==="item-aligned"?rc():void 0,{forwardRef:o,currentElement:r}=Z(),i=N(!1);return nt(s=>{if(e.viewport?.value&&e.isPositioned?.value){let l=function(){i.value=a.scrollTop>0};const a=e.viewport.value;l(),a.addEventListener("scroll",l),s(()=>a.removeEventListener("scroll",l))}}),Te(r,()=>{r.value&&t?.onScrollButtonChange(r.value)}),(s,a)=>i.value?(E(),B(Jp,{key:0,ref:p(o),onAutoScroll:a[0]||(a[0]=()=>{const{viewport:l,selectedItem:u}=p(e);l?.value&&u?.value&&(l.value.scrollTop=l.value.scrollTop-u.value.offsetHeight)})},{default:S(()=>[U(s.$slots,"default")]),_:3},512)):ue("v-if",!0)}}),H1=z1,j1=L({__name:"SelectSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(de),J({"aria-hidden":"true"},e),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),W1=j1,G1=L({__name:"SelectTrigger",props:{disabled:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,t=Do(),{forwardRef:o,currentElement:r}=Z(),i=F(()=>t.disabled?.value||e.disabled);t.contentId||=Rt(void 0,"reka-select-content"),Le(()=>{t.onTriggerChange(r.value)});const{getItems:s}=pt(),{search:a,handleTypeaheadSearch:l,resetTypeahead:u}=ha();function c(){i.value||(t.onOpenChange(!0),u())}function d(f){c(),t.triggerPointerDownPosRef.value={x:Math.round(f.pageX),y:Math.round(f.pageY)}}return(f,h)=>(E(),B(p(Us),{"as-child":"",reference:f.reference},{default:S(()=>[T(p(de),{ref:p(o),role:"combobox",type:f.as==="button"?"button":void 0,"aria-controls":p(t).contentId,"aria-expanded":p(t).open.value||!1,"aria-required":p(t).required?.value,"aria-autocomplete":"none",disabled:i.value,dir:p(t)?.dir.value,"data-state":p(t)?.open.value?"open":"closed","data-disabled":i.value?"":void 0,"data-placeholder":p(o1)(p(t).modelValue?.value)?"":void 0,"as-child":f.asChild,as:f.as,onClick:h[0]||(h[0]=m=>{m?.currentTarget?.focus()}),onPointerdown:h[1]||(h[1]=m=>{if(m.pointerType==="touch")return m.preventDefault();const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&(d(m),m.preventDefault())}),onPointerup:h[2]||(h[2]=ze(m=>{m.pointerType==="touch"&&d(m)},["prevent"])),onKeydown:h[3]||(h[3]=m=>{const v=p(a)!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&v&&m.key===" "||(p(l)(m.key,p(s)()),p(t1).includes(m.key)&&(c(),m.preventDefault()))})},{default:S(()=>[U(f.$slots,"default")]),_:3},8,["type","aria-controls","aria-expanded","aria-required","disabled","dir","data-state","data-disabled","data-placeholder","as-child","as"])]),_:3},8,["reference"]))}}),K1=G1,Y1=L({__name:"SelectValue",props:{placeholder:{type:String,required:!1,default:""},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=n,{forwardRef:t,currentElement:o}=Z(),r=Do();Le(()=>{r.valueElement=o});const i=F(()=>{let a=[];const l=Array.from(r.optionsSet.value),u=c=>l.find(d=>Ds(c,d.value,r.by));return Array.isArray(r.modelValue.value)?a=r.modelValue.value.map(c=>u(c)?.textContent??""):a=[u(r.modelValue.value)?.textContent??""],a.filter(Boolean)}),s=F(()=>i.value.length?i.value.join(", "):e.placeholder);return(a,l)=>(E(),B(p(de),{ref:p(t),as:a.as,"as-child":a.asChild,style:{pointerEvents:"none"},"data-placeholder":i.value.length?void 0:e.placeholder},{default:S(()=>[U(a.$slots,"default",{selectedLabel:i.value,modelValue:p(r).modelValue.value},()=>[ke(Ce(s.value),1)])]),_:3},8,["as","as-child","data-placeholder"]))}}),X1=Y1,Z1=L({__name:"SelectViewport",props:{nonce:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,{nonce:t}=Ve(e),o=xp(t),r=Bo(),i=r.position==="item-aligned"?rc():void 0,{forwardRef:s,currentElement:a}=Z();Le(()=>{r?.onViewportChange(a.value)});const l=N(0);function u(c){const d=c.currentTarget,{shouldExpandOnScrollRef:f,contentWrapper:h}=i??{};if(f?.value&&h?.value){const m=Math.abs(l.value-d.scrollTop);if(m>0){const v=window.innerHeight-Sn*2,g=Number.parseFloat(h.value.style.minHeight),y=Number.parseFloat(h.value.style.height),_=Math.max(g,y);if(_<v){const b=_+m,x=Math.min(v,b),C=b-x;h.value.style.height=`${x}px`,h.value.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.value.style.justifyContent="flex-end")}}}l.value=d.scrollTop}return(c,d)=>(E(),ne(Ie,null,[T(p(de),J({ref:p(s),"data-reka-select-viewport":"",role:"presentation"},{...c.$attrs,...e},{style:{position:"relative",flex:1,overflow:"hidden auto"},onScroll:u}),{default:S(()=>[U(c.$slots,"default")]),_:3},16),T(p(de),{as:"style",nonce:p(o)},{default:S(()=>d[0]||(d[0]=[ke(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-select-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-reka-select-viewport]::-webkit-scrollbar { display: none; } ")])),_:1,__:[0]},8,["nonce"])],64))}}),Q1=Z1;function J1(n=[],e,t){const o=[...n];return o[t]=e,o.sort((r,i)=>r-i)}function eh(n,e,t){const i=100/(t-e)*(n-e);return zr(i,0,100)}function eS(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function tS(n,e){if(n.length===1)return 0;const t=n.map(r=>Math.abs(r-e)),o=Math.min(...t);return t.indexOf(o)}function nS(n,e,t){const o=n/2,i=sc([0,50],[0,o]);return(o-i(e)*t)*t}function oS(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function rS(n,e){if(e>0){const t=oS(n);return Math.min(...t)>=e}return!0}function sc(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const o=(e[1]-e[0])/(n[1]-n[0]);return e[0]+o*(t-n[0])}}function sS(n){return(String(n).split(".")[1]||"").length}function iS(n,e){const t=10**e;return Math.round(n*t)/t}const th=["PageUp","PageDown"],nh=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],oh={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageUp","ArrowUp","ArrowLeft"]},[rh,sh]=Be(["SliderVertical","SliderHorizontal"]);var aS=L({__name:"SliderHorizontal",props:{dir:{type:String,required:!1},min:{type:Number,required:!0},max:{type:Number,required:!0},inverted:{type:Boolean,required:!0}},emits:["slideEnd","slideStart","slideMove","homeKeyDown","endKeyDown","stepKeyDown"],setup(n,{emit:e}){const t=n,o=e,{max:r,min:i,dir:s,inverted:a}=Ve(t),{forwardRef:l,currentElement:u}=Z(),c=Qr(),d=N(),f=N(),h=F(()=>s?.value!=="rtl"&&!a.value||s?.value!=="ltr"&&a.value);function m(_,b){const x=f.value||u.value.getBoundingClientRect(),C=[...c.thumbElements.value][c.valueIndexToChangeRef.value],k=c.thumbAlignment.value==="contain"?C.clientWidth:0;!d.value&&!b&&c.thumbAlignment.value==="contain"&&(d.value=_.clientX-C.getBoundingClientRect().left);const P=[0,x.width-k],R=h.value?[i.value,r.value]:[r.value,i.value],M=sc(P,R);f.value=x;const A=b?_.clientX-x.left-k/2:_.clientX-x.left-(d.value??0);return M(A)}const v=F(()=>h.value?"left":"right"),g=F(()=>h.value?"right":"left"),y=F(()=>h.value?1:-1);return sh({startEdge:v,endEdge:g,direction:y,size:"width"}),(_,b)=>(E(),B(ih,{ref:p(l),dir:p(s),"data-orientation":"horizontal",style:wt({"--reka-slider-thumb-transform":!h.value&&p(c).thumbAlignment.value==="overflow"?"translateX(50%)":"translateX(-50%)"}),onSlideStart:b[0]||(b[0]=x=>{const C=m(x,!0);o("slideStart",C)}),onSlideMove:b[1]||(b[1]=x=>{const C=m(x);o("slideMove",C)}),onSlideEnd:b[2]||(b[2]=()=>{f.value=void 0,d.value=void 0,o("slideEnd")}),onStepKeyDown:b[3]||(b[3]=x=>{const C=h.value?"from-left":"from-right",k=p(oh)[C].includes(x.key);o("stepKeyDown",x,k?-1:1)}),onEndKeyDown:b[4]||(b[4]=x=>o("endKeyDown",x)),onHomeKeyDown:b[5]||(b[5]=x=>o("homeKeyDown",x))},{default:S(()=>[U(_.$slots,"default")]),_:3},8,["dir","style"]))}}),lS=aS,uS=L({__name:"SliderVertical",props:{min:{type:Number,required:!0},max:{type:Number,required:!0},inverted:{type:Boolean,required:!0}},emits:["slideEnd","slideStart","slideMove","homeKeyDown","endKeyDown","stepKeyDown"],setup(n,{emit:e}){const t=n,o=e,{max:r,min:i,inverted:s}=Ve(t),a=Qr(),{forwardRef:l,currentElement:u}=Z(),c=N(),d=N(),f=F(()=>!s.value);function h(y,_){const b=d.value||u.value.getBoundingClientRect(),x=[...a.thumbElements.value][a.valueIndexToChangeRef.value],C=a.thumbAlignment.value==="contain"?x.clientHeight:0;!c.value&&!_&&a.thumbAlignment.value==="contain"&&(c.value=y.clientY-x.getBoundingClientRect().top);const k=[0,b.height-C],P=f.value?[r.value,i.value]:[i.value,r.value],R=sc(k,P),M=_?y.clientY-b.top-C/2:y.clientY-b.top-(c.value??0);return d.value=b,R(M)}const m=F(()=>f.value?"bottom":"top"),v=F(()=>f.value?"top":"bottom"),g=F(()=>f.value?1:-1);return sh({startEdge:m,endEdge:v,direction:g,size:"height"}),(y,_)=>(E(),B(ih,{ref:p(l),"data-orientation":"vertical",style:wt({"--reka-slider-thumb-transform":!f.value&&p(a).thumbAlignment.value==="overflow"?"translateY(-50%)":"translateY(50%)"}),onSlideStart:_[0]||(_[0]=b=>{const x=h(b,!0);o("slideStart",x)}),onSlideMove:_[1]||(_[1]=b=>{const x=h(b);o("slideMove",x)}),onSlideEnd:_[2]||(_[2]=()=>{d.value=void 0,c.value=void 0,o("slideEnd")}),onStepKeyDown:_[3]||(_[3]=b=>{const x=f.value?"from-bottom":"from-top",C=p(oh)[x].includes(b.key);o("stepKeyDown",b,C?-1:1)}),onEndKeyDown:_[4]||(_[4]=b=>o("endKeyDown",b)),onHomeKeyDown:_[5]||(_[5]=b=>o("homeKeyDown",b))},{default:S(()=>[U(y.$slots,"default")]),_:3},8,["style"]))}}),cS=uS;const[Qr,dS]=Be("SliderRoot");var fS=L({inheritAttrs:!1,__name:"SliderRoot",props:{defaultValue:{type:Array,required:!1,default:()=>[0]},modelValue:{type:[Array,null],required:!1},disabled:{type:Boolean,required:!1,default:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},inverted:{type:Boolean,required:!1,default:!1},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:100},step:{type:Number,required:!1,default:1},minStepsBetweenThumbs:{type:Number,required:!1,default:0},thumbAlignment:{type:String,required:!1,default:"contain"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","valueCommit"],setup(n,{emit:e}){const t=n,o=e,{min:r,max:i,step:s,minStepsBetweenThumbs:a,orientation:l,disabled:u,thumbAlignment:c,dir:d}=Ve(t),f=bn(d),{forwardRef:h,currentElement:m}=Z(),v=lr(m),{CollectionSlot:g}=pt({isProvider:!0}),y=st(t,"modelValue",o,{defaultValue:t.defaultValue,passive:t.modelValue===void 0}),_=F(()=>Array.isArray(y.value)?[...y.value]:[]),b=N(0),x=N(_.value);function C(A){const O=tS(_.value,A);R(A,O)}function k(A){R(A,b.value)}function P(){const A=x.value[b.value];_.value[b.value]!==A&&o("valueCommit",Rf(_.value))}function R(A,O,{commit:D}={commit:!1}){const V=sS(s.value),$=iS(Math.round((A-r.value)/s.value)*s.value+r.value,V),Y=zr($,r.value,i.value),W=J1(_.value,Y,O);if(rS(W,a.value*s.value)){b.value=W.indexOf(Y);const G=String(W)!==String(y.value);G&&D&&o("valueCommit",W),G&&(M.value[b.value]?.focus(),y.value=W)}}const M=N([]);return dS({modelValue:y,currentModelValue:_,valueIndexToChangeRef:b,thumbElements:M,orientation:l,min:r,max:i,disabled:u,thumbAlignment:c}),(A,O)=>(E(),B(p(g),null,{default:S(()=>[(E(),B(zn(p(l)==="horizontal"?lS:cS),J(A.$attrs,{ref:p(h),"as-child":A.asChild,as:A.as,min:p(r),max:p(i),dir:p(f),inverted:A.inverted,"aria-disabled":p(u),"data-disabled":p(u)?"":void 0,onPointerdown:O[0]||(O[0]=()=>{p(u)||(x.value=_.value)}),onSlideStart:O[1]||(O[1]=D=>!p(u)&&C(D)),onSlideMove:O[2]||(O[2]=D=>!p(u)&&k(D)),onSlideEnd:O[3]||(O[3]=D=>!p(u)&&P()),onHomeKeyDown:O[4]||(O[4]=D=>!p(u)&&R(p(r),0,{commit:!0})),onEndKeyDown:O[5]||(O[5]=D=>!p(u)&&R(p(i),_.value.length-1,{commit:!0})),onStepKeyDown:O[6]||(O[6]=(D,V)=>{if(!p(u)){const W=p(th).includes(D.key)||D.shiftKey&&p(nh).includes(D.key)?10:1,G=b.value,Q=_.value[G],ge=p(s)*W*V;R(Q+ge,G,{commit:!0})}})}),{default:S(()=>[U(A.$slots,"default",{modelValue:p(y)}),p(v)&&A.name?(E(),B(p(Xr),{key:0,type:"number",value:p(y),name:A.name,required:A.required,disabled:p(u),step:p(s)},null,8,["value","name","required","disabled","step"])):ue("v-if",!0)]),_:3},16,["as-child","as","min","max","dir","inverted","aria-disabled","data-disabled"]))]),_:3}))}}),pS=fS,hS=L({__name:"SliderImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},emits:["slideStart","slideMove","slideEnd","homeKeyDown","endKeyDown","stepKeyDown"],setup(n,{emit:e}){const t=n,o=e,r=Qr();return(i,s)=>(E(),B(p(de),J({"data-slider-impl":""},t,{onKeydown:s[0]||(s[0]=a=>{a.key==="Home"?(o("homeKeyDown",a),a.preventDefault()):a.key==="End"?(o("endKeyDown",a),a.preventDefault()):p(th).concat(p(nh)).includes(a.key)&&(o("stepKeyDown",a),a.preventDefault())}),onPointerdown:s[1]||(s[1]=a=>{const l=a.target;l.setPointerCapture(a.pointerId),a.preventDefault(),p(r).thumbElements.value.includes(l)?l.focus():o("slideStart",a)}),onPointermove:s[2]||(s[2]=a=>{a.target.hasPointerCapture(a.pointerId)&&o("slideMove",a)}),onPointerup:s[3]||(s[3]=a=>{const l=a.target;l.hasPointerCapture(a.pointerId)&&(l.releasePointerCapture(a.pointerId),o("slideEnd",a))})}),{default:S(()=>[U(i.$slots,"default")]),_:3},16))}}),ih=hS,mS=L({__name:"SliderRange",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=Qr(),t=rh();Z();const o=F(()=>e.currentModelValue.value.map(s=>eh(s,e.min.value,e.max.value))),r=F(()=>e.currentModelValue.value.length>1?Math.min(...o.value):0),i=F(()=>100-Math.max(...o.value,0));return(s,a)=>(E(),B(p(de),{"data-disabled":p(e).disabled.value?"":void 0,"data-orientation":p(e).orientation.value,"as-child":s.asChild,as:s.as,style:wt({[p(t).startEdge.value]:`${r.value}%`,[p(t).endEdge.value]:`${i.value}%`})},{default:S(()=>[U(s.$slots,"default")]),_:3},8,["data-disabled","data-orientation","as-child","as","style"]))}}),vS=mS,gS=L({inheritAttrs:!1,__name:"SliderThumbImpl",props:{index:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,t=Qr(),o=rh(),{forwardRef:r,currentElement:i}=Z(),{CollectionItem:s}=pt(),a=F(()=>t.modelValue?.value?.[e.index]),l=F(()=>a.value===void 0?0:eh(a.value,t.min.value??0,t.max.value??100)),u=F(()=>eS(e.index,t.modelValue?.value?.length??0)),c=Jf(i),d=F(()=>c[o.size].value),f=F(()=>t.thumbAlignment.value==="overflow"||!d.value?0:nS(d.value,l.value,o.direction.value)),h=Ou();return Le(()=>{t.thumbElements.value.push(i.value)}),Wt(()=>{const m=t.thumbElements.value.findIndex(v=>v===i.value)??-1;t.thumbElements.value.splice(m,1)}),(m,v)=>(E(),B(p(s),null,{default:S(()=>[T(p(de),J(m.$attrs,{ref:p(r),role:"slider",tabindex:p(t).disabled.value?void 0:0,"aria-label":m.$attrs["aria-label"]||u.value,"data-disabled":p(t).disabled.value?"":void 0,"data-orientation":p(t).orientation.value,"aria-valuenow":a.value,"aria-valuemin":p(t).min.value,"aria-valuemax":p(t).max.value,"aria-orientation":p(t).orientation.value,"as-child":m.asChild,as:m.as,style:{transform:"var(--reka-slider-thumb-transform)",position:"absolute",[p(o).startEdge.value]:`calc(${l.value}% + ${f.value}px)`,display:!p(h)&&a.value===void 0?"none":void 0},onFocus:v[0]||(v[0]=()=>{p(t).valueIndexToChangeRef.value=m.index})}),{default:S(()=>[U(m.$slots,"default")]),_:3},16,["tabindex","aria-label","data-disabled","data-orientation","aria-valuenow","aria-valuemin","aria-valuemax","aria-orientation","as-child","as","style"])]),_:3}))}}),yS=gS,_S=L({__name:"SliderThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=n,{getItems:t}=pt(),{forwardRef:o,currentElement:r}=Z(),i=F(()=>r.value?t(!0).findIndex(s=>s.ref===r.value):-1);return(s,a)=>(E(),B(yS,J({ref:p(o)},e,{index:i.value}),{default:S(()=>[U(s.$slots,"default")]),_:3},16,["index"]))}}),bS=_S,wS=L({__name:"SliderTrack",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=Qr();return Z(),(t,o)=>(E(),B(p(de),{"as-child":t.asChild,as:t.as,"data-disabled":p(e).disabled.value?"":void 0,"data-orientation":p(e).orientation.value},{default:S(()=>[U(t.$slots,"default")]),_:3},8,["as-child","as","data-disabled","data-orientation"]))}}),xS=wS;const[Ea,SS]=Be("TabsRoot");var CS=L({__name:"TabsRoot",props:{defaultValue:{type:null,required:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},activationMode:{type:String,required:!1,default:"automatic"},modelValue:{type:null,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,o=e,{orientation:r,unmountOnHide:i,dir:s}=Ve(t),a=bn(s);Z();const l=st(t,"modelValue",o,{defaultValue:t.defaultValue,passive:t.modelValue===void 0}),u=N(),c=je(new Set);return SS({modelValue:l,changeModelValue:d=>{l.value=d},orientation:r,dir:a,unmountOnHide:i,activationMode:t.activationMode,baseId:Rt(void 0,"reka-tabs"),tabsList:u,contentIds:c,registerContent:d=>{c.value=new Set([...c.value,d])},unregisterContent:d=>{const f=new Set(c.value);f.delete(d),c.value=f}}),(d,f)=>(E(),B(p(de),{dir:p(a),"data-orientation":p(r),"as-child":d.asChild,as:d.as},{default:S(()=>[U(d.$slots,"default",{modelValue:p(l)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),TS=CS;function ah(n,e){return`${n}-trigger-${e}`}function lh(n,e){return`${n}-content-${e}`}var ES=L({__name:"TabsContent",props:{value:{type:[String,Number],required:!0},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,{forwardRef:t}=Z(),o=Ea(),r=F(()=>ah(o.baseId,e.value)),i=F(()=>lh(o.baseId,e.value)),s=F(()=>e.value===o.modelValue.value),a=N(s.value);return Le(()=>{o.registerContent(e.value),requestAnimationFrame(()=>{a.value=!1})}),_u(()=>{o.unregisterContent(e.value)}),(l,u)=>(E(),B(p(Vt),{present:l.forceMount||s.value,"force-mount":""},{default:S(({present:c})=>[T(p(de),{id:i.value,ref:p(t),"as-child":l.asChild,as:l.as,role:"tabpanel","data-state":s.value?"active":"inactive","data-orientation":p(o).orientation.value,"aria-labelledby":r.value,hidden:!c,tabindex:"0",style:wt({animationDuration:a.value?"0s":void 0})},{default:S(()=>[!p(o).unmountOnHide.value||c?U(l.$slots,"default",{key:0}):ue("v-if",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),MS=ES,AS=L({__name:"TabsIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n,{expose:e}){const t=n,o=Ea();e({updateIndicatorStyle:s}),Z();const r=N({size:null,position:null}),i=N([]);Te(()=>[o.modelValue.value,o?.dir.value],()=>{s()},{immediate:!0,flush:"post"}),xu(()=>{i.value=Array.from(o.tabsList.value?.querySelectorAll('[role="tab"]')||[])}),Mo(F(()=>[o.tabsList.value,...i.value]),s);function s(){const a=o.tabsList.value?.querySelector('[role="tab"][data-state="active"]');a&&(o.orientation.value==="horizontal"?r.value={size:a.offsetWidth,position:a.offsetLeft}:r.value={size:a.offsetHeight,position:a.offsetTop})}return(a,l)=>typeof r.value.size=="number"?(E(),B(p(de),J({key:0},t,{style:{"--reka-tabs-indicator-size":`${r.value.size}px`,"--reka-tabs-indicator-position":`${r.value.position}px`}}),{default:S(()=>[U(a.$slots,"default")]),_:3},16,["style"])):ue("v-if",!0)}}),PS=AS,IS=L({__name:"TabsList",props:{loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,{loop:t}=Ve(e),{forwardRef:o,currentElement:r}=Z(),i=Ea();return i.tabsList=r,(s,a)=>(E(),B(p(Kr),{"as-child":"",orientation:p(i).orientation.value,dir:p(i).dir.value,loop:p(t)},{default:S(()=>[T(p(de),{ref:p(o),role:"tablist","as-child":s.asChild,as:s.as,"aria-orientation":p(i).orientation.value},{default:S(()=>[U(s.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}}),RS=IS,OS=L({__name:"TabsTrigger",props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,{forwardRef:t}=Z(),o=Ea(),r=F(()=>ah(o.baseId,e.value)),i=F(()=>o.contentIds.value.has(e.value)?lh(o.baseId,e.value):void 0),s=F(()=>e.value===o.modelValue.value);return(a,l)=>(E(),B(p(Ns),{"as-child":"",focusable:!a.disabled,active:s.value},{default:S(()=>[T(p(de),{id:r.value,ref:p(t),role:"tab",type:a.as==="button"?"button":void 0,as:a.as,"as-child":a.asChild,"aria-selected":s.value?"true":"false","aria-controls":i.value,"data-state":s.value?"active":"inactive",disabled:a.disabled,"data-disabled":a.disabled?"":void 0,"data-orientation":p(o).orientation.value,onMousedown:l[0]||(l[0]=ze(u=>{!a.disabled&&u.ctrlKey===!1?p(o).changeModelValue(a.value):u.preventDefault()},["left"])),onKeydown:l[1]||(l[1]=St(u=>p(o).changeModelValue(a.value),["enter","space"])),onFocus:l[2]||(l[2]=()=>{const u=p(o).activationMode!=="manual";!s.value&&!a.disabled&&u&&p(o).changeModelValue(a.value)})},{default:S(()=>[U(a.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),kS=OS,DS=L({__name:"ToastAnnounceExclude",props:{altText:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){return(e,t)=>(E(),B(p(de),{as:e.as,"as-child":e.asChild,"data-reka-toast-announce-exclude":"","data-reka-toast-announce-alt":e.altText||void 0},{default:S(()=>[U(e.$slots,"default")]),_:3},8,["as","as-child","data-reka-toast-announce-alt"]))}}),BS=DS;const[Ma,qS]=Be("ToastProvider");var LS=L({inheritAttrs:!1,__name:"ToastProvider",props:{label:{type:String,required:!1,default:"Notification"},duration:{type:Number,required:!1,default:5e3},disableSwipe:{type:Boolean,required:!1},swipeDirection:{type:String,required:!1,default:"right"},swipeThreshold:{type:Number,required:!1,default:50}},setup(n){const e=n,{label:t,duration:o,disableSwipe:r,swipeDirection:i,swipeThreshold:s}=Ve(e);pt({isProvider:!0});const a=N(),l=N(0),u=N(!1),c=N(!1);if(e.label&&typeof e.label=="string"&&!e.label.trim()){const d="Invalid prop `label` supplied to `ToastProvider`. Expected non-empty `string`.";throw new Error(d)}return qS({label:t,duration:o,disableSwipe:r,swipeDirection:i,swipeThreshold:s,toastCount:l,viewport:a,onViewportChange(d){a.value=d},onToastAdd(){l.value++},onToastRemove(){l.value--},isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:c}),(d,f)=>U(d.$slots,"default")}}),VS=LS,FS=L({__name:"ToastAnnounce",setup(n){const e=Ma(),t=Gv(1e3),o=N(!1);return Xf(()=>{o.value=!0}),(r,i)=>p(t)||o.value?(E(),B(p(Yr),{key:0},{default:S(()=>[ke(Ce(p(e).label.value)+" ",1),U(r.$slots,"default")]),_:3})):ue("v-if",!0)}}),NS=FS;const $S="toast.swipeStart",US="toast.swipeMove",zS="toast.swipeCancel",HS="toast.swipeEnd",jl="toast.viewportPause",Wl="toast.viewportResume";function ai(n,e,t){const o=t.originalEvent.currentTarget,r=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&o.addEventListener(n,e,{once:!0}),o.dispatchEvent(r)}function vd(n,e,t=0){const o=Math.abs(n.x),r=Math.abs(n.y),i=o>r;return e==="left"||e==="right"?i&&o>t:!i&&r>t}function jS(n){return n.nodeType===n.ELEMENT_NODE}function uh(n){const e=[];return Array.from(n.childNodes).forEach(o=>{if(o.nodeType===o.TEXT_NODE&&o.textContent&&e.push(o.textContent),jS(o)){const r=o.ariaHidden||o.hidden||o.style.display==="none",i=o.dataset.rekaToastAnnounceExclude==="";if(!r)if(i){const s=o.dataset.rekaToastAnnounceAlt;s&&e.push(s)}else e.push(...uh(o))}}),e}const[WS,GS]=Be("ToastRoot");var KS=L({inheritAttrs:!1,__name:"ToastRootImpl",props:{type:{type:String,required:!1},open:{type:Boolean,required:!1,default:!1},duration:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["close","escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd"],setup(n,{emit:e}){const t=n,o=e,{forwardRef:r,currentElement:i}=Z(),{CollectionItem:s}=pt(),a=Ma(),l=N(null),u=N(null),c=F(()=>typeof t.duration=="number"?t.duration:a.duration.value),d=N(0),f=N(c.value),h=N(0),m=N(c.value),v=Xf(()=>{const b=new Date().getTime()-d.value;m.value=Math.max(f.value-b,0)},{fpsLimit:60});function g(b){b<=0||b===Number.POSITIVE_INFINITY||on&&(window.clearTimeout(h.value),d.value=new Date().getTime(),h.value=window.setTimeout(y,b))}function y(b){const x=b?.pointerType==="";i.value?.contains(et())&&x&&a.viewport.value?.focus(),x&&(a.isClosePausedRef.value=!1),o("close")}const _=F(()=>i.value?uh(i.value):null);if(t.type&&!["foreground","background"].includes(t.type)){const b="Invalid prop `type` supplied to `Toast`. Expected `foreground | background`.";throw new Error(b)}return nt(b=>{const x=a.viewport.value;if(x){const C=()=>{g(f.value),v.resume(),o("resume")},k=()=>{const P=new Date().getTime()-d.value;f.value=f.value-P,window.clearTimeout(h.value),v.pause(),o("pause")};return x.addEventListener(jl,k),x.addEventListener(Wl,C),()=>{x.removeEventListener(jl,k),x.removeEventListener(Wl,C)}}}),Te(()=>[t.open,c.value],()=>{f.value=c.value,t.open&&!a.isClosePausedRef.value&&g(c.value)},{immediate:!0}),ku("Escape",b=>{o("escapeKeyDown",b),b.defaultPrevented||(a.isFocusedToastEscapeKeyDownRef.value=!0,y())}),Le(()=>{a.onToastAdd()}),Wt(()=>{a.onToastRemove()}),GS({onClose:y}),(b,x)=>(E(),ne(Ie,null,[_.value?(E(),B(NS,{key:0,role:"alert","aria-live":b.type==="foreground"?"assertive":"polite","aria-atomic":"true"},{default:S(()=>[ke(Ce(_.value),1)]),_:1},8,["aria-live"])):ue("v-if",!0),p(a).viewport.value?(E(),B(bu,{key:1,to:p(a).viewport.value},[T(p(s),null,{default:S(()=>[T(p(de),J({ref:p(r),role:"alert","aria-live":"off","aria-atomic":"true",tabindex:"0"},b.$attrs,{as:b.as,"as-child":b.asChild,"data-state":b.open?"open":"closed","data-swipe-direction":p(a).swipeDirection.value,style:p(a).disableSwipe.value?void 0:{userSelect:"none",touchAction:"none"},onPointerdown:x[0]||(x[0]=ze(C=>{p(a).disableSwipe.value||(l.value={x:C.clientX,y:C.clientY})},["left"])),onPointermove:x[1]||(x[1]=C=>{if(p(a).disableSwipe.value||!l.value)return;const k=C.clientX-l.value.x,P=C.clientY-l.value.y,R=!!u.value,M=["left","right"].includes(p(a).swipeDirection.value),A=["left","up"].includes(p(a).swipeDirection.value)?Math.min:Math.max,O=M?A(0,k):0,D=M?0:A(0,P),V=C.pointerType==="touch"?10:2,$={x:O,y:D},Y={originalEvent:C,delta:$};R?(u.value=$,p(ai)(p(US),W=>o("swipeMove",W),Y)):p(vd)($,p(a).swipeDirection.value,V)?(u.value=$,p(ai)(p($S),W=>o("swipeStart",W),Y),C.target.setPointerCapture(C.pointerId)):(Math.abs(k)>V||Math.abs(P)>V)&&(l.value=null)}),onPointerup:x[2]||(x[2]=C=>{if(p(a).disableSwipe.value)return;const k=u.value,P=C.target;if(P.hasPointerCapture(C.pointerId)&&P.releasePointerCapture(C.pointerId),u.value=null,l.value=null,k){const R=C.currentTarget,M={originalEvent:C,delta:k};p(vd)(k,p(a).swipeDirection.value,p(a).swipeThreshold.value)?p(ai)(p(HS),A=>o("swipeEnd",A),M):p(ai)(p(zS),A=>o("swipeCancel",A),M),R?.addEventListener("click",A=>A.preventDefault(),{once:!0})}})}),{default:S(()=>[U(b.$slots,"default",{remaining:m.value,duration:c.value})]),_:3},16,["as","as-child","data-state","data-swipe-direction","style"])]),_:3})],8,["to"])):ue("v-if",!0)],64))}}),YS=KS,XS=L({__name:"ToastClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,t=WS(),{forwardRef:o}=Z();return(r,i)=>(E(),B(BS,{"as-child":""},{default:S(()=>[T(p(de),J(e,{ref:p(o),type:r.as==="button"?"button":void 0,onClick:p(t).onClose}),{default:S(()=>[U(r.$slots,"default")]),_:3},16,["type","onClick"])]),_:3}))}}),ZS=XS,QS=L({__name:"ToastDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(de),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),JS=QS,eC=L({__name:"ToastRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!0},forceMount:{type:Boolean,required:!1},type:{type:String,required:!1,default:"foreground"},open:{type:Boolean,required:!1,default:void 0},duration:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(n,{emit:e}){const t=n,o=e,{forwardRef:r}=Z(),i=st(t,"open",o,{defaultValue:t.defaultOpen,passive:t.open===void 0});return(s,a)=>(E(),B(p(Vt),{present:s.forceMount||p(i)},{default:S(()=>[T(YS,J({ref:p(r),open:p(i),type:s.type,as:s.as,"as-child":s.asChild,duration:s.duration},s.$attrs,{onClose:a[0]||(a[0]=l=>i.value=!1),onPause:a[1]||(a[1]=l=>o("pause")),onResume:a[2]||(a[2]=l=>o("resume")),onEscapeKeyDown:a[3]||(a[3]=l=>o("escapeKeyDown",l)),onSwipeStart:a[4]||(a[4]=l=>{o("swipeStart",l),l.defaultPrevented||l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:a[5]||(a[5]=l=>{if(o("swipeMove",l),!l.defaultPrevented){const{x:u,y:c}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","move"),d.style.setProperty("--reka-toast-swipe-move-x",`${u}px`),d.style.setProperty("--reka-toast-swipe-move-y",`${c}px`)}}),onSwipeCancel:a[6]||(a[6]=l=>{if(o("swipeCancel",l),!l.defaultPrevented){const u=l.currentTarget;u.setAttribute("data-swipe","cancel"),u.style.removeProperty("--reka-toast-swipe-move-x"),u.style.removeProperty("--reka-toast-swipe-move-y"),u.style.removeProperty("--reka-toast-swipe-end-x"),u.style.removeProperty("--reka-toast-swipe-end-y")}}),onSwipeEnd:a[7]||(a[7]=l=>{if(o("swipeEnd",l),!l.defaultPrevented){const{x:u,y:c}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","end"),d.style.removeProperty("--reka-toast-swipe-move-x"),d.style.removeProperty("--reka-toast-swipe-move-y"),d.style.setProperty("--reka-toast-swipe-end-x",`${u}px`),d.style.setProperty("--reka-toast-swipe-end-y",`${c}px`),i.value=!1}})}),{default:S(({remaining:l,duration:u})=>[U(s.$slots,"default",{remaining:l,duration:u,open:p(i)})]),_:3},16,["open","type","as","as-child","duration"])]),_:3},8,["present"]))}}),tC=eC,nC=L({__name:"ToastTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n;return Z(),(t,o)=>(E(),B(p(de),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),oC=nC,rC=L({__name:"FocusProxy",emits:["focusFromOutsideViewport"],setup(n,{emit:e}){const t=e,o=Ma();return(r,i)=>(E(),B(p(Yr),{"aria-hidden":"true",tabindex:"0",style:{position:"fixed"},onFocus:i[0]||(i[0]=s=>{const a=s.relatedTarget;!p(o).viewport.value?.contains(a)&&t("focusFromOutsideViewport")})},{default:S(()=>[U(r.$slots,"default")]),_:3}))}}),gd=rC,sC=L({inheritAttrs:!1,__name:"ToastViewport",props:{hotkey:{type:Array,required:!1,default:()=>["F8"]},label:{type:[String,Function],required:!1,default:"Notifications ({hotkey})"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"ol"}},setup(n){const e=n,{hotkey:t,label:o}=Ve(e),{forwardRef:r,currentElement:i}=Z(),{CollectionSlot:s,getItems:a}=pt(),l=Ma(),u=F(()=>l.toastCount.value>0),c=N(),d=N(),f=F(()=>t.value.join("+").replace(/Key/g,"").replace(/Digit/g,""));ku(t.value,()=>{i.value.focus()}),Le(()=>{l.onViewportChange(i.value)}),nt(m=>{const v=i.value;if(u.value&&v){const g=()=>{if(!l.isClosePausedRef.value){const C=new CustomEvent(jl);v.dispatchEvent(C),l.isClosePausedRef.value=!0}},y=()=>{if(l.isClosePausedRef.value){const C=new CustomEvent(Wl);v.dispatchEvent(C),l.isClosePausedRef.value=!1}},_=C=>{!v.contains(C.relatedTarget)&&y()},b=()=>{v.contains(et())||y()},x=C=>{const k=C.altKey||C.ctrlKey||C.metaKey;if(C.key==="Tab"&&!k){const R=et(),M=C.shiftKey;if(C.target===v&&M){c.value?.focus();return}const D=h({tabbingDirection:M?"backwards":"forwards"}),V=D.findIndex($=>$===R);Li(D.slice(V+1))?C.preventDefault():M?c.value?.focus():d.value?.focus()}};v.addEventListener("focusin",g),v.addEventListener("focusout",_),v.addEventListener("pointermove",g),v.addEventListener("pointerleave",b),v.addEventListener("keydown",x),window.addEventListener("blur",g),window.addEventListener("focus",y),m(()=>{v.removeEventListener("focusin",g),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",g),v.removeEventListener("pointerleave",b),v.removeEventListener("keydown",x),window.removeEventListener("blur",g),window.removeEventListener("focus",y)})}});function h({tabbingDirection:m}){const g=a().map(y=>y.ref).map(y=>{const _=[y,...Vu(y)];return m==="forwards"?_:_.reverse()});return(m==="forwards"?g.reverse():g).flat()}return(m,v)=>(E(),B(p(fy),{role:"region","aria-label":typeof p(o)=="string"?p(o).replace("{hotkey}",f.value):p(o)(f.value),tabindex:"-1",style:wt({pointerEvents:u.value?void 0:"none"})},{default:S(()=>[u.value?(E(),B(gd,{key:0,ref:g=>{c.value=p(jt)(g)},onFocusFromOutsideViewport:v[0]||(v[0]=()=>{const g=h({tabbingDirection:"forwards"});p(Li)(g)})},null,512)):ue("v-if",!0),T(p(s),null,{default:S(()=>[T(p(de),J({ref:p(r),tabindex:"-1",as:m.as,"as-child":m.asChild},m.$attrs),{default:S(()=>[U(m.$slots,"default")]),_:3},16,["as","as-child"])]),_:3}),u.value?(E(),B(gd,{key:1,ref:g=>{d.value=p(jt)(g)},onFocusFromOutsideViewport:v[1]||(v[1]=()=>{const g=h({tabbingDirection:"backwards"});p(Li)(g)})},null,512)):ue("v-if",!0)]),_:3},8,["aria-label","style"]))}}),iC=sC;const[ic,aC]=Be("TooltipProvider");var lC=L({inheritAttrs:!1,__name:"TooltipProvider",props:{delayDuration:{type:Number,required:!1,default:700},skipDelayDuration:{type:Number,required:!1,default:300},disableHoverableContent:{type:Boolean,required:!1,default:!1},disableClosingTrigger:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:!1}},setup(n){const e=n,{delayDuration:t,skipDelayDuration:o,disableHoverableContent:r,disableClosingTrigger:i,ignoreNonKeyboardFocus:s,disabled:a}=Ve(e);Z();const l=N(!0),u=N(!1),{start:c,stop:d}=da(()=>{l.value=!0},o,{immediate:!1});return aC({isOpenDelayed:l,delayDuration:t,onOpen(){d(),l.value=!1},onClose(){c()},isPointerInTransitRef:u,disableHoverableContent:r,disableClosingTrigger:i,disabled:a,ignoreNonKeyboardFocus:s}),(f,h)=>U(f.$slots,"default")}}),uC=lC;const ch="tooltip.open",[Aa,cC]=Be("TooltipRoot");var dC=L({__name:"TooltipRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},delayDuration:{type:Number,required:!1,default:void 0},disableHoverableContent:{type:Boolean,required:!1,default:void 0},disableClosingTrigger:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1,default:void 0},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(n,{emit:e}){const t=n,o=e;Z();const r=ic(),i=F(()=>t.disableHoverableContent??r.disableHoverableContent.value),s=F(()=>t.disableClosingTrigger??r.disableClosingTrigger.value),a=F(()=>t.disabled??r.disabled.value),l=F(()=>t.delayDuration??r.delayDuration.value),u=F(()=>t.ignoreNonKeyboardFocus??r.ignoreNonKeyboardFocus.value),c=st(t,"open",o,{defaultValue:t.defaultOpen,passive:t.open===void 0});Te(c,b=>{r.onClose&&(b?(r.onOpen(),document.dispatchEvent(new CustomEvent(ch))):r.onClose())});const d=N(!1),f=N(),h=F(()=>c.value?d.value?"delayed-open":"instant-open":"closed"),{start:m,stop:v}=da(()=>{d.value=!0,c.value=!0},l,{immediate:!1});function g(){v(),d.value=!1,c.value=!0}function y(){v(),c.value=!1}function _(){m()}return cC({contentId:"",open:c,stateAttribute:h,trigger:f,onTriggerChange(b){f.value=b},onTriggerEnter(){r.isOpenDelayed.value?_():g()},onTriggerLeave(){i.value?y():v()},onOpen:g,onClose:y,disableHoverableContent:i,disableClosingTrigger:s,disabled:a,ignoreNonKeyboardFocus:u}),(b,x)=>(E(),B(p($s),null,{default:S(()=>[U(b.$slots,"default",{open:p(c)})]),_:3}))}}),fC=dC,pC=L({__name:"TooltipContentImpl",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1,default:0},align:{type:null,required:!1,default:"center"},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1,default:!0},collisionBoundary:{type:null,required:!1,default:()=>[]},collisionPadding:{type:[Number,Object],required:!1,default:0},arrowPadding:{type:Number,required:!1,default:0},sticky:{type:String,required:!1,default:"partial"},hideWhenDetached:{type:Boolean,required:!1,default:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(n,{emit:e}){const t=n,o=e,r=Aa(),{forwardRef:i,currentElement:s}=Z(),a=F(()=>t.ariaLabel||s.value?.textContent),l=F(()=>{const{ariaLabel:u,...c}=t;return c});return Le(()=>{We(window,"scroll",u=>{u.target?.contains(r.trigger.value)&&r.onClose()}),We(window,ch,r.onClose)}),(u,c)=>(E(),B(p(Vs),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:c[0]||(c[0]=d=>o("escapeKeyDown",d)),onPointerDownOutside:c[1]||(c[1]=d=>{p(r).disableClosingTrigger.value&&p(r).trigger.value?.contains(d.target)&&d.preventDefault(),o("pointerDownOutside",d)}),onFocusOutside:c[2]||(c[2]=ze(()=>{},["prevent"])),onDismiss:c[3]||(c[3]=d=>p(r).onClose())},{default:S(()=>[T(p(wa),J({ref:p(i),"data-state":p(r).stateAttribute.value},{...u.$attrs,...l.value},{style:{"--reka-tooltip-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-tooltip-content-available-width":"var(--reka-popper-available-width)","--reka-tooltip-content-available-height":"var(--reka-popper-available-height)","--reka-tooltip-trigger-width":"var(--reka-popper-anchor-width)","--reka-tooltip-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:S(()=>[U(u.$slots,"default"),T(p(Yr),{id:p(r).contentId,role:"tooltip"},{default:S(()=>[ke(Ce(a.value),1)]),_:1},8,["id"])]),_:3},16,["data-state"])]),_:3}))}}),dh=pC,hC=L({__name:"TooltipContentHoverable",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},setup(n){const t=ko(n),{forwardRef:o,currentElement:r}=Z(),{trigger:i,onClose:s}=Aa(),a=ic(),{isPointerInTransit:l,onPointerExit:u}=gg(i,r);return a.isPointerInTransitRef=l,u(()=>{s()}),(c,d)=>(E(),B(dh,J({ref:p(o)},p(t)),{default:S(()=>[U(c.$slots,"default")]),_:3},16))}}),mC=hC,vC=L({__name:"TooltipContent",props:{forceMount:{type:Boolean,required:!1},ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(n,{emit:e}){const t=n,o=e,r=Aa(),i=Gt(t,o),{forwardRef:s}=Z();return(a,l)=>(E(),B(p(Vt),{present:a.forceMount||p(r).open.value},{default:S(()=>[(E(),B(zn(p(r).disableHoverableContent.value?dh:mC),J({ref:p(s)},p(i)),{default:S(()=>[U(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),gC=vC,yC=L({__name:"TooltipPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(n){const e=n;return(t,o)=>(E(),B(p(Fs),Re(De(e)),{default:S(()=>[U(t.$slots,"default")]),_:3},16))}}),_C=yC,bC=L({__name:"TooltipTrigger",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,t=Aa(),o=ic();t.contentId||=Rt(void 0,"reka-tooltip-content");const{forwardRef:r,currentElement:i}=Z(),s=N(!1),a=N(!1),l=F(()=>t.disabled.value?{}:{click:v,focus:h,pointermove:d,pointerleave:f,pointerdown:c,blur:m});Le(()=>{t.onTriggerChange(i.value)});function u(){setTimeout(()=>{s.value=!1},1)}function c(){t.open&&!t.disableClosingTrigger.value&&t.onClose(),s.value=!0,document.addEventListener("pointerup",u,{once:!0})}function d(g){g.pointerType!=="touch"&&!a.value&&!o.isPointerInTransitRef.value&&(t.onTriggerEnter(),a.value=!0)}function f(){t.onTriggerLeave(),a.value=!1}function h(g){s.value||t.ignoreNonKeyboardFocus.value&&!g.target.matches?.(":focus-visible")||t.onOpen()}function m(){t.onClose()}function v(){t.disableClosingTrigger.value||t.onClose()}return(g,y)=>(E(),B(p(Us),{"as-child":"",reference:g.reference},{default:S(()=>[T(p(de),J({ref:p(r),"aria-describedby":p(t).open.value?p(t).contentId:void 0,"data-state":p(t).stateAttribute.value,as:g.as,"as-child":e.asChild,"data-grace-area-trigger":""},Km(l.value)),{default:S(()=>[U(g.$slots,"default")]),_:3},16,["aria-describedby","data-state","as","as-child"])]),_:3},8,["reference"]))}}),wC=bC;function Qi(n){return n.reduce((e,t)=>(e.push(t),t.children&&e.push(...Qi(t.children)),e),[])}const[fh,xC]=Be("TreeRoot");var SC=L({__name:"TreeRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},items:{type:Array,required:!1},expanded:{type:Array,required:!1},defaultExpanded:{type:Array,required:!1},getKey:{type:Function,required:!0},getChildren:{type:Function,required:!1,default:n=>n.children},selectionBehavior:{type:String,required:!1,default:"toggle"},multiple:{type:Boolean,required:!1,skipCheck:!0},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},propagateSelect:{type:Boolean,required:!1},bubbleSelect:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"ul"}},emits:["update:modelValue","update:expanded"],setup(n,{emit:e}){const t=n,o=e,{items:r,multiple:i,disabled:s,propagateSelect:a,dir:l,bubbleSelect:u}=Ve(t),{handleTypeaheadSearch:c}=ha(),d=bn(l),f=N(),h=N(!1),m=Co(),v=st(t,"modelValue",o,{defaultValue:t.defaultValue??(i.value?[]:void 0),passive:!0,deep:!0}),g=st(t,"expanded",o,{defaultValue:t.defaultExpanded??[],passive:t.expanded===void 0,deep:!0}),{onSelectItem:y,handleMultipleReplace:_}=Pg(v,t),b=F(()=>i.value&&Array.isArray(v.value)?v.value.map(M=>t.getKey(M)):[t.getKey(v.value??{})]);function x(M,A=1,O){return M.reduce((D,V,$)=>{const Y=t.getKey(V),W=t.getChildren(V),G=g.value.includes(Y),Q={_id:Y,value:V,index:$,level:A,parentItem:O,hasChildren:!!W,bind:{value:V,level:A,"aria-setsize":M.length,"aria-posinset":$+1}};return D.push(Q),W&&G&&D.push(...x(W,A+1,V)),D},[])}const C=F(()=>{const M=t.items;return g.value.map(A=>A),x(M??[])});function k(M){if(h.value)m.trigger(M);else{const A=f.value?.getItems()??[];c(M.key,A)}}function P(M){if(h.value)return;const A=$u[M.key];Ge(()=>{_(A,et(),f.value?.getItems,C.value.map(O=>O.value))})}function R(M){if(M.parentItem!=null&&Array.isArray(v.value)&&t.multiple){const A=C.value.find(O=>M.parentItem!=null&&t.getKey(O.value)===t.getKey(M.parentItem));A!=null&&(t.getChildren(A.value)?.every(D=>v.value.find(V=>t.getKey(V)===t.getKey(D)))?v.value=[...v.value,A.value]:v.value=v.value.filter(D=>t.getKey(D)!==t.getKey(A.value)),R(A))}}return xC({modelValue:v,selectedKeys:b,onSelect:M=>{const A=D=>t.getKey(D??{})===t.getKey(M),O=t.multiple&&Array.isArray(v.value)?v.value?.findIndex(A)!==-1:void 0;if(y(M,A),t.bubbleSelect&&t.multiple&&Array.isArray(v.value)){const D=C.value.find(V=>t.getKey(V.value)===t.getKey(M));D!=null&&R(D)}if(t.propagateSelect&&t.multiple&&Array.isArray(v.value)){const D=Qi(t.getChildren(M)??[]);O?v.value=[...v.value].filter(V=>!D.some($=>t.getKey(V??{})===t.getKey($))):v.value=[...v.value,...D]}},expanded:g,onToggle(M){if(!(M?t.getChildren(M):void 0))return;const O=t.getKey(M)??M;g.value.includes(O)?g.value=g.value.filter(D=>D!==O):g.value=[...g.value,O]},getKey:t.getKey,getChildren:t.getChildren,items:r,expandedItems:C,disabled:s,multiple:i,dir:d,propagateSelect:a,bubbleSelect:u,isVirtual:h,virtualKeydownHook:m,handleMultipleReplace:_}),(M,A)=>(E(),B(p(Kr),{ref_key:"rovingFocusGroupRef",ref:f,"as-child":"",orientation:"vertical",dir:p(d)},{default:S(()=>[T(p(de),{role:"tree",as:M.as,"as-child":M.asChild,"aria-multiselectable":p(i)?!0:void 0,onKeydown:[k,St(ze(P,["shift"]),["up","down"])]},{default:S(()=>[U(M.$slots,"default",{flattenItems:C.value,modelValue:p(v),expanded:p(g)})]),_:3},8,["as","as-child","aria-multiselectable","onKeydown"])]),_:3},8,["dir"]))}}),CC=SC;const TC="tree.select",EC="tree.toggle";var MC=L({inheritAttrs:!1,__name:"TreeItem",props:{value:{type:null,required:!0},level:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["select","toggle"],setup(n,{expose:e,emit:t}){const o=n,r=t,i=fh(),{getItems:s}=pt(),a=F(()=>!!i.getChildren(o.value)),l=F(()=>{const y=i.getKey(o.value);return i.expanded.value.includes(y)}),u=F(()=>{const y=i.getKey(o.value);return i.selectedKeys.value.includes(y)}),c=F(()=>{if(i.bubbleSelect.value&&a.value&&Array.isArray(i.modelValue.value)){const y=Qi(i.getChildren(o.value)||[]);return y.some(_=>i.modelValue.value.find(b=>i.getKey(b)===i.getKey(_)))&&!y.every(_=>i.modelValue.value.find(b=>i.getKey(b)===i.getKey(_)))}else return i.propagateSelect.value&&u.value&&a.value&&Array.isArray(i.modelValue.value)?!Qi(i.getChildren(o.value)||[]).every(_=>i.modelValue.value.find(b=>i.getKey(b)===i.getKey(_))):void 0});function d(y){if(a.value)if(l.value){const _=s().map(P=>P.ref),b=et(),x=_.indexOf(b),k=[..._].slice(x).find(P=>Number(P.getAttribute("data-indent"))===o.level+1);k&&k.focus()}else g(y)}function f(y){if(l.value)g(y);else{const _=s().map(P=>P.ref),b=et(),x=_.indexOf(b),k=[..._].slice(0,x).reverse().find(P=>Number(P.getAttribute("data-indent"))===o.level-1);k&&k.focus()}}async function h(y){r("select",y),!y?.defaultPrevented&&i.onSelect(o.value)}async function m(y){r("toggle",y),!y?.defaultPrevented&&i.onToggle(o.value)}async function v(y){if(!y)return;const _={originalEvent:y,value:o.value,isExpanded:l.value,isSelected:u.value};Hr(TC,h,_)}async function g(y){if(!y)return;const _={originalEvent:y,value:o.value,isExpanded:l.value,isSelected:u.value};Hr(EC,m,_)}return e({isExpanded:l,isSelected:u,isIndeterminate:c,handleToggle:()=>i.onToggle(o.value),handleSelect:()=>i.onSelect(o.value)}),(y,_)=>(E(),B(p(Ns),{"as-child":"",value:y.value,"allow-shift-key":""},{default:S(()=>[T(p(de),J(y.$attrs,{role:"treeitem",as:y.as,"as-child":y.asChild,"aria-selected":u.value,"aria-expanded":a.value?l.value:void 0,"aria-level":y.level,"data-indent":y.level,"data-selected":u.value?"":void 0,"data-expanded":l.value?"":void 0,onKeydown:[St(ze(v,["self","prevent"]),["enter","space"]),_[0]||(_[0]=St(ze(b=>p(i).dir.value==="ltr"?d(b):f(b),["prevent"]),["right"])),_[1]||(_[1]=St(ze(b=>p(i).dir.value==="ltr"?f(b):d(b),["prevent"]),["left"]))],onClick:_[2]||(_[2]=ze(b=>{v(b),g(b)},["stop"]))}),{default:S(()=>[U(y.$slots,"default",{isExpanded:l.value,isSelected:u.value,isIndeterminate:c.value,handleSelect:()=>p(i).onSelect(y.value),handleToggle:()=>p(i).onToggle(y.value)})]),_:3},16,["as","as-child","aria-selected","aria-expanded","aria-level","data-indent","data-selected","data-expanded","onKeydown"])]),_:3},8,["value"]))}}),AC=MC,PC=L({__name:"TreeVirtualizer",props:{overscan:{type:Number,required:!1},estimateSize:{type:[Number,Function],required:!1},textContent:{type:Function,required:!1}},setup(n){const e=n,t=Ym(),o=fh(),r=fg(),{getItems:i}=pt(),s=Iu("",1e3),a=F(()=>{const f=h=>e.textContent?e.textContent(h):h.toString().toLowerCase();return o.expandedItems.value.map((h,m)=>({index:m,textContent:f(h.value)}))});o.isVirtual.value=!0;const l=F(()=>{const f=r.value;if(f){const h=window.getComputedStyle(f);return{start:Number.parseFloat(h.paddingBlockStart||h.paddingTop),end:Number.parseFloat(h.paddingBlockEnd||h.paddingBottom)}}else return{start:0,end:0}}),u=Fb({get scrollPaddingStart(){return l.value.start},get scrollPaddingEnd(){return l.value.end},get count(){return o.expandedItems.value.length??0},get horizontal(){return!1},getItemKey(f){return f+o.getKey(o.expandedItems.value[f].value)},estimateSize(f){return typeof e.estimateSize=="function"?e.estimateSize(f):e.estimateSize??28},getScrollElement(){return r.value},overscan:e.overscan??12}),c=F(()=>u.value.getVirtualItems().map(f=>({item:f,is:Pf(t.default({item:o.expandedItems.value[f.index],virtualizer:u.value,virtualItem:f})[0],{"data-index":f.index,style:{position:"absolute",top:0,left:0,transform:`translateY(${f.start}px)`,overflowAnchor:"none"}})})));function d(f){u.value.scrollToIndex(f,{align:"start"}),requestAnimationFrame(()=>{const h=r.value.querySelector(`[data-index="${f}"]`);h instanceof HTMLElement&&h.focus()})}return o.virtualKeydownHook.on(f=>{const h=f.altKey||f.ctrlKey||f.metaKey;if(f.key==="Tab"&&!h)return;const v=$u[f.key];if(["first","last"].includes(v)){f.preventDefault();const g=v==="first"?0:o.expandedItems.value.length-1;u.value.scrollToIndex(g),requestAnimationFrame(()=>{const y=i();(v==="first"?y[0]:y[y.length-1]).ref.focus()})}else if(v==="prev"&&f.key!=="ArrowUp"){const g=et(),y=Number(g.getAttribute("data-index")),_=Number(g.getAttribute("data-indent")),x=o.expandedItems.value.slice(0,y).map((C,k)=>({...C,index:k})).reverse().find(C=>C.level===_-1);x&&d(x.index)}else if(!v&&!h){s.value+=f.key;const g=Number(et()?.getAttribute("data-index")),y=a.value[g].textContent,_=a.value.map(C=>C.textContent),b=ep(_,s.value,y),x=a.value.find(C=>C.textContent===b);x&&d(x.index)}Ge(()=>{f.shiftKey&&v&&o.handleMultipleReplace(v,et(),i,o.expandedItems.value.map(g=>g.value))})}),(f,h)=>(E(),ne("div",{"data-reka-virtualizer":"",style:wt({position:"relative",width:"100%",height:`${p(u).getTotalSize()}px`})},[(E(!0),ne(Ie,null,ot(c.value,({is:m,item:v})=>(E(),B(zn(m),{key:v.key}))),128))],4))}}),IC=PC;const bs={Content:Xg,Header:Qg,Item:Kg,Root:jg,Trigger:ey},Yn={Root:x0,Trigger:K0,Portal:D0,Content:C0,Arrow:g0,Item:A0,Group:E0,Separator:N0,CheckboxItem:_0,ItemIndicator:I0,Label:O0,RadioGroup:q0,RadioItem:V0,Sub:U0,SubContent:H0,SubTrigger:W0},Uo={Root:oy,Trigger:jy,Portal:$y,Content:Oy,Overlay:Vy,Close:sy,Title:zy,Description:Dy},wn={Root:ww,Trigger:Xw,Portal:qw,Content:Ew,Arrow:vw,Item:Iw,Group:Aw,Separator:Uw,CheckboxItem:yw,ItemIndicator:Ow,Label:Dw,RadioGroup:Vw,RadioItem:Nw,Sub:Hw,SubContent:Ww,SubTrigger:Kw,Menu:Cw},li={Root:Z0,Trigger:hw,Portal:fw,Content:cw,Arrow:tw,Close:ow,Anchor:J0},ui={Root:Mx,Viewport:e1,Scrollbar:Gx,Thumb:Qx,Corner:Rx},po={Root:i1,Trigger:K1,Portal:F1,Content:x1,Arrow:g1,Separator:W1,ItemIndicator:k1,Label:L1,Group:E1,Item:R1,ItemText:B1,Viewport:Q1,ScrollUpButton:H1,ScrollDownButton:U1,Value:X1,Icon:A1},ci={Root:TS,List:RS,Content:MS,Trigger:kS,Indicator:PS},yd={Root:CC,Item:AC,Virtualizer:IC},Pa=L({__name:"MxDialog",props:sr({title:{},root:{},trigger:{},portal:{},overlay:{},content:{},resize:{type:Boolean},outsideInteraction:{type:Boolean}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=Et(n,"modelValue"),t=Nn("dialogContentRef"),o=Nn("handleRef"),{style:r,x:i,y:s}=tg(t,{preventDefault:!0,handle:o,containerElement:document.body});return Te(t,a=>{if(!a)return;const{innerWidth:l,innerHeight:u}=window,c=t.value?.clientWidth||0,d=t.value?.clientHeight||0;i.value=l/2-c/2,s.value=u/2-d/2}),(a,l)=>{const u=Yr;return E(),B(p(Uo).Root,J(n.root,{open:e.value,"onUpdate:open":l[1]||(l[1]=c=>e.value=c)}),{default:S(()=>[T(p(Uo).Trigger,Re(De(n.trigger)),{default:S(()=>[U(a.$slots,"trigger")]),_:3},16),T(p(Uo).Portal,Re(De(n.portal)),{default:S(()=>[T(p(Uo).Overlay,J({class:"fixed inset-0"},n.overlay),null,16),T(p(Uo).Content,J(n.content,{"as-child":"",onInteractOutside:l[0]||(l[0]=c=>n.outsideInteraction?c.preventDefault():void 0)}),{default:S(()=>[j("div",{ref_key:"dialogContentRef",ref:t,style:wt(p(r)),class:no(["fixed overflow-hidden rounded p-0 z-1000",[a.$attrs.class,{resize:n.resize}]])},[j("div",{ref_key:"handleRef",ref:o,class:"z-10 absolute top-0 left-0 w-full h-9 cursor-move"},null,512),T(u,{"as-child":""},{default:S(()=>[T(p(Uo).Title,null,{default:S(()=>[ke(Ce(n.title),1)]),_:1})]),_:1}),T(u,{"as-child":""},{default:S(()=>[T(p(Uo).Description)]),_:1}),U(a.$slots,"default")],6)]),_:3},16)]),_:3},16)]),_:3},16,["open"])}}}),Jr=L({__name:"ScrollContainer",setup(n){return(e,t)=>(E(),B(p(ui).Root,{class:"relative gap-1 overflow-hidden h-full",type:"auto"},{default:S(()=>[T(p(ui).Viewport,{class:"snap h-full w-full snap-y snap-proximity select-none"},{default:S(()=>[U(e.$slots,"default")]),_:3}),T(p(ui).Scrollbar,{orientation:"vertical",class:"flex touch-none p-0.5 transition-colors duration-160 ease-out data-[orientation=horizontal]:h-2.5 data-[orientation=horizontal]:flex-col data-[orientation=vertical]:w-2.5"},{default:S(()=>[T(p(ui).Thumb,{class:"relative flex-1 rounded bg-ui-scroll-item before:absolute before:top-1/2 before:left-1/2 before:h-full before:min-h-[44px] before:w-full before:min-w-5 before:-translate-x-1/2 before:-translate-y-1/2 before:content-['']"})]),_:1})]),_:3}))}}),fr=L({__name:"MxAccordionRoot",props:{collapsible:{type:Boolean},disabled:{type:Boolean},dir:{},orientation:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{},type:{},modelValue:{},defaultValue:{}},setup(n){return(e,t)=>(E(),B(p(bs).Root,Re(De(e.$props)),{default:S(()=>[U(e.$slots,"default")]),_:3},16))}}),RC="modulepreload",OC=function(n){return"/"+n},_d={},we=function(e,t,o){let r=Promise.resolve();if(t&&t.length>0){let l=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");r=l(t.map(u=>{if(u=OC(u),u in _d)return;_d[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":RC,c||(f.as="script"),f.crossOrigin="",f.href=u,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return r.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},kC=(n,e,t)=>{const o=n[e];return o?typeof o=="function"?o():Promise.resolve(o):new Promise((r,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},vt=L({__name:"MxIcon",props:{name:{}},setup(n){const e=n,t=F(()=>{const o=e.name.split("/"),r=o[0],i=o[1];return Xm(()=>kC(Object.assign({"../../assets/icons/base/arrow-right.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aj),[]),"../../assets/icons/base/triangle-down.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.ak),[]),"../../assets/icons/base/triangle-right.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.al),[]),"../../assets/icons/keys/lmb.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.am),[]),"../../assets/icons/keys/mmb.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.an),[]),"../../assets/icons/light/light-area.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.ao),[]),"../../assets/icons/light/light-point.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.ap),[]),"../../assets/icons/light/light-spot.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aq),[]),"../../assets/icons/light/light-sun.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.ar),[]),"../../assets/icons/light/light.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.as),[]),"../../assets/icons/mesh/mesh-circle.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.at),[]),"../../assets/icons/mesh/mesh-cone.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.au),[]),"../../assets/icons/mesh/mesh-cube.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.av),[]),"../../assets/icons/mesh/mesh-cylinder.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aw),[]),"../../assets/icons/mesh/mesh-icosphere.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.ax),[]),"../../assets/icons/mesh/mesh-plane.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.ay),[]),"../../assets/icons/mesh/mesh-sphere.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.az),[]),"../../assets/icons/mesh/mesh-torus.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aA),[]),"../../assets/icons/mesh/mesh.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aB),[]),"../../assets/icons/misc/export.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aC),[]),"../../assets/icons/misc/eye-dropper.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aD),[]),"../../assets/icons/misc/full-screen.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aE),[]),"../../assets/icons/misc/github.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aF),[]),"../../assets/icons/misc/text.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aG),[]),"../../assets/icons/misc/url.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aH),[]),"../../assets/icons/misc/visibility-hidden.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aI),[]),"../../assets/icons/misc/visibility-visible.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aJ),[]),"../../assets/icons/outliner/empty.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aK),[]),"../../assets/icons/outliner/group.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aL),[]),"../../assets/icons/outliner/outliner.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aM),[]),"../../assets/icons/properties/camera-properties.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aN),[]),"../../assets/icons/properties/data-properties.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aO),[]),"../../assets/icons/properties/geometry-properties.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aP),[]),"../../assets/icons/properties/light-properties.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aQ),[]),"../../assets/icons/properties/properties.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aR),[]),"../../assets/icons/properties/text-properties.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aS),[]),"../../assets/icons/shading/shading-preview.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aT),[]),"../../assets/icons/shading/shading-rendered.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aU),[]),"../../assets/icons/shading/shading-solid.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aV),[]),"../../assets/icons/shading/shading-wireframe.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aW),[]),"../../assets/icons/toolbar/tool-move.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aX),[]),"../../assets/icons/toolbar/tool-rotate.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aY),[]),"../../assets/icons/toolbar/tool-scale.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.aZ),[]),"../../assets/icons/ui/arrow-right.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.a_),[]),"../../assets/icons/ui/asset-browser.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.a$),[]),"../../assets/icons/ui/checkbox-checked.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.b0),[]),"../../assets/icons/ui/checkbox-unchecked.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.b1),[]),"../../assets/icons/ui/checkmark.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.b2),[]),"../../assets/icons/ui/chevron-right.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.b3),[]),"../../assets/icons/ui/collection.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.b4),[]),"../../assets/icons/ui/import.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.b5),[]),"../../assets/icons/ui/material-data.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.b6),[]),"../../assets/icons/ui/object-data.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.b7),[]),"../../assets/icons/ui/render-image.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.b8),[]),"../../assets/icons/ui/viewport.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.b9),[]),"../../assets/icons/view/view-orthographic.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.ba),[]),"../../assets/icons/view/view-perspective.svg":()=>we(()=>import("./icons-CticbwbE.js").then(s=>s.bb),[])}),`../../assets/icons/${r}/${i}.svg`,6))});return(o,r)=>(E(),B(zn(t.value),Re(De(o.$attrs)),null,16))}}),pr=L({__name:"InputCheckbox",props:{defaultValue:{type:[Boolean,String]},modelValue:{type:[Boolean,String,null]},disabled:{type:Boolean},value:{},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const r=Gt(n,e);return(i,s)=>{const a=vt,l=d_,u=lp;return E(),B(u,J(p(r),{class:"size-5 rounded border border-ui-option-outline bg-ui-option-inner"}),{default:S(()=>[T(l,{class:"h-full text-xs w-full rounded flex items-center justify-center bg-ui-option-inner-selected","data-testid":"checkbox-indicator"},{default:S(()=>[T(a,{name:"ui/checkmark"})]),_:1})]),_:1},16)}}}),DC={class:"font-panel-title"},BC={class:"inset-0 absolute z-10 bg-ui-panel-background/75 pointer-events-none"},Wn=L({__name:"MxAccordionItem",props:sr({item:{},header:{},trigger:{},content:{},label:{},nested:{type:Boolean},showCheckbox:{type:Boolean}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=Et(n,"modelValue");return(t,o)=>{const r=vt,i=pr;return E(),B(p(bs).Item,J({class:"text-xs rounded-ui-panel"},n.item,{class:{"border-ui-panel-outline border":!n.nested}}),{default:S(({open:s})=>[T(p(bs).Header,J({class:"bg-ui-panel-header px-2 py-1 text-ui-panel-title"},n.header),{default:S(()=>[T(p(bs).Trigger,J({class:"group flex w-full cursor-pointer items-center gap-1"},n.trigger),{default:S(()=>[T(r,{name:"ui/arrow-right",class:"transition-rotate inline-block size-[1em] duration-200 group-data-[state='open']:rotate-90"}),n.showCheckbox?(E(),B(i,{key:0,modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=a=>e.value=a),onClick:o[1]||(o[1]=ze(()=>{},["stop"]))},null,8,["modelValue"])):ue("",!0),j("span",DC,Ce(n.label),1)]),_:1},16)]),_:1},16),T(p(bs).Content,J({class:"data-[state='open']:animate-accordion-slide-down data-[state='closed']:animate-accordion-slide-up overflow-hidden text-ui-panel-text bg-ui-panel-header relative"},n.content,{class:{"bg-ui-sub-panel":n.nested}}),{default:S(()=>[oo(j("div",BC,null,512),[[Ps,!e.value&&n.showCheckbox]]),U(t.$slots,"default",{open:s})]),_:2},1040,["class"])]),_:3},16,["class"])}}}),ac=L({__name:"MxSlider",props:sr({root:{},track:{},range:{},thumb:{},group:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=Et(n,"modelValue");return(t,o)=>{const r=vS,i=xS,s=bS,a=pS;return E(),B(a,J({modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=l=>e.value=l),class:["w-full h-5 block relative border-ui-slider-outline",{"not-last:border-b":n.group}]},t.$props.root),{default:S(()=>[T(i,J({class:"h-full bg-ui-slider-inner block"},t.$props.track),{default:S(()=>[T(r,J({class:"bg-ui-slider-item absolute h-full"},t.$props.range),null,16),U(t.$slots,"default")]),_:3},16),T(s,Re(De(t.$props.thumb)),null,16)]),_:3},16,["modelValue","class"])}}}),qC={class:"group flex grow max-w-full overflow-hidden rounded-sm bg-ui-number-inner"},pn=L({__name:"InputNumber",props:sr({defaultValue:{},modelValue:{},min:{},max:{},step:{},stepSnapping:{type:Boolean},focusOnChange:{type:Boolean},formatOptions:{default:()=>({minimumFractionDigits:3})},locale:{},disabled:{type:Boolean},readonly:{type:Boolean},disableWheelChange:{type:Boolean},invertWheelChange:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=n,t=Et(n,"modelValue");return(o,r)=>{const i=vt,s=ux,a=px,l=dx,u=ax;return E(),B(u,J(e,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=c=>t.value=c),class:"flex justify-end"}),{default:S(()=>[j("div",qC,[T(s,{class:"cursor-pointer shrink-0 grow-0 bg-ui-number-inner px-0.5 opacity-0 group-hover:opacity-100 hover:brightness-125"},{default:S(()=>[T(i,{name:"ui/arrow-right",class:"rotate-180 text-[0.75em]"})]),_:1}),T(a,{class:"grow w-full bg-ui-number-inner text-center outline-none group-hover:brightness-110 py-0.5","data-testid":"number-input"}),T(l,{class:"shrink-0 grow-0 cursor-pointer bg-ui-number-inner px-0.5 opacity-0 group-hover:opacity-100 hover:brightness-125"},{default:S(()=>[T(i,{name:"ui/arrow-right",class:"text-[0.75em]"})]),_:1})])]),_:1},16,["modelValue"])}}}),LC={key:0},VC={key:1},FC={key:2,class:"text-[0.9em] opacity-50"},es=L({__name:"MxTooltip",props:{tooltipDisabled:{type:Boolean},tooltip:{},options:{}},setup(n){return(e,t)=>(E(),B(p(fC),{disabled:n.tooltipDisabled},{default:S(()=>[T(p(wC),J({"as-child":""},n.options?.trigger),{default:S(()=>[U(e.$slots,"default")]),_:3},16),T(p(_C),null,{default:S(()=>[T(p(gC),J({align:"start"},n.options?.content,{class:"flex max-w-xs flex-col gap-1 rounded border border-ui-tooltip-outline bg-ui-tooltip-inner p-2 text-tooltip text-ui-tooltip-text"}),{default:S(()=>[U(e.$slots,"content",{},()=>[n.tooltip?.title?(E(),ne("span",LC,Ce(n.tooltip.title),1)):ue("",!0),n.tooltip?.text?(E(),ne("p",VC,Ce(n.tooltip?.text),1)):ue("",!0),n.tooltip?.footer?(E(),ne("span",FC,Ce(n.tooltip?.footer),1)):ue("",!0)])]),_:3},16)]),_:3})]),_:3},8,["disabled"]))}}),ht=L({__name:"InputField",props:{label:{},inputWidth:{default:"auto"},labelWidth:{default:"min-content"},reverse:{type:Boolean},tooltip:{default:()=>{}}},setup(n){const e=F(()=>`${n.labelWidth} ${n.inputWidth}`);return(t,o)=>{const r=es;return E(),ne("div",{class:"grid grid-cols-[min-content_1fr] items-start gap-x-2.5 whitespace-nowrap relative",style:wt({gridTemplateColumns:e.value})},[T(r,{tooltip:n.tooltip,"tooltip-disabled":!n.tooltip},{default:S(()=>[j("span",{class:no(["px-1 py-0.5 leading-4",{"order-1":n.reverse}])},Ce(n.label),3)]),_:1},8,["tooltip","tooltip-disabled"]),U(t.$slots,"default")],4)}}}),ts=L({__name:"InputSelect",props:sr({root:{},placeholder:{},trigger:{},content:{},item:{},items:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=Et(n,"modelValue");return(t,o)=>{const r=vt,i=Jr;return E(),B(p(po).Root,J(n.root,{modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=s=>e.value=s)}),{default:S(()=>[T(p(po).Trigger,J(n.trigger,{class:["inline-flex max-w-full items-center justify-between gap-1 rounded border border-ui-menu-outline bg-ui-menu-inner px-1 py-0.5 text-ui-menu-text",t.$attrs.class]}),{default:S(()=>[T(p(po).Value,{placeholder:n.placeholder,class:"h-[1.5em]"},null,8,["placeholder"]),T(r,{name:"ui/chevron-right",class:"rotate-90"})]),_:1},16,["class"]),T(p(po).Portal,{disabled:""},{default:S(()=>[T(p(po).Content,J(n.content,{class:"z-50 rounded border border-ui-menu-bg-outline bg-ui-menu-bg-inner p-0.5 text-ui-menu-text select-none"}),{default:S(()=>[T(i,null,{default:S(()=>[T(p(po).Viewport,{class:"flex flex-col gap-1"},{default:S(()=>[(E(!0),ne(Ie,null,ot(n.items,s=>(E(),B(p(po).Item,J({ref_for:!0},n.item,{key:"item_"+s.value,value:s.value,class:"rounded p-1 text-xs data-highlighted:text-ui-menu-item-selected data-highlighted:bg-gray-500 data-[state='checked']:bg--menu-item-inner-selected"}),{default:S(()=>[T(p(po).ItemText,null,{default:S(()=>[ke(Ce(s.label),1)]),_:2},1024)]),_:2},1040,["value"]))),128))]),_:1})]),_:1})]),_:1},16)]),_:1})]),_:1},16,["modelValue"])}}}),NC={class:"flex flex-col gap-2 p-2"},$C={class:"flex items-center gap-2"},UC={class:"text-xs w-9"},zC=L({__name:"RenderImageSettings",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=[{value:"480p",label:"480p (854x480)",width:854,height:480},{value:"720p",label:"720p (1280x720)",width:1280,height:720},{value:"1080p",label:"1080p (1920x1080)",width:1920,height:1080},{value:"1440p",label:"1440p (2560x1440)",width:2560,height:1440},{value:"4k",label:"4K (3840x2160)",width:3840,height:2160},{value:"custom",label:"Custom"}],t=e.map(({label:a,value:l})=>({label:a,value:l})),o=[{value:"png",label:"PNG"},{value:"jpeg",label:"JPEG"},{value:"webp",label:"WebP"}],r=Et(n,"modelValue"),i=Mn({preset:"1080p"});Te(()=>i.preset,a=>{const l=e.find(({value:u})=>u===a);if(l&&l.value!=="custom"){const{width:u,height:c}=l;r.value.width=u,r.value.height=c}},{immediate:!0}),Te(()=>r.value.selectedFormat,a=>{a==="jpeg"&&(r.value.background=!0)});const s=F({get:()=>[r.value.quality],set:a=>r.value.quality=a[0]??100});return(a,l)=>{const u=ts,c=ht,d=pn,f=ac,h=pr;return E(),ne("div",NC,[T(c,{label:"Preset","label-width":"90px"},{default:S(()=>[T(u,{modelValue:i.preset,"onUpdate:modelValue":l[0]||(l[0]=m=>i.preset=m),items:p(t)},null,8,["modelValue","items"])]),_:1}),i.preset==="custom"?(E(),ne(Ie,{key:0},[T(c,{label:"Width","label-width":"90px"},{default:S(()=>[T(d,{modelValue:r.value.width,"onUpdate:modelValue":l[1]||(l[1]=m=>r.value.width=m),min:100,max:8192,"format-options":{maximumFractionDigits:0}},null,8,["modelValue"])]),_:1}),T(c,{label:"Height","label-width":"90px"},{default:S(()=>[T(d,{modelValue:r.value.height,"onUpdate:modelValue":l[2]||(l[2]=m=>r.value.height=m),min:100,max:8192,"format-options":{maximumFractionDigits:0}},null,8,["modelValue"])]),_:1})],64)):ue("",!0),T(c,{label:"Format","label-width":"90px"},{default:S(()=>[T(u,{modelValue:r.value.selectedFormat,"onUpdate:modelValue":l[3]||(l[3]=m=>r.value.selectedFormat=m),items:o},null,8,["modelValue"])]),_:1}),r.value.selectedFormat!=="png"?(E(),B(c,{key:1,label:"Quality","label-width":"90px"},{default:S(()=>[j("div",$C,[T(f,{modelValue:s.value,"onUpdate:modelValue":l[4]||(l[4]=m=>s.value=m),root:{min:0,max:100,step:1}},null,8,["modelValue"]),j("span",UC,Ce(r.value.quality)+"%",1)])]),_:1})):ue("",!0),r.value.selectedFormat!=="jpeg"?(E(),B(c,{key:2,label:"Background","label-width":"90px"},{default:S(()=>[T(h,{modelValue:r.value.background,"onUpdate:modelValue":l[5]||(l[5]=m=>r.value.background=m)},null,8,["modelValue"])]),_:1})):ue("",!0)])}}});let ph;const Ia=n=>ph=n,hh=Symbol();function Gl(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Cs;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Cs||(Cs={}));function HC(){const n=ia(!0),e=n.run(()=>N({}));let t=[],o=[];const r=wu({install(i){Ia(r),r._a=i,i.provide(hh,r),i.config.globalProperties.$pinia=r,o.forEach(s=>t.push(s)),o=[]},use(i){return this._a?t.push(i):o.push(i),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return r}const mh=()=>{};function bd(n,e,t,o=mh){n.add(e);const r=()=>{n.delete(e)&&o()};return!t&&yu()&&sa(r),r}function _r(n,...e){n.forEach(t=>{t(...e)})}const jC=n=>n(),wd=Symbol(),el=Symbol();function Kl(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,o)=>n.set(o,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const o=e[t],r=n[t];Gl(r)&&Gl(o)&&n.hasOwnProperty(t)&&!Lt(o)&&!Of(o)?n[t]=Kl(r,o):n[t]=o}return n}const WC=Symbol();function GC(n){return!Gl(n)||!Object.prototype.hasOwnProperty.call(n,WC)}const{assign:go}=Object;function KC(n){return!!(Lt(n)&&n.effect)}function YC(n,e,t,o){const{state:r,actions:i,getters:s}=e,a=t.state.value[n];let l;function u(){a||(t.state.value[n]=r?r():{});const c=Ve(t.state.value[n]);return go(c,i,Object.keys(s||{}).reduce((d,f)=>(d[f]=wu(F(()=>{Ia(t);const h=t._s.get(n);return s[f].call(h,h)})),d),{}))}return l=vh(n,u,e,t,o,!0),l}function vh(n,e,t={},o,r,i){let s;const a=go({actions:{}},t),l={deep:!0};let u,c,d=new Set,f=new Set,h;const m=o.state.value[n];!i&&!m&&(o.state.value[n]={});let v;function g(R){let M;u=c=!1,typeof R=="function"?(R(o.state.value[n]),M={type:Cs.patchFunction,storeId:n,events:h}):(Kl(o.state.value[n],R),M={type:Cs.patchObject,payload:R,storeId:n,events:h});const A=v=Symbol();Ge().then(()=>{v===A&&(u=!0)}),c=!0,_r(d,M,o.state.value[n])}const y=i?function(){const{state:M}=t,A=M?M():{};this.$patch(O=>{go(O,A)})}:mh;function _(){s.stop(),d.clear(),f.clear(),o._s.delete(n)}const b=(R,M="")=>{if(wd in R)return R[el]=M,R;const A=function(){Ia(o);const O=Array.from(arguments),D=new Set,V=new Set;function $(G){D.add(G)}function Y(G){V.add(G)}_r(f,{args:O,name:A[el],store:C,after:$,onError:Y});let W;try{W=R.apply(this&&this.$id===n?this:C,O)}catch(G){throw _r(V,G),G}return W instanceof Promise?W.then(G=>(_r(D,G),G)).catch(G=>(_r(V,G),Promise.reject(G))):(_r(D,W),W)};return A[wd]=!0,A[el]=M,A},x={_p:o,$id:n,$onAction:bd.bind(null,f),$patch:g,$reset:y,$subscribe(R,M={}){const A=bd(d,R,M.detached,()=>O()),O=s.run(()=>Te(()=>o.state.value[n],D=>{(M.flush==="sync"?c:u)&&R({storeId:n,type:Cs.direct,events:h},D)},go({},l,M)));return A},$dispose:_},C=Mn(x);o._s.set(n,C);const P=(o._a&&o._a.runWithContext||jC)(()=>o._e.run(()=>(s=ia()).run(()=>e({action:b}))));for(const R in P){const M=P[R];if(Lt(M)&&!KC(M)||Of(M))i||(m&&GC(M)&&(Lt(M)?M.value=m[R]:Kl(M,m[R])),o.state.value[n][R]=M);else if(typeof M=="function"){const A=b(M,R);P[R]=A,a.actions[R]=M}}return go(C,P),go(Rf(C),P),Object.defineProperty(C,"$state",{get:()=>o.state.value[n],set:R=>{g(M=>{go(M,R)})}}),o._p.forEach(R=>{go(C,s.run(()=>R({store:C,app:o._a,pinia:o,options:a})))}),m&&i&&t.hydrate&&t.hydrate(C.$state,m),u=!0,c=!0,C}function Ws(n,e,t){let o;const r=typeof e=="function";o=r?t:e;function i(s,a){const l=Zm();return s=s||(l?gu(hh,null):null),s&&Ia(s),s=ph,s._s.has(n)||(r?vh(n,e,o,s):YC(n,o,s)),s._s.get(n)}return i.$id=n,i}const xd={type:"change"},lc={type:"start"},gh={type:"end"},di=new Bf,Sd=new Su,XC=Math.cos(70*So.DEG2RAD),yt=new ee,Zt=2*Math.PI,Ye={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},tl=1e-6;class ZC extends Df{constructor(e,t=null){super(e,t),this.state=Ye.NONE,this.target=new ee,this.cursor=new ee,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Vr.ROTATE,MIDDLE:Vr.DOLLY,RIGHT:Vr.PAN},this.touches={ONE:kr.ROTATE,TWO:kr.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._cursorStyle="auto",this._domElementKeyEvents=null,this._lastPosition=new ee,this._lastQuaternion=new Dt,this._lastTargetPosition=new ee,this._quat=new Dt().setFromUnitVectors(e.up,new ee(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Tl,this._sphericalDelta=new Tl,this._scale=1,this._panOffset=new ee,this._rotateStart=new Ne,this._rotateEnd=new Ne,this._rotateDelta=new Ne,this._panStart=new Ne,this._panEnd=new Ne,this._panDelta=new Ne,this._dollyStart=new Ne,this._dollyEnd=new Ne,this._dollyDelta=new Ne,this._dollyDirection=new ee,this._mouse=new Ne,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=JC.bind(this),this._onPointerDown=QC.bind(this),this._onPointerUp=eT.bind(this),this._onContextMenu=aT.bind(this),this._onMouseWheel=oT.bind(this),this._onKeyDown=rT.bind(this),this._onTouchStart=sT.bind(this),this._onTouchMove=iT.bind(this),this._onMouseDown=tT.bind(this),this._onMouseMove=nT.bind(this),this._interceptControlDown=lT.bind(this),this._interceptControlUp=uT.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}set cursorStyle(e){this._cursorStyle=e,e==="grab"?this.domElement.style.cursor="grab":this.domElement.style.cursor="auto"}get cursorStyle(){return this._cursorStyle}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(xd),this.update(),this.state=Ye.NONE}pan(e,t){this._pan(e,t),this.update()}dollyIn(e){this._dollyIn(e),this.update()}dollyOut(e){this._dollyOut(e),this.update()}rotateLeft(e){this._rotateLeft(e),this.update()}rotateUp(e){this._rotateUp(e),this.update()}update(e=null){const t=this.object.position;yt.copy(t).sub(this.target),yt.applyQuaternion(this._quat),this._spherical.setFromVector3(yt),this.autoRotate&&this.state===Ye.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let o=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(o)&&isFinite(r)&&(o<-Math.PI?o+=Zt:o>Math.PI&&(o-=Zt),r<-Math.PI?r+=Zt:r>Math.PI&&(r-=Zt),o<=r?this._spherical.theta=Math.max(o,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(o+r)/2?Math.max(o,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let i=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),i=s!=this._spherical.radius}if(yt.setFromSpherical(this._spherical),yt.applyQuaternion(this._quatInverse),t.copy(this.target).add(yt),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){const a=yt.length();s=this._clampDistance(a*this._scale);const l=a-s;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),i=!!l}else if(this.object.isOrthographicCamera){const a=new ee(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),i=l!==this.object.zoom;const u=new ee(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(a),this.object.updateMatrixWorld(),s=yt.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(di.origin.copy(this.object.position),di.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(di.direction))<XC?this.object.lookAt(this.target):(Sd.setFromNormalAndCoplanarPoint(this.object.up,this.target),di.intersectPlane(Sd,this.target))))}else if(this.object.isOrthographicCamera){const s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),i=!0)}return this._scale=1,this._performCursorZoom=!1,i||this._lastPosition.distanceToSquared(this.object.position)>tl||8*(1-this._lastQuaternion.dot(this.object.quaternion))>tl||this._lastTargetPosition.distanceToSquared(this.target)>tl?(this.dispatchEvent(xd),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Zt/60*this.autoRotateSpeed*e:Zt/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){yt.setFromMatrixColumn(t,0),yt.multiplyScalar(-e),this._panOffset.add(yt)}_panUp(e,t){this.screenSpacePanning===!0?yt.setFromMatrixColumn(t,1):(yt.setFromMatrixColumn(t,0),yt.crossVectors(this.object.up,yt)),yt.multiplyScalar(e),this._panOffset.add(yt)}_pan(e,t){const o=this.domElement;if(this.object.isPerspectiveCamera){const r=this.object.position;yt.copy(r).sub(this.target);let i=yt.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*i/o.clientHeight,this.object.matrix),this._panUp(2*t*i/o.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/o.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/o.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const o=this.domElement.getBoundingClientRect(),r=e-o.left,i=t-o.top,s=o.width,a=o.height;this._mouse.x=r/s*2-1,this._mouse.y=-(i/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Zt*this._rotateDelta.x/t.clientHeight),this._rotateUp(Zt*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Zt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Zt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Zt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Zt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),o=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(o,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),o=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(o,r)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),o=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(o*o+r*r);this._dollyStart.set(0,i)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const o=this._getSecondPointerPosition(e),r=.5*(e.pageX+o.x),i=.5*(e.pageY+o.y);this._rotateEnd.set(r,i)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Zt*this._rotateDelta.x/t.clientHeight),this._rotateUp(Zt*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),o=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(o,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),o=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(o*o+r*r);this._dollyEnd.set(0,i),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const s=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Ne,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,o={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:o.deltaY*=16;break;case 2:o.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(o.deltaY*=10),o}}function QC(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n),this._cursorStyle==="grab"&&(this.domElement.style.cursor="grabbing")))}function JC(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function eT(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(gh),this.state=Ye.NONE,this._cursorStyle==="grab"&&(this.domElement.style.cursor="grab");break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function tT(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Vr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Ye.DOLLY;break;case Vr.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Ye.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Ye.ROTATE}break;case Vr.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Ye.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Ye.PAN}break;default:this.state=Ye.NONE}this.state!==Ye.NONE&&this.dispatchEvent(lc)}function nT(n){switch(this.state){case Ye.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Ye.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Ye.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function oT(n){this.enabled===!1||this.enableZoom===!1||this.state!==Ye.NONE||(n.preventDefault(),this.dispatchEvent(lc),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(gh))}function rT(n){this.enabled!==!1&&this._handleKeyDown(n)}function sT(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case kr.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Ye.TOUCH_ROTATE;break;case kr.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Ye.TOUCH_PAN;break;default:this.state=Ye.NONE}break;case 2:switch(this.touches.TWO){case kr.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Ye.TOUCH_DOLLY_PAN;break;case kr.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Ye.TOUCH_DOLLY_ROTATE;break;default:this.state=Ye.NONE}break;default:this.state=Ye.NONE}this.state!==Ye.NONE&&this.dispatchEvent(lc)}function iT(n){switch(this._trackPointer(n),this.state){case Ye.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Ye.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Ye.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Ye.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Ye.NONE}}function aT(n){this.enabled!==!1&&n.preventDefault()}function lT(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function uT(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const yh=0,cT=1,dT=2,Cd=2,nl=1.25,Td=1,Bt=32,_t=Bt/4,_h=65535,Vi=Math.pow(2,-24),uc=Symbol("SKIP_GENERATION"),bh={strategy:yh,maxDepth:40,maxLeafSize:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0,range:null,[uc]:!1};function ft(n,e,t){return t.min.x=e[n],t.min.y=e[n+1],t.min.z=e[n+2],t.max.x=e[n+3],t.max.y=e[n+4],t.max.z=e[n+5],t}function Ed(n){let e=-1,t=-1/0;for(let o=0;o<3;o++){const r=n[o+3]-n[o];r>t&&(t=r,e=o)}return e}function Md(n,e){e.set(n)}function Ad(n,e,t){let o,r;for(let i=0;i<3;i++){const s=i+3;o=n[i],r=e[i],t[i]=o<r?o:r,o=n[s],r=e[s],t[s]=o>r?o:r}}function fi(n,e,t){for(let o=0;o<3;o++){const r=e[n+2*o],i=e[n+2*o+1],s=r-i,a=r+i;s<t[o]&&(t[o]=s),a>t[o+3]&&(t[o+3]=a)}}function as(n){const e=n[3]-n[0],t=n[4]-n[1],o=n[5]-n[2];return 2*(e*t+t*o+o*e)}function bt(n,e){return e[n+15]===_h}function qt(n,e){return e[n+6]}function zt(n,e){return e[n+14]}function Ct(n){return n+_t}function Tt(n,e){const t=e[n+6];return n+t*_t}function cc(n,e){return e[n+7]}function ol(n,e,t,o,r){let i=1/0,s=1/0,a=1/0,l=-1/0,u=-1/0,c=-1/0,d=1/0,f=1/0,h=1/0,m=-1/0,v=-1/0,g=-1/0;const y=n.offset||0;for(let _=(e-y)*6,b=(e+t-y)*6;_<b;_+=6){const x=n[_+0],C=n[_+1],k=x-C,P=x+C;k<i&&(i=k),P>l&&(l=P),x<d&&(d=x),x>m&&(m=x);const R=n[_+2],M=n[_+3],A=R-M,O=R+M;A<s&&(s=A),O>u&&(u=O),R<f&&(f=R),R>v&&(v=R);const D=n[_+4],V=n[_+5],$=D-V,Y=D+V;$<a&&(a=$),Y>c&&(c=Y),D<h&&(h=D),D>g&&(g=D)}o[0]=i,o[1]=s,o[2]=a,o[3]=l,o[4]=u,o[5]=c,r[0]=d,r[1]=f,r[2]=h,r[3]=m,r[4]=v,r[5]=g}const Xn=32,fT=(n,e)=>n.candidate-e.candidate,ho=new Array(Xn).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),pi=new Float32Array(6);function pT(n,e,t,o,r,i){let s=-1,a=0;if(i===yh)s=Ed(e),s!==-1&&(a=(e[s]+e[s+3])/2);else if(i===cT)s=Ed(n),s!==-1&&(a=hT(t,o,r,s));else if(i===dT){const l=as(n);let u=nl*r;const c=t.offset||0,d=(o-c)*6,f=(o+r-c)*6;for(let h=0;h<3;h++){const m=e[h],y=(e[h+3]-m)/Xn;if(r<Xn/4){const _=[...ho];_.length=r;let b=0;for(let C=d;C<f;C+=6,b++){const k=_[b];k.candidate=t[C+2*h],k.count=0;const{bounds:P,leftCacheBounds:R,rightCacheBounds:M}=k;for(let A=0;A<3;A++)M[A]=1/0,M[A+3]=-1/0,R[A]=1/0,R[A+3]=-1/0,P[A]=1/0,P[A+3]=-1/0;fi(C,t,P)}_.sort(fT);let x=r;for(let C=0;C<x;C++){const k=_[C];for(;C+1<x&&_[C+1].candidate===k.candidate;)_.splice(C+1,1),x--}for(let C=d;C<f;C+=6){const k=t[C+2*h];for(let P=0;P<x;P++){const R=_[P];k>=R.candidate?fi(C,t,R.rightCacheBounds):(fi(C,t,R.leftCacheBounds),R.count++)}}for(let C=0;C<x;C++){const k=_[C],P=k.count,R=r-k.count,M=k.leftCacheBounds,A=k.rightCacheBounds;let O=0;P!==0&&(O=as(M)/l);let D=0;R!==0&&(D=as(A)/l);const V=Td+nl*(O*P+D*R);V<u&&(s=h,u=V,a=k.candidate)}}else{for(let x=0;x<Xn;x++){const C=ho[x];C.count=0,C.candidate=m+y+x*y;const k=C.bounds;for(let P=0;P<3;P++)k[P]=1/0,k[P+3]=-1/0}for(let x=d;x<f;x+=6){let P=~~((t[x+2*h]-m)/y);P>=Xn&&(P=Xn-1);const R=ho[P];R.count++,fi(x,t,R.bounds)}const _=ho[Xn-1];Md(_.bounds,_.rightCacheBounds);for(let x=Xn-2;x>=0;x--){const C=ho[x],k=ho[x+1];Ad(C.bounds,k.rightCacheBounds,C.rightCacheBounds)}let b=0;for(let x=0;x<Xn-1;x++){const C=ho[x],k=C.count,P=C.bounds,M=ho[x+1].rightCacheBounds;k!==0&&(b===0?Md(P,pi):Ad(P,pi,pi)),b+=k;let A=0,O=0;b!==0&&(A=as(pi)/l);const D=r-b;D!==0&&(O=as(M)/l);const V=Td+nl*(A*b+O*D);V<u&&(s=h,u=V,a=C.candidate)}}}}else console.warn(`BVH: Invalid build strategy value ${i} used.`);return{axis:s,pos:a}}function hT(n,e,t,o){let r=0;const i=n.offset;for(let s=e,a=e+t;s<a;s++)r+=n[(s-i)*6+o*2];return r/t}class rl{constructor(){this.boundingData=new Float32Array(6)}}function mT(n,e,t,o,r,i){let s=o,a=o+r-1;const l=i.pos,u=i.axis*2,c=t.offset||0;for(;;){for(;s<=a&&t[(s-c)*6+u]<l;)s++;for(;s<=a&&t[(a-c)*6+u]>=l;)a--;if(s<a){for(let d=0;d<e;d++){let f=n[s*e+d];n[s*e+d]=n[a*e+d],n[a*e+d]=f}for(let d=0;d<6;d++){const f=s-c,h=a-c,m=t[f*6+d];t[f*6+d]=t[h*6+d],t[h*6+d]=m}s++,a--}else return s}}let wh,Fi,Yl,xh;const vT=Math.pow(2,32);function Xl(n){return"count"in n?1:1+Xl(n.left)+Xl(n.right)}function gT(n,e,t){return wh=new Float32Array(t),Fi=new Uint32Array(t),Yl=new Uint16Array(t),xh=new Uint8Array(t),Zl(n,e)}function Zl(n,e){const t=n/4,o=n/2,r="count"in e,i=e.boundingData;for(let s=0;s<6;s++)wh[t+s]=i[s];if(r)return e.buffer?(xh.set(new Uint8Array(e.buffer),n),n+e.buffer.byteLength):(Fi[t+6]=e.offset,Yl[o+14]=e.count,Yl[o+15]=_h,n+Bt);{const{left:s,right:a,splitAxis:l}=e,u=n+Bt;let c=Zl(u,s);const d=n/Bt,h=c/Bt-d;if(h>vT)throw new Error("MeshBVH: Cannot store relative child node offset greater than 32 bits.");return Fi[t+6]=h,Fi[t+7]=l,Zl(c,a)}}function yT(n,e,t,o,r,i){const{maxDepth:s,verbose:a,maxLeafSize:l,strategy:u,onProgress:c}=r,d=n.primitiveBuffer,f=n.primitiveBufferStride,h=new Float32Array(6);let m=!1;const v=new rl;return ol(e,t,o,v.boundingData,h),y(v,t,o,h),v;function g(_){c&&c((_-i.offset)/i.count)}function y(_,b,x,C=null,k=0){if(!m&&k>=s&&(m=!0,a&&console.warn(`BVH: Max depth of ${s} reached when generating BVH. Consider increasing maxDepth.`)),x<=l||k>=s)return g(b+x),_.offset=b,_.count=x,_;const P=pT(_.boundingData,C,e,b,x,u);if(P.axis===-1)return g(b+x),_.offset=b,_.count=x,_;const R=mT(d,f,e,b,x,P);if(R===b||R===b+x)g(b+x),_.offset=b,_.count=x;else{_.splitAxis=P.axis;const M=new rl,A=b,O=R-b;_.left=M,ol(e,A,O,M.boundingData,h),y(M,A,O,h,k+1);const D=new rl,V=R,$=x-O;_.right=D,ol(e,V,$,D.boundingData,h),y(D,V,$,h,k+1)}return _}}function _T(n,e){const t=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,o=n.getRootRanges(e.range),r=o[0],i=o[o.length-1],s={offset:r.offset,count:i.offset+i.count-r.offset},a=new Float32Array(6*s.count);a.offset=s.offset,n.computePrimitiveBounds(s.offset,s.count,a),n._roots=o.map(l=>{const u=yT(n,a,l.offset,l.count,e,s),c=Xl(u),d=new t(Bt*c);return gT(0,u,d),d})}class dc{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class bT{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let t=null;this.setBuffer=o=>{t&&e.push(t),t=o,this.float32Array=new Float32Array(o),this.uint16Array=new Uint16Array(o),this.uint32Array=new Uint32Array(o)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}}const rt=new bT;let bo,Br;const br=[],hi=new dc(()=>new dn);function wT(n,e,t,o,r,i){bo=hi.getPrimitive(),Br=hi.getPrimitive(),br.push(bo,Br),rt.setBuffer(n._roots[e]);const s=Ql(0,n.geometry,t,o,r,i);rt.clearBuffer(),hi.releasePrimitive(bo),hi.releasePrimitive(Br),br.pop(),br.pop();const a=br.length;return a>0&&(Br=br[a-1],bo=br[a-2]),s}function Ql(n,e,t,o,r=null,i=0,s=0){const{float32Array:a,uint16Array:l,uint32Array:u}=rt;let c=n*2;if(bt(c,l)){const f=qt(n,u),h=zt(c,l);return ft(n,a,bo),o(f,h,!1,s,i+n/_t,bo)}else{let A=function(D){const{uint16Array:V,uint32Array:$}=rt;let Y=D*2;for(;!bt(Y,V);)D=Ct(D),Y=D*2;return qt(D,$)},O=function(D){const{uint16Array:V,uint32Array:$}=rt;let Y=D*2;for(;!bt(Y,V);)D=Tt(D,$),Y=D*2;return qt(D,$)+zt(Y,V)};const f=Ct(n),h=Tt(n,u);let m=f,v=h,g,y,_,b;if(r&&(_=bo,b=Br,ft(m,a,_),ft(v,a,b),g=r(_),y=r(b),y<g)){m=h,v=f;const D=g;g=y,y=D,_=b}_||(_=bo,ft(m,a,_));const x=bt(m*2,l),C=t(_,x,g,s+1,i+m/_t);let k;if(C===Cd){const D=A(m),$=O(m)-D;k=o(D,$,!0,s+1,i+m/_t,_)}else k=C&&Ql(m,e,t,o,r,i,s+1);if(k)return!0;b=Br,ft(v,a,b);const P=bt(v*2,l),R=t(b,P,y,s+1,i+v/_t);let M;if(R===Cd){const D=A(v),$=O(v)-D;M=o(D,$,!0,s+1,i+v/_t,b)}else M=R&&Ql(v,e,t,o,r,i,s+1);return!!M}}const Ts=new rt.constructor,Ji=new rt.constructor,yo=new dc(()=>new dn),wr=new dn,xr=new dn,sl=new dn,il=new dn;let al=!1;function xT(n,e,t,o){if(al)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");al=!0;const r=n._roots,i=e._roots;let s,a=0,l=0;const u=new Ht().copy(t).invert();for(let c=0,d=r.length;c<d;c++){Ts.setBuffer(r[c]),l=0;const f=yo.getPrimitive();ft(0,Ts.float32Array,f),f.applyMatrix4(u);for(let h=0,m=i.length;h<m&&(Ji.setBuffer(i[h]),s=xn(0,0,t,u,o,a,l,0,0,f),Ji.clearBuffer(),l+=i[h].byteLength/Bt,!s);h++);if(yo.releasePrimitive(f),Ts.clearBuffer(),a+=r[c].byteLength/Bt,s)break}return al=!1,s}function xn(n,e,t,o,r,i=0,s=0,a=0,l=0,u=null,c=!1){let d,f;c?(d=Ji,f=Ts):(d=Ts,f=Ji);const h=d.float32Array,m=d.uint32Array,v=d.uint16Array,g=f.float32Array,y=f.uint32Array,_=f.uint16Array,b=n*2,x=e*2,C=bt(b,v),k=bt(x,_);let P=!1;if(k&&C)c?P=r(qt(e,y),zt(e*2,_),qt(n,m),zt(n*2,v),l,s+e/_t,a,i+n/_t):P=r(qt(n,m),zt(n*2,v),qt(e,y),zt(e*2,_),a,i+n/_t,l,s+e/_t);else if(k){const R=yo.getPrimitive();ft(e,g,R),R.applyMatrix4(t);const M=Ct(n),A=Tt(n,m);ft(M,h,wr),ft(A,h,xr);const O=R.intersectsBox(wr),D=R.intersectsBox(xr);P=O&&xn(e,M,o,t,r,s,i,l,a+1,R,!c)||D&&xn(e,A,o,t,r,s,i,l,a+1,R,!c),yo.releasePrimitive(R)}else{const R=Ct(e),M=Tt(e,y);ft(R,g,sl),ft(M,g,il);const A=u.intersectsBox(sl),O=u.intersectsBox(il);if(A&&O)P=xn(n,R,t,o,r,i,s,a,l+1,u,c)||xn(n,M,t,o,r,i,s,a,l+1,u,c);else if(A)if(C)P=xn(n,R,t,o,r,i,s,a,l+1,u,c);else{const D=yo.getPrimitive();D.copy(sl).applyMatrix4(t);const V=Ct(n),$=Tt(n,m);ft(V,h,wr),ft($,h,xr);const Y=D.intersectsBox(wr),W=D.intersectsBox(xr);P=Y&&xn(R,V,o,t,r,s,i,l,a+1,D,!c)||W&&xn(R,$,o,t,r,s,i,l,a+1,D,!c),yo.releasePrimitive(D)}else if(O)if(C)P=xn(n,M,t,o,r,i,s,a,l+1,u,c);else{const D=yo.getPrimitive();D.copy(il).applyMatrix4(t);const V=Ct(n),$=Tt(n,m);ft(V,h,wr),ft($,h,xr);const Y=D.intersectsBox(wr),W=D.intersectsBox(xr);P=Y&&xn(M,V,o,t,r,s,i,l,a+1,D,!c)||W&&xn(M,$,o,t,r,s,i,l,a+1,D,!c),yo.releasePrimitive(D)}}return P}const Pd=new dn,Sr=new Float32Array(6);class ST{constructor(){this._roots=null,this.primitiveBuffer=null,this.primitiveBufferStride=null}init(e){e={...bh,...e},_T(this,e)}getRootRanges(){throw new Error("BVH: getRootRanges() not implemented")}writePrimitiveBounds(){throw new Error("BVH: writePrimitiveBounds() not implemented")}writePrimitiveRangeBounds(e,t,o,r){let i=1/0,s=1/0,a=1/0,l=-1/0,u=-1/0,c=-1/0;for(let d=e,f=e+t;d<f;d++){this.writePrimitiveBounds(d,Sr,0);const[h,m,v,g,y,_]=Sr;h<i&&(i=h),g>l&&(l=g),m<s&&(s=m),y>u&&(u=y),v<a&&(a=v),_>c&&(c=_)}return o[r+0]=i,o[r+1]=s,o[r+2]=a,o[r+3]=l,o[r+4]=u,o[r+5]=c,o}computePrimitiveBounds(e,t,o){const r=o.offset||0;for(let i=e,s=e+t;i<s;i++){this.writePrimitiveBounds(i,Sr,0);const[a,l,u,c,d,f]=Sr,h=(a+c)/2,m=(l+d)/2,v=(u+f)/2,g=(c-a)/2,y=(d-l)/2,_=(f-u)/2,b=(i-r)*6;o[b+0]=h,o[b+1]=g+(Math.abs(h)+g)*Vi,o[b+2]=m,o[b+3]=y+(Math.abs(m)+y)*Vi,o[b+4]=v,o[b+5]=_+(Math.abs(v)+_)*Vi}return o}shiftPrimitiveOffsets(e){const t=this._indirectBuffer;if(t)for(let o=0,r=t.length;o<r;o++)t[o]+=e;else{const o=this._roots;for(let r=0;r<o.length;r++){const i=o[r],s=new Uint32Array(i),a=new Uint16Array(i),l=i.byteLength/Bt;for(let u=0;u<l;u++){const c=_t*u,d=2*c;bt(d,a)&&(s[c+6]+=e)}}}}traverse(e,t=0){const o=this._roots[t],r=new Uint32Array(o),i=new Uint16Array(o);s(0);function s(a,l=0){const u=a*2,c=bt(u,i);if(c){const d=r[a+6],f=i[u+14];e(l,c,new Float32Array(o,a*4,6),d,f)}else{const d=Ct(a),f=Tt(a,r),h=cc(a,r);e(l,c,new Float32Array(o,a*4,6),h)||(s(d,l+1),s(f,l+1))}}}refit(){const e=this._roots;for(let t=0,o=e.length;t<o;t++){const r=e[t],i=new Uint32Array(r),s=new Uint16Array(r),a=new Float32Array(r),l=r.byteLength/Bt;for(let u=l-1;u>=0;u--){const c=u*_t,d=c*2;if(bt(d,s)){const h=qt(c,i),m=zt(d,s);this.writePrimitiveRangeBounds(h,m,Sr,0),a.set(Sr,c)}else{const h=Ct(c),m=Tt(c,i);for(let v=0;v<3;v++){const g=a[h+v],y=a[h+v+3],_=a[m+v],b=a[m+v+3];a[c+v]=g<_?g:_,a[c+v+3]=y>b?y:b}}}}}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(o=>{ft(0,new Float32Array(o),Pd),e.union(Pd)}),e}shapecast(e){let{boundsTraverseOrder:t,intersectsBounds:o,intersectsRange:r,intersectsPrimitive:i,scratchPrimitive:s,iterate:a}=e;if(r&&i){const d=r;r=(f,h,m,v,g)=>d(f,h,m,v,g)?!0:a(f,h,this,i,m,v,s)}else r||(i?r=(d,f,h,m)=>a(d,f,this,i,h,m,s):r=(d,f,h)=>h);let l=!1,u=0;const c=this._roots;for(let d=0,f=c.length;d<f;d++){const h=c[d];if(l=wT(this,d,o,r,t,u),l)break;u+=h.byteLength/Bt}return l}bvhcast(e,t,o){let{intersectsRanges:r}=o;return xT(this,e,t,r)}}function CT(){return typeof SharedArrayBuffer<"u"}function fc(n){return n.index?n.index.count:n.attributes.position.count}function Ra(n){return fc(n)/3}function TT(n,e=ArrayBuffer){return n>65535?new Uint32Array(new e(4*n)):new Uint16Array(new e(2*n))}function ET(n,e){if(!n.index){const t=n.attributes.position.count,o=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=TT(t,o);n.setIndex(new un(r,1));for(let i=0;i<t;i++)r[i]=i}}function MT(n,e,t){const o=fc(n)/t,r=e||n.drawRange,i=r.start/t,s=(r.start+r.count)/t,a=Math.max(0,i),l=Math.min(o,s)-a;return{offset:Math.floor(a),count:Math.floor(l)}}function AT(n,e){return n.groups.map(t=>({offset:t.start/e,count:t.count/e}))}function Id(n,e,t){const o=MT(n,e,t),r=AT(n,t);if(!r.length)return[o];const i=[],s=o.offset,a=o.offset+o.count,l=fc(n)/t,u=[];for(const f of r){const{offset:h,count:m}=f,v=h,g=isFinite(m)?m:l-h,y=h+g;v<a&&y>s&&(u.push({pos:Math.max(s,v),isStart:!0}),u.push({pos:Math.min(a,y),isStart:!1}))}u.sort((f,h)=>f.pos!==h.pos?f.pos-h.pos:f.type==="end"?-1:1);let c=0,d=null;for(const f of u){const h=f.pos;c!==0&&h!==d&&i.push({offset:d,count:h-d}),c+=f.isStart?1:-1,d=h}return i}function PT(n,e){const t=n[n.length-1],o=t.offset+t.count>2**16,r=n.reduce((u,c)=>u+c.count,0),i=o?4:2,s=e?new SharedArrayBuffer(r*i):new ArrayBuffer(r*i),a=o?new Uint32Array(s):new Uint16Array(s);let l=0;for(let u=0;u<n.length;u++){const{offset:c,count:d}=n[u];for(let f=0;f<d;f++)a[l+f]=c+f;l+=d}return a}class IT extends ST{get indirect(){return!!this._indirectBuffer}get primitiveStride(){return null}get primitiveBufferStride(){return this.indirect?1:this.primitiveStride}set primitiveBufferStride(e){}get primitiveBuffer(){return this.indirect?this._indirectBuffer:this.geometry.index.array}set primitiveBuffer(e){}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("BVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("BVH: Only BufferGeometries are supported.");if(t.useSharedArrayBuffer&&!CT())throw new Error("BVH: SharedArrayBuffer is not available.");super(),this.geometry=e,this.resolvePrimitiveIndex=t.indirect?o=>this._indirectBuffer[o]:o=>o,this.primitiveBuffer=null,this.primitiveBufferStride=null,this._indirectBuffer=null,t={...bh,...t},t[uc]||this.init(t)}init(e){const{geometry:t,primitiveStride:o}=this;if(e.indirect){const r=Id(t,e.range,o),i=PT(r,e.useSharedArrayBuffer);this._indirectBuffer=i}else ET(t,e);super.init(e),!t.boundingBox&&e.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new dn))}getRootRanges(e){return this.indirect?[{offset:0,count:this._indirectBuffer.length}]:Id(this.geometry,e,this.primitiveStride)}raycastObject3D(){throw new Error("BVH: raycastObject3D() not implemented")}}class lo{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let o=1/0,r=-1/0;for(let i=0,s=e.length;i<s;i++){const l=e[i][t];o=l<o?l:o,r=l>r?l:r}this.min=o,this.max=r}setFromPoints(e,t){let o=1/0,r=-1/0;for(let i=0,s=t.length;i<s;i++){const a=t[i],l=e.dot(a);o=l<o?l:o,r=l>r?l:r}this.min=o,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}lo.prototype.setFromBox=(function(){const n=new ee;return function(t,o){const r=o.min,i=o.max;let s=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let u=0;u<=1;u++)for(let c=0;c<=1;c++){n.x=r.x*l+i.x*(1-l),n.y=r.y*u+i.y*(1-u),n.z=r.z*c+i.z*(1-c);const d=t.dot(n);s=Math.min(d,s),a=Math.max(d,a)}this.min=s,this.max=a}})();const RT=(function(){const n=new ee,e=new ee,t=new ee;return function(r,i,s){const a=r.start,l=n,u=i.start,c=e;t.subVectors(a,u),n.subVectors(r.end,r.start),e.subVectors(i.end,i.start);const d=t.dot(c),f=c.dot(l),h=c.dot(c),m=t.dot(l),g=l.dot(l)*h-f*f;let y,_;g!==0?y=(d*f-m*h)/g:y=0,_=(d+y*f)/h,s.x=y,s.y=_}})(),pc=(function(){const n=new Ne,e=new ee,t=new ee;return function(r,i,s,a){RT(r,i,n);let l=n.x,u=n.y;if(l>=0&&l<=1&&u>=0&&u<=1){r.at(l,s),i.at(u,a);return}else if(l>=0&&l<=1){u<0?i.at(0,a):i.at(1,a),r.closestPointToPoint(a,!0,s);return}else if(u>=0&&u<=1){l<0?r.at(0,s):r.at(1,s),i.closestPointToPoint(s,!0,a);return}else{let c;l<0?c=r.start:c=r.end;let d;u<0?d=i.start:d=i.end;const f=e,h=t;if(r.closestPointToPoint(d,!0,e),i.closestPointToPoint(c,!0,t),f.distanceToSquared(d)<=h.distanceToSquared(c)){s.copy(f),a.copy(d);return}else{s.copy(c),a.copy(h);return}}}})(),OT=(function(){const n=new ee,e=new ee,t=new Su,o=new $n;return function(i,s){const{radius:a,center:l}=i,{a:u,b:c,c:d}=s;if(o.start=u,o.end=c,o.closestPointToPoint(l,!0,n).distanceTo(l)<=a||(o.start=u,o.end=d,o.closestPointToPoint(l,!0,n).distanceTo(l)<=a)||(o.start=c,o.end=d,o.closestPointToPoint(l,!0,n).distanceTo(l)<=a))return!0;const v=s.getPlane(t);if(Math.abs(v.distanceToPoint(l))<=a){const y=v.projectPoint(l,e);if(s.containsPoint(y))return!0}return!1}})(),kT=["x","y","z"],Qn=1e-15,Rd=Qn*Qn;function gn(n){return Math.abs(n)<Qn}class In extends Ir{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new ee),this.satBounds=new Array(4).fill().map(()=>new lo),this.points=[this.a,this.b,this.c],this.plane=new Su,this.isDegenerateIntoSegment=!1,this.isDegenerateIntoPoint=!1,this.degenerateSegment=new $n,this.needsUpdate=!0}intersectsSphere(e){return OT(e,this)}update(){const e=this.a,t=this.b,o=this.c,r=this.points,i=this.satAxes,s=this.satBounds,a=i[0],l=s[0];this.getNormal(a),l.setFromPoints(a,r);const u=i[1],c=s[1];u.subVectors(e,t),c.setFromPoints(u,r);const d=i[2],f=s[2];d.subVectors(t,o),f.setFromPoints(d,r);const h=i[3],m=s[3];h.subVectors(o,e),m.setFromPoints(h,r);const v=u.length(),g=d.length(),y=h.length();this.isDegenerateIntoPoint=!1,this.isDegenerateIntoSegment=!1,v<Qn?g<Qn||y<Qn?this.isDegenerateIntoPoint=!0:(this.isDegenerateIntoSegment=!0,this.degenerateSegment.start.copy(e),this.degenerateSegment.end.copy(o)):g<Qn?y<Qn?this.isDegenerateIntoPoint=!0:(this.isDegenerateIntoSegment=!0,this.degenerateSegment.start.copy(t),this.degenerateSegment.end.copy(e)):y<Qn&&(this.isDegenerateIntoSegment=!0,this.degenerateSegment.start.copy(o),this.degenerateSegment.end.copy(t)),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}In.prototype.closestPointToSegment=(function(){const n=new ee,e=new ee,t=new $n;return function(r,i=null,s=null){const{start:a,end:l}=r,u=this.points;let c,d=1/0;for(let f=0;f<3;f++){const h=(f+1)%3;t.start.copy(u[f]),t.end.copy(u[h]),pc(t,r,n,e),c=n.distanceToSquared(e),c<d&&(d=c,i&&i.copy(n),s&&s.copy(e))}return this.closestPointToPoint(a,n),c=a.distanceToSquared(n),c<d&&(d=c,i&&i.copy(n),s&&s.copy(a)),this.closestPointToPoint(l,n),c=l.distanceToSquared(n),c<d&&(d=c,i&&i.copy(n),s&&s.copy(l)),Math.sqrt(d)}})();In.prototype.intersectsTriangle=(function(){const n=new In,e=new lo,t=new lo,o=new ee,r=new ee,i=new ee,s=new ee,a=new $n,l=new $n,u=new ee,c=new Ne,d=new Ne;function f(b,x,C,k){const P=o;!b.isDegenerateIntoPoint&&!b.isDegenerateIntoSegment?P.copy(b.plane.normal):P.copy(x.plane.normal);const R=b.satBounds,M=b.satAxes;for(let D=1;D<4;D++){const V=R[D],$=M[D];if(e.setFromPoints($,x.points),V.isSeparated(e)||(s.copy(P).cross($),e.setFromPoints(s,b.points),t.setFromPoints(s,x.points),e.isSeparated(t)))return!1}const A=x.satBounds,O=x.satAxes;for(let D=1;D<4;D++){const V=A[D],$=O[D];if(e.setFromPoints($,b.points),V.isSeparated(e)||(s.crossVectors(P,$),e.setFromPoints(s,b.points),t.setFromPoints(s,x.points),e.isSeparated(t)))return!1}return C&&(k||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),C.start.set(0,0,0),C.end.set(0,0,0)),!0}function h(b,x,C,k,P,R,M,A,O,D,V){let $=M/(M-A);D.x=k+(P-k)*$,V.start.subVectors(x,b).multiplyScalar($).add(b),$=M/(M-O),D.y=k+(R-k)*$,V.end.subVectors(C,b).multiplyScalar($).add(b)}function m(b,x,C,k,P,R,M,A,O,D,V){if(P>0)h(b.c,b.a,b.b,k,x,C,O,M,A,D,V);else if(R>0)h(b.b,b.a,b.c,C,x,k,A,M,O,D,V);else if(A*O>0||M!=0)h(b.a,b.b,b.c,x,C,k,M,A,O,D,V);else if(A!=0)h(b.b,b.a,b.c,C,x,k,A,M,O,D,V);else if(O!=0)h(b.c,b.a,b.b,k,x,C,O,M,A,D,V);else return!0;return!1}function v(b,x,C,k){const P=x.degenerateSegment,R=b.plane.distanceToPoint(P.start),M=b.plane.distanceToPoint(P.end);return gn(R)?gn(M)?f(b,x,C,k):(C&&(C.start.copy(P.start),C.end.copy(P.start)),b.containsPoint(P.start)):gn(M)?(C&&(C.start.copy(P.end),C.end.copy(P.end)),b.containsPoint(P.end)):b.plane.intersectLine(P,o)!=null?(C&&(C.start.copy(o),C.end.copy(o)),b.containsPoint(o)):!1}function g(b,x,C){const k=x.a;return gn(b.plane.distanceToPoint(k))&&b.containsPoint(k)?(C&&(C.start.copy(k),C.end.copy(k)),!0):!1}function y(b,x,C){const k=b.degenerateSegment,P=x.a;return k.closestPointToPoint(P,!0,o),P.distanceToSquared(o)<Rd?(C&&(C.start.copy(P),C.end.copy(P)),!0):!1}function _(b,x,C,k){if(b.isDegenerateIntoSegment)if(x.isDegenerateIntoSegment){const P=b.degenerateSegment,R=x.degenerateSegment,M=r,A=i;P.delta(M),R.delta(A);const O=o.subVectors(R.start,P.start),D=M.x*A.y-M.y*A.x;if(gn(D))return!1;const V=(O.x*A.y-O.y*A.x)/D,$=-(M.x*O.y-M.y*O.x)/D;if(V<0||V>1||$<0||$>1)return!1;const Y=P.start.z+M.z*V,W=R.start.z+A.z*$;return gn(Y-W)?(C&&(C.start.copy(P.start).addScaledVector(M,V),C.end.copy(P.start).addScaledVector(M,V)),!0):!1}else return x.isDegenerateIntoPoint?y(b,x,C):v(x,b,C,k);else{if(b.isDegenerateIntoPoint)return x.isDegenerateIntoPoint?x.a.distanceToSquared(b.a)<Rd?(C&&(C.start.copy(b.a),C.end.copy(b.a)),!0):!1:x.isDegenerateIntoSegment?y(x,b,C):g(x,b,C);if(x.isDegenerateIntoPoint)return g(b,x,C);if(x.isDegenerateIntoSegment)return v(b,x,C,k)}}return function(x,C=null,k=!1){this.needsUpdate&&this.update(),x.isExtendedTriangle?x.needsUpdate&&x.update():(n.copy(x),n.update(),x=n);const P=_(this,x,C,k);if(P!==void 0)return P;const R=this.plane,M=x.plane;let A=M.distanceToPoint(this.a),O=M.distanceToPoint(this.b),D=M.distanceToPoint(this.c);gn(A)&&(A=0),gn(O)&&(O=0),gn(D)&&(D=0);const V=A*O,$=A*D;if(V>0&&$>0)return!1;let Y=R.distanceToPoint(x.a),W=R.distanceToPoint(x.b),G=R.distanceToPoint(x.c);gn(Y)&&(Y=0),gn(W)&&(W=0),gn(G)&&(G=0);const Q=Y*W,ge=Y*G;if(Q>0&&ge>0)return!1;r.copy(R.normal),i.copy(M.normal);const ce=r.cross(i);let re=0,pe=Math.abs(ce.x);const Ee=Math.abs(ce.y);Ee>pe&&(pe=Ee,re=1),Math.abs(ce.z)>pe&&(re=2);const Ae=kT[re],be=this.a[Ae],Ue=this.b[Ae],lt=this.c[Ae],Ft=x.a[Ae],dt=x.b[Ae],Yt=x.c[Ae];if(m(this,be,Ue,lt,V,$,A,O,D,c,a))return f(this,x,C,k);if(m(x,Ft,dt,Yt,Q,ge,Y,W,G,d,l))return f(this,x,C,k);if(c.y<c.x){const Nt=c.y;c.y=c.x,c.x=Nt,u.copy(a.start),a.start.copy(a.end),a.end.copy(u)}if(d.y<d.x){const Nt=d.y;d.y=d.x,d.x=Nt,u.copy(l.start),l.start.copy(l.end),l.end.copy(u)}return c.y<d.x||d.y<c.x?!1:(C&&(d.x>c.x?C.start.copy(l.start):C.start.copy(a.start),d.y<c.y?C.end.copy(l.end):C.end.copy(a.end)),!0)}})();In.prototype.distanceToPoint=(function(){const n=new ee;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}})();In.prototype.distanceToTriangle=(function(){const n=new ee,e=new ee,t=["a","b","c"],o=new $n,r=new $n;return function(s,a=null,l=null){const u=a||l?o:null;if(this.intersectsTriangle(s,u))return(a||l)&&(a&&u.getCenter(a),l&&u.getCenter(l)),0;let c=1/0;for(let d=0;d<3;d++){let f;const h=t[d],m=s[h];this.closestPointToPoint(m,n),f=m.distanceToSquared(n),f<c&&(c=f,a&&a.copy(n),l&&l.copy(m));const v=this[h];s.closestPointToPoint(v,n),f=v.distanceToSquared(n),f<c&&(c=f,a&&a.copy(v),l&&l.copy(n))}for(let d=0;d<3;d++){const f=t[d],h=t[(d+1)%3];o.set(this[f],this[h]);for(let m=0;m<3;m++){const v=t[m],g=t[(m+1)%3];r.set(s[v],s[g]),pc(o,r,n,e);const y=n.distanceToSquared(e);y<c&&(c=y,a&&a.copy(n),l&&l.copy(e))}}return Math.sqrt(c)}})();class Kt{constructor(e,t,o){this.isOrientedBox=!0,this.min=new ee,this.max=new ee,this.matrix=new Ht,this.invMatrix=new Ht,this.points=new Array(8).fill().map(()=>new ee),this.satAxes=new Array(3).fill().map(()=>new ee),this.satBounds=new Array(3).fill().map(()=>new lo),this.alignedSatBounds=new Array(3).fill().map(()=>new lo),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),o&&this.matrix.copy(o)}set(e,t,o){this.min.copy(e),this.max.copy(t),this.matrix.copy(o),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}Kt.prototype.update=(function(){return function(){const e=this.matrix,t=this.min,o=this.max,r=this.points;for(let u=0;u<=1;u++)for(let c=0;c<=1;c++)for(let d=0;d<=1;d++){const f=1*u|2*c|4*d,h=r[f];h.x=u?o.x:t.x,h.y=c?o.y:t.y,h.z=d?o.z:t.z,h.applyMatrix4(e)}const i=this.satBounds,s=this.satAxes,a=r[0];for(let u=0;u<3;u++){const c=s[u],d=i[u],f=1<<u,h=r[f];c.subVectors(a,h),d.setFromPoints(c,r)}const l=this.alignedSatBounds;l[0].setFromPointsField(r,"x"),l[1].setFromPointsField(r,"y"),l[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}})();Kt.prototype.intersectsBox=(function(){const n=new lo;return function(t){this.needsUpdate&&this.update();const o=t.min,r=t.max,i=this.satBounds,s=this.satAxes,a=this.alignedSatBounds;if(n.min=o.x,n.max=r.x,a[0].isSeparated(n)||(n.min=o.y,n.max=r.y,a[1].isSeparated(n))||(n.min=o.z,n.max=r.z,a[2].isSeparated(n)))return!1;for(let l=0;l<3;l++){const u=s[l],c=i[l];if(n.setFromBox(u,t),c.isSeparated(n))return!1}return!0}})();Kt.prototype.intersectsTriangle=(function(){const n=new In,e=new Array(3),t=new lo,o=new lo,r=new ee;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(n.copy(s),n.update(),s=n);const a=this.satBounds,l=this.satAxes;e[0]=s.a,e[1]=s.b,e[2]=s.c;for(let f=0;f<3;f++){const h=a[f],m=l[f];if(t.setFromPoints(m,e),h.isSeparated(t))return!1}const u=s.satBounds,c=s.satAxes,d=this.points;for(let f=0;f<3;f++){const h=u[f],m=c[f];if(t.setFromPoints(m,d),h.isSeparated(t))return!1}for(let f=0;f<3;f++){const h=l[f];for(let m=0;m<4;m++){const v=c[m];if(r.crossVectors(h,v),t.setFromPoints(r,e),o.setFromPoints(r,d),t.isSeparated(o))return!1}}return!0}})();Kt.prototype.closestPointToPoint=(function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}})();Kt.prototype.distanceToPoint=(function(){const n=new ee;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}})();Kt.prototype.distanceToBox=(function(){const n=["x","y","z"],e=new Array(12).fill().map(()=>new $n),t=new Array(12).fill().map(()=>new $n),o=new ee,r=new ee;return function(s,a=0,l=null,u=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(l||u)&&(s.getCenter(r),this.closestPointToPoint(r,o),s.closestPointToPoint(o,r),l&&l.copy(o),u&&u.copy(r)),0;const c=a*a,d=s.min,f=s.max,h=this.points;let m=1/0;for(let g=0;g<8;g++){const y=h[g];r.copy(y).clamp(d,f);const _=y.distanceToSquared(r);if(_<m&&(m=_,l&&l.copy(y),u&&u.copy(r),_<c))return Math.sqrt(_)}let v=0;for(let g=0;g<3;g++)for(let y=0;y<=1;y++)for(let _=0;_<=1;_++){const b=(g+1)%3,x=(g+2)%3,C=y<<b|_<<x,k=1<<g|y<<b|_<<x,P=h[C],R=h[k];e[v].set(P,R);const A=n[g],O=n[b],D=n[x],V=t[v],$=V.start,Y=V.end;$[A]=d[A],$[O]=y?d[O]:f[O],$[D]=_?d[D]:f[O],Y[A]=f[A],Y[O]=y?d[O]:f[O],Y[D]=_?d[D]:f[O],v++}for(let g=0;g<=1;g++)for(let y=0;y<=1;y++)for(let _=0;_<=1;_++){r.x=g?f.x:d.x,r.y=y?f.y:d.y,r.z=_?f.z:d.z,this.closestPointToPoint(r,o);const b=r.distanceToSquared(o);if(b<m&&(m=b,l&&l.copy(o),u&&u.copy(r),b<c))return Math.sqrt(b)}for(let g=0;g<12;g++){const y=e[g];for(let _=0;_<12;_++){const b=t[_];pc(y,b,o,r);const x=o.distanceToSquared(r);if(x<m&&(m=x,l&&l.copy(o),u&&u.copy(r),x<c))return Math.sqrt(x)}}return Math.sqrt(m)}})();class DT extends dc{constructor(){super(()=>new In)}}const _n=new DT,ls=new ee,ll=new ee;function BT(n,e,t={},o=0,r=1/0){const i=o*o,s=r*r;let a=1/0,l=null;if(n.shapecast({boundsTraverseOrder:c=>(ls.copy(e).clamp(c.min,c.max),ls.distanceToSquared(e)),intersectsBounds:(c,d,f)=>f<a&&f<s,intersectsTriangle:(c,d)=>{c.closestPointToPoint(e,ls);const f=e.distanceToSquared(ls);return f<a&&(ll.copy(ls),a=f,l=d),f<i}}),a===1/0)return null;const u=Math.sqrt(a);return t.point?t.point.copy(ll):t.point=ll.clone(),t.distance=u,t.faceIndex=l,t}const mi=parseInt(la)>=169,qT=parseInt(la)<=161,zo=new ee,Ho=new ee,jo=new ee,vi=new Ne,gi=new Ne,yi=new Ne,Od=new ee,kd=new ee,Dd=new ee,us=new ee;function LT(n,e,t,o,r,i,s,a){let l;if(i===Cu?l=n.intersectTriangle(o,t,e,!0,r):l=n.intersectTriangle(e,t,o,i!==Is,r),l===null)return null;const u=n.origin.distanceTo(r);return u<s||u>a?null:{distance:u,point:r.clone()}}function Bd(n,e,t,o,r,i,s,a,l,u,c){zo.fromBufferAttribute(e,i),Ho.fromBufferAttribute(e,s),jo.fromBufferAttribute(e,a);const d=LT(n,zo,Ho,jo,us,l,u,c);if(d){if(o){vi.fromBufferAttribute(o,i),gi.fromBufferAttribute(o,s),yi.fromBufferAttribute(o,a),d.uv=new Ne;const h=Ir.getInterpolation(us,zo,Ho,jo,vi,gi,yi,d.uv);mi||(d.uv=h)}if(r){vi.fromBufferAttribute(r,i),gi.fromBufferAttribute(r,s),yi.fromBufferAttribute(r,a),d.uv1=new Ne;const h=Ir.getInterpolation(us,zo,Ho,jo,vi,gi,yi,d.uv1);mi||(d.uv1=h),qT&&(d.uv2=d.uv1)}if(t){Od.fromBufferAttribute(t,i),kd.fromBufferAttribute(t,s),Dd.fromBufferAttribute(t,a),d.normal=new ee;const h=Ir.getInterpolation(us,zo,Ho,jo,Od,kd,Dd,d.normal);d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1),mi||(d.normal=h)}const f={a:i,b:s,c:a,normal:new ee,materialIndex:0};if(Ir.getNormal(zo,Ho,jo,f.normal),d.face=f,d.faceIndex=i,mi){const h=new ee;Ir.getBarycoord(us,zo,Ho,jo,h),d.barycoord=h}}return d}function qd(n){return n&&n.isMaterial?n.side:n}function Oa(n,e,t,o,r,i,s){const a=o*3;let l=a+0,u=a+1,c=a+2;const{index:d,groups:f}=n;n.index&&(l=d.getX(l),u=d.getX(u),c=d.getX(c));const{position:h,normal:m,uv:v,uv1:g}=n.attributes;if(Array.isArray(e)){const y=o*3;for(let _=0,b=f.length;_<b;_++){const{start:x,count:C,materialIndex:k}=f[_];if(y>=x&&y<x+C){const P=qd(e[k]),R=Bd(t,h,m,v,g,l,u,c,P,i,s);if(R)if(R.faceIndex=o,R.face.materialIndex=k,r)r.push(R);else return R}}}else{const y=qd(e),_=Bd(t,h,m,v,g,l,u,c,y,i,s);if(_)if(_.faceIndex=o,_.face.materialIndex=0,r)r.push(_);else return _}return null}function mt(n,e,t,o){const r=n.a,i=n.b,s=n.c;let a=e,l=e+1,u=e+2;t&&(a=t.getX(a),l=t.getX(l),u=t.getX(u)),r.x=o.getX(a),r.y=o.getY(a),r.z=o.getZ(a),i.x=o.getX(l),i.y=o.getY(l),i.z=o.getZ(l),s.x=o.getX(u),s.y=o.getY(u),s.z=o.getZ(u)}function VT(n,e,t,o,r,i,s,a){const{geometry:l,_indirectBuffer:u}=n;for(let c=o,d=o+r;c<d;c++)Oa(l,e,t,c,i,s,a)}function FT(n,e,t,o,r,i,s){const{geometry:a,_indirectBuffer:l}=n;let u=1/0,c=null;for(let d=o,f=o+r;d<f;d++){let h;h=Oa(a,e,t,d,null,i,s),h&&h.distance<u&&(c=h,u=h.distance)}return c}function NT(n,e,t,o,r,i,s){const{geometry:a}=t,{index:l}=a,u=a.attributes.position;for(let c=n,d=e+n;c<d;c++){let f;if(f=c,mt(s,f*3,l,u),s.needsUpdate=!0,o(s,f,r,i))return!0}return!1}function $T(n,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=n.geometry,o=t.index?t.index.array:null,r=t.attributes.position;let i,s,a,l,u=0;const c=n._roots;for(let f=0,h=c.length;f<h;f++)i=c[f],s=new Uint32Array(i),a=new Uint16Array(i),l=new Float32Array(i),d(0,u),u+=i.byteLength;function d(f,h,m=!1){const v=f*2;if(bt(v,a)){const g=qt(f,s),y=zt(v,a);let _=1/0,b=1/0,x=1/0,C=-1/0,k=-1/0,P=-1/0;for(let R=3*g,M=3*(g+y);R<M;R++){let A=o[R];const O=r.getX(A),D=r.getY(A),V=r.getZ(A);O<_&&(_=O),O>C&&(C=O),D<b&&(b=D),D>k&&(k=D),V<x&&(x=V),V>P&&(P=V)}return l[f+0]!==_||l[f+1]!==b||l[f+2]!==x||l[f+3]!==C||l[f+4]!==k||l[f+5]!==P?(l[f+0]=_,l[f+1]=b,l[f+2]=x,l[f+3]=C,l[f+4]=k,l[f+5]=P,!0):!1}else{const g=Ct(f),y=Tt(f,s);let _=m,b=!1,x=!1;if(e){if(!_){const A=g/_t+h/Bt,O=y/_t+h/Bt;b=e.has(A),x=e.has(O),_=!b&&!x}}else b=!0,x=!0;const C=_||b,k=_||x;let P=!1;C&&(P=d(g,h,_));let R=!1;k&&(R=d(y,h,_));const M=P||R;if(M)for(let A=0;A<3;A++){const O=g+A,D=y+A,V=l[O],$=l[O+3],Y=l[D],W=l[D+3];l[f+A]=V<Y?V:Y,l[f+A+3]=$>W?$:W}return M}}}function Ro(n,e,t,o,r){let i,s,a,l,u,c;const d=1/t.direction.x,f=1/t.direction.y,h=1/t.direction.z,m=t.origin.x,v=t.origin.y,g=t.origin.z;let y=e[n],_=e[n+3],b=e[n+1],x=e[n+3+1],C=e[n+2],k=e[n+3+2];return d>=0?(i=(y-m)*d,s=(_-m)*d):(i=(_-m)*d,s=(y-m)*d),f>=0?(a=(b-v)*f,l=(x-v)*f):(a=(x-v)*f,l=(b-v)*f),i>l||a>s||((a>i||isNaN(i))&&(i=a),(l<s||isNaN(s))&&(s=l),h>=0?(u=(C-g)*h,c=(k-g)*h):(u=(k-g)*h,c=(C-g)*h),i>c||u>s)?!1:((u>i||i!==i)&&(i=u),(c<s||s!==s)&&(s=c),i<=r&&s>=o)}function UT(n,e,t,o,r,i,s,a){const{geometry:l,_indirectBuffer:u}=n;for(let c=o,d=o+r;c<d;c++){let f=u?u[c]:c;Oa(l,e,t,f,i,s,a)}}function zT(n,e,t,o,r,i,s){const{geometry:a,_indirectBuffer:l}=n;let u=1/0,c=null;for(let d=o,f=o+r;d<f;d++){let h;h=Oa(a,e,t,l?l[d]:d,null,i,s),h&&h.distance<u&&(c=h,u=h.distance)}return c}function HT(n,e,t,o,r,i,s){const{geometry:a}=t,{index:l}=a,u=a.attributes.position;for(let c=n,d=e+n;c<d;c++){let f;if(f=t.resolveTriangleIndex(c),mt(s,f*3,l,u),s.needsUpdate=!0,o(s,f,r,i))return!0}return!1}function jT(n,e,t,o,r,i,s){rt.setBuffer(n._roots[e]),Jl(0,n,t,o,r,i,s),rt.clearBuffer()}function Jl(n,e,t,o,r,i,s){const{float32Array:a,uint16Array:l,uint32Array:u}=rt,c=n*2;if(bt(c,l)){const f=qt(n,u),h=zt(c,l);VT(e,t,o,f,h,r,i,s)}else{const f=Ct(n);Ro(f,a,o,i,s)&&Jl(f,e,t,o,r,i,s);const h=Tt(n,u);Ro(h,a,o,i,s)&&Jl(h,e,t,o,r,i,s)}}const WT=["x","y","z"];function GT(n,e,t,o,r,i){rt.setBuffer(n._roots[e]);const s=eu(0,n,t,o,r,i);return rt.clearBuffer(),s}function eu(n,e,t,o,r,i){const{float32Array:s,uint16Array:a,uint32Array:l}=rt;let u=n*2;if(bt(u,a)){const d=qt(n,l),f=zt(u,a);return FT(e,t,o,d,f,r,i)}else{const d=cc(n,l),f=WT[d],m=o.direction[f]>=0;let v,g;m?(v=Ct(n),g=Tt(n,l)):(v=Tt(n,l),g=Ct(n));const _=Ro(v,s,o,r,i)?eu(v,e,t,o,r,i):null;if(_){const C=_.point[f];if(m?C<=s[g+d]:C>=s[g+d+3])return _}const x=Ro(g,s,o,r,i)?eu(g,e,t,o,r,i):null;return _&&x?_.distance<=x.distance?_:x:_||x||null}}const _i=new dn,Cr=new In,Tr=new In,cs=new Ht,Ld=new Kt,bi=new Kt;function KT(n,e,t,o){rt.setBuffer(n._roots[e]);const r=tu(0,n,t,o);return rt.clearBuffer(),r}function tu(n,e,t,o,r=null){const{float32Array:i,uint16Array:s,uint32Array:a}=rt;let l=n*2;if(r===null&&(t.boundingBox||t.computeBoundingBox(),Ld.set(t.boundingBox.min,t.boundingBox.max,o),r=Ld),bt(l,s)){const c=e.geometry,d=c.index,f=c.attributes.position,h=t.index,m=t.attributes.position,v=qt(n,a),g=zt(l,s);if(cs.copy(o).invert(),t.boundsTree)return ft(n,i,bi),bi.matrix.copy(cs),bi.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:_=>bi.intersectsBox(_),intersectsTriangle:_=>{_.a.applyMatrix4(o),_.b.applyMatrix4(o),_.c.applyMatrix4(o),_.needsUpdate=!0;for(let b=v*3,x=(g+v)*3;b<x;b+=3)if(mt(Tr,b,d,f),Tr.needsUpdate=!0,_.intersectsTriangle(Tr))return!0;return!1}});{const y=Ra(t);for(let _=v*3,b=(g+v)*3;_<b;_+=3){mt(Cr,_,d,f),Cr.a.applyMatrix4(cs),Cr.b.applyMatrix4(cs),Cr.c.applyMatrix4(cs),Cr.needsUpdate=!0;for(let x=0,C=y*3;x<C;x+=3)if(mt(Tr,x,h,m),Tr.needsUpdate=!0,Cr.intersectsTriangle(Tr))return!0}}}else{const c=Ct(n),d=Tt(n,a);return ft(c,i,_i),!!(r.intersectsBox(_i)&&tu(c,e,t,o,r)||(ft(d,i,_i),r.intersectsBox(_i)&&tu(d,e,t,o,r)))}}const wi=new Ht,ul=new Kt,ds=new Kt,YT=new ee,XT=new ee,ZT=new ee,QT=new ee;function JT(n,e,t,o={},r={},i=0,s=1/0){e.boundingBox||e.computeBoundingBox(),ul.set(e.boundingBox.min,e.boundingBox.max,t),ul.needsUpdate=!0;const a=n.geometry,l=a.attributes.position,u=a.index,c=e.attributes.position,d=e.index,f=_n.getPrimitive(),h=_n.getPrimitive();let m=YT,v=XT,g=null,y=null;r&&(g=ZT,y=QT);let _=1/0,b=null,x=null;return wi.copy(t).invert(),ds.matrix.copy(wi),n.shapecast({boundsTraverseOrder:C=>ul.distanceToBox(C),intersectsBounds:(C,k,P)=>P<_&&P<s?(k&&(ds.min.copy(C.min),ds.max.copy(C.max),ds.needsUpdate=!0),!0):!1,intersectsRange:(C,k)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:R=>ds.distanceToBox(R),intersectsBounds:(R,M,A)=>A<_&&A<s,intersectsRange:(R,M)=>{for(let A=R,O=R+M;A<O;A++){mt(h,3*A,d,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let D=C,V=C+k;D<V;D++){mt(f,3*D,u,l),f.needsUpdate=!0;const $=f.distanceToTriangle(h,m,g);if($<_&&(v.copy(m),y&&y.copy(g),_=$,b=D,x=A),$<i)return!0}}}});{const P=Ra(e);for(let R=0,M=P;R<M;R++){mt(h,3*R,d,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let A=C,O=C+k;A<O;A++){mt(f,3*A,u,l),f.needsUpdate=!0;const D=f.distanceToTriangle(h,m,g);if(D<_&&(v.copy(m),y&&y.copy(g),_=D,b=A,x=R),D<i)return!0}}}}}),_n.releasePrimitive(f),_n.releasePrimitive(h),_===1/0?null:(o.point?o.point.copy(v):o.point=v.clone(),o.distance=_,o.faceIndex=b,r&&(r.point?r.point.copy(y):r.point=y.clone(),r.point.applyMatrix4(wi),v.applyMatrix4(wi),r.distance=v.sub(r.point).length(),r.faceIndex=x),o)}function eE(n,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=n.geometry,o=t.index?t.index.array:null,r=t.attributes.position;let i,s,a,l,u=0;const c=n._roots;for(let f=0,h=c.length;f<h;f++)i=c[f],s=new Uint32Array(i),a=new Uint16Array(i),l=new Float32Array(i),d(0,u),u+=i.byteLength;function d(f,h,m=!1){const v=f*2;if(bt(v,a)){const g=qt(f,s),y=zt(v,a);let _=1/0,b=1/0,x=1/0,C=-1/0,k=-1/0,P=-1/0;for(let R=g,M=g+y;R<M;R++){const A=3*n.resolveTriangleIndex(R);for(let O=0;O<3;O++){let D=A+O;D=o?o[D]:D;const V=r.getX(D),$=r.getY(D),Y=r.getZ(D);V<_&&(_=V),V>C&&(C=V),$<b&&(b=$),$>k&&(k=$),Y<x&&(x=Y),Y>P&&(P=Y)}}return l[f+0]!==_||l[f+1]!==b||l[f+2]!==x||l[f+3]!==C||l[f+4]!==k||l[f+5]!==P?(l[f+0]=_,l[f+1]=b,l[f+2]=x,l[f+3]=C,l[f+4]=k,l[f+5]=P,!0):!1}else{const g=Ct(f),y=Tt(f,s);let _=m,b=!1,x=!1;if(e){if(!_){const A=g/_t+h/Bt,O=y/_t+h/Bt;b=e.has(A),x=e.has(O),_=!b&&!x}}else b=!0,x=!0;const C=_||b,k=_||x;let P=!1;C&&(P=d(g,h,_));let R=!1;k&&(R=d(y,h,_));const M=P||R;if(M)for(let A=0;A<3;A++){const O=g+A,D=y+A,V=l[O],$=l[O+3],Y=l[D],W=l[D+3];l[f+A]=V<Y?V:Y,l[f+A+3]=$>W?$:W}return M}}}function tE(n,e,t,o,r,i,s){rt.setBuffer(n._roots[e]),nu(0,n,t,o,r,i,s),rt.clearBuffer()}function nu(n,e,t,o,r,i,s){const{float32Array:a,uint16Array:l,uint32Array:u}=rt,c=n*2;if(bt(c,l)){const f=qt(n,u),h=zt(c,l);UT(e,t,o,f,h,r,i,s)}else{const f=Ct(n);Ro(f,a,o,i,s)&&nu(f,e,t,o,r,i,s);const h=Tt(n,u);Ro(h,a,o,i,s)&&nu(h,e,t,o,r,i,s)}}const nE=["x","y","z"];function oE(n,e,t,o,r,i){rt.setBuffer(n._roots[e]);const s=ou(0,n,t,o,r,i);return rt.clearBuffer(),s}function ou(n,e,t,o,r,i){const{float32Array:s,uint16Array:a,uint32Array:l}=rt;let u=n*2;if(bt(u,a)){const d=qt(n,l),f=zt(u,a);return zT(e,t,o,d,f,r,i)}else{const d=cc(n,l),f=nE[d],m=o.direction[f]>=0;let v,g;m?(v=Ct(n),g=Tt(n,l)):(v=Tt(n,l),g=Ct(n));const _=Ro(v,s,o,r,i)?ou(v,e,t,o,r,i):null;if(_){const C=_.point[f];if(m?C<=s[g+d]:C>=s[g+d+3])return _}const x=Ro(g,s,o,r,i)?ou(g,e,t,o,r,i):null;return _&&x?_.distance<=x.distance?_:x:_||x||null}}const xi=new dn,Er=new In,Mr=new In,fs=new Ht,Vd=new Kt,Si=new Kt;function rE(n,e,t,o){rt.setBuffer(n._roots[e]);const r=ru(0,n,t,o);return rt.clearBuffer(),r}function ru(n,e,t,o,r=null){const{float32Array:i,uint16Array:s,uint32Array:a}=rt;let l=n*2;if(r===null&&(t.boundingBox||t.computeBoundingBox(),Vd.set(t.boundingBox.min,t.boundingBox.max,o),r=Vd),bt(l,s)){const c=e.geometry,d=c.index,f=c.attributes.position,h=t.index,m=t.attributes.position,v=qt(n,a),g=zt(l,s);if(fs.copy(o).invert(),t.boundsTree)return ft(n,i,Si),Si.matrix.copy(fs),Si.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:_=>Si.intersectsBox(_),intersectsTriangle:_=>{_.a.applyMatrix4(o),_.b.applyMatrix4(o),_.c.applyMatrix4(o),_.needsUpdate=!0;for(let b=v,x=g+v;b<x;b++)if(mt(Mr,3*e.resolveTriangleIndex(b),d,f),Mr.needsUpdate=!0,_.intersectsTriangle(Mr))return!0;return!1}});{const y=Ra(t);for(let _=v,b=g+v;_<b;_++){const x=e.resolveTriangleIndex(_);mt(Er,3*x,d,f),Er.a.applyMatrix4(fs),Er.b.applyMatrix4(fs),Er.c.applyMatrix4(fs),Er.needsUpdate=!0;for(let C=0,k=y*3;C<k;C+=3)if(mt(Mr,C,h,m),Mr.needsUpdate=!0,Er.intersectsTriangle(Mr))return!0}}}else{const c=Ct(n),d=Tt(n,a);return ft(c,i,xi),!!(r.intersectsBox(xi)&&ru(c,e,t,o,r)||(ft(d,i,xi),r.intersectsBox(xi)&&ru(d,e,t,o,r)))}}const Ci=new Ht,cl=new Kt,ps=new Kt,sE=new ee,iE=new ee,aE=new ee,lE=new ee;function uE(n,e,t,o={},r={},i=0,s=1/0){e.boundingBox||e.computeBoundingBox(),cl.set(e.boundingBox.min,e.boundingBox.max,t),cl.needsUpdate=!0;const a=n.geometry,l=a.attributes.position,u=a.index,c=e.attributes.position,d=e.index,f=_n.getPrimitive(),h=_n.getPrimitive();let m=sE,v=iE,g=null,y=null;r&&(g=aE,y=lE);let _=1/0,b=null,x=null;return Ci.copy(t).invert(),ps.matrix.copy(Ci),n.shapecast({boundsTraverseOrder:C=>cl.distanceToBox(C),intersectsBounds:(C,k,P)=>P<_&&P<s?(k&&(ps.min.copy(C.min),ps.max.copy(C.max),ps.needsUpdate=!0),!0):!1,intersectsRange:(C,k)=>{if(e.boundsTree){const P=e.boundsTree;return P.shapecast({boundsTraverseOrder:R=>ps.distanceToBox(R),intersectsBounds:(R,M,A)=>A<_&&A<s,intersectsRange:(R,M)=>{for(let A=R,O=R+M;A<O;A++){const D=P.resolveTriangleIndex(A);mt(h,3*D,d,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let V=C,$=C+k;V<$;V++){const Y=n.resolveTriangleIndex(V);mt(f,3*Y,u,l),f.needsUpdate=!0;const W=f.distanceToTriangle(h,m,g);if(W<_&&(v.copy(m),y&&y.copy(g),_=W,b=V,x=A),W<i)return!0}}}})}else{const P=Ra(e);for(let R=0,M=P;R<M;R++){mt(h,3*R,d,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let A=C,O=C+k;A<O;A++){const D=n.resolveTriangleIndex(A);mt(f,3*D,u,l),f.needsUpdate=!0;const V=f.distanceToTriangle(h,m,g);if(V<_&&(v.copy(m),y&&y.copy(g),_=V,b=A,x=R),V<i)return!0}}}}}),_n.releasePrimitive(f),_n.releasePrimitive(h),_===1/0?null:(o.point?o.point.copy(v):o.point=v.clone(),o.distance=_,o.faceIndex=b,r&&(r.point?r.point.copy(y):r.point=y.clone(),r.point.applyMatrix4(Ci),v.applyMatrix4(Ci),r.distance=v.sub(r.point).length(),r.faceIndex=x),o)}function Fd(n,e,t){return n===null?null:(n.point.applyMatrix4(e.matrixWorld),n.distance=n.point.distanceTo(t.ray.origin),n.object=e,n)}const Ti=new Kt,Ei=new Bf,Nd=new ee,$d=new Ht,Ud=new ee,dl=["getX","getY","getZ"];class Wr extends IT{static serialize(e,t={}){t={cloneBuffers:!0,...t};const o=e.geometry,r=e._roots,i=e._indirectBuffer,s=o.getIndex(),a={version:1,roots:null,index:null,indirectBuffer:null};return t.cloneBuffers?(a.roots=r.map(l=>l.slice()),a.index=s?s.array.slice():null,a.indirectBuffer=i?i.slice():null):(a.roots=r,a.index=s?s.array:null,a.indirectBuffer=i),a}static deserialize(e,t,o={}){o={setIndex:!0,indirect:!!e.indirectBuffer,...o};const{index:r,roots:i,indirectBuffer:s}=e;e.version||(console.warn("MeshBVH.deserialize: Serialization format has been changed and will be fixed up. It is recommended to regenerate any stored serialized data."),l(i));const a=new Wr(t,{...o,[uc]:!0});if(a._roots=i,a._indirectBuffer=s||null,o.setIndex){const u=t.getIndex();if(u===null){const c=new un(e.index,1,!1);t.setIndex(c)}else u.array!==r&&(u.array.set(r),u.needsUpdate=!0)}return a;function l(u){for(let c=0;c<u.length;c++){const d=u[c],f=new Uint32Array(d),h=new Uint16Array(d);for(let m=0,v=d.byteLength/Bt;m<v;m++){const g=_t*m,y=2*g;bt(y,h)||(f[g+6]=f[g+6]/_t-m)}}}}get primitiveStride(){return 3}get resolveTriangleIndex(){return this.resolvePrimitiveIndex}constructor(e,t={}){t.maxLeafTris&&(console.warn('MeshBVH: "maxLeafTris" option has been deprecated. Use maxLeafSize, instead.'),t={...t,maxLeafSize:t.maxLeafTris}),super(e,t)}shiftTriangleOffsets(e){return super.shiftPrimitiveOffsets(e)}writePrimitiveBounds(e,t,o){const r=this.geometry,i=this._indirectBuffer,s=r.attributes.position,a=r.index?r.index.array:null,u=(i?i[e]:e)*3;let c=u+0,d=u+1,f=u+2;a&&(c=a[c],d=a[d],f=a[f]);for(let h=0;h<3;h++){const m=s[dl[h]](c),v=s[dl[h]](d),g=s[dl[h]](f);let y=m;v<y&&(y=v),g<y&&(y=g);let _=m;v>_&&(_=v),g>_&&(_=g),t[o+h]=y,t[o+h+3]=_}return t}computePrimitiveBounds(e,t,o){const r=this.geometry,i=this._indirectBuffer,s=r.attributes.position,a=r.index?r.index.array:null,l=s.normalized;if(e<0||t+e-o.offset>o.length/6)throw new Error("MeshBVH: compute triangle bounds range is invalid.");const u=s.array,c=s.offset||0;let d=3;s.isInterleavedBufferAttribute&&(d=s.data.stride);const f=["getX","getY","getZ"],h=o.offset;for(let m=e,v=e+t;m<v;m++){const y=(i?i[m]:m)*3,_=(m-h)*6;let b=y+0,x=y+1,C=y+2;a&&(b=a[b],x=a[x],C=a[C]),l||(b=b*d+c,x=x*d+c,C=C*d+c);for(let k=0;k<3;k++){let P,R,M;l?(P=s[f[k]](b),R=s[f[k]](x),M=s[f[k]](C)):(P=u[b+k],R=u[x+k],M=u[C+k]);let A=P;R<A&&(A=R),M<A&&(A=M);let O=P;R>O&&(O=R),M>O&&(O=M);const D=(O-A)/2,V=k*2;o[_+V+0]=A+D,o[_+V+1]=D+(Math.abs(A)+D)*Vi}}return o}raycastObject3D(e,t,o=[]){const{material:r}=e;if(r===void 0)return;$d.copy(e.matrixWorld).invert(),Ei.copy(t.ray).applyMatrix4($d),Ud.setFromMatrixScale(e.matrixWorld),Nd.copy(Ei.direction).multiply(Ud);const i=Nd.length(),s=t.near/i,a=t.far/i;if(t.firstHitOnly===!0){let l=this.raycastFirst(Ei,r,s,a);l=Fd(l,e,t),l&&o.push(l)}else{const l=this.raycast(Ei,r,s,a);for(let u=0,c=l.length;u<c;u++){const d=Fd(l[u],e,t);d&&o.push(d)}}return o}refit(e=null){return(this.indirect?eE:$T)(this,e)}raycast(e,t=Bc,o=0,r=1/0){const i=this._roots,s=[],a=this.indirect?tE:jT;for(let l=0,u=i.length;l<u;l++)a(this,l,t,e,s,o,r);return s}raycastFirst(e,t=Bc,o=0,r=1/0){const i=this._roots;let s=null;const a=this.indirect?oE:GT;for(let l=0,u=i.length;l<u;l++){const c=a(this,l,t,e,o,r);c!=null&&(s==null||c.distance<s.distance)&&(s=c)}return s}intersectsGeometry(e,t){let o=!1;const r=this._roots,i=this.indirect?rE:KT;for(let s=0,a=r.length;s<a&&(o=i(this,s,e,t),!o);s++);return o}shapecast(e){const t=_n.getPrimitive(),o=super.shapecast({...e,intersectsPrimitive:e.intersectsTriangle,scratchPrimitive:t,iterate:this.indirect?HT:NT});return _n.releasePrimitive(t),o}bvhcast(e,t,o){let{intersectsRanges:r,intersectsTriangles:i}=o;const s=_n.getPrimitive(),a=this.geometry.index,l=this.geometry.attributes.position,u=this.indirect?m=>{const v=this.resolveTriangleIndex(m);mt(s,v*3,a,l)}:m=>{mt(s,m*3,a,l)},c=_n.getPrimitive(),d=e.geometry.index,f=e.geometry.attributes.position,h=e.indirect?m=>{const v=e.resolveTriangleIndex(m);mt(c,v*3,d,f)}:m=>{mt(c,m*3,d,f)};if(i){if(!(e instanceof Wr))throw new Error('MeshBVH: "intersectsTriangles" callback can only be used with another MeshBVH.');const m=(v,g,y,_,b,x,C,k)=>{for(let P=y,R=y+_;P<R;P++){h(P),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(let M=v,A=v+g;M<A;M++)if(u(M),s.needsUpdate=!0,i(s,c,M,P,b,x,C,k))return!0}return!1};if(r){const v=r;r=function(g,y,_,b,x,C,k,P){return v(g,y,_,b,x,C,k,P)?!0:m(g,y,_,b,x,C,k,P)}}else r=m}return super.bvhcast(e,t,{intersectsRanges:r})}intersectsBox(e,t){return Ti.set(e.min,e.max,t),Ti.needsUpdate=!0,this.shapecast({intersectsBounds:o=>Ti.intersectsBox(o),intersectsTriangle:o=>Ti.intersectsTriangle(o)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,o={},r={},i=0,s=1/0){return(this.indirect?uE:JT)(this,e,t,o,r,i,s)}closestPointToPoint(e,t={},o=0,r=1/0){return BT(this,e,t,o,r)}}const cE=parseInt(la)>=166,Or={Mesh:me.prototype.raycast,Line:Cn.prototype.raycast,LineSegments:qf.prototype.raycast,LineLoop:Lf.prototype.raycast,Points:Vf.prototype.raycast,BatchedMesh:qs.prototype.raycast},Mt=new me,Mi=[];function Sh(n,e){if(this.isBatchedMesh)dE.call(this,n,e);else{const{geometry:t}=this;if(t.boundsTree)t.boundsTree.raycastObject3D(this,n,e);else{let o;if(this instanceof me)o=Or.Mesh;else if(this instanceof qf)o=Or.LineSegments;else if(this instanceof Lf)o=Or.LineLoop;else if(this instanceof Cn)o=Or.Line;else if(this instanceof Vf)o=Or.Points;else throw new Error("BVH: Fallback raycast function not found.");o.call(this,n,e)}}}function dE(n,e){if(this.boundsTrees){const t=this.boundsTrees,o=this._drawInfo||this._instanceInfo,r=this._drawRanges||this._geometryInfo,i=this.matrixWorld;Mt.material=this.material,Mt.geometry=this.geometry;const s=Mt.geometry.boundsTree,a=Mt.geometry.drawRange;Mt.geometry.boundingSphere===null&&(Mt.geometry.boundingSphere=new Tu);for(let l=0,u=o.length;l<u;l++){if(!this.getVisibleAt(l))continue;const c=o[l].geometryIndex;if(Mt.geometry.boundsTree=t[c],this.getMatrixAt(l,Mt.matrixWorld).premultiply(i),!Mt.geometry.boundsTree){this.getBoundingBoxAt(c,Mt.geometry.boundingBox),this.getBoundingSphereAt(c,Mt.geometry.boundingSphere);const d=r[c];Mt.geometry.setDrawRange(d.start,d.count)}Mt.raycast(n,Mi);for(let d=0,f=Mi.length;d<f;d++){const h=Mi[d];h.object=this,h.batchId=l,e.push(h)}Mi.length=0}Mt.geometry.boundsTree=s,Mt.geometry.drawRange=a,Mt.material=null,Mt.geometry=null}else Or.BatchedMesh.call(this,n,e)}function fE(n={}){const{type:e=Wr}=n;return this.boundsTree=new e(this,n),this.boundsTree}function pE(){this.boundsTree=null}function hE(n=-1,e={}){if(!cE)throw new Error("BatchedMesh: Three r166+ is required to compute bounds trees.");e={...e,range:null};const t=this._drawRanges||this._geometryInfo,o=this._geometryCount;this.boundsTrees||(this.boundsTrees=new Array(o).fill(null));const r=this.boundsTrees;for(;r.length<o;)r.push(null);if(n<0){for(let i=0;i<o;i++)e.range=t[i],r[i]=new Wr(this.geometry,e);return r}else return n<t.length&&(e.range=t[n],r[n]=new Wr(this.geometry,e)),r[n]||null}function mE(n=-1){n<0?this.boundsTrees.fill(null):n<this.boundsTrees.length&&(this.boundsTrees[n]=null)}ro.prototype.computeBoundsTree=fE;ro.prototype.disposeBoundsTree=pE;me.prototype.raycast=Sh;qs.prototype.computeBoundsTree=hE;qs.prototype.disposeBoundsTree=mE;qs.prototype.raycast=Sh;function Ch(n){n.traverse(e=>{e instanceof me&&e.geometry&&e.geometry.computeBoundsTree(),e instanceof qs&&e.computeBoundsTree()})}class vE extends K.Mesh{constructor(e=1,t=10,o=new K.Color(8947848),r=100,i="xzy"){const s=i.substring(0,2),a=new K.PlaneGeometry(2,2,1,1),l=new K.ShaderMaterial({side:K.DoubleSide,transparent:!0,opacity:.5,depthWrite:!1,uniforms:{uSize1:{value:e},uSize2:{value:t},uColor:{value:o.convertSRGBToLinear()},uDistance:{value:r}},vertexShader:`
				varying vec3 worldPosition;
				uniform float uDistance;
				void main() {
					vec3 pos = position.${i} * uDistance;
					pos.${s} += cameraPosition.${s};
					worldPosition = pos;
					gl_Position = projectionMatrix * viewMatrix * vec4(pos, 1.0);
				}
			`,fragmentShader:`
				varying vec3 worldPosition;
				uniform float uSize1;
				uniform float uSize2;
				uniform vec3 uColor;
				uniform float uDistance;

				float getGrid(float size) {
					vec2 r = worldPosition.xz / size;
					vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
					float line = min(grid.x, grid.y);
					return 1.0 - min(line, 1.0);
				}

				void main() {
					float distFade = 1.0 - min(distance(cameraPosition, worldPosition) / uDistance, 1.0);
					float g1 = getGrid(uSize1);
					float g2 = getGrid(uSize2);
					vec3 color = uColor * mix(g2, g1, 0.5);
					float alpha = max(g1, g2) * distFade;
					gl_FragColor = vec4(color, alpha);
					if (gl_FragColor.a <= 0.0) discard;
				}
			`});super(a,l),this.frustumCulled=!1}update(e){this.position.copy(e.position)}}function gE(n){const e=new vE(1,10,new K.Color(.48,.48,.48),1e3);e.renderOrder=-1,e.name="InfiniteGridHelper",e.userData.isHelper=!0,n.add(e);const t=yE();return n.add(t),e}function yE(){const n=new K.AxesHelper(1e3),e=n.clone(!0);e.rotateY(Math.PI);const t=new K.Group;return t.add(n,e),t.name="AxesHelper",t.userData.isHelper=!0,t.children.forEach(o=>{o.scale.y=0}),t}var _E=Object.defineProperty,bE=(n,e,t)=>e in n?_E(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,He=(n,e,t)=>bE(n,typeof e!="symbol"?e+"":e,t);const Th=(n,e)=>{const[t,o]=e.split("-");return Object.assign(n.style,{left:o==="left"?"0":o==="center"?"50%":"",right:o==="right"?"0":"",top:t==="top"?"0":t==="bottom"?"":"50%",bottom:t==="bottom"?"0":"",transform:`${o==="center"?"translateX(-50%)":""} ${t==="center"?"translateY(-50%)":""}`}),e},wE=({placement:n,size:e,offset:t,id:o,className:r})=>{const i=document.createElement("div"),{top:s,left:a,right:l,bottom:u}=t;return Object.assign(i.style,{id:o,position:"absolute",zIndex:"1000",height:`${e}px`,width:`${e}px`,margin:`${s}px ${l}px ${u}px ${a}px`,borderRadius:"100%"}),Th(i,n),o&&(i.id=o),r&&(i.className=r),i},xE=n=>{const e=typeof n=="string"?document.querySelector(n):n;if(!e)throw Error("Invalid DOM element");return e};function su(n,e,t){return Math.max(e,Math.min(t,n))}const SE=[["x",0,3],["y",1,4],["z",2,5]],zd=new ee;function Hd({isSphere:n},e,t){n&&(zd.set(0,0,1).applyQuaternion(t.quaternion),SE.forEach(([o,r,i])=>{const s=zd[o];let a=e[r],l=a.userData.opacity;a.material.opacity=su(s>=0?l:l/2,0,1),a=e[i],l=a.userData.opacity,a.material.opacity=su(s>=0?l/2:l,0,1)}))}const CE=(n,e,t=10)=>Math.abs(n.clientX-e.x)<t&&Math.abs(n.clientY-e.y)<t,jd=new Nf,Wd=new Ne,Gd=(n,e,t,o)=>{Wd.set((n.clientX-e.left)/e.width*2-1,-((n.clientY-e.top)/e.height)*2+1),jd.setFromCamera(Wd,t);const r=jd.intersectObjects(o,!1),i=r.length?r[0]:null;return!i||!i.object.visible?null:i},fl=1e-6,TE=2*Math.PI,Eh=["x","y","z"],Bs=[...Eh,"nx","ny","nz"],EE=["x","z","y","nx","nz","ny"],ME=["z","x","y","nz","nx","ny"],iu="Right",Ni="Top",au="Front",lu="Left",$i="Bottom",uu="Back",AE=[iu,Ni,au,lu,$i,uu].map(n=>n.toLocaleLowerCase()),Mh=1.3,Kd=(n,e=!0)=>{const{material:t,userData:o}=n,{color:r,opacity:i}=e?o.hover:o;t.color.set(r),t.opacity=i},Wo=n=>JSON.parse(JSON.stringify(n)),PE=n=>{const e=n.type||"sphere",t=e==="sphere",o=n.resolution||t?64:128,r=Ur.DEFAULT_UP,i=r.z===1,s=r.x===1,{container:a}=n;n.container=void 0,n=JSON.parse(JSON.stringify(n)),n.container=a;const l=i?EE:s?ME:Bs;AE.forEach((f,h)=>{n[f]&&(n[l[h]]=n[f])});const u={enabled:!0,color:16777215,opacity:1,scale:.7,labelColor:2236962,line:!1,border:{size:0,color:14540253},hover:{color:t?16777215:9688043,labelColor:2236962,opacity:1,scale:.7,border:{size:0,color:14540253}}},c={line:!1,scale:t?.45:.7,hover:{scale:t?.5:.7}},d={type:e,container:document.body,size:128,placement:"top-right",resolution:o,lineWidth:4,radius:t?1:.2,smoothness:18,animated:!0,speed:1,background:{enabled:!0,color:t?16777215:14739180,opacity:t?0:1,hover:{color:t?16777215:14739180,opacity:t?.2:1}},font:{family:"sans-serif",weight:900},offset:{top:10,left:10,bottom:10,right:10},corners:{enabled:!t,color:t?15915362:16777215,opacity:1,scale:t?.15:.2,radius:1,smoothness:18,hover:{color:t?16777215:9688043,opacity:1,scale:t?.2:.225}},edges:{enabled:!t,color:t?15915362:16777215,opacity:t?1:0,radius:t?1:.125,smoothness:18,scale:t?.15:1,hover:{color:t?16777215:9688043,opacity:1,scale:t?.2:1}},x:{...Wo(u),...t?{label:"X",color:16725587,line:!0}:{label:s?Ni:iu}},y:{...Wo(u),...t?{label:"Y",color:9100032,line:!0}:{label:i||s?au:Ni}},z:{...Wo(u),...t?{label:"Z",color:2920447,line:!0}:{label:i?Ni:s?iu:au}},nx:{...Wo(c),label:t?"":s?$i:lu},ny:{...Wo(c),label:t?"":i||s?uu:$i},nz:{...Wo(c),label:t?"":i?$i:s?lu:uu}};return cu(n,d),Eh.forEach(f=>cu(n[`n${f}`],Wo(n[f]))),{...n,isSphere:t}};function cu(n,...e){if(n instanceof HTMLElement||typeof n!="object"||n===null)return n;for(const t of e)for(const o in t)o!=="container"&&o in t&&(n[o]===void 0?n[o]=t[o]:typeof t[o]=="object"&&!Array.isArray(t[o])&&(n[o]=cu(n[o]||{},t[o])));return n}const IE=(n,e=2)=>{const t=new qn,o=e*2,{isSphere:r,resolution:i,radius:s,font:a,corners:l,edges:u}=n,c=Bs.map(P=>({...n[P],radius:s}));r&&l.enabled&&c.push(l),r&&u.enabled&&c.push(u);const d=document.createElement("canvas"),f=d.getContext("2d");d.width=i*2+o*2,d.height=i*c.length+o*c.length;const[h,m]=C(c,i,a);c.forEach(({radius:P,label:R,color:M,labelColor:A,border:O,hover:{color:D,labelColor:V,border:$}},Y)=>{const W=i*Y+Y*o+e;x(e,W,e,i,P,R,O,M,A),x(i+e*3,W,e,i,P,R,$??O,D??M,V??A)});const v=c.length,g=e/(i*2),y=e/(i*6),_=1/v,b=new nv(d);return b.repeat.set(.5-2*g,_-2*y),b.offset.set(g,1-y),Object.assign(b,{colorSpace:$f,wrapS:Ml,wrapT:Ml,userData:{offsetX:g,offsetY:y,cellHeight:_}}),b;function x(P,R,M,A,O,D,V,$,Y){if(O=O*(A/2),$!=null&&$!==""&&(W(),f.fillStyle=t.set($).getStyle(),f.fill()),V&&V.size){const G=V.size*A/2;P+=G,R+=G,A-=V.size*A,O=Math.max(0,O-G),W(),f.strokeStyle=t.set(V.color).getStyle(),f.lineWidth=V.size*A,f.stroke()}D&&k(f,P+A/2,R+(A+M)/2,D,t.set(Y).getStyle());function W(){f.beginPath(),f.moveTo(P+O,R),f.lineTo(P+A-O,R),f.arcTo(P+A,R,P+A,R+O,O),f.lineTo(P+A,R+A-O),f.arcTo(P+A,R+A,P+A-O,R+A,O),f.lineTo(P+O,R+A),f.arcTo(P,R+A,P,R+A-O,O),f.lineTo(P,R+O),f.arcTo(P,R,P+O,R,O),f.closePath()}}function C(P,R,M){const A=[...P].sort((ce,re)=>{var pe,Ee;return(((pe=ce.label)==null?void 0:pe.length)||0)-(((Ee=re.label)==null?void 0:Ee.length)||0)}).pop().label,{family:O,weight:D}=M,V=r?Math.sqrt(Math.pow(R*.7,2)/2):R;let $=V,Y=0,W=0;do{f.font=`${D} ${$}px ${O}`;const ce=f.measureText(A);Y=ce.width,W=ce.fontBoundingBoxDescent,$--}while(Y>V&&$>0);const G=V/W,Q=Math.min(V/Y,G),ge=Math.floor($*Q);return[`${D} ${ge}px ${O}`,G]}function k(P,R,M,A,O){P.font=h,P.textAlign="center",P.textBaseline="middle",P.fillStyle=O,P.fillText(A,R,M+(r?m:0))}},RE=(n,e)=>n.offset.x=(e?.5:0)+n.userData.offsetX,hc=(n,e)=>{const{offset:t,userData:{offsetY:o,cellHeight:r}}=n;t.y=1-(e+1)*r+o};function mc(n,e,t=2,o=2){const r=t/2-n,i=o/2-n,s=n/t,a=(t-n)/t,l=n/o,u=(o-n)/o,c=[r,i,0,-r,i,0,-r,-i,0,r,-i,0],d=[a,u,s,u,s,l,a,l],f=[3*(e+1)+3,3*(e+1)+4,e+4,e+5,2*(e+1)+4,2,1,2*(e+1)+3,3,4*(e+1)+3,4,0],h=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11].map(k=>f[k]);let m,v,g,y,_,b,x,C;for(let k=0;k<4;k++){y=k<1||k>2?r:-r,_=k<2?i:-i,b=k<1||k>2?a:s,x=k<2?u:l;for(let P=0;P<=e;P++)m=Math.PI/2*(k+P/e),v=Math.cos(m),g=Math.sin(m),c.push(y+n*v,_+n*g,0),d.push(b+s*v,x+l*g),P<e&&(C=(e+1)*k+P+4,h.push(k,C,C+1))}return new ro().setIndex(new un(new Uint32Array(h),1)).setAttribute("position",new un(new Float32Array(c),3)).setAttribute("uv",new un(new Float32Array(d),2))}const OE=(n,e)=>{const t=new ee,{isSphere:o,radius:r,smoothness:i}=n,s=mc(r,i);return Bs.map((a,l)=>{const u=l<3,c=Bs[l],d=l?e.clone():e;hc(d,l);const{enabled:f,scale:h,opacity:m,hover:v}=n[c],g={map:d,opacity:m,transparent:!0},y=o?new Eu(new Mu(g)):new me(s,new ir(g)),_=u?c:c[1];return y.position[_]=(u?1:-1)*(o?Mh:1),o||y.lookAt(t.copy(y.position).multiplyScalar(1.7)),y.scale.setScalar(h),y.renderOrder=1,y.visible=f,y.userData={scale:h,opacity:m,hover:v},y})},kE=(n,e)=>{const{isSphere:t,corners:o}=n;if(!o.enabled)return[];const{color:r,opacity:i,scale:s,radius:a,smoothness:l,hover:u}=o,c=t?null:mc(a,l),d={transparent:!0,opacity:i},f=[1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,-1,-1,-1,-1,-1].map(m=>m*.85),h=new ee;return Array(f.length/3).fill(0).map((m,v)=>{if(t){const _=e.clone();hc(_,6),d.map=_}else d.color=r;const g=t?new Eu(new Mu(d)):new me(c,new ir(d)),y=v*3;return g.position.set(f[y],f[y+1],f[y+2]),t&&g.position.normalize().multiplyScalar(1.7),g.scale.setScalar(s),g.lookAt(h.copy(g.position).multiplyScalar(2)),g.renderOrder=1,g.userData={color:r,opacity:i,scale:s,hover:u},g})},DE=(n,e,t)=>{const{isSphere:o,edges:r}=n;if(!r.enabled)return[];const{color:i,opacity:s,scale:a,hover:l,radius:u,smoothness:c}=r,d=o?null:mc(u,c,1.2,.25),f={transparent:!0,opacity:s},h=[0,1,1,0,-1,1,1,0,1,-1,0,1,0,1,-1,0,-1,-1,1,0,-1,-1,0,-1,1,1,0,1,-1,0,-1,1,0,-1,-1,0].map(g=>g*.925),m=new ee,v=new ee(0,1,0);return Array(h.length/3).fill(0).map((g,y)=>{if(o){const x=e.clone();hc(x,t),f.map=x}else f.color=i;const _=o?new Eu(new Mu(f)):new me(d,new ir(f)),b=y*3;return _.position.set(h[b],h[b+1],h[b+2]),o&&_.position.normalize().multiplyScalar(1.7),_.scale.setScalar(a),_.up.copy(v),_.lookAt(m.copy(_.position).multiplyScalar(2)),!o&&!_.position.y&&(_.rotation.z=Math.PI/2),_.renderOrder=1,_.userData={color:i,opacity:s,scale:a,hover:l},_})};function BE(n,e=!1){const t=n[0].index!==null,o=new Set(Object.keys(n[0].attributes)),r=new Set(Object.keys(n[0].morphAttributes)),i={},s={},a=n[0].morphTargetsRelative,l=new ro;let u=0;for(let c=0;c<n.length;++c){const d=n[c];let f=0;if(t!==(d.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const h in d.attributes){if(!o.has(h))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+h+'" attribute exists among all geometries, or in none of them.'),null;i[h]===void 0&&(i[h]=[]),i[h].push(d.attributes[h]),f++}if(f!==o.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(a!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const h in d.morphAttributes){if(!r.has(h))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;s[h]===void 0&&(s[h]=[]),s[h].push(d.morphAttributes[h])}if(e){let h;if(t)h=d.index.count;else if(d.attributes.position!==void 0)h=d.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,h,c),u+=h}}if(t){let c=0;const d=[];for(let f=0;f<n.length;++f){const h=n[f].index;for(let m=0;m<h.count;++m)d.push(h.getX(m)+c);c+=n[f].attributes.position.count}l.setIndex(d)}for(const c in i){const d=Yd(i[c]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,d)}for(const c in s){const d=s[c][0].length;if(d===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let f=0;f<d;++f){const h=[];for(let v=0;v<s[c].length;++v)h.push(s[c][v][f]);const m=Yd(h);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(m)}}return l}function Yd(n){let e,t,o,r=-1,i=0;for(let u=0;u<n.length;++u){const c=n[u];if(e===void 0&&(e=c.array.constructor),e!==c.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=c.itemSize),t!==c.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(o===void 0&&(o=c.normalized),o!==c.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(r===-1&&(r=c.gpuType),r!==c.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;i+=c.count*t}const s=new e(i),a=new un(s,t,o);let l=0;for(let u=0;u<n.length;++u){const c=n[u];if(c.isInterleavedBufferAttribute){const d=l/t;for(let f=0,h=c.count;f<h;f++)for(let m=0;m<t;m++){const v=c.getComponent(f,m);a.setComponent(f+d,m,v)}}else s.set(c.array,l);l+=c.count*t}return r!==void 0&&(a.gpuType=r),a}const qE=(n,e)=>{const{isSphere:t,background:{enabled:o,color:r,opacity:i,hover:s}}=e;let a;const l=new ir({color:r,side:Cu,opacity:i,transparent:!0,depthWrite:!1});if(!o)return null;if(t)a=new me(new Uf(1.8,64,64),l);else{let u;n.forEach(c=>{const d=c.scale.x;c.scale.setScalar(.9),c.updateMatrix();const f=c.geometry.clone();f.applyMatrix4(c.matrix),u=u?BE([u,f]):f,c.scale.setScalar(d)}),a=new me(u,l)}return a.userData={color:r,opacity:i,hover:s},a},Xd=new dn,Ai=new ee;class Ah extends ov{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],o=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(o),this.setAttribute("position",new Eo(e,3)),this.setAttribute("uv",new Eo(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,o=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),o.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const o=new Al(t,6,1);return this.setAttribute("instanceStart",new Dr(o,3,0)),this.setAttribute("instanceEnd",new Dr(o,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const o=new Al(t,6,1);return this.setAttribute("instanceColorStart",new Dr(o,3,0)),this.setAttribute("instanceColorEnd",new Dr(o,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new rv(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new dn);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),Xd.setFromBufferAttribute(t),this.boundingBox.union(Xd))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Tu),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const o=this.boundingSphere.center;this.boundingBox.getCenter(o);let r=0;for(let i=0,s=e.count;i<s;i++)Ai.fromBufferAttribute(e,i),r=Math.max(r,o.distanceToSquared(Ai)),Ai.fromBufferAttribute(t,i),r=Math.max(r,o.distanceToSquared(Ai));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}Bi.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ne(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};qi.line={uniforms:Ls.merge([Bi.common,Bi.fog,Bi.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class vc extends Jn{constructor(e){super({type:"LineMaterial",uniforms:Ls.clone(qi.line.uniforms),vertexShader:qi.line.vertexShader,fragmentShader:qi.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const pl=new Gr,Zd=new ee,Qd=new ee,At=new Gr,Pt=new Gr,kn=new Gr,hl=new ee,ml=new Ht,It=new $n,Jd=new ee,Pi=new dn,Ii=new Tu,Dn=new Gr;let Ln,nr;function ef(n,e,t){return Dn.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),Dn.multiplyScalar(1/Dn.w),Dn.x=nr/t.width,Dn.y=nr/t.height,Dn.applyMatrix4(n.projectionMatrixInverse),Dn.multiplyScalar(1/Dn.w),Math.abs(Math.max(Dn.x,Dn.y))}function LE(n,e){const t=n.matrixWorld,o=n.geometry,r=o.attributes.instanceStart,i=o.attributes.instanceEnd,s=Math.min(o.instanceCount,r.count);for(let a=0,l=s;a<l;a++){It.start.fromBufferAttribute(r,a),It.end.fromBufferAttribute(i,a),It.applyMatrix4(t);const u=new ee,c=new ee;Ln.distanceSqToSegment(It.start,It.end,c,u),c.distanceTo(u)<nr*.5&&e.push({point:c,pointOnLine:u,distance:Ln.origin.distanceTo(c),object:n,face:null,faceIndex:a,uv:null,uv1:null})}}function VE(n,e,t){const o=e.projectionMatrix,r=n.material.resolution,i=n.matrixWorld,s=n.geometry,a=s.attributes.instanceStart,l=s.attributes.instanceEnd,u=Math.min(s.instanceCount,a.count),c=-e.near;Ln.at(1,kn),kn.w=1,kn.applyMatrix4(e.matrixWorldInverse),kn.applyMatrix4(o),kn.multiplyScalar(1/kn.w),kn.x*=r.x/2,kn.y*=r.y/2,kn.z=0,hl.copy(kn),ml.multiplyMatrices(e.matrixWorldInverse,i);for(let d=0,f=u;d<f;d++){if(At.fromBufferAttribute(a,d),Pt.fromBufferAttribute(l,d),At.w=1,Pt.w=1,At.applyMatrix4(ml),Pt.applyMatrix4(ml),At.z>c&&Pt.z>c)continue;if(At.z>c){const y=At.z-Pt.z,_=(At.z-c)/y;At.lerp(Pt,_)}else if(Pt.z>c){const y=Pt.z-At.z,_=(Pt.z-c)/y;Pt.lerp(At,_)}At.applyMatrix4(o),Pt.applyMatrix4(o),At.multiplyScalar(1/At.w),Pt.multiplyScalar(1/Pt.w),At.x*=r.x/2,At.y*=r.y/2,Pt.x*=r.x/2,Pt.y*=r.y/2,It.start.copy(At),It.start.z=0,It.end.copy(Pt),It.end.z=0;const h=It.closestPointToPointParameter(hl,!0);It.at(h,Jd);const m=So.lerp(At.z,Pt.z,h),v=m>=-1&&m<=1,g=hl.distanceTo(Jd)<nr*.5;if(v&&g){It.start.fromBufferAttribute(a,d),It.end.fromBufferAttribute(l,d),It.start.applyMatrix4(i),It.end.applyMatrix4(i);const y=new ee,_=new ee;Ln.distanceSqToSegment(It.start,It.end,_,y),t.push({point:_,pointOnLine:y,distance:Ln.origin.distanceTo(_),object:n,face:null,faceIndex:d,uv:null,uv1:null})}}}class FE extends me{constructor(e=new Ah,t=new vc({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,o=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let s=0,a=0,l=t.count;s<l;s++,a+=2)Zd.fromBufferAttribute(t,s),Qd.fromBufferAttribute(o,s),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+Zd.distanceTo(Qd);const i=new Al(r,2,1);return e.setAttribute("instanceDistanceStart",new Dr(i,1,0)),e.setAttribute("instanceDistanceEnd",new Dr(i,1,1)),this}raycast(e,t){const o=this.material.worldUnits,r=e.camera;r===null&&!o&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const i=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Ln=e.ray;const s=this.matrixWorld,a=this.geometry,l=this.material;nr=l.linewidth+i,a.boundingSphere===null&&a.computeBoundingSphere(),Ii.copy(a.boundingSphere).applyMatrix4(s);let u;if(o)u=nr*.5;else{const d=Math.max(r.near,Ii.distanceToPoint(Ln.origin));u=ef(r,d,l.resolution)}if(Ii.radius+=u,Ln.intersectsSphere(Ii)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),Pi.copy(a.boundingBox).applyMatrix4(s);let c;if(o)c=nr*.5;else{const d=Math.max(r.near,Pi.distanceToPoint(Ln.origin));c=ef(r,d,l.resolution)}Pi.expandByScalar(c),Ln.intersectsBox(Pi)!==!1&&(o?LE(this,t):VE(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(pl),this.material.uniforms.resolution.value.set(pl.z,pl.w))}}class Ph extends Ah{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,o=new Float32Array(2*t);for(let r=0;r<t;r+=3)o[2*r]=e[r],o[2*r+1]=e[r+1],o[2*r+2]=e[r+2],o[2*r+3]=e[r+3],o[2*r+4]=e[r+4],o[2*r+5]=e[r+5];return super.setPositions(o),this}setColors(e){const t=e.length-3,o=new Float32Array(2*t);for(let r=0;r<t;r+=3)o[2*r]=e[r],o[2*r+1]=e[r+1],o[2*r+2]=e[r+2],o[2*r+3]=e[r+3],o[2*r+4]=e[r+4],o[2*r+5]=e[r+5];return super.setColors(o),this}setFromPoints(e){const t=e.length-1,o=new Float32Array(6*t);for(let r=0;r<t;r++)o[6*r]=e[r].x,o[6*r+1]=e[r].y,o[6*r+2]=e[r].z||0,o[6*r+3]=e[r+1].x,o[6*r+4]=e[r+1].y,o[6*r+5]=e[r+1].z||0;return super.setPositions(o),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class NE extends FE{constructor(e=new Ph,t=new vc({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const $E=n=>{const e=new qn,t=[],o=[],{isSphere:r}=n;if(Bs.forEach((a,l)=>{const{enabled:u,line:c,scale:d,color:f}=n[a];if(!u||!c)return;const h=l<3?1:-1,m=(r?Mh-d/2:.975)*h;t.push(a.includes("x")?m:0,a.includes("y")?m:0,a.includes("z")?m:0,0,0,0);const v=e.set(f).toArray();o.push(...v,...v)}),!t.length)return null;const i=new Ph().setPositions(t).setColors(o),s=new vc({linewidth:n.lineWidth,vertexColors:!0,resolution:new Ne(window.innerWidth,window.innerHeight)});return new NE(i,s).computeLineDistances()},UE=n=>{const{corners:e,edges:t}=n,o=[],r=IE(n),i=OE(n,r);o.push(...i),e.enabled&&o.push(...kE(n,r)),t.enabled&&o.push(...DE(n,r,e.enabled?7:6));const s=qE(i,n),a=$E(n);return[o,s,a]},hs=(n,e=!0)=>{const{material:t,userData:o}=n,{opacity:r,color:i,scale:s}=e?o.hover:o;n.scale.setScalar(s),t.opacity=r,t.map?RE(t.map,e):t.color.set(i)},Ar=new Ht,tf=new Tl,zE=new Ne,Go=new ee,nf=new Gr;class HE extends Ur{constructor(e,t,o={}){super(),He(this,"enabled",!0),He(this,"camera"),He(this,"renderer"),He(this,"options"),He(this,"target",new ee),He(this,"animated",!0),He(this,"speed",1),He(this,"animating",!1),He(this,"_options"),He(this,"_intersections"),He(this,"_background",null),He(this,"_viewport",[0,0,0,0]),He(this,"_originalViewport",[0,0,0,0]),He(this,"_originalScissor",[0,0,0,0]),He(this,"_scene"),He(this,"_camera"),He(this,"_container"),He(this,"_domElement"),He(this,"_domRect"),He(this,"_dragging",!1),He(this,"_distance",0),He(this,"_clock",new ev),He(this,"_targetQuaternion",new Dt),He(this,"_quaternionStart",new Dt),He(this,"_quaternionEnd",new Dt),He(this,"_pointerStart",new Ne),He(this,"_focus",null),He(this,"_placement"),He(this,"_controls"),He(this,"_controlsListeners"),this.camera=e,this.renderer=t,this._scene=new El().add(this),this.set(o)}get placement(){return this._placement}set placement(e){this._placement=Th(this._domElement,e),this.domUpdate()}set(e={}){this.dispose(),this.options=e,this._options=PE(e),this._camera=this._options.isSphere?new Ff(-1.8,1.8,1.8,-1.8,5,10):new tv(26,1,5,10),this._camera.position.set(0,0,7);const[t,o,r]=UE(this._options);o&&this.add(o),r&&this.add(r),this.add(...t),this._background=o,this._intersections=t;const{container:i,animated:s,speed:a}=this._options;return this.animated=s,this.speed=a,this._container=i?xE(i):document.body,this._domElement=wE(this._options),this._domElement.onpointerdown=l=>this._onPointerDown(l),this._domElement.onpointermove=l=>this._onPointerMove(l),this._domElement.onpointerleave=()=>this._onPointerLeave(),this._container.appendChild(this._domElement),this._controls&&this.attachControls(this._controls),this.update(),this._updateOrientation(!0),this}render(){this.animating&&this._animate();const{renderer:e,_viewport:t}=this,o=e.getScissorTest(),r=e.autoClear;return e.autoClear=!1,e.setViewport(...t),o&&e.setScissor(...t),e.clear(!1,!0,!1),e.render(this._scene,this._camera),e.setViewport(...this._originalViewport),o&&e.setScissor(...this._originalScissor),e.autoClear=r,this}domUpdate(){this._domRect=this._domElement.getBoundingClientRect();const e=this.renderer,t=this._domRect,o=e.domElement.getBoundingClientRect();return this._viewport.splice(0,4,t.left-o.left,e.domElement.clientHeight-(t.top-o.top+t.height),t.width,t.height),e.getViewport(nf).toArray(this._originalViewport),e.getScissorTest()&&e.getScissor(nf).toArray(this._originalScissor),this}cameraUpdate(){return this._updateOrientation(),this}update(e=!0){return e&&this._controls&&this._controls.update(),this.domUpdate().cameraUpdate()}attachControls(e){return this.detachControls(),this.target=e.target,this._controlsListeners={start:()=>e.enabled=!1,end:()=>e.enabled=!0,change:()=>this.update(!1)},this.addEventListener("start",this._controlsListeners.start),this.addEventListener("end",this._controlsListeners.end),e.addEventListener("change",this._controlsListeners.change),this._controls=e,this}detachControls(){if(!(!this._controlsListeners||!this._controls))return this.target=new ee().copy(this._controls.target),this.removeEventListener("start",this._controlsListeners.start),this.removeEventListener("end",this._controlsListeners.end),this._controls.removeEventListener("change",this._controlsListeners.change),this._controlsListeners=void 0,this._controls=void 0,this}dispose(){var e;this.detachControls(),this.children.forEach(t=>{var o,r,i,s;this.remove(t);const a=t;(o=a.material)==null||o.dispose(),(i=(r=a.material)==null?void 0:r.map)==null||i.dispose(),(s=a.geometry)==null||s.dispose()}),(e=this._domElement)==null||e.remove()}_updateOrientation(e=!0){e&&(this.quaternion.copy(this.camera.quaternion).invert(),this.updateMatrixWorld()),Hd(this._options,this._intersections,this.camera)}_animate(){const{position:e,quaternion:t}=this.camera;if(e.set(0,0,1),!this.animated){e.applyQuaternion(this._quaternionEnd).multiplyScalar(this._distance).add(this.target),t.copy(this._targetQuaternion),this._updateOrientation(),this.animating=!1,this.dispatchEvent({type:"change"}),this.dispatchEvent({type:"end"});return}this._controls&&(this._controls.enabled=!1);const o=this._clock.getDelta()*TE*this.speed;this._quaternionStart.rotateTowards(this._quaternionEnd,o),e.applyQuaternion(this._quaternionStart).multiplyScalar(this._distance).add(this.target),t.rotateTowards(this._targetQuaternion,o),this._updateOrientation(),requestAnimationFrame(()=>this.dispatchEvent({type:"change"})),this._quaternionStart.angleTo(this._quaternionEnd)<fl&&(this._controls&&(this._controls.enabled=!0),this.animating=!1,this.dispatchEvent({type:"end"}))}_setOrientation(e){const t=this.camera,o=this.target;Go.copy(e).multiplyScalar(this._distance),Ar.setPosition(Go).lookAt(Go,this.position,this.up),this._targetQuaternion.setFromRotationMatrix(Ar),Go.add(o),Ar.lookAt(Go,o,this.up),this._quaternionEnd.setFromRotationMatrix(Ar),Ar.setPosition(t.position).lookAt(t.position,o,this.up),this._quaternionStart.setFromRotationMatrix(Ar),this.animating=!0,this._clock.start(),this.dispatchEvent({type:"start"})}_onPointerDown(e){if(!this.enabled)return;const t=l=>{if(!this._dragging){if(CE(l,this._pointerStart))return;this._dragging=!0}const u=zE.set(l.clientX,l.clientY).sub(this._pointerStart).multiplyScalar(1/this._domRect.width*Math.PI),c=this.coordinateConversion(Go.subVectors(this.camera.position,this.target)),d=tf.setFromVector3(c);d.theta=s-u.x,d.phi=su(a-u.y,fl,Math.PI-fl),this.coordinateConversion(this.camera.position.setFromSpherical(d),!0).add(this.target),this.camera.lookAt(this.target),this.quaternion.copy(this.camera.quaternion).invert(),this._updateOrientation(!1),this.dispatchEvent({type:"change"})},o=()=>{if(document.removeEventListener("pointermove",t,!1),document.removeEventListener("pointerup",o,!1),!this._dragging)return this._handleClick(e);this._focus&&(hs(this._focus,!1),this._focus=null),this._dragging=!1,this.dispatchEvent({type:"end"})};if(this.animating)return;e.preventDefault(),this._pointerStart.set(e.clientX,e.clientY);const r=this.coordinateConversion(Go.subVectors(this.camera.position,this.target)),i=tf.setFromVector3(r),s=i.theta,a=i.phi;this._distance=i.radius,document.addEventListener("pointermove",t,!1),document.addEventListener("pointerup",o,!1),this.dispatchEvent({type:"start"})}coordinateConversion(e,t=!1){const{x:o,y:r,z:i}=e,s=Ur.DEFAULT_UP;return s.x===1?t?e.set(r,i,o):e.set(i,o,r):s.z===1?t?e.set(i,o,r):e.set(r,i,o):e}_onPointerMove(e){!this.enabled||this._dragging||(this._background&&Kd(this._background,!0),this._handleHover(e))}_onPointerLeave(){!this.enabled||this._dragging||(this._background&&Kd(this._background,!1),this._focus&&hs(this._focus,!1),this._domElement.style.cursor="")}_handleClick(e){const t=Gd(e,this._domRect,this._camera,this._intersections);this._focus&&(hs(this._focus,!1),this._focus=null),t&&(this._setOrientation(t.object.position),this.dispatchEvent({type:"change"}))}_handleHover(e){const t=Gd(e,this._domRect,this._camera,this._intersections),o=t?.object||null;this._focus!==o&&(this._domElement.style.cursor=o?"pointer":"",this._focus&&hs(this._focus,!1),(this._focus=o)?hs(o,!0):Hd(this._options,this._intersections,this.camera))}}class of{static isWebGL2Available(){try{const e=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&e.getContext("webgl2"))}catch{return!1}}static isColorSpaceAvailable(e){try{const t=document.createElement("canvas"),o=window.WebGL2RenderingContext&&t.getContext("webgl2");return o.drawingBufferColorSpace=e,o.drawingBufferColorSpace===e}catch{return!1}}static getWebGL2ErrorMessage(){return this._getErrorMessage(2)}static _getErrorMessage(e){const t={1:"WebGL",2:"WebGL 2"},o={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let r='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const i=document.createElement("div");return i.id="webglmessage",i.style.fontFamily="monospace",i.style.fontSize="13px",i.style.fontWeight="normal",i.style.textAlign="center",i.style.background="#fff",i.style.color="#000",i.style.padding="1.5em",i.style.width="400px",i.style.margin="5em auto 0",o[e]?r=r.replace("$0","graphics card"):r=r.replace("$0","browser"),r=r.replace("$1",t[e]),i.innerHTML=r,i}}const Ko=new Nf,kt=new ee,mo=new ee,it=new Dt,rf={X:new ee(1,0,0),Y:new ee(0,1,0),Z:new ee(0,0,1)},vl={type:"change"},sf={type:"mouseDown",mode:null},af={type:"mouseUp",mode:null},lf={type:"objectChange"};class jE extends Df{constructor(e,t=null){super(void 0,t);const o=new ZE(this);this._root=o;const r=new QE;this._gizmo=r,o.add(r);const i=new JE;this._plane=i,o.add(i);const s=this;function a(b,x){let C=x;Object.defineProperty(s,b,{get:function(){return C!==void 0?C:x},set:function(k){C!==k&&(C=k,i[b]=k,r[b]=k,s.dispatchEvent({type:b+"-changed",value:k}),s.dispatchEvent(vl))}}),s[b]=x,i[b]=x,r[b]=x}a("camera",e),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0),a("minX",-1/0),a("maxX",1/0),a("minY",-1/0),a("maxY",1/0),a("minZ",-1/0),a("maxZ",1/0);const l=new ee,u=new ee,c=new Dt,d=new Dt,f=new ee,h=new Dt,m=new ee,v=new ee,g=new ee,y=0,_=new ee;a("worldPosition",l),a("worldPositionStart",u),a("worldQuaternion",c),a("worldQuaternionStart",d),a("cameraPosition",f),a("cameraQuaternion",h),a("pointStart",m),a("pointEnd",v),a("rotationAxis",g),a("rotationAngle",y),a("eye",_),this._offset=new ee,this._startNorm=new ee,this._endNorm=new ee,this._cameraScale=new ee,this._parentPosition=new ee,this._parentQuaternion=new Dt,this._parentQuaternionInv=new Dt,this._parentScale=new ee,this._worldScaleStart=new ee,this._worldQuaternionInv=new Dt,this._worldScale=new ee,this._positionStart=new ee,this._quaternionStart=new Dt,this._scaleStart=new ee,this._getPointer=WE.bind(this),this._onPointerDown=KE.bind(this),this._onPointerHover=GE.bind(this),this._onPointerMove=YE.bind(this),this._onPointerUp=XE.bind(this),t!==null&&this.connect(t)}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="auto"}getHelper(){return this._root}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;e!==null&&Ko.setFromCamera(e,this.camera);const t=gl(this._gizmo.picker[this.mode],Ko);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e!=null&&e.button!==0)&&this.axis!==null){e!==null&&Ko.setFromCamera(e,this.camera);const t=gl(this._plane,Ko,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,sf.mode=this.mode,this.dispatchEvent(sf)}}pointerMove(e){const t=this.axis,o=this.mode,r=this.object;let i=this.space;if(o==="scale"?i="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(i="world"),r===void 0||t===null||this.dragging===!1||e!==null&&e.button!==-1)return;e!==null&&Ko.setFromCamera(e,this.camera);const s=gl(this._plane,Ko,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),o==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),i==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),i==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(i==="local"&&(r.position.applyQuaternion(it.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),i==="world"&&(r.parent&&r.position.add(kt.setFromMatrixPosition(r.parent.matrixWorld)),t.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(kt.setFromMatrixPosition(r.parent.matrixWorld)))),r.position.x=Math.max(this.minX,Math.min(this.maxX,r.position.x)),r.position.y=Math.max(this.minY,Math.min(this.maxY,r.position.y)),r.position.z=Math.max(this.minZ,Math.min(this.maxZ,r.position.z));else if(o==="scale"){if(t.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),mo.set(a,a,a)}else kt.copy(this.pointStart),mo.copy(this.pointEnd),kt.applyQuaternion(this._worldQuaternionInv),mo.applyQuaternion(this._worldQuaternionInv),mo.divide(kt),t.search("X")===-1&&(mo.x=1),t.search("Y")===-1&&(mo.y=1),t.search("Z")===-1&&(mo.z=1);r.scale.copy(this._scaleStart).multiply(mo),this.scaleSnap&&(t.search("X")!==-1&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(o==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const a=20/this.worldPosition.distanceTo(kt.setFromMatrixPosition(this.camera.matrixWorld));let l=!1;t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(kt.copy(this.rotationAxis).cross(this.eye))*a):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(rf[t]),kt.copy(rf[t]),i==="local"&&kt.applyQuaternion(this.worldQuaternion),kt.cross(this.eye),kt.length()===0?l=!0:this.rotationAngle=this._offset.dot(kt.normalize())*a),(t==="E"||l)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),i==="local"&&t!=="E"&&t!=="XYZE"?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(it.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(it.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(vl),this.dispatchEvent(lf)}}pointerUp(e){e!==null&&e.button!==0||(this.dragging&&this.axis!==null&&(af.mode=this.mode,this.dispatchEvent(af)),this.dragging=!1,this.axis=null)}dispose(){this.disconnect(),this._root.dispose()}attach(e){return this.object=e,this._root.visible=!0,this}detach(){return this.object=void 0,this.axis=null,this._root.visible=!1,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(vl),this.dispatchEvent(lf),this.pointStart.copy(this.pointEnd))}getRaycaster(){return Ko}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}setColors(e,t,o,r){const i=this._gizmo.materialLib;i.xAxis.color.set(e),i.yAxis.color.set(t),i.zAxis.color.set(o),i.active.color.set(r),i.xAxisTransparent.color.set(e),i.yAxisTransparent.color.set(t),i.zAxisTransparent.color.set(o),i.activeTransparent.color.set(r),i.xAxis._color&&i.xAxis._color.set(e),i.yAxis._color&&i.yAxis._color.set(t),i.zAxis._color&&i.zAxis._color.set(o),i.active._color&&i.active._color.set(r),i.xAxisTransparent._color&&i.xAxisTransparent._color.set(e),i.yAxisTransparent._color&&i.yAxisTransparent._color.set(t),i.zAxisTransparent._color&&i.zAxisTransparent._color.set(o),i.activeTransparent._color&&i.activeTransparent._color.set(r)}}function WE(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{const e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function GE(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function KE(n){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function YE(n){this.enabled&&this.pointerMove(this._getPointer(n))}function XE(n){this.enabled&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function gl(n,e,t){const o=e.intersectObject(n,!0);for(let r=0;r<o.length;r++)if(o[r].object.visible||t)return o[r];return!1}const Ri=new sv,Ze=new ee(0,1,0),uf=new ee(0,0,0),cf=new Ht,Oi=new Dt,Ui=new Dt,Bn=new ee,df=new Ht,ws=new ee(1,0,0),Qo=new ee(0,1,0),xs=new ee(0,0,1),ki=new ee,ms=new ee,vs=new ee;class ZE extends Ur{constructor(e){super(),this.isTransformControlsRoot=!0,this.controls=e,this.visible=!1}updateMatrixWorld(e){const t=this.controls;t.object!==void 0&&(t.object.updateMatrixWorld(),t.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):t.object.parent.matrixWorld.decompose(t._parentPosition,t._parentQuaternion,t._parentScale),t.object.matrixWorld.decompose(t.worldPosition,t.worldQuaternion,t._worldScale),t._parentQuaternionInv.copy(t._parentQuaternion).invert(),t._worldQuaternionInv.copy(t.worldQuaternion).invert()),t.camera.updateMatrixWorld(),t.camera.matrixWorld.decompose(t.cameraPosition,t.cameraQuaternion,t._cameraScale),t.camera.isOrthographicCamera?t.camera.getWorldDirection(t.eye).negate():t.eye.copy(t.cameraPosition).sub(t.worldPosition).normalize(),super.updateMatrixWorld(e)}dispose(){this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}}class QE extends Ur{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new ir({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new zf({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),o=e.clone();o.opacity=.15;const r=t.clone();r.opacity=.5;const i=e.clone();i.color.setHex(16711680);const s=e.clone();s.color.setHex(65280);const a=e.clone();a.color.setHex(255);const l=e.clone();l.color.setHex(16711680),l.opacity=.5;const u=e.clone();u.color.setHex(65280),u.opacity=.5;const c=e.clone();c.color.setHex(255),c.opacity=.5;const d=e.clone();d.opacity=.25;const f=e.clone();f.color.setHex(16776960),f.opacity=.25;const h=e.clone();h.color.setHex(16776960);const m=e.clone();m.color.setHex(7895160),this.materialLib={xAxis:i,yAxis:s,zAxis:a,active:h,xAxisTransparent:l,yAxisTransparent:u,zAxisTransparent:c,activeTransparent:f};const v=new Xt(0,.04,.1,12);v.translate(0,.05,0);const g=new $t(.08,.08,.08);g.translate(0,.04,0);const y=new ro;y.setAttribute("position",new Eo([0,0,0,1,0,0],3));const _=new Xt(.0075,.0075,.5,3);_.translate(0,.25,0);function b(Y,W){const G=new ss(Y,.0075,3,64,W*Math.PI*2);return G.rotateY(Math.PI/2),G.rotateX(Math.PI/2),G}function x(){const Y=new ro;return Y.setAttribute("position",new Eo([0,0,0,1,1,1],3)),Y}const C={X:[[new me(v,i),[.5,0,0],[0,0,-Math.PI/2]],[new me(v,i),[-.5,0,0],[0,0,Math.PI/2]],[new me(_,i),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new me(v,s),[0,.5,0]],[new me(v,s),[0,-.5,0],[Math.PI,0,0]],[new me(_,s)]],Z:[[new me(v,a),[0,0,.5],[Math.PI/2,0,0]],[new me(v,a),[0,0,-.5],[-Math.PI/2,0,0]],[new me(_,a),null,[Math.PI/2,0,0]]],XYZ:[[new me(new Zs(.1,0),d),[0,0,0]]],XY:[[new me(new $t(.15,.15,.01),c),[.15,.15,0]]],YZ:[[new me(new $t(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new me(new $t(.15,.15,.01),u),[.15,0,.15],[-Math.PI/2,0,0]]]},k={X:[[new me(new Xt(.2,0,.6,4),o),[.3,0,0],[0,0,-Math.PI/2]],[new me(new Xt(.2,0,.6,4),o),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new me(new Xt(.2,0,.6,4),o),[0,.3,0]],[new me(new Xt(.2,0,.6,4),o),[0,-.3,0],[0,0,Math.PI]]],Z:[[new me(new Xt(.2,0,.6,4),o),[0,0,.3],[Math.PI/2,0,0]],[new me(new Xt(.2,0,.6,4),o),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new me(new Zs(.2,0),o)]],XY:[[new me(new $t(.2,.2,.01),o),[.15,.15,0]]],YZ:[[new me(new $t(.2,.2,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new me(new $t(.2,.2,.01),o),[.15,0,.15],[-Math.PI/2,0,0]]]},P={START:[[new me(new Zs(.01,2),r),null,null,null,"helper"]],END:[[new me(new Zs(.01,2),r),null,null,null,"helper"]],DELTA:[[new Cn(x(),r),null,null,null,"helper"]],X:[[new Cn(y,r),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Cn(y,r),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Cn(y,r),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},R={XYZE:[[new me(b(.5,1),m),null,[0,Math.PI/2,0]]],X:[[new me(b(.5,.5),i)]],Y:[[new me(b(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new me(b(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new me(b(.75,1),f),null,[0,Math.PI/2,0]]]},M={AXIS:[[new Cn(y,r),[-1e3,0,0],null,[1e6,1,1],"helper"]]},A={XYZE:[[new me(new Uf(.25,10,8),o)]],X:[[new me(new ss(.5,.1,4,24),o),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new me(new ss(.5,.1,4,24),o),[0,0,0],[Math.PI/2,0,0]]],Z:[[new me(new ss(.5,.1,4,24),o),[0,0,0],[0,0,-Math.PI/2]]],E:[[new me(new ss(.75,.1,2,24),o)]]},O={X:[[new me(g,i),[.5,0,0],[0,0,-Math.PI/2]],[new me(_,i),[0,0,0],[0,0,-Math.PI/2]],[new me(g,i),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new me(g,s),[0,.5,0]],[new me(_,s)],[new me(g,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new me(g,a),[0,0,.5],[Math.PI/2,0,0]],[new me(_,a),[0,0,0],[Math.PI/2,0,0]],[new me(g,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new me(new $t(.15,.15,.01),c),[.15,.15,0]]],YZ:[[new me(new $t(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new me(new $t(.15,.15,.01),u),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new me(new $t(.1,.1,.1),d)]]},D={X:[[new me(new Xt(.2,0,.6,4),o),[.3,0,0],[0,0,-Math.PI/2]],[new me(new Xt(.2,0,.6,4),o),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new me(new Xt(.2,0,.6,4),o),[0,.3,0]],[new me(new Xt(.2,0,.6,4),o),[0,-.3,0],[0,0,Math.PI]]],Z:[[new me(new Xt(.2,0,.6,4),o),[0,0,.3],[Math.PI/2,0,0]],[new me(new Xt(.2,0,.6,4),o),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new me(new $t(.2,.2,.01),o),[.15,.15,0]]],YZ:[[new me(new $t(.2,.2,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new me(new $t(.2,.2,.01),o),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new me(new $t(.2,.2,.2),o),[0,0,0]]]},V={X:[[new Cn(y,r),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Cn(y,r),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Cn(y,r),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function $(Y){const W=new Ur;for(const G in Y)for(let Q=Y[G].length;Q--;){const ge=Y[G][Q][0].clone(),ce=Y[G][Q][1],re=Y[G][Q][2],pe=Y[G][Q][3],Ee=Y[G][Q][4];ge.name=G,ge.tag=Ee,ce&&ge.position.set(ce[0],ce[1],ce[2]),re&&ge.rotation.set(re[0],re[1],re[2]),pe&&ge.scale.set(pe[0],pe[1],pe[2]),ge.updateMatrix();const Pe=ge.geometry.clone();Pe.applyMatrix4(ge.matrix),ge.geometry=Pe,ge.renderOrder=1/0,ge.position.set(0,0,0),ge.rotation.set(0,0,0),ge.scale.set(1,1,1),W.add(ge)}return W}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=$(C)),this.add(this.gizmo.rotate=$(R)),this.add(this.gizmo.scale=$(O)),this.add(this.picker.translate=$(k)),this.add(this.picker.rotate=$(A)),this.add(this.picker.scale=$(D)),this.add(this.helper.translate=$(P)),this.add(this.helper.rotate=$(M)),this.add(this.helper.scale=$(V)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const o=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Ui;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let i=0;i<r.length;i++){const s=r[i];s.visible=!0,s.rotation.set(0,0,0),s.position.copy(this.worldPosition);let a;if(this.camera.isOrthographicCamera?a=(this.camera.top-this.camera.bottom)/this.camera.zoom:a=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),s.scale.set(1,1,1).multiplyScalar(a*this.size/4),s.tag==="helper"){s.visible=!1,s.name==="AXIS"?(s.visible=!!this.axis,this.axis==="X"&&(it.setFromEuler(Ri.set(0,0,0)),s.quaternion.copy(o).multiply(it),Math.abs(Ze.copy(ws).applyQuaternion(o).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Y"&&(it.setFromEuler(Ri.set(0,0,Math.PI/2)),s.quaternion.copy(o).multiply(it),Math.abs(Ze.copy(Qo).applyQuaternion(o).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Z"&&(it.setFromEuler(Ri.set(0,Math.PI/2,0)),s.quaternion.copy(o).multiply(it),Math.abs(Ze.copy(xs).applyQuaternion(o).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="XYZE"&&(it.setFromEuler(Ri.set(0,Math.PI/2,0)),Ze.copy(this.rotationAxis),s.quaternion.setFromRotationMatrix(cf.lookAt(uf,Ze,Qo)),s.quaternion.multiply(it),s.visible=this.dragging),this.axis==="E"&&(s.visible=!1)):s.name==="START"?(s.position.copy(this.worldPositionStart),s.visible=this.dragging):s.name==="END"?(s.position.copy(this.worldPosition),s.visible=this.dragging):s.name==="DELTA"?(s.position.copy(this.worldPositionStart),s.quaternion.copy(this.worldQuaternionStart),kt.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),kt.applyQuaternion(this.worldQuaternionStart.clone().invert()),s.scale.copy(kt),s.visible=this.dragging):(s.quaternion.copy(o),this.dragging?s.position.copy(this.worldPositionStart):s.position.copy(this.worldPosition),this.axis&&(s.visible=this.axis.search(s.name)!==-1));continue}s.quaternion.copy(o),this.mode==="translate"||this.mode==="scale"?(s.name==="X"&&Math.abs(Ze.copy(ws).applyQuaternion(o).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Y"&&Math.abs(Ze.copy(Qo).applyQuaternion(o).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Z"&&Math.abs(Ze.copy(xs).applyQuaternion(o).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XY"&&Math.abs(Ze.copy(xs).applyQuaternion(o).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="YZ"&&Math.abs(Ze.copy(ws).applyQuaternion(o).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XZ"&&Math.abs(Ze.copy(Qo).applyQuaternion(o).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1)):this.mode==="rotate"&&(Oi.copy(o),Ze.copy(this.eye).applyQuaternion(it.copy(o).invert()),s.name.search("E")!==-1&&s.quaternion.setFromRotationMatrix(cf.lookAt(this.eye,uf,Qo)),s.name==="X"&&(it.setFromAxisAngle(ws,Math.atan2(-Ze.y,Ze.z)),it.multiplyQuaternions(Oi,it),s.quaternion.copy(it)),s.name==="Y"&&(it.setFromAxisAngle(Qo,Math.atan2(Ze.x,Ze.z)),it.multiplyQuaternions(Oi,it),s.quaternion.copy(it)),s.name==="Z"&&(it.setFromAxisAngle(xs,Math.atan2(Ze.y,Ze.x)),it.multiplyQuaternions(Oi,it),s.quaternion.copy(it))),s.visible=s.visible&&(s.name.indexOf("X")===-1||this.showX),s.visible=s.visible&&(s.name.indexOf("Y")===-1||this.showY),s.visible=s.visible&&(s.name.indexOf("Z")===-1||this.showZ),s.visible=s.visible&&(s.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),s.material._color=s.material._color||s.material.color.clone(),s.material._opacity=s.material._opacity||s.material.opacity,s.material.color.copy(s.material._color),s.material.opacity=s.material._opacity,this.enabled&&this.axis&&(s.name===this.axis?(s.material.color.copy(this.materialLib.active.color),s.material.opacity=1):this.axis.split("").some(function(l){return s.name===l})&&(s.material.color.copy(this.materialLib.active.color),s.material.opacity=1))}super.updateMatrixWorld(e)}}class JE extends me{constructor(){super(new iv(1e5,1e5,2,2),new ir({visible:!1,wireframe:!0,side:Is,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),ki.copy(ws).applyQuaternion(t==="local"?this.worldQuaternion:Ui),ms.copy(Qo).applyQuaternion(t==="local"?this.worldQuaternion:Ui),vs.copy(xs).applyQuaternion(t==="local"?this.worldQuaternion:Ui),Ze.copy(ms),this.mode){case"translate":case"scale":switch(this.axis){case"X":Ze.copy(this.eye).cross(ki),Bn.copy(ki).cross(Ze);break;case"Y":Ze.copy(this.eye).cross(ms),Bn.copy(ms).cross(Ze);break;case"Z":Ze.copy(this.eye).cross(vs),Bn.copy(vs).cross(Ze);break;case"XY":Bn.copy(vs);break;case"YZ":Bn.copy(ki);break;case"XZ":Ze.copy(vs),Bn.copy(ms);break;case"XYZ":case"E":Bn.set(0,0,0);break}break;default:Bn.set(0,0,0)}Bn.length()===0?this.quaternion.copy(this.cameraQuaternion):(df.lookAt(kt.set(0,0,0),Bn,Ze),this.quaternion.setFromRotationMatrix(df)),super.updateMatrixWorld(e)}}class ns{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const eM=new Ff(-1,1,1,-1,0,1);class tM extends ro{constructor(){super(),this.setAttribute("position",new Eo([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Eo([0,2,0,0,2,0],2))}}const nM=new tM;class gc{constructor(e){this._mesh=new me(nM,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,eM)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}const ff={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class Es{constructor(){this.textureUtils=null,this.pluginCallbacks=[],this.register(function(e){return new pM(e)}),this.register(function(e){return new hM(e)}),this.register(function(e){return new yM(e)}),this.register(function(e){return new _M(e)}),this.register(function(e){return new bM(e)}),this.register(function(e){return new wM(e)}),this.register(function(e){return new mM(e)}),this.register(function(e){return new vM(e)}),this.register(function(e){return new gM(e)}),this.register(function(e){return new xM(e)}),this.register(function(e){return new SM(e)}),this.register(function(e){return new CM(e)}),this.register(function(e){return new TM(e)}),this.register(function(e){return new EM(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}setTextureUtils(e){return this.textureUtils=e,this}parse(e,t,o,r){const i=new fM,s=[];for(let a=0,l=this.pluginCallbacks.length;a<l;a++)s.push(this.pluginCallbacks[a](i));i.setPlugins(s),i.setTextureUtils(this.textureUtils),i.writeAsync(e,t,r).catch(o)}parseAsync(e,t){const o=this;return new Promise(function(r,i){o.parse(e,r,i,t)})}}const qe={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},yl="KHR_mesh_quantization",ln={};ln[dv]=qe.NEAREST;ln[fv]=qe.NEAREST_MIPMAP_NEAREST;ln[pv]=qe.NEAREST_MIPMAP_LINEAR;ln[Pl]=qe.LINEAR;ln[hv]=qe.LINEAR_MIPMAP_NEAREST;ln[mv]=qe.LINEAR_MIPMAP_LINEAR;ln[vv]=qe.CLAMP_TO_EDGE;ln[Ml]=qe.REPEAT;ln[gv]=qe.MIRRORED_REPEAT;const pf={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},oM=new qn,hf=12,rM=1179937895,sM=2,mf=8,iM=1313821514,aM=5130562;function Zn(n,e){return n.length===e.length&&n.every(function(t,o){return t===e[o]})}function lM(n){return new TextEncoder().encode(n).buffer}function uM(n){return Zn(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function cM(n,e,t){const o={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=e;r<e+t;r++)for(let i=0;i<n.itemSize;i++){let s;n.itemSize>4?s=n.array[r*n.itemSize+i]:(i===0?s=n.getX(r):i===1?s=n.getY(r):i===2?s=n.getZ(r):i===3&&(s=n.getW(r)),n.normalized===!0&&(s=So.normalize(s,n.array))),o.min[i]=Math.min(o.min[i],s),o.max[i]=Math.max(o.max[i],s)}return o}function Ih(n){return Math.ceil(n/4)*4}function _l(n,e=0){const t=Ih(n.byteLength);if(t!==n.byteLength){const o=new Uint8Array(t);if(o.set(new Uint8Array(n)),e!==0)for(let r=n.byteLength;r<t;r++)o[r]=e;return o.buffer}return n}function vf(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function dM(n,e){if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),n.convertToBlob({type:e,quality:t})}else return new Promise(t=>n.toBlob(t,e))}class fM{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+la}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},this.textureUtils=null}setPlugins(e){this.plugins=e}setTextureUtils(e){this.textureUtils=e}async writeAsync(e,t,o={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},o),this.options.animations.length>0&&(this.options.trs=!0),await this.processInputAsync(e),await Promise.all(this.pending);const r=this,i=r.buffers,s=r.json;o=r.options;const a=r.extensionsUsed,l=r.extensionsRequired,u=new Blob(i,{type:"application/octet-stream"}),c=Object.keys(a),d=Object.keys(l);if(c.length>0&&(s.extensionsUsed=c),d.length>0&&(s.extensionsRequired=d),s.buffers&&s.buffers.length>0&&(s.buffers[0].byteLength=u.size),o.binary===!0){const f=new FileReader;f.readAsArrayBuffer(u),f.onloadend=function(){const h=_l(f.result),m=new DataView(new ArrayBuffer(mf));m.setUint32(0,h.byteLength,!0),m.setUint32(4,aM,!0);const v=_l(lM(JSON.stringify(s)),32),g=new DataView(new ArrayBuffer(mf));g.setUint32(0,v.byteLength,!0),g.setUint32(4,iM,!0);const y=new ArrayBuffer(hf),_=new DataView(y);_.setUint32(0,rM,!0),_.setUint32(4,sM,!0);const b=hf+g.byteLength+v.byteLength+m.byteLength+h.byteLength;_.setUint32(8,b,!0);const x=new Blob([y,g,v,m,h],{type:"application/octet-stream"}),C=new FileReader;C.readAsArrayBuffer(x),C.onloadend=function(){t(C.result)}}}else if(s.buffers&&s.buffers.length>0){const f=new FileReader;f.readAsDataURL(u),f.onloadend=function(){const h=f.result;s.buffers[0].uri=h,t(s)}}else t(s)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const o=this.options,r=this.extensionsUsed;try{const i=JSON.parse(JSON.stringify(e.userData));if(o.includeCustomExtensions&&i.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const s in i.gltfExtensions)t.extensions[s]=i.gltfExtensions[s],r[s]=!0;delete i.gltfExtensions}Object.keys(i).length>0&&(t.extras=i)}catch(i){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+i.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const r=new Map;r.set(!0,this.uid++),r.set(!1,this.uid++),this.uids.set(e,r)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const o=new ee;for(let r=0,i=e.count;r<i;r++)if(Math.abs(o.fromBufferAttribute(e,r).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const o=e.clone(),r=new ee;for(let i=0,s=o.count;i<s;i++)r.fromBufferAttribute(o,i),r.x===0&&r.y===0&&r.z===0?r.setX(1):r.normalize(),o.setXYZ(i,r.x,r.y,r.z);return t.attributesNormalized.set(e,o),o}applyTextureTransform(e,t){let o=!1;const r={};(t.offset.x!==0||t.offset.y!==0)&&(r.offset=t.offset.toArray(),o=!0),t.rotation!==0&&(r.rotation=t.rotation,o=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(r.scale=t.repeat.toArray(),o=!0),o&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}async buildMetalRoughTextureAsync(e,t){if(e===t)return e;function o(h){return h.colorSpace===$f?function(v){return v<.04045?v*.0773993808:Math.pow(v*.9478672986+.0521327014,2.4)}:function(v){return v}}e instanceof $a&&(e=await this.decompressTextureAsync(e)),t instanceof $a&&(t=await this.decompressTextureAsync(t));const r=e?e.image:null,i=t?t.image:null,s=Math.max(r?r.width:0,i?i.width:0),a=Math.max(r?r.height:0,i?i.height:0),l=vf();l.width=s,l.height=a;const u=l.getContext("2d",{willReadFrequently:!0});u.fillStyle="#00ffff",u.fillRect(0,0,s,a);const c=u.getImageData(0,0,s,a);if(r){u.drawImage(r,0,0,s,a);const h=o(e),m=u.getImageData(0,0,s,a).data;for(let v=2;v<m.length;v+=4)c.data[v]=h(m[v]/256)*256}if(i){u.drawImage(i,0,0,s,a);const h=o(t),m=u.getImageData(0,0,s,a).data;for(let v=1;v<m.length;v+=4)c.data[v]=h(m[v]/256)*256}u.putImageData(c,0,0);const f=(e||t).clone();return f.source=new av(l),f.colorSpace=lv,f.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),f}async decompressTextureAsync(e,t=1/0){if(this.textureUtils===null)throw new Error("THREE.GLTFExporter: setTextureUtils() must be called to process compressed textures.");return await this.textureUtils.decompress(e,t)}processBuffer(e){const t=this.json,o=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),o.push(e),0}processBufferView(e,t,o,r,i){const s=this.json;s.bufferViews||(s.bufferViews=[]);let a;switch(t){case qe.BYTE:case qe.UNSIGNED_BYTE:a=1;break;case qe.SHORT:case qe.UNSIGNED_SHORT:a=2;break;default:a=4}let l=e.itemSize*a;i===qe.ARRAY_BUFFER&&(l=Math.ceil(l/4)*4);const u=Ih(r*l),c=new DataView(new ArrayBuffer(u));let d=0;for(let m=o;m<o+r;m++){for(let v=0;v<e.itemSize;v++){let g;e.itemSize>4?g=e.array[m*e.itemSize+v]:(v===0?g=e.getX(m):v===1?g=e.getY(m):v===2?g=e.getZ(m):v===3&&(g=e.getW(m)),e.normalized===!0&&(g=So.normalize(g,e.array))),t===qe.FLOAT?c.setFloat32(d,g,!0):t===qe.INT?c.setInt32(d,g,!0):t===qe.UNSIGNED_INT?c.setUint32(d,g,!0):t===qe.SHORT?c.setInt16(d,g,!0):t===qe.UNSIGNED_SHORT?c.setUint16(d,g,!0):t===qe.BYTE?c.setInt8(d,g):t===qe.UNSIGNED_BYTE&&c.setUint8(d,g),d+=a}d%l!==0&&(d+=l-d%l)}const f={buffer:this.processBuffer(c.buffer),byteOffset:this.byteOffset,byteLength:u};return i!==void 0&&(f.target=i),i===qe.ARRAY_BUFFER&&(f.byteStride=l),this.byteOffset+=u,s.bufferViews.push(f),{id:s.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,o=t.json;return o.bufferViews||(o.bufferViews=[]),new Promise(function(r){const i=new FileReader;i.readAsArrayBuffer(e),i.onloadend=function(){const s=_l(i.result),a={buffer:t.processBuffer(s),byteOffset:t.byteOffset,byteLength:s.byteLength};t.byteOffset+=s.byteLength,r(o.bufferViews.push(a)-1)}})}processAccessor(e,t,o,r){const i=this.json,s={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=qe.FLOAT;else if(e.array.constructor===Int32Array)a=qe.INT;else if(e.array.constructor===Uint32Array)a=qe.UNSIGNED_INT;else if(e.array.constructor===Int16Array)a=qe.SHORT;else if(e.array.constructor===Uint16Array)a=qe.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)a=qe.BYTE;else if(e.array.constructor===Uint8Array)a=qe.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(o===void 0&&(o=0),(r===void 0||r===1/0)&&(r=e.count),r===0)return null;const l=cM(e,o,r);let u;t!==void 0&&(u=e===t.index?qe.ELEMENT_ARRAY_BUFFER:qe.ARRAY_BUFFER);const c=this.processBufferView(e,a,o,r,u),d={bufferView:c.id,byteOffset:c.byteOffset,componentType:a,count:r,max:l.max,min:l.min,type:s[e.itemSize]};return e.normalized===!0&&(d.normalized=!0),i.accessors||(i.accessors=[]),i.accessors.push(d)-1}processImage(e,t,o,r="image/png"){if(e!==null){const i=this,s=i.cache,a=i.json,l=i.options,u=i.pending;s.images.has(e)||s.images.set(e,{});const c=s.images.get(e),d=r+":flipY/"+o.toString();if(c[d]!==void 0)return c[d];a.images||(a.images=[]);const f={mimeType:r},h=vf();h.width=Math.min(e.width,l.maxTextureSize),h.height=Math.min(e.height,l.maxTextureSize);const m=h.getContext("2d",{willReadFrequently:!0});if(o===!0&&(m.translate(0,h.height),m.scale(1,-1)),e.data!==void 0){t!==Zo&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const g=new Uint8ClampedArray(e.height*e.width*4);for(let y=0;y<g.length;y+=4)g[y+0]=e.data[y+0],g[y+1]=e.data[y+1],g[y+2]=e.data[y+2],g[y+3]=e.data[y+3];m.putImageData(new ImageData(g,e.width,e.height),0,0)}else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)m.drawImage(e,0,0,h.width,h.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");l.binary===!0?u.push(dM(h,r).then(g=>i.processBufferViewImage(g)).then(g=>{f.bufferView=g})):f.uri=uv.getDataURL(h,r);const v=a.images.push(f)-1;return c[d]=v,v}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const o={magFilter:ln[e.magFilter],minFilter:ln[e.minFilter],wrapS:ln[e.wrapS],wrapT:ln[e.wrapT]};return t.samplers.push(o)-1}async processTextureAsync(e){const o=this.options,r=this.cache,i=this.json;if(r.textures.has(e))return r.textures.get(e);i.textures||(i.textures=[]),e instanceof $a&&(e=await this.decompressTextureAsync(e,o.maxTextureSize));let s=e.userData.mimeType;s==="image/webp"&&(s="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,s)};e.name&&(a.name=e.name),await this._invokeAllAsync(async function(u){u.writeTexture&&await u.writeTexture(e,a)});const l=i.textures.push(a)-1;return r.textures.set(e,l),l}async processMaterialAsync(e){const t=this.cache,o=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;o.materials||(o.materials=[]);const r={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const i=e.color.toArray().concat([e.opacity]);if(Zn(i,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=i),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=0,r.pbrMetallicRoughness.roughnessFactor=1),e.metalnessMap||e.roughnessMap){const a=await this.buildMetalRoughTextureAsync(e.metalnessMap,e.roughnessMap),l={index:await this.processTextureAsync(a),texCoord:a.channel};this.applyTextureTransform(l,a),r.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const a={index:await this.processTextureAsync(e.map),texCoord:e.map.channel};this.applyTextureTransform(a,e.map),r.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive;if(Math.max(a.r,a.g,a.b)>0&&(r.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const u={index:await this.processTextureAsync(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(u,e.emissiveMap),r.emissiveTexture=u}}if(e.normalMap){const a={index:await this.processTextureAsync(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),r.normalTexture=a}if(e.aoMap){const a={index:await this.processTextureAsync(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),r.occlusionTexture=a}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),e.side===Is&&(r.doubleSided=!0),e.name!==""&&(r.name=e.name),this.serializeUserData(e,r),await this._invokeAllAsync(async function(a){a.writeMaterialAsync&&await a.writeMaterialAsync(e,r)});const s=o.materials.push(r)-1;return t.materials.set(e,s),s}async processMeshAsync(e){const t=this.cache,o=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(let x=0,C=e.material.length;x<C;x++)r.push(e.material[x].uuid);else r.push(e.material.uuid);const i=r.join(":");if(t.meshes.has(i))return t.meshes.get(i);const s=e.geometry;let a;e.isLineSegments?a=qe.LINES:e.isLineLoop?a=qe.LINE_LOOP:e.isLine?a=qe.LINE_STRIP:e.isPoints?a=qe.POINTS:a=e.material.wireframe?qe.LINES:qe.TRIANGLES;const l={},u={},c=[],d=[],f={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},h=s.getAttribute("normal");h!==void 0&&!this.isNormalizedNormalAttribute(h)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),s.setAttribute("normal",this.createNormalizedNormalAttribute(h)));let m=null;for(let x in s.attributes){if(x.slice(0,5)==="morph")continue;const C=s.attributes[x];if(x=f[x]||x.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(x)||(x="_"+x),t.attributes.has(this.getUID(C))){u[x]=t.attributes.get(this.getUID(C));continue}m=null;const P=C.array;x==="JOINTS_0"&&!(P instanceof Uint16Array)&&!(P instanceof Uint8Array)?(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),m=Es.Utils.toTypedBufferAttribute(C,Uint16Array)):(P instanceof Uint32Array||P instanceof Int32Array)&&!x.startsWith("_")&&(console.warn(`GLTFExporter: Attribute "${x}" converted to type FLOAT.`),m=Es.Utils.toTypedBufferAttribute(C,Float32Array));const R=this.processAccessor(m||C,s);R!==null&&(x.startsWith("_")||this.detectMeshQuantization(x,C),u[x]=R,t.attributes.set(this.getUID(C),R))}if(h!==void 0&&s.setAttribute("normal",h),Object.keys(u).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const x=[],C=[],k={};if(e.morphTargetDictionary!==void 0)for(const P in e.morphTargetDictionary)k[e.morphTargetDictionary[P]]=P;for(let P=0;P<e.morphTargetInfluences.length;++P){const R={};let M=!1;for(const A in s.morphAttributes){if(A!=="position"&&A!=="normal"){M||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),M=!0);continue}const O=s.morphAttributes[A][P],D=A.toUpperCase(),V=s.attributes[A];if(t.attributes.has(this.getUID(O,!0))){R[D]=t.attributes.get(this.getUID(O,!0));continue}const $=O.clone();if(!s.morphTargetsRelative)for(let Y=0,W=O.count;Y<W;Y++)for(let G=0;G<O.itemSize;G++)G===0&&$.setX(Y,O.getX(Y)-V.getX(Y)),G===1&&$.setY(Y,O.getY(Y)-V.getY(Y)),G===2&&$.setZ(Y,O.getZ(Y)-V.getZ(Y)),G===3&&$.setW(Y,O.getW(Y)-V.getW(Y));R[D]=this.processAccessor($,s),t.attributes.set(this.getUID(V,!0),R[D])}d.push(R),x.push(e.morphTargetInfluences[P]),e.morphTargetDictionary!==void 0&&C.push(k[P])}l.weights=x,C.length>0&&(l.extras={},l.extras.targetNames=C)}const v=Array.isArray(e.material);if(v&&s.groups.length===0)return null;let g=!1;if(v&&s.index===null){const x=[];for(let C=0,k=s.attributes.position.count;C<k;C++)x[C]=C;s.setIndex(x),g=!0}const y=v?e.material:[e.material],_=v?s.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let x=0,C=_.length;x<C;x++){const k={mode:a,attributes:u};if(this.serializeUserData(s,k),d.length>0&&(k.targets=d),s.index!==null){let R=this.getUID(s.index);(_[x].start!==void 0||_[x].count!==void 0)&&(R+=":"+_[x].start+":"+_[x].count),t.attributes.has(R)?k.indices=t.attributes.get(R):(k.indices=this.processAccessor(s.index,s,_[x].start,_[x].count),t.attributes.set(R,k.indices)),k.indices===null&&delete k.indices}const P=await this.processMaterialAsync(y[_[x].materialIndex]);P!==null&&(k.material=P),c.push(k)}g===!0&&s.setIndex(null),l.primitives=c,o.meshes||(o.meshes=[]),await this._invokeAllAsync(function(x){x.writeMesh&&x.writeMesh(e,l)});const b=o.meshes.push(l)-1;return t.meshes.set(i,b),b}detectMeshQuantization(e,t){if(this.extensionsUsed[yl])return;let o;switch(t.array.constructor){case Int8Array:o="byte";break;case Uint8Array:o="unsigned byte";break;case Int16Array:o="short";break;case Uint16Array:o="unsigned short";break;default:return}t.normalized&&(o+=" normalized");const r=e.split("_",1)[0];ff[r]&&ff[r].includes(o)&&(this.extensionsUsed[yl]=!0,this.extensionsRequired[yl]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const o=e.isOrthographicCamera,r={type:o?"orthographic":"perspective"};return o?r.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:So.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(r.name=e.type),t.cameras.push(r)-1}processAnimation(e,t){const o=this.json,r=this.nodeMap;o.animations||(o.animations=[]),e=Es.Utils.mergeMorphTargetTracks(e.clone(),t);const i=e.tracks,s=[],a=[];for(let u=0;u<i.length;++u){const c=i[u],d=zi.parseTrackName(c.name);let f=zi.findNode(t,d.nodeName);const h=pf[d.propertyName];if(d.objectName==="bones"&&(f.isSkinnedMesh===!0?f=f.skeleton.getBoneByName(d.objectIndex):f=void 0),!f||!h){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',c.name);continue}const m=1;let v=c.values.length/c.times.length;h===pf.morphTargetInfluences&&(v/=f.morphTargetInfluences.length);let g;c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(g="CUBICSPLINE",v/=3):c.getInterpolation()===cv?g="STEP":g="LINEAR",a.push({input:this.processAccessor(new un(c.times,m)),output:this.processAccessor(new un(c.values,v)),interpolation:g}),s.push({sampler:a.length-1,target:{node:r.get(f),path:h}})}const l={name:e.name||"clip_"+o.animations.length,samplers:a,channels:s};return this.serializeUserData(e,l),o.animations.push(l),o.animations.length-1}processSkin(e){const t=this.json,o=this.nodeMap,r=t.nodes[o.get(e)],i=e.skeleton;if(i===void 0)return null;const s=e.skeleton.bones[0];if(s===void 0)return null;const a=[],l=new Float32Array(i.bones.length*16),u=new Ht;for(let d=0;d<i.bones.length;++d)a.push(o.get(i.bones[d])),u.copy(i.boneInverses[d]),u.multiply(e.bindMatrix).toArray(l,d*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new un(l,16)),joints:a,skeleton:o.get(s)}),r.skin=t.skins.length-1}async processNodeAsync(e){const t=this.json,o=this.options,r=this.nodeMap;if(t.nodes||(t.nodes=[]),e.pivot!==null)return await this._processNodeWithPivotAsync(e);const i={};if(o.trs){const a=e.quaternion.toArray(),l=e.position.toArray(),u=e.scale.toArray();Zn(a,[0,0,0,1])||(i.rotation=a),Zn(l,[0,0,0])||(i.translation=l),Zn(u,[1,1,1])||(i.scale=u)}else e.matrixAutoUpdate&&e.updateMatrix(),uM(e.matrix)===!1&&(i.matrix=e.matrix.elements);if(e.name!==""&&(i.name=String(e.name)),this.serializeUserData(e,i),e.isMesh||e.isLine||e.isPoints){const a=await this.processMeshAsync(e);a!==null&&(i.mesh=a)}else e.isCamera&&(i.camera=this.processCamera(e));e.isSkinnedMesh&&this.skins.push(e);const s=t.nodes.push(i)-1;if(r.set(e,s),e.children.length>0){const a=[];for(let l=0,u=e.children.length;l<u;l++){const c=e.children[l];if(c.visible||o.onlyVisible===!1){const d=await this.processNodeAsync(c);d!==null&&a.push(d)}}a.length>0&&(i.children=a)}return await this._invokeAllAsync(function(a){a.writeNode&&a.writeNode(e,i)}),s}async _processNodeWithPivotAsync(e){const t=this.json,o=this.options,r=this.nodeMap,i=e.pivot,s={},a=e.quaternion.toArray(),l=[e.position.x+i.x,e.position.y+i.y,e.position.z+i.z],u=e.scale.toArray();Zn(a,[0,0,0,1])||(s.rotation=a),Zn(l,[0,0,0])||(s.translation=l),Zn(u,[1,1,1])||(s.scale=u),s.extras={pivot:i.toArray()},e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s);const c=t.nodes.push(s)-1;r.set(e,c);const d={},f=[-i.x,-i.y,-i.z];if(Zn(f,[0,0,0])||(d.translation=f),e.isMesh||e.isLine||e.isPoints){const v=await this.processMeshAsync(e);v!==null&&(d.mesh=v)}else e.isCamera&&(d.camera=this.processCamera(e));e.isSkinnedMesh&&this.skins.push(e);const m=[t.nodes.push(d)-1];if(e.children.length>0){const v=[];for(let g=0,y=e.children.length;g<y;g++){const _=e.children[g];if(_.visible||o.onlyVisible===!1){const b=await this.processNodeAsync(_);b!==null&&v.push(b)}}v.length>0&&(d.children=v)}return s.children=m,await this._invokeAllAsync(function(v){v.writeNode&&v.writeNode(e,s)}),c}async processSceneAsync(e){const t=this.json,o=this.options;t.scenes||(t.scenes=[],t.scene=0);const r={};e.name!==""&&(r.name=e.name),t.scenes.push(r);const i=[];for(let s=0,a=e.children.length;s<a;s++){const l=e.children[s];if(l.visible||o.onlyVisible===!1){const u=await this.processNodeAsync(l);u!==null&&i.push(u)}}i.length>0&&(r.nodes=i),this.serializeUserData(e,r)}async processObjectsAsync(e){const t=new El;t.name="AuxScene";for(let o=0;o<e.length;o++)t.children.push(e[o]);await this.processSceneAsync(t)}async processInputAsync(e){const t=this.options;e=e instanceof Array?e:[e],await this._invokeAllAsync(function(r){r.beforeParse&&r.beforeParse(e)});const o=[];for(let r=0;r<e.length;r++)e[r]instanceof El?await this.processSceneAsync(e[r]):o.push(e[r]);o.length>0&&await this.processObjectsAsync(o);for(let r=0;r<this.skins.length;++r)this.processSkin(this.skins[r]);for(let r=0;r<t.animations.length;++r)this.processAnimation(t.animations[r],e[0]);await this._invokeAllAsync(function(r){r.afterParse&&r.afterParse(e)})}async _invokeAllAsync(e){for(let t=0,o=this.plugins.length;t<o;t++)await e(this.plugins[t])}}class pM{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const o=this.writer,r=o.json,i=o.extensionsUsed,s={};e.name&&(s.name=e.name),s.color=e.color.toArray(),s.intensity=e.intensity,e.isDirectionalLight?s.type="directional":e.isPointLight?(s.type="point",e.distance>0&&(s.range=e.distance)):e.isSpotLight&&(s.type="spot",e.distance>0&&(s.range=e.distance),s.spot={},s.spot.innerConeAngle=(1-e.penumbra)*e.angle,s.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),i[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},i[this.name]=!0);const a=r.extensions[this.name].lights;a.push(s),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class hM{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}async writeMaterialAsync(e,t){if(!e.isMeshBasicMaterial)return;const r=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},r[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class mM{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const o=this.writer,r=o.extensionsUsed,i={};if(i.clearcoatFactor=e.clearcoat,e.clearcoatMap){const s={index:await o.processTextureAsync(e.clearcoatMap),texCoord:e.clearcoatMap.channel};o.applyTextureTransform(s,e.clearcoatMap),i.clearcoatTexture=s}if(i.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const s={index:await o.processTextureAsync(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};o.applyTextureTransform(s,e.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=s}if(e.clearcoatNormalMap){const s={index:await o.processTextureAsync(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};e.clearcoatNormalScale.x!==1&&(s.scale=e.clearcoatNormalScale.x),o.applyTextureTransform(s,e.clearcoatNormalMap),i.clearcoatNormalTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class vM{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.dispersion===0)return;const r=this.writer.extensionsUsed,i={};i.dispersion=e.dispersion,t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class gM{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const o=this.writer,r=o.extensionsUsed,i={};if(i.iridescenceFactor=e.iridescence,e.iridescenceMap){const s={index:await o.processTextureAsync(e.iridescenceMap),texCoord:e.iridescenceMap.channel};o.applyTextureTransform(s,e.iridescenceMap),i.iridescenceTexture=s}if(i.iridescenceIor=e.iridescenceIOR,i.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],i.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const s={index:await o.processTextureAsync(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};o.applyTextureTransform(s,e.iridescenceThicknessMap),i.iridescenceThicknessTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class yM{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const o=this.writer,r=o.extensionsUsed,i={};if(i.transmissionFactor=e.transmission,e.transmissionMap){const s={index:await o.processTextureAsync(e.transmissionMap),texCoord:e.transmissionMap.channel};o.applyTextureTransform(s,e.transmissionMap),i.transmissionTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class _M{constructor(e){this.writer=e,this.name="KHR_materials_volume"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const o=this.writer,r=o.extensionsUsed,i={};if(i.thicknessFactor=e.thickness,e.thicknessMap){const s={index:await o.processTextureAsync(e.thicknessMap),texCoord:e.thicknessMap.channel};o.applyTextureTransform(s,e.thicknessMap),i.thicknessTexture=s}e.attenuationDistance!==1/0&&(i.attenuationDistance=e.attenuationDistance),i.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class bM{constructor(e){this.writer=e,this.name="KHR_materials_ior"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const r=this.writer.extensionsUsed,i={};i.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class wM{constructor(e){this.writer=e,this.name="KHR_materials_specular"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(oM)&&!e.specularIntensityMap&&!e.specularColorMap)return;const o=this.writer,r=o.extensionsUsed,i={};if(e.specularIntensityMap){const s={index:await o.processTextureAsync(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};o.applyTextureTransform(s,e.specularIntensityMap),i.specularTexture=s}if(e.specularColorMap){const s={index:await o.processTextureAsync(e.specularColorMap),texCoord:e.specularColorMap.channel};o.applyTextureTransform(s,e.specularColorMap),i.specularColorTexture=s}i.specularFactor=e.specularIntensity,i.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class xM{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const o=this.writer,r=o.extensionsUsed,i={};if(e.sheenRoughnessMap){const s={index:await o.processTextureAsync(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};o.applyTextureTransform(s,e.sheenRoughnessMap),i.sheenRoughnessTexture=s}if(e.sheenColorMap){const s={index:await o.processTextureAsync(e.sheenColorMap),texCoord:e.sheenColorMap.channel};o.applyTextureTransform(s,e.sheenColorMap),i.sheenColorTexture=s}i.sheenRoughnessFactor=e.sheenRoughness,i.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class SM{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const o=this.writer,r=o.extensionsUsed,i={};if(e.anisotropyMap){const s={index:await o.processTextureAsync(e.anisotropyMap)};o.applyTextureTransform(s,e.anisotropyMap),i.anisotropyTexture=s}i.anisotropyStrength=e.anisotropy,i.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class CM{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}async writeMaterialAsync(e,t){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const r=this.writer.extensionsUsed,i={};i.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class TM{constructor(e){this.writer=e,this.name="EXT_materials_bump"}async writeMaterialAsync(e,t){if(!e.isMeshStandardMaterial||e.bumpScale===1&&!e.bumpMap)return;const o=this.writer,r=o.extensionsUsed,i={};if(e.bumpMap){const s={index:await o.processTextureAsync(e.bumpMap),texCoord:e.bumpMap.channel};o.applyTextureTransform(s,e.bumpMap),i.bumpTexture=s}i.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class EM{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;const o=this.writer,r=e,i=new Float32Array(r.count*3),s=new Float32Array(r.count*4),a=new Float32Array(r.count*3),l=new Ht,u=new ee,c=new Dt,d=new ee;for(let h=0;h<r.count;h++)r.getMatrixAt(h,l),l.decompose(u,c,d),u.toArray(i,h*3),c.toArray(s,h*4),d.toArray(a,h*3);const f={TRANSLATION:o.processAccessor(new un(i,3)),ROTATION:o.processAccessor(new un(s,4)),SCALE:o.processAccessor(new un(a,3))};r.instanceColor&&(f._COLOR_0=o.processAccessor(r.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:f},o.extensionsUsed[this.name]=!0,o.extensionsRequired[this.name]=!0}}Es.Utils={insertKeyframe:function(n,e){const o=n.getValueSize(),r=new n.TimeBufferType(n.times.length+1),i=new n.ValueBufferType(n.values.length+o),s=n.createInterpolant(new n.ValueBufferType(o));let a;if(n.times.length===0){r[0]=e;for(let l=0;l<o;l++)i[l]=0;a=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;r[0]=e,r.set(n.times,1),i.set(s.evaluate(e),0),i.set(n.values,o),a=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;r[r.length-1]=e,r.set(n.times,0),i.set(n.values,0),i.set(s.evaluate(e),n.values.length),a=r.length-1}else for(let l=0;l<n.times.length;l++){if(Math.abs(n.times[l]-e)<.001)return l;if(n.times[l]<e&&n.times[l+1]>e){r.set(n.times.slice(0,l+1),0),r[l+1]=e,r.set(n.times.slice(l+1),l+2),i.set(n.values.slice(0,(l+1)*o),0),i.set(s.evaluate(e),(l+1)*o),i.set(n.values.slice((l+1)*o),(l+2)*o),a=l+1;break}}return n.times=r,n.values=i,a},mergeMorphTargetTracks:function(n,e){const t=[],o={},r=n.tracks;for(let i=0;i<r.length;++i){let s=r[i];const a=zi.parseTrackName(s.name),l=zi.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){t.push(s);continue}if(s.createInterpolant!==s.InterpolantFactoryMethodDiscrete&&s.createInterpolant!==s.InterpolantFactoryMethodLinear){if(s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),s=s.clone(),s.setInterpolation(yv)}const u=l.morphTargetInfluences.length,c=l.morphTargetDictionary[a.propertyIndex];if(c===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let d;if(o[l.uuid]===void 0){d=s.clone();const h=new d.ValueBufferType(u*d.times.length);for(let m=0;m<d.times.length;m++)h[m*u+c]=d.values[m];d.name=(a.nodeName||"")+".morphTargetInfluences",d.values=h,o[l.uuid]=d,t.push(d);continue}const f=s.createInterpolant(new s.ValueBufferType(1));d=o[l.uuid];for(let h=0;h<d.times.length;h++)d.values[h*u+c]=f.evaluate(d.times[h]);for(let h=0;h<s.times.length;h++){const m=this.insertKeyframe(d,s.times[h]);d.values[m*u+c]=s.values[h]}}return n.tracks=t,n},toTypedBufferAttribute:function(n,e){const t=new un(new e(n.count*n.itemSize),n.itemSize,!1);if(!n.normalized&&!n.isInterleavedBufferAttribute)return t.array.set(n.array),t;for(let o=0,r=n.count;o<r;o++)for(let i=0;i<n.itemSize;i++)t.setComponent(o,i,n.getComponent(o,i));return t}};class ea extends _v{constructor(e,t={}){const o=t.font;if(o===void 0)super();else{const r=o.generateShapes(e,t.size,t.direction);t.depth===void 0&&(t.depth=50),t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}class MM extends Cn{constructor(e,t){const o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],r=new ro;r.setAttribute("position",new Eo(o,3)),r.computeBoundingSphere();const i=new zf({fog:!1});super(r,i),this.light=e,this.color=t,this.type="RectAreaLightHelper";const s=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],a=new ro;a.setAttribute("position",new Eo(s,3)),a.computeBoundingSphere(),this.add(new me(a,new ir({side:Cu,fog:!1})))}updateMatrixWorld(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),this.color!==void 0)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);const e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}this.matrixWorld.extractRotation(this.light.matrixWorld).scale(this.scale).copyPosition(this.light.matrixWorld),this.children[0].matrixWorld.copy(this.matrixWorld)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}class AM extends bv{constructor(e){super(e),this.type=nn,this.outputFormat=Zo}parse(e){const M=Math.pow(2.7182818,2.2);function A(w,I){let q=0;for(let X=0;X<65536;++X)(X==0||w[X>>3]&1<<(X&7))&&(I[q++]=X);const H=q-1;for(;q<65536;)I[q++]=0;return H}function O(w){for(let I=0;I<16384;I++)w[I]={},w[I].len=0,w[I].lit=0,w[I].p=null}const D={l:0,c:0,lc:0};function V(w,I,q,H,X){for(;q<w;)I=I<<8|Rc(H,X),q+=8;q-=w,D.l=I>>q&(1<<w)-1,D.c=I,D.lc=q}const $=new Array(59);function Y(w){for(let q=0;q<=58;++q)$[q]=0;for(let q=0;q<65537;++q)$[w[q]]+=1;let I=0;for(let q=58;q>0;--q){const H=I+$[q]>>1;$[q]=I,I=H}for(let q=0;q<65537;++q){const H=w[q];H>0&&(w[q]=H|$[H]++<<6)}}function W(w,I,q,H,X,ie){const z=I;let ae=0,oe=0;for(;H<=X;H++){if(z.value-I.value>q)return!1;V(6,ae,oe,w,z);const te=D.l;if(ae=D.c,oe=D.lc,ie[H]=te,te==63){if(z.value-I.value>q)throw new Error("Something wrong with hufUnpackEncTable");V(8,ae,oe,w,z);let se=D.l+6;if(ae=D.c,oe=D.lc,H+se>X+1)throw new Error("Something wrong with hufUnpackEncTable");for(;se--;)ie[H++]=0;H--}else if(te>=59){let se=te-59+2;if(H+se>X+1)throw new Error("Something wrong with hufUnpackEncTable");for(;se--;)ie[H++]=0;H--}}Y(ie)}function G(w){return w&63}function Q(w){return w>>6}function ge(w,I,q,H){for(;I<=q;I++){const X=Q(w[I]),ie=G(w[I]);if(X>>ie)throw new Error("Invalid table entry");if(ie>14){const z=H[X>>ie-14];if(z.len)throw new Error("Invalid table entry");if(z.lit++,z.p){const ae=z.p;z.p=new Array(z.lit);for(let oe=0;oe<z.lit-1;++oe)z.p[oe]=ae[oe]}else z.p=new Array(1);z.p[z.lit-1]=I}else if(ie){let z=0;for(let ae=1<<14-ie;ae>0;ae--){const oe=H[(X<<14-ie)+z];if(oe.len||oe.p)throw new Error("Invalid table entry");oe.len=ie,oe.lit=I,z++}}}return!0}const ce={c:0,lc:0};function re(w,I,q,H){w=w<<8|Rc(q,H),I+=8,ce.c=w,ce.lc=I}const pe={c:0,lc:0};function Ee(w,I,q,H,X,ie,z,ae,oe){if(w==I){H<8&&(re(q,H,X,ie),q=ce.c,H=ce.lc),H-=8;let te=q>>H;if(te=new Uint8Array([te])[0],ae.value+te>oe)return!1;const se=z[ae.value-1];for(;te-- >0;)z[ae.value++]=se}else if(ae.value<oe)z[ae.value++]=w;else return!1;pe.c=q,pe.lc=H}function Pe(w){return w&65535}function Ae(w){const I=Pe(w);return I>32767?I-65536:I}const be={a:0,b:0};function Ue(w,I){const q=Ae(w),X=Ae(I),ie=q+(X&1)+(X>>1),z=ie,ae=ie-X;be.a=z,be.b=ae}function lt(w,I){const q=Pe(w),H=Pe(I),X=q-(H>>1)&65535,ie=H+X-32768&65535;be.a=ie,be.b=X}function Ft(w,I,q,H,X,ie,z){const ae=z<16384,oe=q>X?X:q;let te=1,se,fe;for(;te<=oe;)te<<=1;for(te>>=1,se=te,te>>=1;te>=1;){fe=0;const le=fe+ie*(X-se),ve=ie*te,Se=ie*se,he=H*te,_e=H*se;let Me,$e,Xe,gt;for(;fe<=le;fe+=Se){let Ke=fe;const Oe=fe+H*(q-se);for(;Ke<=Oe;Ke+=_e){const ut=Ke+he,xt=Ke+ve,tt=xt+he;ae?(Ue(w[Ke+I],w[xt+I]),Me=be.a,Xe=be.b,Ue(w[ut+I],w[tt+I]),$e=be.a,gt=be.b,Ue(Me,$e),w[Ke+I]=be.a,w[ut+I]=be.b,Ue(Xe,gt),w[xt+I]=be.a,w[tt+I]=be.b):(lt(w[Ke+I],w[xt+I]),Me=be.a,Xe=be.b,lt(w[ut+I],w[tt+I]),$e=be.a,gt=be.b,lt(Me,$e),w[Ke+I]=be.a,w[ut+I]=be.b,lt(Xe,gt),w[xt+I]=be.a,w[tt+I]=be.b)}if(q&te){const ut=Ke+ve;ae?Ue(w[Ke+I],w[ut+I]):lt(w[Ke+I],w[ut+I]),Me=be.a,w[ut+I]=be.b,w[Ke+I]=Me}}if(X&te){let Ke=fe;const Oe=fe+H*(q-se);for(;Ke<=Oe;Ke+=_e){const ut=Ke+he;ae?Ue(w[Ke+I],w[ut+I]):lt(w[Ke+I],w[ut+I]),Me=be.a,w[ut+I]=be.b,w[Ke+I]=Me}}se=te,te>>=1}return fe}function dt(w,I,q,H,X,ie,z,ae,oe){let te=0,se=0;const fe=z,le=Math.trunc(H.value+(X+7)/8);for(;H.value<le;)for(re(te,se,q,H),te=ce.c,se=ce.lc;se>=14;){const Se=te>>se-14&16383,he=I[Se];if(he.len)se-=he.len,Ee(he.lit,ie,te,se,q,H,ae,oe,fe),te=pe.c,se=pe.lc;else{if(!he.p)throw new Error("hufDecode issues");let _e;for(_e=0;_e<he.lit;_e++){const Me=G(w[he.p[_e]]);for(;se<Me&&H.value<le;)re(te,se,q,H),te=ce.c,se=ce.lc;if(se>=Me&&Q(w[he.p[_e]])==(te>>se-Me&(1<<Me)-1)){se-=Me,Ee(he.p[_e],ie,te,se,q,H,ae,oe,fe),te=pe.c,se=pe.lc;break}}if(_e==he.lit)throw new Error("hufDecode issues")}}const ve=8-X&7;for(te>>=ve,se-=ve;se>0;){const Se=I[te<<14-se&16383];if(Se.len)se-=Se.len,Ee(Se.lit,ie,te,se,q,H,ae,oe,fe),te=pe.c,se=pe.lc;else throw new Error("hufDecode issues")}return!0}function Yt(w,I,q,H,X,ie){const z={value:0},ae=q.value,oe=vn(I,q),te=vn(I,q);q.value+=4;const se=vn(I,q);if(q.value+=4,oe<0||oe>=65537||te<0||te>=65537)throw new Error("Something wrong with HUF_ENCSIZE");const fe=new Array(65537),le=new Array(16384);O(le);const ve=H-(q.value-ae);if(W(w,q,ve,oe,te,fe),se>8*(H-(q.value-ae)))throw new Error("Something wrong with hufUncompress");ge(fe,oe,te,le),dt(fe,le,w,q,se,te,ie,X,z)}function Nt(w,I,q){for(let H=0;H<q;++H)I[H]=w[I[H]]}function hn(w){for(let I=1;I<w.length;I++){const q=w[I-1]+w[I]-128;w[I]=q}}function Vo(w,I){let q=0,H=Math.floor((w.length+1)/2),X=0;const ie=w.length-1;for(;!(X>ie||(I[X++]=w[q++],X>ie));)I[X++]=w[H++]}function Fo(w){let I=w.byteLength;const q=new Array;let H=0;const X=new DataView(w);for(;I>0;){const ie=X.getInt8(H++);if(ie<0){const z=-ie;I-=z+1;for(let ae=0;ae<z;ae++)q.push(X.getUint8(H++))}else{const z=ie;I-=2;const ae=X.getUint8(H++);for(let oe=0;oe<z+1;oe++)q.push(ae)}}return q}function hm(w,I,q,H,X,ie){let z=new DataView(ie.buffer);const ae=q[w.idx[0]].width,oe=q[w.idx[0]].height,te=3,se=Math.floor(ae/8),fe=Math.ceil(ae/8),le=Math.ceil(oe/8),ve=ae-(fe-1)*8,Se=oe-(le-1)*8,he={value:0},_e=new Array(te),Me=new Array(te),$e=new Array(te),Xe=new Array(te),gt=new Array(te);for(let Oe=0;Oe<te;++Oe)gt[Oe]=I[w.idx[Oe]],_e[Oe]=Oe<1?0:_e[Oe-1]+fe*le,Me[Oe]=new Float32Array(64),$e[Oe]=new Uint16Array(64),Xe[Oe]=new Uint16Array(fe*64);for(let Oe=0;Oe<le;++Oe){let ut=8;Oe==le-1&&(ut=Se);let xt=8;for(let Fe=0;Fe<fe;++Fe){Fe==fe-1&&(xt=ve);for(let Je=0;Je<te;++Je)$e[Je].fill(0),$e[Je][0]=X[_e[Je]++],Ec(he,H,$e[Je]),Mc($e[Je],Me[Je]),Ac(Me[Je]);vm(Me);for(let Je=0;Je<te;++Je)Pc(Me[Je],Xe[Je],Fe*64)}let tt=0;for(let Fe=0;Fe<te;++Fe){const Je=q[w.idx[Fe]].type;for(let Kn=8*Oe;Kn<8*Oe+ut;++Kn){tt=gt[Fe][Kn];for(let rs=0;rs<se;++rs){const On=rs*64+(Kn&7)*8;z.setUint16(tt+0*Je,Xe[Fe][On+0],!0),z.setUint16(tt+2*Je,Xe[Fe][On+1],!0),z.setUint16(tt+4*Je,Xe[Fe][On+2],!0),z.setUint16(tt+6*Je,Xe[Fe][On+3],!0),z.setUint16(tt+8*Je,Xe[Fe][On+4],!0),z.setUint16(tt+10*Je,Xe[Fe][On+5],!0),z.setUint16(tt+12*Je,Xe[Fe][On+6],!0),z.setUint16(tt+14*Je,Xe[Fe][On+7],!0),tt+=16*Je}}if(se!=fe)for(let Kn=8*Oe;Kn<8*Oe+ut;++Kn){const rs=gt[Fe][Kn]+8*se*2*Je,On=se*64+(Kn&7)*8;for(let Xs=0;Xs<xt;++Xs)z.setUint16(rs+Xs*2*Je,Xe[Fe][On+Xs],!0)}}}const Ke=new Uint16Array(ae);z=new DataView(ie.buffer);for(let Oe=0;Oe<te;++Oe){q[w.idx[Oe]].decoded=!0;const ut=q[w.idx[Oe]].type;if(q[Oe].type==2)for(let xt=0;xt<oe;++xt){const tt=gt[Oe][xt];for(let Fe=0;Fe<ae;++Fe)Ke[Fe]=z.getUint16(tt+Fe*2*ut,!0);for(let Fe=0;Fe<ae;++Fe)z.setFloat32(tt+Fe*2*ut,ye(Ke[Fe]),!0)}}}function mm(w,I,q,H,X,ie){const z=new DataView(ie.buffer),ae=q[w],oe=ae.width,te=ae.height,se=Math.ceil(oe/8),fe=Math.ceil(te/8),le=Math.floor(oe/8),ve=oe-(se-1)*8,Se=te-(fe-1)*8,he={value:0};let _e=0;const Me=new Float32Array(64),$e=new Uint16Array(64),Xe=new Uint16Array(se*64);for(let gt=0;gt<fe;++gt){let Ke=8;gt==fe-1&&(Ke=Se);for(let Oe=0;Oe<se;++Oe)$e.fill(0),$e[0]=X[_e++],Ec(he,H,$e),Mc($e,Me),Ac(Me),Pc(Me,Xe,Oe*64);for(let Oe=8*gt;Oe<8*gt+Ke;++Oe){let ut=I[w][Oe];for(let xt=0;xt<le;++xt){const tt=xt*64+(Oe&7)*8;for(let Fe=0;Fe<8;++Fe)z.setUint16(ut+Fe*2*ae.type,Xe[tt+Fe],!0);ut+=16*ae.type}if(se!=le){const xt=le*64+(Oe&7)*8;for(let tt=0;tt<ve;++tt)z.setUint16(ut+tt*2*ae.type,Xe[xt+tt],!0)}}}ae.decoded=!0}function Ec(w,I,q){let H,X=1;for(;X<64;)H=I[w.value],H==65280?X=64:H>>8==255?X+=H&255:(q[X]=H,X++),w.value++}function Mc(w,I){I[0]=ye(w[0]),I[1]=ye(w[1]),I[2]=ye(w[5]),I[3]=ye(w[6]),I[4]=ye(w[14]),I[5]=ye(w[15]),I[6]=ye(w[27]),I[7]=ye(w[28]),I[8]=ye(w[2]),I[9]=ye(w[4]),I[10]=ye(w[7]),I[11]=ye(w[13]),I[12]=ye(w[16]),I[13]=ye(w[26]),I[14]=ye(w[29]),I[15]=ye(w[42]),I[16]=ye(w[3]),I[17]=ye(w[8]),I[18]=ye(w[12]),I[19]=ye(w[17]),I[20]=ye(w[25]),I[21]=ye(w[30]),I[22]=ye(w[41]),I[23]=ye(w[43]),I[24]=ye(w[9]),I[25]=ye(w[11]),I[26]=ye(w[18]),I[27]=ye(w[24]),I[28]=ye(w[31]),I[29]=ye(w[40]),I[30]=ye(w[44]),I[31]=ye(w[53]),I[32]=ye(w[10]),I[33]=ye(w[19]),I[34]=ye(w[23]),I[35]=ye(w[32]),I[36]=ye(w[39]),I[37]=ye(w[45]),I[38]=ye(w[52]),I[39]=ye(w[54]),I[40]=ye(w[20]),I[41]=ye(w[22]),I[42]=ye(w[33]),I[43]=ye(w[38]),I[44]=ye(w[46]),I[45]=ye(w[51]),I[46]=ye(w[55]),I[47]=ye(w[60]),I[48]=ye(w[21]),I[49]=ye(w[34]),I[50]=ye(w[37]),I[51]=ye(w[47]),I[52]=ye(w[50]),I[53]=ye(w[56]),I[54]=ye(w[59]),I[55]=ye(w[61]),I[56]=ye(w[35]),I[57]=ye(w[36]),I[58]=ye(w[48]),I[59]=ye(w[49]),I[60]=ye(w[57]),I[61]=ye(w[58]),I[62]=ye(w[62]),I[63]=ye(w[63])}function Ac(w){const I=.5*Math.cos(.7853975),q=.5*Math.cos(3.14159/16),H=.5*Math.cos(3.14159/8),X=.5*Math.cos(3*3.14159/16),ie=.5*Math.cos(5*3.14159/16),z=.5*Math.cos(3*3.14159/8),ae=.5*Math.cos(7*3.14159/16),oe=new Array(4),te=new Array(4),se=new Array(4),fe=new Array(4);for(let le=0;le<8;++le){const ve=le*8;oe[0]=H*w[ve+2],oe[1]=z*w[ve+2],oe[2]=H*w[ve+6],oe[3]=z*w[ve+6],te[0]=q*w[ve+1]+X*w[ve+3]+ie*w[ve+5]+ae*w[ve+7],te[1]=X*w[ve+1]-ae*w[ve+3]-q*w[ve+5]-ie*w[ve+7],te[2]=ie*w[ve+1]-q*w[ve+3]+ae*w[ve+5]+X*w[ve+7],te[3]=ae*w[ve+1]-ie*w[ve+3]+X*w[ve+5]-q*w[ve+7],se[0]=I*(w[ve+0]+w[ve+4]),se[3]=I*(w[ve+0]-w[ve+4]),se[1]=oe[0]+oe[3],se[2]=oe[1]-oe[2],fe[0]=se[0]+se[1],fe[1]=se[3]+se[2],fe[2]=se[3]-se[2],fe[3]=se[0]-se[1],w[ve+0]=fe[0]+te[0],w[ve+1]=fe[1]+te[1],w[ve+2]=fe[2]+te[2],w[ve+3]=fe[3]+te[3],w[ve+4]=fe[3]-te[3],w[ve+5]=fe[2]-te[2],w[ve+6]=fe[1]-te[1],w[ve+7]=fe[0]-te[0]}for(let le=0;le<8;++le)oe[0]=H*w[16+le],oe[1]=z*w[16+le],oe[2]=H*w[48+le],oe[3]=z*w[48+le],te[0]=q*w[8+le]+X*w[24+le]+ie*w[40+le]+ae*w[56+le],te[1]=X*w[8+le]-ae*w[24+le]-q*w[40+le]-ie*w[56+le],te[2]=ie*w[8+le]-q*w[24+le]+ae*w[40+le]+X*w[56+le],te[3]=ae*w[8+le]-ie*w[24+le]+X*w[40+le]-q*w[56+le],se[0]=I*(w[le]+w[32+le]),se[3]=I*(w[le]-w[32+le]),se[1]=oe[0]+oe[3],se[2]=oe[1]-oe[2],fe[0]=se[0]+se[1],fe[1]=se[3]+se[2],fe[2]=se[3]-se[2],fe[3]=se[0]-se[1],w[0+le]=fe[0]+te[0],w[8+le]=fe[1]+te[1],w[16+le]=fe[2]+te[2],w[24+le]=fe[3]+te[3],w[32+le]=fe[3]-te[3],w[40+le]=fe[2]-te[2],w[48+le]=fe[1]-te[1],w[56+le]=fe[0]-te[0]}function vm(w){for(let I=0;I<64;++I){const q=w[0][I],H=w[1][I],X=w[2][I];w[0][I]=q+1.5747*X,w[1][I]=q-.1873*H-.4682*X,w[2][I]=q+1.8556*H}}function Pc(w,I,q){for(let H=0;H<64;++H)I[q+H]=qc.toHalfFloat(gm(w[H]))}function gm(w){return w<=1?Math.sign(w)*Math.pow(Math.abs(w),2.2):Math.sign(w)*Math.pow(M,Math.abs(w)-1)}function Fa(w){return new DataView(w.array.buffer,w.offset.value,w.size)}function ym(w){const I=w.viewer.buffer.slice(w.offset.value,w.offset.value+w.size),q=new Uint8Array(Fo(I)),H=new Uint8Array(q.length);return hn(q),Vo(q,H),new DataView(H.buffer)}function Na(w){const I=w.array.slice(w.offset.value,w.offset.value+w.size),q=Js(I),H=new Uint8Array(q.length);return hn(q),Vo(q,H),new DataView(H.buffer)}function _m(w){const I=w.viewer,q={value:w.offset.value},H=new Uint16Array(w.columns*w.lines*(w.inputChannels.length*w.type)),X=new Uint8Array(8192);let ie=0;const z=new Array(w.inputChannels.length);for(let Se=0,he=w.inputChannels.length;Se<he;Se++)z[Se]={},z[Se].start=ie,z[Se].end=z[Se].start,z[Se].nx=w.columns,z[Se].ny=w.lines,z[Se].size=w.type,ie+=z[Se].nx*z[Se].ny*z[Se].size;const ae=os(I,q),oe=os(I,q);if(oe>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(ae<=oe)for(let Se=0;Se<oe-ae+1;Se++)X[Se+ae]=co(I,q);const te=new Uint16Array(65536),se=A(X,te),fe=vn(I,q);Yt(w.array,I,q,fe,H,ie);for(let Se=0;Se<w.inputChannels.length;++Se){const he=z[Se];for(let _e=0;_e<z[Se].size;++_e)Ft(H,he.start+_e,he.nx,he.size,he.ny,he.nx*he.size,se)}Nt(te,H,ie);let le=0;const ve=new Uint8Array(H.buffer.byteLength);for(let Se=0;Se<w.lines;Se++)for(let he=0;he<w.inputChannels.length;he++){const _e=z[he],Me=_e.nx*_e.size,$e=new Uint8Array(H.buffer,_e.end*2,Me*2);ve.set($e,le),le+=Me*2,_e.end+=Me}return new DataView(ve.buffer)}function bm(w){const I=w.array.slice(w.offset.value,w.offset.value+w.size),q=Js(I),H=w.inputChannels.length*w.lines*w.columns*w.totalBytes,X=new ArrayBuffer(H),ie=new DataView(X);let z=0,ae=0;const oe=new Array(4);for(let te=0;te<w.lines;te++)for(let se=0;se<w.inputChannels.length;se++){let fe=0;switch(w.inputChannels[se].pixelType){case 1:oe[0]=z,oe[1]=oe[0]+w.columns,z=oe[1]+w.columns;for(let ve=0;ve<w.columns;++ve){const Se=q[oe[0]++]<<8|q[oe[1]++];fe+=Se,ie.setUint16(ae,fe,!0),ae+=2}break;case 2:oe[0]=z,oe[1]=oe[0]+w.columns,oe[2]=oe[1]+w.columns,z=oe[2]+w.columns;for(let ve=0;ve<w.columns;++ve){const Se=q[oe[0]++]<<24|q[oe[1]++]<<16|q[oe[2]++]<<8;fe+=Se,ie.setUint32(ae,fe,!0),ae+=4}break}}return ie}function Ic(w){const I=w.viewer,q={value:w.offset.value},H=new Uint8Array(w.columns*w.lines*(w.inputChannels.length*w.type*2)),X={version:rn(I,q),unknownUncompressedSize:rn(I,q),unknownCompressedSize:rn(I,q),acCompressedSize:rn(I,q),dcCompressedSize:rn(I,q),rleCompressedSize:rn(I,q),rleUncompressedSize:rn(I,q),rleRawSize:rn(I,q),totalAcUncompressedCount:rn(I,q),totalDcUncompressedCount:rn(I,q),acCompression:rn(I,q)};if(X.version<2)throw new Error("EXRLoader.parse: "+No.compression+" version "+X.version+" is unsupported");const ie=new Array;let z=os(I,q)-2;for(;z>0;){const he=Ys(I.buffer,q),_e=co(I,q),Me=_e>>2&3,$e=(_e>>4)-1,Xe=new Int8Array([$e])[0],gt=co(I,q);ie.push({name:he,index:Xe,type:gt,compression:Me}),z-=he.length+3}const ae=No.channels,oe=new Array(w.inputChannels.length);for(let he=0;he<w.inputChannels.length;++he){const _e=oe[he]={},Me=ae[he];_e.name=Me.name,_e.compression=0,_e.decoded=!1,_e.type=Me.pixelType,_e.pLinear=Me.pLinear,_e.width=w.columns,_e.height=w.lines}const te={idx:new Array(3)};for(let he=0;he<w.inputChannels.length;++he){const _e=oe[he];for(let Me=0;Me<ie.length;++Me){const $e=ie[Me];_e.name==$e.name&&(_e.compression=$e.compression,$e.index>=0&&(te.idx[$e.index]=he),_e.offset=he)}}let se,fe,le;if(X.acCompressedSize>0)switch(X.acCompression){case 0:se=new Uint16Array(X.totalAcUncompressedCount),Yt(w.array,I,q,X.acCompressedSize,se,X.totalAcUncompressedCount);break;case 1:const he=w.array.slice(q.value,q.value+X.totalAcUncompressedCount),_e=Js(he);se=new Uint16Array(_e.buffer),q.value+=X.totalAcUncompressedCount;break}if(X.dcCompressedSize>0){const he={array:w.array,offset:q,size:X.dcCompressedSize};fe=new Uint16Array(Na(he).buffer),q.value+=X.dcCompressedSize}if(X.rleRawSize>0){const he=w.array.slice(q.value,q.value+X.rleCompressedSize),_e=Js(he);le=Fo(_e.buffer),q.value+=X.rleCompressedSize}let ve=0;const Se=new Array(oe.length);for(let he=0;he<Se.length;++he)Se[he]=new Array;for(let he=0;he<w.lines;++he)for(let _e=0;_e<oe.length;++_e)Se[_e].push(ve),ve+=oe[_e].width*w.type*2;te.idx[0]!==void 0&&oe[te.idx[0]]&&hm(te,Se,oe,se,fe,H);for(let he=0;he<oe.length;++he){const _e=oe[he];if(!_e.decoded)switch(_e.compression){case 2:let Me=0,$e=0;for(let Xe=0;Xe<w.lines;++Xe){let gt=Se[he][Me];for(let Ke=0;Ke<_e.width;++Ke){for(let Oe=0;Oe<2*_e.type;++Oe)H[gt++]=le[$e+Oe*_e.width*_e.height];$e++}Me++}break;case 1:mm(he,Se,oe,se,fe,H);break;default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(H.buffer)}function Ys(w,I){const q=new Uint8Array(w);let H=0;for(;q[I.value+H]!=0;)H+=1;const X=new TextDecoder().decode(q.slice(I.value,I.value+H));return I.value=I.value+H+1,X}function wm(w,I,q){const H=new TextDecoder().decode(new Uint8Array(w).slice(I.value,I.value+q));return I.value=I.value+q,H}function xm(w,I){const q=mn(w,I),H=vn(w,I);return[q,H]}function Sm(w,I){const q=vn(w,I),H=vn(w,I);return[q,H]}function mn(w,I){const q=w.getInt32(I.value,!0);return I.value=I.value+4,q}function vn(w,I){const q=w.getUint32(I.value,!0);return I.value=I.value+4,q}function Rc(w,I){const q=w[I.value];return I.value=I.value+1,q}function co(w,I){const q=w.getUint8(I.value);return I.value=I.value+1,q}const rn=function(w,I){let q;return"getBigInt64"in DataView.prototype?q=Number(w.getBigInt64(I.value,!0)):q=w.getUint32(I.value+4,!0)+Number(w.getUint32(I.value,!0)<<32),I.value+=8,q};function Ot(w,I){const q=w.getFloat32(I.value,!0);return I.value+=4,q}function Cm(w,I){return qc.toHalfFloat(Ot(w,I))}function ye(w){const I=(w&31744)>>10,q=w&1023;return(w>>15?-1:1)*(I?I===31?q?NaN:1/0:Math.pow(2,I-15)*(1+q/1024):6103515625e-14*(q/1024))}function os(w,I){const q=w.getUint16(I.value,!0);return I.value+=2,q}function Tm(w,I){return ye(os(w,I))}function Em(w,I,q,H){const X=q.value,ie=[];for(;q.value<X+H-1;){const z=Ys(I,q),ae=mn(w,q),oe=co(w,q);q.value+=3;const te=mn(w,q),se=mn(w,q);ie.push({name:z,pixelType:ae,pLinear:oe,xSampling:te,ySampling:se})}return q.value+=1,ie}function Mm(w,I){const q=Ot(w,I),H=Ot(w,I),X=Ot(w,I),ie=Ot(w,I),z=Ot(w,I),ae=Ot(w,I),oe=Ot(w,I),te=Ot(w,I);return{redX:q,redY:H,greenX:X,greenY:ie,blueX:z,blueY:ae,whiteX:oe,whiteY:te}}function Am(w,I){const q=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],H=co(w,I);return q[H]}function Pm(w,I){const q=mn(w,I),H=mn(w,I),X=mn(w,I),ie=mn(w,I);return{xMin:q,yMin:H,xMax:X,yMax:ie}}function Im(w,I){const q=["INCREASING_Y","DECREASING_Y","RANDOM_Y"],H=co(w,I);return q[H]}function Rm(w,I){const q=["ENVMAP_LATLONG","ENVMAP_CUBE"],H=co(w,I);return q[H]}function Om(w,I){const q=["ONE_LEVEL","MIPMAP_LEVELS","RIPMAP_LEVELS"],H=["ROUND_DOWN","ROUND_UP"],X=vn(w,I),ie=vn(w,I),z=co(w,I);return{xSize:X,ySize:ie,levelMode:q[z&15],roundingMode:H[z>>4]}}function km(w,I){const q=Ot(w,I),H=Ot(w,I);return[q,H]}function Dm(w,I){const q=Ot(w,I),H=Ot(w,I),X=Ot(w,I);return[q,H,X]}function Bm(w,I,q,H,X){if(H==="string"||H==="stringvector"||H==="iccProfile")return wm(I,q,X);if(H==="chlist")return Em(w,I,q,X);if(H==="chromaticities")return Mm(w,q);if(H==="compression")return Am(w,q);if(H==="box2i")return Pm(w,q);if(H==="envmap")return Rm(w,q);if(H==="tiledesc")return Om(w,q);if(H==="lineOrder")return Im(w,q);if(H==="float")return Ot(w,q);if(H==="v2f")return km(w,q);if(H==="v3f")return Dm(w,q);if(H==="int")return mn(w,q);if(H==="rational")return xm(w,q);if(H==="timecode")return Sm(w,q);if(H==="preview")return q.value+=X,"skipped";q.value+=X}function qm(w,I){const q=Math.log2(w);return I=="ROUND_DOWN"?Math.floor(q):Math.ceil(q)}function Lm(w,I,q){let H=0;switch(w.levelMode){case"ONE_LEVEL":H=1;break;case"MIPMAP_LEVELS":H=qm(Math.max(I,q),w.roundingMode)+1;break;case"RIPMAP_LEVELS":throw new Error("THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.")}return H}function Oc(w,I,q,H){const X=new Array(w);for(let ie=0;ie<w;ie++){const z=1<<ie;let ae=I/z|0;H=="ROUND_UP"&&ae*z<I&&(ae+=1);const oe=Math.max(ae,1);X[ie]=(oe+q-1)/q|0}return X}function Vm(){const w=this,I=w.offset,q={value:0};for(let H=0;H<w.tileCount;H++){const X=mn(w.viewer,I),ie=mn(w.viewer,I);I.value+=8,w.size=vn(w.viewer,I);const z=X*w.blockWidth,ae=ie*w.blockHeight;w.columns=z+w.blockWidth>w.width?w.width-z:w.blockWidth,w.lines=ae+w.blockHeight>w.height?w.height-ae:w.blockHeight;const oe=w.columns*w.totalBytes,se=w.size<w.lines*oe?w.uncompress(w):Fa(w);I.value+=w.size;for(let fe=0;fe<w.lines;fe++){const le=fe*w.columns*w.totalBytes;for(let ve=0;ve<w.inputChannels.length;ve++){const Se=No.channels[ve].name,he=w.channelByteOffsets[Se]*w.columns,_e=w.decodeChannels[Se];if(_e===void 0)continue;q.value=le+he;const Me=(w.height-(1+ae+fe))*w.outLineWidth;for(let $e=0;$e<w.columns;$e++){const Xe=Me+($e+z)*w.outputChannels+_e;w.byteArray[Xe]=w.getter(se,q)}}}}}function Fm(){const w=this,I=w.offset,q={value:0};for(let H=0;H<w.height/w.blockHeight;H++){const X=mn(w.viewer,I)-No.dataWindow.yMin;w.size=vn(w.viewer,I),w.lines=X+w.blockHeight>w.height?w.height-X:w.blockHeight;const ie=w.columns*w.totalBytes,ae=w.size<w.lines*ie?w.uncompress(w):Fa(w);I.value+=w.size;for(let oe=0;oe<w.blockHeight;oe++){const te=H*w.blockHeight,se=oe+w.scanOrder(te);if(se>=w.height)continue;const fe=oe*ie,le=(w.height-1-se)*w.outLineWidth;for(let ve=0;ve<w.inputChannels.length;ve++){const Se=No.channels[ve].name,he=w.channelByteOffsets[Se]*w.columns,_e=w.decodeChannels[Se];if(_e!==void 0){q.value=fe+he;for(let Me=0;Me<w.columns;Me++){const $e=le+Me*w.outputChannels+_e;w.byteArray[$e]=w.getter(ae,q)}}}}}}function Nm(w,I,q){const H={};if(w.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");H.version=w.getUint8(4);const X=w.getUint8(5);H.spec={singleTile:!!(X&2),longName:!!(X&4),deepFormat:!!(X&8),multiPart:!!(X&16)},q.value=8;let ie=!0;for(;ie;){const z=Ys(I,q);if(z==="")ie=!1;else{const ae=Ys(I,q),oe=vn(w,q),te=Bm(w,I,q,ae,oe);te===void 0?console.warn(`THREE.EXRLoader: Skipped unknown header attribute type '${ae}'.`):H[z]=te}}if((X&-7)!=0)throw console.error("THREE.EXRHeader:",H),new Error("THREE.EXRLoader: Provided file is currently unsupported.");return H}function $m(w,I,q,H,X,ie){const z={size:0,viewer:I,array:q,offset:H,width:w.dataWindow.xMax-w.dataWindow.xMin+1,height:w.dataWindow.yMax-w.dataWindow.yMin+1,inputChannels:w.channels,channelByteOffsets:{},shouldExpand:!1,scanOrder:null,totalBytes:null,columns:null,lines:null,type:null,uncompress:null,getter:null,format:null,colorSpace:$o};switch(w.compression){case"NO_COMPRESSION":z.blockHeight=1,z.uncompress=Fa;break;case"RLE_COMPRESSION":z.blockHeight=1,z.uncompress=ym;break;case"ZIPS_COMPRESSION":z.blockHeight=1,z.uncompress=Na;break;case"ZIP_COMPRESSION":z.blockHeight=16,z.uncompress=Na;break;case"PIZ_COMPRESSION":z.blockHeight=32,z.uncompress=_m;break;case"PXR24_COMPRESSION":z.blockHeight=16,z.uncompress=bm;break;case"DWAA_COMPRESSION":z.blockHeight=32,z.uncompress=Ic;break;case"DWAB_COMPRESSION":z.blockHeight=256,z.uncompress=Ic;break;default:throw new Error("EXRLoader.parse: "+w.compression+" is unsupported")}const ae={};for(const le of w.channels)switch(le.name){case"Y":case"R":case"G":case"B":case"A":ae[le.name]=!0,z.type=le.pixelType}let oe=!1,te=!1;if(ae.R&&ae.G&&ae.B)z.outputChannels=4;else if(ae.Y)z.outputChannels=1;else throw new Error("EXRLoader.parse: file contains unsupported data channels.");switch(z.outputChannels){case 4:ie==Zo?(oe=!ae.A,z.format=Zo,z.colorSpace=$o,z.outputChannels=4,z.decodeChannels={R:0,G:1,B:2,A:3}):ie==is?(z.format=is,z.colorSpace=$o,z.outputChannels=2,z.decodeChannels={R:0,G:1}):ie==Qs?(z.format=Qs,z.colorSpace=$o,z.outputChannels=1,z.decodeChannels={R:0}):te=!0;break;case 1:ie==Zo?(oe=!0,z.format=Zo,z.colorSpace=$o,z.outputChannels=4,z.shouldExpand=!0,z.decodeChannels={Y:0}):ie==is?(z.format=is,z.colorSpace=$o,z.outputChannels=2,z.shouldExpand=!0,z.decodeChannels={Y:0}):ie==Qs?(z.format=Qs,z.colorSpace=$o,z.outputChannels=1,z.decodeChannels={Y:0}):te=!0;break;default:te=!0}if(te)throw new Error("EXRLoader.parse: invalid output format for specified file.");if(z.type==1)switch(X){case Ua:z.getter=Tm;break;case nn:z.getter=os;break}else if(z.type==2)switch(X){case Ua:z.getter=Ot;break;case nn:z.getter=Cm}else throw new Error("EXRLoader.parse: unsupported pixelType "+z.type+" for "+w.compression+".");z.columns=z.width;const se=z.width*z.height*z.outputChannels;switch(X){case Ua:z.byteArray=new Float32Array(se),oe&&z.byteArray.fill(1,0,se);break;case nn:z.byteArray=new Uint16Array(se),oe&&z.byteArray.fill(15360,0,se);break;default:console.error("THREE.EXRLoader: unsupported type: ",X);break}let fe=0;for(const le of w.channels)z.decodeChannels[le.name]!==void 0&&(z.channelByteOffsets[le.name]=fe),fe+=le.pixelType*2;if(z.totalBytes=fe,z.outLineWidth=z.width*z.outputChannels,w.lineOrder==="INCREASING_Y"?z.scanOrder=le=>le:z.scanOrder=le=>z.height-1-le,w.spec.singleTile){z.blockHeight=w.tiles.ySize,z.blockWidth=w.tiles.xSize;const le=Lm(w.tiles,z.width,z.height),ve=Oc(le,z.width,w.tiles.xSize,w.tiles.roundingMode),Se=Oc(le,z.height,w.tiles.ySize,w.tiles.roundingMode);z.tileCount=ve[0]*Se[0];for(let he=0;he<le;he++)for(let _e=0;_e<Se[he];_e++)for(let Me=0;Me<ve[he];Me++)rn(I,H);z.decode=Vm.bind(z)}else{z.blockWidth=z.width;const le=Math.ceil(z.height/z.blockHeight);for(let ve=0;ve<le;ve++)rn(I,H);z.decode=Fm.bind(z)}return z}const kc={value:0},Dc=new DataView(e),Um=new Uint8Array(e),No=Nm(Dc,e,kc),fo=$m(No,Dc,Um,kc,this.type,this.outputFormat);if(fo.decode(),fo.shouldExpand){const w=fo.byteArray;if(this.outputFormat==Zo)for(let I=0;I<w.length;I+=4)w[I+2]=w[I+1]=w[I];else if(this.outputFormat==is)for(let I=0;I<w.length;I+=2)w[I+1]=w[I]}return{header:No,width:fo.width,height:fo.height,data:fo.byteArray,format:fo.format,colorSpace:fo.colorSpace,type:this.type}}setDataType(e){return this.type=e,this}setOutputFormat(e){return this.outputFormat=e,this}load(e,t,o,r){function i(s,a){s.colorSpace=a.colorSpace,s.minFilter=Pl,s.magFilter=Pl,s.generateMipmaps=!1,s.flipY=!1,t&&t(s,a)}return super.load(e,i,o,r)}}class PM extends wv{constructor(e){super(e)}load(e,t,o,r){const i=this,s=new xv(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){const l=i.parse(JSON.parse(a));t&&t(l)},o,r)}parse(e){return new IM(e)}}class IM{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100,o="ltr"){const r=[],i=RM(e,t,this.data,o);for(let s=0,a=i.length;s<a;s++)r.push(...i[s].toShapes());return r}}function RM(n,e,t,o){const r=Array.from(n),i=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*i,a=[];let l=0,u=0;(o=="rtl"||o=="tb")&&r.reverse();for(let c=0;c<r.length;c++){const d=r[c];if(d===`
`)l=0,u-=s;else{const f=OM(d,i,l,u,t);o=="tb"?(l=0,u+=t.ascender*i):l+=f.offsetX,a.push(f.path)}}return a}function OM(n,e,t,o,r){const i=r.glyphs[n]||r.glyphs["?"];if(!i){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}const s=new Sv;let a,l,u,c,d,f,h,m;if(i.o){const v=i._cachedOutline||(i._cachedOutline=i.o.split(" "));for(let g=0,y=v.length;g<y;)switch(v[g++]){case"m":a=v[g++]*e+t,l=v[g++]*e+o,s.moveTo(a,l);break;case"l":a=v[g++]*e+t,l=v[g++]*e+o,s.lineTo(a,l);break;case"q":u=v[g++]*e+t,c=v[g++]*e+o,d=v[g++]*e+t,f=v[g++]*e+o,s.quadraticCurveTo(d,f,u,c);break;case"b":u=v[g++]*e+t,c=v[g++]*e+o,d=v[g++]*e+t,f=v[g++]*e+o,h=v[g++]*e+t,m=v[g++]*e+o,s.bezierCurveTo(d,f,h,m,u,c);break}}return{offsetX:i.ha*e,path:s}}const Ms={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class yc extends ns{constructor(e,t="tDiffuse"){super(),this.textureID=t,this.uniforms=null,this.material=null,e instanceof Jn?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Ls.clone(e.uniforms),this.material=new Jn({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new gc(this.material)}render(e,t,o){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=o.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class gf extends ns{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,o){const r=e.getContext(),i=e.state;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0);let s,a;this.inverse?(s=0,a=1):(s=1,a=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),i.buffers.stencil.setClear(a),i.buffers.stencil.setLocked(!0),e.setRenderTarget(o),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.color.setMask(!0),i.buffers.depth.setMask(!0),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class kM extends ns{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class du{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const o=e.getSize(new Ne);this._width=o.width,this._height=o.height,t=new En(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:nn}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new yc(Ms),this.copyPass.material.blending=Il,this.timer=new Cv}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){this.timer.update(),e===void 0&&(e=this.timer.getDelta());const t=this.renderer.getRenderTarget();let o=!1;for(let r=0,i=this.passes.length;r<i;r++){const s=this.passes[r];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,o),s.needsSwap){if(o){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}gf!==void 0&&(s instanceof gf?o=!0:s instanceof kM&&(o=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new Ne);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const o=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(o,r),this.renderTarget2.setSize(o,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(o,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class wo extends ns{constructor(e,t,o,r){super(),this.renderScene=t,this.renderCamera=o,this.selectedObjects=r!==void 0?r:[],this.visibleEdgeColor=new qn(1,1,1),this.hiddenEdgeColor=new qn(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.patternTexture=null,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this._selectionCache=new Set,this.resolution=e!==void 0?new Ne(e.x,e.y):new Ne(256,256);const i=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new En(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new Tv,this.depthMaterial.side=Is,this.depthMaterial.depthPacking=Ev,this.depthMaterial.blending=Il,this.prepareMaskMaterial=this._getPrepareMaskMaterial(),this.prepareMaskMaterial.side=Is,this.prepareMaskMaterial.fragmentShader=c(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new En(this.resolution.x,this.resolution.y,{type:nn}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new En(i,s,{type:nn}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new En(i,s,{type:nn}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new En(Math.round(i/2),Math.round(s/2),{type:nn}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this._getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new En(i,s,{type:nn}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new En(Math.round(i/2),Math.round(s/2),{type:nn}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;const a=4,l=4;this.separableBlurMaterial1=this._getSeparableBlurMaterial(a),this.separableBlurMaterial1.uniforms.texSize.value.set(i,s),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this._getSeparableBlurMaterial(l),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(i/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=l,this.overlayMaterial=this._getOverlayMaterial();const u=Ms;this.copyUniforms=Ls.clone(u.uniforms),this.materialCopy=new Jn({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:Il,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new qn,this.oldClearAlpha=1,this._fsQuad=new gc(null),this.tempPulseColor1=new qn,this.tempPulseColor2=new qn,this.textureMatrix=new Ht;function c(d,f){const h=f.isPerspectiveCamera?"perspective":"orthographic";return d.replace(/DEPTH_TO_VIEW_Z/g,h+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this._fsQuad.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let o=Math.round(e/this.downSampleRatio),r=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(o,r),this.renderTargetBlurBuffer1.setSize(o,r),this.renderTargetEdgeBuffer1.setSize(o,r),this.separableBlurMaterial1.uniforms.texSize.value.set(o,r),o=Math.round(o/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(o,r),this.renderTargetEdgeBuffer2.setSize(o,r),this.separableBlurMaterial2.uniforms.texSize.value.set(o,r)}render(e,t,o,r,i){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,i&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this._updateSelectionCache(),this._changeVisibilityOfSelectedObjects(!1);const a=this.renderScene.background,l=this.renderScene.overrideMaterial;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this._changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this._updateTextureMatrix(),this._changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this._changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this._selectionCache.clear(),this.renderScene.background=a,this.renderScene.overrideMaterial=l,this._fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this._fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const u=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(u),this.tempPulseColor2.multiplyScalar(u)}this._fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this._fsQuad.render(e),this._fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=wo.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this._fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=wo.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this._fsQuad.render(e),this._fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=wo.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this._fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=wo.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this._fsQuad.render(e),this._fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,i&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(o),this._fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}this.renderToScreen&&(this._fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=o.texture,e.setRenderTarget(null),this._fsQuad.render(e))}_updateSelectionCache(){const e=this._selectionCache;function t(o){o.isMesh&&e.add(o)}e.clear();for(let o=0;o<this.selectedObjects.length;o++)this.selectedObjects[o].traverse(t)}_changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;for(const o of this._selectionCache)e===!0?o.visible=t.get(o):(t.set(o,o.visible),o.visible=e)}_changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,o=this._selectionCache;function r(i){if(i.isPoints||i.isLine||i.isLine2)e===!0?i.visible=t.get(i):(t.set(i,i.visible),i.visible=e);else if((i.isMesh||i.isSprite)&&!o.has(i)){const s=i.visible;(e===!1||t.get(i)===!0)&&(i.visible=e),t.set(i,s)}}this.renderScene.traverse(r)}_updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}_getPrepareMaskMaterial(){return new Jn({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new Ne(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <batching_pars_vertex>
				#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <batching_vertex>
					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif

					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}_getEdgeDetectionMaterial(){return new Jn({uniforms:{maskTexture:{value:null},texSize:{value:new Ne(.5,.5)},visibleEdgeColor:{value:new ee(1,1,1)},hiddenEdgeColor:{value:new ee(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}_getSeparableBlurMaterial(e){return new Jn({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new Ne(.5,.5)},direction:{value:new Ne(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}_getOverlayMaterial(){return new Jn({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:Hf,depthTest:!1,depthWrite:!1,transparent:!0})}}wo.BlurDirectionX=new Ne(1,0);wo.BlurDirectionY=new Ne(0,1);class Rh extends ns{constructor(e,t,o=null,r=null,i=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=o,this.clearColor=r,this.clearAlpha=i,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this.isRenderPass=!0,this._oldClearColor=new qn}render(e,t,o){const r=e.autoClear;e.autoClear=!1;let i,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(i=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:o),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(i),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),e.autoClear=r}}class DM extends ns{constructor(e,t,o=0,r=0){super(),this.scene=e,this.camera=t,this.sampleLevel=4,this.unbiased=!0,this.stencilBuffer=!1,this.clearColor=o,this.clearAlpha=r,this._sampleRenderTarget=null,this._oldClearColor=new qn,this._copyUniforms=Ls.clone(Ms.uniforms),this._copyMaterial=new Jn({uniforms:this._copyUniforms,vertexShader:Ms.vertexShader,fragmentShader:Ms.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,premultipliedAlpha:!0,blending:Hf}),this._fsQuad=new gc(this._copyMaterial)}dispose(){this._sampleRenderTarget&&(this._sampleRenderTarget.dispose(),this._sampleRenderTarget=null),this._copyMaterial.dispose(),this._fsQuad.dispose()}setSize(e,t){this._sampleRenderTarget&&this._sampleRenderTarget.setSize(e,t)}render(e,t,o){this._sampleRenderTarget||(this._sampleRenderTarget=new En(o.width,o.height,{type:nn,stencilBuffer:this.stencilBuffer}),this._sampleRenderTarget.texture.name="SSAARenderPass.sample");const r=BM[Math.max(0,Math.min(this.sampleLevel,5))],i=e.autoClear;e.autoClear=!1,e.getClearColor(this._oldClearColor);const s=e.getClearAlpha(),a=1/r.length,l=1/32;this._copyUniforms.tDiffuse.value=this._sampleRenderTarget.texture;const u={fullWidth:o.width,fullHeight:o.height,offsetX:0,offsetY:0,width:o.width,height:o.height},c=Object.assign({},this.camera.view);c.enabled&&Object.assign(u,c);for(let d=0;d<r.length;d++){const f=r[d];this.camera.setViewOffset&&this.camera.setViewOffset(u.fullWidth,u.fullHeight,u.offsetX+f[0]*.0625,u.offsetY+f[1]*.0625,u.width,u.height);let h=a;if(this.unbiased){const m=-.5+(d+.5)/r.length;h+=l*m}this._copyUniforms.opacity.value=h,e.setClearColor(this.clearColor,this.clearAlpha),e.setRenderTarget(this._sampleRenderTarget),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.renderToScreen?null:t),d===0&&(e.setClearColor(0,0),e.clear()),this._fsQuad.render(e)}this.camera.setViewOffset&&c.enabled?this.camera.setViewOffset(c.fullWidth,c.fullHeight,c.offsetX,c.offsetY,c.width,c.height):this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=i,e.setClearColor(this._oldClearColor,s)}}const BM=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];class Oh extends DM{constructor(e,t,o,r){super(e,t,o,r),this.sampleLevel=0,this.accumulate=!1,this.accumulateIndex=-1,this._sampleRenderTarget=null,this._holdRenderTarget=null}render(e,t,o,r){if(this.accumulate===!1){super.render(e,t,o,r),this.accumulateIndex=-1;return}const i=qM[5];this._sampleRenderTarget===null&&(this._sampleRenderTarget=new En(o.width,o.height,{type:nn}),this._sampleRenderTarget.texture.name="TAARenderPass.sample"),this._holdRenderTarget===null&&(this._holdRenderTarget=new En(o.width,o.height,{type:nn}),this._holdRenderTarget.texture.name="TAARenderPass.hold"),this.accumulateIndex===-1&&(super.render(e,this._holdRenderTarget,o,r),this.accumulateIndex=0);const s=e.autoClear;e.autoClear=!1,e.getClearColor(this._oldClearColor);const a=e.getClearAlpha(),l=1/i.length;if(this.accumulateIndex>=0&&this.accumulateIndex<i.length){this._copyUniforms.opacity.value=l,this._copyUniforms.tDiffuse.value=t.texture;const c=Math.pow(2,this.sampleLevel);for(let d=0;d<c;d++){const f=this.accumulateIndex,h=i[f];if(this.camera.setViewOffset&&this.camera.setViewOffset(o.width,o.height,h[0]*.0625,h[1]*.0625,o.width,o.height),e.setRenderTarget(t),e.setClearColor(this.clearColor,this.clearAlpha),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this._sampleRenderTarget),this.accumulateIndex===0&&(e.setClearColor(0,0),e.clear()),this._fsQuad.render(e),this.accumulateIndex++,this.accumulateIndex>=i.length)break}this.camera.clearViewOffset&&this.camera.clearViewOffset()}e.setClearColor(this.clearColor,this.clearAlpha);const u=this.accumulateIndex*l;u>0&&(this._copyUniforms.opacity.value=1,this._copyUniforms.tDiffuse.value=this._sampleRenderTarget.texture,e.setRenderTarget(t),e.clear(),this._fsQuad.render(e)),u<1&&(this._copyUniforms.opacity.value=1-u,this._copyUniforms.tDiffuse.value=this._holdRenderTarget.texture,e.setRenderTarget(t),this._fsQuad.render(e)),e.autoClear=s,e.setClearColor(this._oldClearColor,a)}dispose(){super.dispose(),this._holdRenderTarget&&this._holdRenderTarget.dispose()}}const qM=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]],kh={name:"GammaCorrectionShader",uniforms:{tDiffuse:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 tex = texture2D( tDiffuse, vUv );

			gl_FragColor = sRGBTransferOETF( tex );

		}`};function LM({cameraRef:n,controlsRef:e,gizmoRef:t,renderer:o,transformControlsRef:r,helperScene:i}){e.value=new ZC(n.value,o.domElement),r.value=new jE(n.value,o.domElement);const s=r.value.getHelper();s.name="TransformHelper",i.add(s),e.value.enablePan=!0,e.value.screenSpacePanning=!0,e.value.enableZoom=!1,e.value.mouseButtons={LEFT:null,MIDDLE:K.MOUSE.ROTATE,RIGHT:null},e.value.touches={ONE:K.TOUCH.ROTATE,TWO:K.TOUCH.PAN},t.value=new HE(n.value,o,VM()),t.value.attachControls(e.value),Te(n,a=>{!e.value||!t.value||!r.value||(e.value.object=a,t.value.camera=a,r.value.camera=a)})}function VM(){const n=getComputedStyle(document.documentElement),e=n.getPropertyValue("--color-axis-x"),t=n.getPropertyValue("--color-axis-y"),o=n.getPropertyValue("--color-axis-z");return{container:".gizmo-wrapper",className:"gizmo",size:100,placement:"top-right",lineWidth:3,resolution:128,x:{color:e,hover:{labelColor:"#fff",color:e}},y:{color:t,hover:{labelColor:"#fff",color:t}},z:{color:o,hover:{labelColor:"#fff",color:o}}}}const sn=N(null),Gn=()=>({toast:{info:(t,o)=>{if(!sn.value){console.warn("Toast instance not initialized");return}return sn.value.addToast({message:t,type:"info",...o})},success:(t,o)=>{if(!sn.value){console.warn("Toast instance not initialized");return}return sn.value.addToast({message:t,type:"success",...o})},warning:(t,o)=>{if(!sn.value){console.warn("Toast instance not initialized");return}return sn.value.addToast({message:t,type:"warning",...o})},error:(t,o)=>{if(!sn.value){console.warn("Toast instance not initialized");return}return sn.value.addToast({message:t,type:"error",...o})},remove:t=>{if(!sn.value){console.warn("Toast instance not initialized");return}sn.value.removeToast(t)},clear:()=>{if(!sn.value){console.warn("Toast instance not initialized");return}sn.value.clearAllToasts()}},setToastInstance:t=>{sn.value=t}}),Gs=Ws("progress",()=>{const n=N([]);function e(i,s,a){const l={id:i,filename:s,percentage:0,loaded:0,total:a,startTime:Date.now()};n.value.push(l)}function t(i,s){const a=n.value.find(d=>d.id===i);if(!a)return;a.loaded=s,a.percentage=s/a.total*100;const l=Date.now()-a.startTime,u=s/l,c=a.total-s;a.estimatedTimeRemaining=c/u}function o(i){const s=n.value.findIndex(a=>a.id===i);s!==-1&&n.value.splice(s,1)}function r(){return n.value}return{loadingItems:n,startLoading:e,updateProgress:t,finishLoading:o,getActiveLoadings:r}}),{DRACOLoader:FM}=await we(async()=>{const{DRACOLoader:n}=await import("./DRACOLoader-RMPxq2x9.js");return{DRACOLoader:n}},__vite__mapDeps([0,1])),Dh=new FM;Dh.setDecoderPath("/draco/");async function NM({url:n,format:e,filename:t,onProgress:o,textureUrlMap:r}){const i=(e||n.split(".").pop()||"").toLowerCase(),s=Gs(),a=`model-${Date.now()}-${Math.random().toString(36).slice(2)}`;try{const l=o,u=c=>{c.lengthComputable&&(s.loadingItems.find(d=>d.id===a)?s.updateProgress(a,c.loaded):s.startLoading(a,t,c.total)),l?.(c)};switch(i){case"gltf":case"glb":{const{GLTFLoader:c}=await we(async()=>{const{GLTFLoader:v}=await import("./GLTFLoader-BMuO6Fuf.js");return{GLTFLoader:v}},__vite__mapDeps([2,1])),{MeshoptDecoder:d}=await we(async()=>{const{MeshoptDecoder:v}=await import("./meshopt_decoder.module-BK2qI-8z.js");return{MeshoptDecoder:v}},[]);let f;r&&(f=new Mv,f.setURLModifier(v=>{for(const[g,y]of Object.entries(r))if(v.includes(g)||v.endsWith(g))return y;return v}));const h=new c(f);return h.setDRACOLoader(Dh),h.setMeshoptDecoder(d),(await h.loadAsync(n,u)).scene}case"obj":{const{OBJLoader:c}=await we(async()=>{const{OBJLoader:f}=await import("./OBJLoader-Cabgzp0F.js");return{OBJLoader:f}},__vite__mapDeps([3,1]));return await new c().loadAsync(n,u)}case"fbx":{const{FBXLoader:c}=await we(async()=>{const{FBXLoader:f}=await import("./FBXLoader-lnwG5a-S.js");return{FBXLoader:f}},__vite__mapDeps([4,1,5]));return await new c().loadAsync(n,u)}default:throw new Error(`Unsupported format: ${i}`)}}catch(l){const u=l;return console.error(`Error loading a model (${n}):`,u.name,u.message),Gn().toast.error("",{title:"Error loading a model",message:u.message}),null}finally{s.finishLoading(a),n.startsWith("blob:")&&URL.revokeObjectURL(n)}}function $M(n){const e=new K.Raycaster,t=new K.Vector2;return e.firstHitOnly=!0,We(n,"pointermove",o=>{const r=o.target;r&&(t.x=o.offsetX/r.clientWidth*2-1,t.y=-(o.offsetY/r.clientHeight)*2+1)}),{raycaster:e,pointer:t}}function yf(n){const{far:e,near:t}=n;if(n.type==="Perspective"){const{aspect:a,fov:l}=n;return new K.PerspectiveCamera(l,a,t,e)}const{left:o,right:r,bottom:i,top:s}=n;return new K.OrthographicCamera(o,r,s,i,t,e)}function UM(){const n=yf({type:"Perspective",fov:39.6,near:.1,far:1e3}),e=yf({type:"Orthographic",near:-1e3,far:1e3}),t=N(n);t.value.position.set(4,4,4),t.value.lookAt(0,0,0);function o(){t.value instanceof K.PerspectiveCamera?(e.position.copy(t.value.position),e.quaternion.copy(t.value.quaternion),e.scale.copy(t.value.scale),t.value=e):(n.position.copy(t.value.position),n.quaternion.copy(t.value.quaternion),n.scale.copy(t.value.scale),t.value=n),t.value.updateProjectionMatrix()}return{perspectiveCamera:n,orthographicCamera:e,activeCamera:t,switchCamera:o}}function zM(n){n.traverse(e=>{e instanceof K.Light&&e.shadow.map&&e.shadow.map.dispose(),e instanceof K.BatchedMesh&&(e.disposeBoundsTree(),e.dispose()),e instanceof K.Mesh&&(e.geometry&&(e.geometry.disposeBoundsTree(),e.geometry.dispose()),(Array.isArray(e.material)?e.material:[e.material]).forEach(o=>{if(o){for(const r in o){const i=o[r];i&&i.isTexture&&i.dispose()}o.dispose()}}))}),n.parent&&n.removeFromParent()}function Bh({type:n,parameters:e}){let t;switch(n){case"point":t=new K.PointLight(e?.color,e?.intensity??10,e?.distance,e?.decay);break;case"sun":t=new K.DirectionalLight(e?.color,e?.intensity??10),t.target.name="DirectionalLightTarget",t.target.position.set(0,0,-1),t.add(t.target);break;case"spot":t=new K.SpotLight(e?.color,e?.intensity??10,e?.distance,e?.angle),t.target.name="SpotLightTarget",t.target.position.set(0,0,-1),t.add(t.target);break;case"area":t=new K.RectAreaLight(e?.color,e?.intensity??10,e?.width,e?.height);break}return t.shadow&&(t.shadow.bias=-.001,t.shadow.normalBias=.02),t.name=n,t}function _f(n){let e;switch(!0){case n instanceof K.PointLight:e=new K.PointLightHelper(n,.5);break;case n instanceof K.DirectionalLight:e=new K.DirectionalLightHelper(n,1);break;case n instanceof K.SpotLight:e=new K.SpotLightHelper(n);break;case n instanceof K.RectAreaLight:e=new MM(n);break}if(e)return e.light.name=n.type,e.name=`${n.type}Helper`,e.userData={isHelper:!0},e.traverse(t=>{t.userData.skipRaycast=!0}),e}var As=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(c){c.preventDefault(),o(++n%e.children.length)},!1);function t(c){return e.appendChild(c.dom),c}function o(c){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===c?"block":"none";n=c}var r=(performance||Date).now(),i=r,s=0,a=t(new As.Panel("FPS","#0ff","#002")),l=t(new As.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new As.Panel("MB","#f08","#201"));return o(0),{REVISION:16,dom:e,addPanel:t,showPanel:o,begin:function(){r=(performance||Date).now()},end:function(){s++;var c=(performance||Date).now();if(l.update(c-r,200),c>=i+1e3&&(a.update(s*1e3/(c-i),100),i=c,s=0,u)){var d=performance.memory;u.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){r=this.end()},domElement:e,setMode:o}};As.Panel=function(n,e,t){var o=1/0,r=0,i=Math.round,s=i(window.devicePixelRatio||1),a=80*s,l=48*s,u=3*s,c=2*s,d=3*s,f=15*s,h=74*s,m=30*s,v=document.createElement("canvas");v.width=a,v.height=l,v.style.cssText="width:80px;height:48px";var g=v.getContext("2d");return g.font="bold "+9*s+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=t,g.fillRect(0,0,a,l),g.fillStyle=e,g.fillText(n,u,c),g.fillRect(d,f,h,m),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(d,f,h,m),{dom:v,update:function(y,_){o=Math.min(o,y),r=Math.max(r,y),g.fillStyle=t,g.globalAlpha=1,g.fillRect(0,0,a,f),g.fillStyle=e,g.fillText(i(y)+" "+n+" ("+i(o)+"-"+i(r)+")",u,c),g.drawImage(v,d+s,f,h-s,m,d,f,h-s,m),g.fillRect(d+h-s,f,s,m),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(d+h-s,f,s,i((1-y/_)*m))}}};function HM(){const n=new As;n.dom.style.position="absolute",n.dom.style.top="initial",n.dom.style.bottom="0px";const e=Mn({memory:"",geometries:0,textures:0});function t(s){s&&s.appendChild(n.dom)}let o=0;const r=new K.Clock;function i(s){n.update();const a=r.getDelta();if(o+=a,o<1)return;if("memory"in performance){const u=(performance.memory.usedJSHeapSize/1048576).toFixed(2);e.memory=u}const l=s.info.memory;e.geometries=l.geometries,e.textures=l.textures,o=0}return{monitor:e,setFPSCounter:t,stats:n,updateMonitor:i}}let fu=null;function qh(n){fu=new K.PMREMGenerator(n),fu.compileEquirectangularShader()}const jM=new AM().setPath("/textures/world/");async function WM(n){const e=Gs(),t=`env-${Date.now()}-${Math.random().toString(36).slice(2)}`;try{const r=await jM.loadAsync(`${n}.exr`,o);return r.mapping=K.EquirectangularReflectionMapping,fu?.fromEquirectangular(r).texture??null}catch{return Gn().toast.error("Error when loading world texture"),null}finally{e.finishLoading(t)}function o(r){r.lengthComputable&&(e.loadingItems.find(i=>i.id===t)?e.updateProgress(t,r.loaded):e.startLoading(t,`${n}.exr`,r.total))}}const Ks=Ws("shading",()=>{let n=null;const e=GM(),t=N("solid"),o=je(null),r=new Map,i=F(()=>t.value);let s=[];function a(O){return!!O.userData.isShadable}function l(){n&&n.traverse(O=>{O instanceof K.Mesh&&O.material&&a(O)&&c(O)})}function u(O){O.traverse(D=>{D instanceof K.Mesh&&D.material&&!r.has(D.uuid)&&a(D)&&(c(D),h(D,t.value))})}function c(O){if(!O.material)return;const V=(Array.isArray(O.material)?O.material:[O.material]).map($=>$.clone());r.set(O.uuid,{original:Array.isArray(O.material)?V:V[0],current:O.material})}function d(O){!n||O===i.value||(t.value=O,O==="solid"?e.forEach(D=>n?.add(D)):e.forEach(D=>n?.remove(D)),O==="materialPreview"?n.environment=o.value:n.environment=null,C(O==="rendered"),O==="export"?(n.traverse(D=>{D.userData.isHelper&&(D.visible=!1,s.push(D))}),d("rendered")):(s.forEach(D=>{D.visible=!0}),s=[]),n.traverse(D=>{D instanceof K.Mesh&&h(D,O)}))}function f(O){o.value=O}function h(O,D){const V=r.get(O.uuid);if(!V)return;let $;switch(D){case"wireframe":$=m(V.original);break;case"solid":$=g(V.original);break;case"materialPreview":$=_(V.original);break;case"rendered":$=V.original;break;default:return}O.material=$,V.current=$}function m(O){return Array.isArray(O)?O.map(D=>v(D)):v(O)}function v(O){return new K.MeshBasicMaterial({color:0,wireframe:!0,transparent:O.transparent,opacity:O.opacity})}function g(O){return Array.isArray(O)?O.map(D=>y(D)):y(O)}function y(O){return new K.MeshLambertMaterial({color:13421772,flatShading:!0,transparent:O.transparent,opacity:O.opacity})}function _(O){return Array.isArray(O)?O.map(D=>b(D)):b(O)}function b(O){return O instanceof K.MeshStandardMaterial||O instanceof K.MeshPhysicalMaterial?O.clone():new K.MeshStandardMaterial({color:O.color||16777215,map:O.map,roughness:.5,metalness:0,transparent:O.transparent,opacity:O.opacity})}function x(O){n=O,e.forEach(D=>n?.add(D)),l(),WM("forest").then(D=>{D&&(f(D),d(t.value))})}function C(O){n&&n.traverse(D=>{"light"in D&&D.userData.isSceneLight&&(D.light.visible=O)})}function k(O){return r.get(O.uuid)}function P(O,D){const V=r.get(O.uuid);if(!V||Array.isArray(V.original))return;const $=V.original;if(R($,D.prop,D.value),t.value==="materialPreview"&&V.current!==V.original&&!Array.isArray(V.current)){const Y=V.current;D.prop in Y&&R(Y,D.prop,D.value)}V.current instanceof K.Material&&(V.current.needsUpdate=!0)}function R(O,D,V){const $=O[D];$ instanceof K.Color&&V instanceof K.Color||$ instanceof K.Vector2&&V instanceof K.Vector2||$ instanceof K.Vector3&&V instanceof K.Vector3||$ instanceof K.Vector4&&V instanceof K.Vector4?$.copy(V):O[D]=V}function M(O,D){const V=r.get(O.uuid);V&&(V.current=D,V.original=D,h(O,t.value))}function A(O){const D=r.get(O);if(!D)return!1;V(D.original),V(D.current);function V($){Array.isArray($)?$.forEach(Y=>Y.dispose()):$.dispose()}return r.delete(O)}return{init:x,cacheNewObjectMaterials:u,setEnvironmentMap:f,setMode:d,shadingMode:i,getMaterial:k,updateMaterial:P,changeMaterial:M,clearMaterialCache:A}});function GM(){const n=new K.AmbientLight(16777215,1);n.name="SolidModeAmbientLight";const e=new K.DirectionalLight(16777215,.8);e.name="SolidModeMainLight",e.position.set(5,5,5);const t=new K.DirectionalLight(16777215,.3);t.name="SolidModeFillLight",t.position.set(-5,-5,-5);const o=[n,e,t];return o.forEach(r=>{r.userData={isHelper:!0}}),o}const bl=new Map([["plane",0],["cube",0],["circle",0],["sphere",0],["icosphere",0],["cylinder",0],["cone",0],["torus",0]]);function Lh(n){let e;switch(n){case"plane":e=new K.PlaneGeometry;break;case"cube":e=new K.BoxGeometry;break;case"circle":e=new K.CircleGeometry;break;case"sphere":e=new K.SphereGeometry;break;case"icosphere":e=new K.IcosahedronGeometry;break;case"cylinder":e=new K.CylinderGeometry;break;case"cone":e=new K.ConeGeometry;break;case"torus":e=new K.TorusGeometry;break;default:throw new Error(`Unsupported geometry type: ${n}`)}const t=new K.MeshPhysicalMaterial,o=new K.Mesh(e,t);bl.set(n,(bl.get(n)??0)+1);const r=bl.get(n)??0;return o.name=`${n}.${r.toString().padStart(3,"0")}`,o}function Vh(n,e,t){try{const o=t?.mimeType||"application/octet-stream",r=n instanceof Blob?n:new Blob([n],{type:o}),i=URL.createObjectURL(r),s=document.createElement("a");return s.href=i,s.download=e,s.style.display="none",document.body.appendChild(s),s.click(),setTimeout(()=>{document.body.removeChild(s),URL.revokeObjectURL(i)},100),{success:!0,error:null}}catch(o){const r=o;return console.error(`Error downloading a file
`,r),{success:!1,error:r}}}async function KM(n){return new Promise(e=>{const t=document.createElement("input");t.type="file",n&&(t.accept=n),document.body.appendChild(t);try{t.addEventListener("change",o=>{const i=o.target.files?.[0];if(!i){e({data:null,error:null});return}const s=URL.createObjectURL(i);e({data:{url:s,filename:i.name,cleanup:()=>URL.revokeObjectURL(s)},error:null})}),t.click()}catch(o){const r=o;console.error(`Error uploading a file
`,r),e({data:null,error:r})}finally{t.remove()}})}const{toast:YM}=Gn(),XM=n=>n instanceof K.PointLight||n instanceof K.DirectionalLight||n instanceof K.SpotLight;async function ZM(n){try{const e=new K.Scene;n.children.forEach(r=>{if(!r.userData.isHelper){if(r instanceof K.Light&&!XM(r))return;e.add(r.clone(!0))}});const o=await new Es().parseAsync(e,{binary:!0});Vh(o,"model.glb",{mimeType:"model/gltf-binary"})}catch(e){const t=e;console.error("Export error:",t.message),YM.error("",{title:"Failed to export scene",message:t.message})}}const QM=Ws("composer",()=>{const n=je(),e=je(),t=je([]);function o({canvas:a}){const l=new K.WebGLRenderer({canvas:a,alpha:!0,precision:"highp",powerPreference:"high-performance"}),{clientWidth:u,clientHeight:c}=a;return l.setPixelRatio(window.devicePixelRatio),l.setSize(u,c,!1),l.toneMapping=K.ACESFilmicToneMapping,l.outputColorSpace=K.SRGBColorSpace,l.toneMappingExposure=1,l.shadowMap.enabled=!0,l.shadowMap.type=K.PCFSoftShadowMap,l.autoClear=!1,l}function r({camera:a,canvas:l,gizmo:u,scene:c,renderer:d}){const f=new du(d);f.setPixelRatio(window.devicePixelRatio);const h=new Rh(c,a.value);f.addPass(h);const m=new Oh(c,a.value);m.sampleLevel=2,f.addPass(m);const v=new wo(new K.Vector2(l.clientWidth,l.clientHeight),c,a.value);v.edgeStrength=5,v.edgeThickness=1,v.edgeGlow=0,v.visibleEdgeColor.set("#ffaa00"),v.hiddenEdgeColor.set("#ffaa00"),f.addPass(v);const g=new yc(kh);f.addPass(g),t.value.push(h,m,g),Te(a,_=>{h.camera=_,v.renderCamera=_,m.camera=_});function y(){const{width:_,height:b}=d.getSize(new K.Vector2),{clientWidth:x,clientHeight:C}=l;(_!==x||b!==C)&&(d.setSize(x,C,!1),f.setSize(x,C),d.setPixelRatio(window.devicePixelRatio),a.value instanceof K.PerspectiveCamera&&(a.value.aspect=x/C),a.value.updateProjectionMatrix(),u.value?.update())}return{composer:f,outlinePass:v,handleResize:y}}function i(){if(!n.value)return console.warn("RendererRef is undefined");const a=new du(n.value);return t.value.forEach(l=>{a.addPass(l)}),{composer:a}}function s({camera:a,canvas:l,gizmo:u,scene:c}){const d=o({canvas:l});qh(d);const{composer:f,handleResize:h,outlinePass:m}=r({canvas:l,camera:a,gizmo:u,scene:c,renderer:d});return n.value=d,e.value=f,{composer:f,handleResize:h,outlinePass:m,renderer:d}}return{composerPasses:t,init:s,setupRenderImageComposer:i}}),at=Ws("three",()=>{const n=N(!1),e=QM(),t=Ks(),o=new K.Scene,r=new K.Scene;o.background=new K.Color("#3D3D3D");const i=gE(o),s=[],a=[],l=F(()=>o.children);o.addEventListener("childadded",()=>{_o(l)}),o.addEventListener("childremoved",()=>{_o(l)});function u(){_o(l)}function c(){const W=new K.Group;return W.name="Group",o.add(W),W}function d(W,G){const Q=o.getObjectByProperty("uuid",G),ge=o.getObjectByProperty("uuid",W);!(Q instanceof K.Group)||!ge||Q.add(ge)}const{activeCamera:f,switchCamera:h}=UM(),m=je(),v=je(),g=je(),y=N("translate");function _(W){g.value?.setMode(W),y.value=W}const b=je(),{monitor:x,updateMonitor:C}=HM();function k(){const W=Bh({type:"point"});W.power=1e3,W.position.set(4,5,1),O(W);const G=Lh("cube");A(G)}async function P(W){if(!W.value)return;const G=W.value;if(t.init(o),!(f.value instanceof K.PerspectiveCamera))return;f.value.aspect=G.clientWidth/G.clientHeight;const{composer:Q,handleResize:ge,outlinePass:ce,renderer:re}=e.init({camera:f,canvas:G,gizmo:v,scene:o});b.value=ce,LM({cameraRef:f,transformControlsRef:g,controlsRef:m,gizmoRef:v,renderer:re,helperScene:r});const{pointer:pe,raycaster:Ee}=$M(W);let Pe=!1;g.value?.addEventListener("dragging-changed",dt=>{Pe=!dt.value}),We(W,"click",()=>{if(!b.value)return;if(Pe)return Pe=!1;Ee.setFromCamera(pe,f.value);const dt=Ee.intersectObjects(s,!0);if(!dt[0]){b.value.selectedObjects=[],g.value?.detach();return}M(dt[0].object.uuid,!0)}),k();const be=1e3/30;let Ue=0;const lt=new K.Clock;re.setAnimationLoop(Ft),n.value=!0;function Ft(dt){const Yt=dt-Ue;if(Yt<be)return;Ue=dt-Yt%be;const Nt=lt.getDelta();ge(),i.update(f.value),m.value?.update(Nt),a.forEach(hn=>{"update"in hn&&hn.update()}),Q.render(Nt),v.value?.render(),re.clearDepth(),re.render(r,f.value),C(re)}}const R=N(null);function M(W,G){if(!W||!b.value)return;const Q=o.getObjectByProperty("uuid",W);if(!(!Q||G&&!Q.userData.isSelectable)){if(Q instanceof K.Light){g.value?.attach(Q),R.value=Q;const ge=o.getObjectByProperty("light",Q);ge&&(b.value.selectedObjects=[ge]);return}if("light"in Q){const ge=Q.light;g.value?.attach(ge),b.value.selectedObjects=[Q],R.value=ge;return}g.value?.attach(Q),b.value.selectedObjects=[Q],R.value=Q}}g.value?.addEventListener("objectChange",()=>{_o(R)}),g.value?.addEventListener("object-changed",W=>{const G=W.target.object;if(!G){if(!b.value)return;b.value.selectedObjects=[];return}if("light"in G){g.value?.attach(G.light),R.value=G.light;return}G.userData.skipRaycast&&G.parent&&(g.value?.attach(G.parent),R.value=G.parent)});function A(W){W.traverse(G=>{if(G.castShadow=!0,G.receiveShadow=!0,G.userData.isSelectable=!0,G instanceof K.Mesh&&(G.userData.isShadable=!0,G.material.dithering=!0),G instanceof K.Light){const Q=_f(G);if(!Q)return;W.add(Q),t.shadingMode!=="rendered"&&(Q.light.visible=!1)}}),Ch(W),o.add(W),s.push(W),t.cacheNewObjectMaterials(W),R.value=W,g.value?.attach(W),b.value&&(b.value.selectedObjects=[W])}function O(W){const G=_f(W);G&&(G.userData.isSelectable=!0,G.userData.isSceneLight=!0,W.userData.isSelectable=!0,W.userData.isSceneLight=!0,W instanceof K.RectAreaLight||(W.castShadow=!0),o.add(W),o.add(G),t.shadingMode!=="rendered"&&(W.visible=!1),s.push(G),a.push(G),R.value=W,g.value?.attach(W),b.value&&(b.value.selectedObjects=[G]))}function D(W){if(g.value?.detach(),W instanceof K.Light){const Q=[W];o.traverse(ge=>{if("light"in ge&&ge.light.uuid===W.uuid){Q.push(ge);const ce=a.findIndex(re=>ge.uuid===re.uuid);if(ce<0)return;a.splice(ce,1)}}),Q.forEach(ge=>{o.remove(ge),ge instanceof K.Light&&ge.shadow.map&&ge.shadow.map.dispose()})}R.value===W&&(R.value=null),b.value&&(b.value.selectedObjects=b.value.selectedObjects.filter(Q=>Q!==W)),zM(W),t.clearMaterialCache(W.uuid);const G=s.findIndex(Q=>Q.uuid===W.uuid);G>=0&&s.splice(G,1)}async function V(W){const G=await NM(W);if(!G)return;const Q=W.filename.split(".")[0]||"Model";G.name=Q,A(G)}function $(W,G){const Q=o.getObjectByProperty("uuid",W);Q&&(Q.visible=G,_o(l))}function Y(){const W=t.shadingMode;t.setMode("export"),ZM(o),t.setMode(W)}return{initScene:P,activeCamera:f,switchCamera:h,importModel:V,outlinePassRef:b,selectedObject:R,controls:m,addModelToScene:A,setTransformMode:_,currentTransformMode:y,deleteFromScene:D,transformControls:g,addLightToScene:O,monitor:x,selectObject:M,raycasterObjects:s,sceneChildren:l,objectVisibilityUpdate:$,updateScene:u,exportScene:Y,scene:o,addGroup:c,moveToGroup:d,isInitiated:n}});function JM({canvas:n}){const e=new K.WebGLRenderer({canvas:n,alpha:!0,precision:"highp",powerPreference:"high-performance"}),{clientWidth:t,clientHeight:o}=n;return e.setPixelRatio(window.devicePixelRatio),e.setSize(t,o,!1),e.toneMapping=K.ACESFilmicToneMapping,e.outputColorSpace=K.SRGBColorSpace,e.toneMappingExposure=1,e.shadowMap.enabled=!0,e.shadowMap.type=K.PCFSoftShadowMap,e.autoClear=!1,qh(e),e}function eA({camera:n,canvas:e,scene:t}){const o=JM({canvas:e}),r=new du(o);r.setPixelRatio(window.devicePixelRatio);const i=new Rh(t,n);r.addPass(i);const s=new Oh(t,n);s.sampleLevel=2,r.addPass(s);const a=new yc(kh);return r.addPass(a),{renderer:o,composer:r}}const Tn=Mn({about:!1,modelsLibrary:!1,textureLibrary:!1,renderImage:!1}),Fh=Mn({about:null,modelsLibrary:null,textureLibrary:null,renderImage:null});function _c(){const n=o=>Tn[o];function e(o,r){Tn[o]=!0,Fh[o]=r??null}function t(o){Tn[o]=!1}return{open:e,close:t,isOpen:n}}const tA={class:"p-1 text-xl flex items-center gap-1 bg-header-background text-ui-text-text"},nA={class:"flex gap-3 p-3 grow overflow-hidden"},oA={class:"flex flex-col flex-1"},rA={class:"relative flex grow justify-center items-center border border-ui-box-outline rounded overflow-hidden"},sA={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-black/50"},iA=["disabled"],aA={class:"flex gap-4 text-sm text-ui-menu-bg-text mt-1"},lA={class:"flex flex-col max-w-xs w-full"},uA={class:"flex gap-2 text-ui-text-text text-sm justify-end mt-1"},cA=["disabled"],dA=["disabled"],fA=L({__name:"ModalRenderImage",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=Et(n,"modelValue"),{close:t}=_c(),{toast:o}=Gn(),r=at(),i=Ks(),s=N({width:1920,height:1080,selectedFormat:"webp",quality:100,background:!0}),a=Mn({resolution:"",format:"",renderTime:0}),l=N(!1),u=N(1920),c=N(1080),d=Nn("canvasRef"),f=Nn("previewRef"),h=F(()=>!l.value);function m(_){const b=new K.Scene;return b.background=_.background?.clone()??null,b.environment=_.environment??null,b.fog=_.fog?.clone()??null,_.children.forEach(x=>{if(!x.userData.isHelper){const C=x.clone(!0);b.add(C)}}),b}function v(_){if(_ instanceof K.OrthographicCamera){const x=new K.OrthographicCamera;return x.copy(_,!0),x}const b=new K.PerspectiveCamera;return b.copy(_,!0),b.aspect=u.value/c.value,b}async function g(_){const b=i.shadingMode;l.value=!0;const x=d.value;if(!x){l.value=!1;return}const{width:C,height:k}=s.value;u.value=C,c.value=k,setTimeout(()=>{try{i.setMode("export");const P=m(r.scene);s.value.background||(P.background=null);const R=v(r.activeCamera);R instanceof K.PerspectiveCamera&&(R.aspect=C/k),x.width=C,x.height=k;const{composer:M,renderer:A}=eA({scene:P,camera:R,canvas:x});A.setSize(C,k,!1),M.setSize(C,k);const O=performance.now();M.render();const D=performance.now();_||(a.resolution=`${s.value.width}x${s.value.height}`,a.format=s.value.selectedFormat,a.renderTime=Number(((D-O)/1e3).toFixed(2)),f.value?.src&&URL.revokeObjectURL(f.value.src),x.toBlob(V=>{!V||!f.value||(f.value.src=URL.createObjectURL(V))},`image/${s.value.selectedFormat}`,s.value.quality/100))}catch(P){console.error(`Render failed:
`,P);const R=P;o.error("",{title:"Image render error",message:R.message})}finally{i.setMode(b),l.value=!1}},10)}async function y(){const _=d.value;if(_){await g(!0);try{const b=await new Promise(k=>{_.toBlob(P=>{k(P)},`image/${s.value.selectedFormat}`,s.value.quality/100)});if(!b)return;const C=`render_${`${s.value.width}x${s.value.height}`}.${s.value.selectedFormat}`;Vh(b,C,{mimeType:`image/${s.value.selectedFormat}`})}catch(b){console.error("Save failed:",b)}}}return(_,b)=>{const x=vt,C=zC,k=Wn,P=fr,R=Jr,M=Pa;return E(),B(M,{modelValue:e.value,"onUpdate:modelValue":b[3]||(b[3]=A=>e.value=A),title:"Render Image",class:"w-5xl bg-window-bg block-border flex flex-col h-2/3",root:{modal:!1},resize:"","outside-interaction":""},{default:S(()=>[j("h1",tA,[T(x,{name:"ui/render-image"}),b[4]||(b[4]=ke(" Render Image ",-1))]),j("div",nA,[j("div",oA,[j("div",rA,[j("canvas",{ref_key:"canvasRef",ref:d,class:"max-w-full max-h-full m-auto opacity-0 hidden"},null,512),j("img",{ref_key:"previewRef",ref:f,class:"max-w-full max-h-full m-auto block object-contain"},null,512),l.value?(E(),ne("div",sA,[...b[5]||(b[5]=[j("div",{class:"flex items-center gap-2 text-white"},[j("div",{class:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),j("span",null,"Rendering...")],-1)])])):ue("",!0),b[6]||(b[6]=j("div",{class:"absolute top-2 left-2 text-xs bg-black/50 px-2 py-1 rounded text-white"}," Preview ",-1)),j("button",{class:"btn absolute top-2 right-2 text-xs px-2 py-1 rounded text-white",disabled:l.value,onClick:b[0]||(b[0]=A=>g())}," Render Preview ",8,iA)]),j("div",aA,[j("div",null,[b[7]||(b[7]=j("b",null,"Resolution:",-1)),ke(" "+Ce(a.resolution),1)]),j("div",null,[b[8]||(b[8]=j("b",null,"Format:",-1)),ke(" "+Ce(a.format),1)]),j("div",null,[b[9]||(b[9]=j("b",null,"Render Time:",-1)),ke(" "+Ce(a.renderTime)+"s",1)])])]),j("div",lA,[T(R,null,{default:S(()=>[T(P,{collapsible:"","default-value":["image-settings"],type:"multiple",class:"space-y-1 mr-2.5"},{default:S(()=>[T(k,{label:"Image settings",item:{value:"image-settings"}},{default:S(()=>[T(C,{modelValue:s.value,"onUpdate:modelValue":b[1]||(b[1]=A=>s.value=A)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),j("div",uA,[j("button",{class:"btn",disabled:l.value,onClick:b[2]||(b[2]=A=>p(t)("renderImage"))},"Close",8,cA),j("button",{class:"btn",disabled:!h.value,onClick:y},"Save Image",8,dA)])])])]),_:1},8,["modelValue"])}}}),pA=["src","alt"],hA={key:0},mA=["href"],vA={key:1},Nh=L({__name:"LibraryAssetDescription",props:{asset:{},authors:{}},setup(n){return(e,t)=>(E(),ne(Ie,null,[j("img",{src:n.asset.thumbnail_url,alt:n.asset.name,class:"block mx-2 h-40 object-contain"},null,8,pA),j("div",null,Ce(n.asset.name),1),n.authors?(E(),ne("div",hA,[t[1]||(t[1]=j("b",null,"Authors: ",-1)),(E(!0),ne(Ie,null,ot(n.authors,o=>(E(),ne(Ie,{key:o.name},[o.link?(E(),ne("a",{key:0,href:o.link,class:"hover:underline text-blue-500",target:"_blank",rel:"author external"},Ce(o.name),9,mA)):(E(),ne(Ie,{key:1},[ke(Ce(o.name),1)],64)),ke(" ("+Ce(o.responsibility)+") ",1),t[0]||(t[0]=j("br",null,null,-1))],64))),128))])):ue("",!0),n.asset.description?(E(),ne("div",vA,[t[2]||(t[2]=j("b",null,"Description:",-1)),ke(" "+Ce(n.asset.description),1)])):ue("",!0),j("div",null,[t[3]||(t[3]=j("b",null,"Categories:",-1)),ke(" "+Ce(n.asset.categories.join(", ")),1)]),j("div",null,[t[4]||(t[4]=j("b",null,"Tags:",-1)),ke(" "+Ce(n.asset.tags.join(", ")),1)])],64))}}),hr=(n,e)=>{const t=n.__vccOpts||n;for(const[o,r]of e)t[o]=r;return t},gA={},yA={class:"rounded text-xs"};function _A(n,e){return E(),ne("div",yA,[...e[0]||(e[0]=[Qm('<div class="font-semibold mb-1">License Information</div><div class="mb-2"> All assets from Poly Haven are licensed under <a href="https://creativecommons.org/publicdomain/zero/1.0/" rel="external license" target="_blank" class="hover:underline text-blue-500 font-semibold"> CC0 (Public Domain) </a></div><div class="text-gray-400 mb-1"> This means you can use them for any purpose, including commercial projects, without attribution. </div><a href="https://polyhaven.com/license" rel="external license" target="_blank" class="hover:underline text-blue-500"> Learn more about Poly Haven&#39;s license </a>',4)])])}const $h=hr(gA,[["render",_A]]),{toast:gs}=Gn(),ys=ig({baseUrl:"https://api.polyhaven.com",options:{async beforeFetch({options:n}){return n.headers={...n.headers,Accept:"application/json"},{options:n}}},fetchOptions:{mode:"cors"}});function Uh(){const n=N([]),e=je([]),t=N(""),o=N([]),r=N(!1),i=N(!1),s=N(!1),a=N(!1),l=je(),u=N([]),c=F(()=>{const P=new Set(n.value.flatMap(R=>R.tags));return Array.from(P).map(R=>R.trim()).sort()}),d=F(()=>n.value.filter(P=>{const R=P.name.toLowerCase().includes(t.value.toLowerCase()),M=P.tags.join(" ").toLowerCase().includes(t.value.toLowerCase()),A=o.value.length>0?o.value.some(O=>P.categories.includes(O)):!0;return(R||M)&&A}));async function f(P){r.value=!0;const R=new URLSearchParams({type:P}),{data:M,error:A}=await ys(`/assets?${R.toString()}`).json();M.value&&(n.value=Object.entries(M.value).map(([O,D])=>({...D,id:O}))),A.value&&gs.error("",{title:"API Error",message:"Failed to load assets"}),r.value=!1}async function h(P){i.value=!0;const{data:R,error:M}=await ys(`/info/${P}`).get().json();return M.value&&gs.error("",{title:"API Error",message:"Failed to load asset details"}),i.value=!1,R.value}async function m(P){const{data:R,error:M}=await ys(`/author/${P}`).get().json();return M.value&&gs.error("",{title:"API Error",message:"Failed to load author info"}),R.value}async function v(P){a.value=!0;const{data:R,error:M}=await ys(`/categories/${P}`).get().json();R.value&&(e.value=Object.entries(R.value).map(([A,O])=>({title:A,count:O})).filter(A=>A.title!=="all").sort((A,O)=>A.title.localeCompare(O.title))),M.value&&gs.error("",{title:"API Error",message:"Failed to fetch categories"}),a.value=!1}async function g(P){s.value=!0;const{data:R,error:M}=await ys(`/files/${P}`).get().json();return M.value&&gs.error("",{title:"API Error",message:"Failed to load asset files"}),s.value=!1,R.value}function y(P,R){const M=Object.keys(P.authors).map(A=>({id:A,responsibility:P.authors[A]}));u.value=[],M.forEach(A=>{m(A.id).then(O=>{O&&u.value.push({...O,responsibility:A.responsibility||""})}).catch(()=>{})}),h(P.id).then(A=>{A&&(l.value={...A,id:P.id})}).catch(()=>{}),g(P.id).then(A=>{A&&R(A)}).catch(()=>{})}function _({files:P,format:R,resolution:M}){if(!P||typeof P!="object")return null;const A=P[M];if(!A||typeof A!="object")return null;const O=A[R];if(!O||typeof O!="object")return null;const D={};if(O.include)for(const[V,$]of Object.entries(O.include)){const Y=V.split("/").pop();Y&&$.url&&(D[Y]=$.url,D[V]=$.url)}return{url:O.url,textureUrlMap:D}}return{assets:n,search:t,categories:e,assetsTags:c,fetchAssets:f,fetchCategories:v,fetchAssetInfo:h,fetchAssetAuthor:m,fetchAssetFiles:g,getModelData:_,filteredAssets:d,categoriesFilter:o,isLoadingAssets:r,isLoadingCategories:a,isLoadingFiles:s,isLoadingInfo:i,isHDRI:P=>P.type===0,isTexture:P=>P.type===1,isModel:P=>P.type===2,getAssetTypeName:P=>({0:"hdris",1:"textures",2:"models"})[P],selectedAsset:l,selectedAssetAuthors:u,selectAsset:y}}function zh(n){const e=["Bytes","KB","MB","GB"];if(n<=0)return"n/a";const t=parseInt(Math.floor(Math.log(n)/Math.log(1024)).toString(),10);return t===0?`${n} ${e[t]})`:t>3?`${(n/1024**3).toFixed(1)} ${e[3]}`:`${(n/1024**t).toFixed(1)} ${e[t]}`}const bA={class:"p-1 text-xl flex items-center gap-1 bg-header-background"},wA={class:"flex grow overflow-hidden gap-2 p-2"},xA={class:"bg-header-background flex flex-col gap-2 basis-[20%] shrink-0"},SA={class:"h-[300px] bg-ui-box-inner border border-ui-box-outline rounded-ui-box p-2 pr-0 text-sm flex flex-col gap-1"},CA={class:"overflow-hidden bg-ui-box-inner rounded grow"},TA={class:"flex gap-1 flex-wrap p-1"},EA=["onClick"],MA={class:"w-full h-28 p-1"},AA=["src","alt"],PA={class:"text-xs text-center h-10 flex items-center justify-center overflow-hidden text-ellipsis"},IA={key:0,class:"bg-header-background flex flex-col basis-[25%] shrink-0"},RA={class:"flex flex-col gap-1 p-2 text-sm"},OA={key:2},kA=L({__name:"ModalTextureLibrary",props:sr({callback:{type:[Function,null]}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=Et(n,"modelValue"),t=n,{assets:o,search:r,categories:i,fetchAssets:s,fetchCategories:a,filteredAssets:l,categoriesFilter:u,selectedAsset:c,selectAsset:d,selectedAssetAuthors:f}=Uh();Te(e,R=>{!R||o.value.length>0||(a("textures"),s("textures"))});function h(){k.value&&(t.callback?.(k.value),e.value=!1)}const m=new Map([["AO","AO"],["rough_ao","Rough AO"],["arm","AO/Rough/Metal"],["Diffuse","Diffuse"],["Displacement","Displacement"],["nor_dx","Normal (DX)"],["nor_gl","Normal (GL)"],["rough","Rough"],["bump","Bump"],["spec","Spec"],["spec_ior","Spec Ior"],["anisotropy_rotation","Anisotropy Rotation"],["anisotropy_strength","Anisotropy Strength"]]),v=N(),g=N(),y=je([]),_=N(),b=F(()=>!g.value||!v.value?[]:Object.keys(v.value[g.value]??{}).map(R=>({label:R,value:R}))),x=N(),C=F(()=>!g.value||!_.value||!v.value||!v.value[g.value]?.[_.value]?[]:Object.keys(v.value?.[g.value]?.[_.value]??{}).map(R=>({label:R,value:R}))),k=F(()=>{if(!g.value||!_.value||!x.value||!v.value)return;const R=g.value,M=_.value,A=x.value;return v.value[R]?.[M]?.[A]});function P(R){v.value=R,y.value=Object.keys(R).map(M=>["blend","gltf","mtlx"].includes(M)?{value:"",label:""}:{value:M,label:m.get(M)||M}).filter(M=>!!M.value)}return(R,M)=>{const A=vt,O=pr,D=ht,V=Jr,$=$h,Y=Nh,W=ts,G=Pa;return E(),B(G,{modelValue:e.value,"onUpdate:modelValue":M[5]||(M[5]=Q=>e.value=Q),title:"Models Library",class:"w-7xl h-[75dvh] text-ui-text-text block-border bg-window-bg flex flex-col",resize:""},{default:S(()=>[j("h1",bA,[T(A,{name:"ui/asset-browser"}),M[6]||(M[6]=ke(" Asset Browser ",-1))]),j("div",wA,[j("div",xA,[j("div",SA,[M[7]||(M[7]=j("h2",null,"Categories",-1)),T(V,null,{default:S(()=>[T(p(ip),{modelValue:p(u),"onUpdate:modelValue":M[0]||(M[0]=Q=>Lt(u)?u.value=Q:null)},{default:S(()=>[(E(!0),ne(Ie,null,ot(p(i),Q=>(E(),ne("div",{key:"category_"+Q.title,class:"flex flex-col gap-1"},[T(D,{label:Q.title,reverse:"",class:"items-center"},{default:S(()=>[T(O,{value:Q.title},null,8,["value"])]),_:2},1032,["label"])]))),128))]),_:1},8,["modelValue"])]),_:1})]),oo(j("input",{"onUpdate:modelValue":M[1]||(M[1]=Q=>Lt(r)?r.value=Q:null),type:"text",class:"input",placeholder:"Search textures"},null,512),[[aa,p(r)]]),T($,{class:"mt-auto"})]),j("div",CA,[T(V,null,{default:S(()=>[j("div",TA,[(E(!0),ne(Ie,null,ot(p(l),Q=>(E(),ne("div",{key:"asset_"+Q.id,class:no(["w-32 rounded p-1 cursor-pointer hover:bg-gray-500",{"bg-browser-selected":p(c)?.name===Q.name}]),onClick:ge=>p(d)(Q,P)},[j("div",MA,[j("img",{src:Q.thumbnail_url,alt:Q.name,class:"object-contain object-center size-full",loading:"lazy"},null,8,AA)]),j("div",PA,Ce(Q.name),1)],10,EA))),128))])]),_:1})]),p(c)?(E(),ne("div",IA,[T(V,null,{default:S(()=>[j("div",RA,[T(Y,{asset:p(c),authors:p(f)},null,8,["asset","authors"]),T(W,{modelValue:g.value,"onUpdate:modelValue":M[2]||(M[2]=Q=>g.value=Q),class:"z-10 mt-2",items:y.value,placeholder:"Map type"},null,8,["modelValue","items"]),g.value?(E(),B(W,{key:0,modelValue:_.value,"onUpdate:modelValue":M[3]||(M[3]=Q=>_.value=Q),class:"z-10",items:b.value,placeholder:"Resolution"},null,8,["modelValue","items"])):ue("",!0),_.value?(E(),B(W,{key:1,modelValue:x.value,"onUpdate:modelValue":M[4]||(M[4]=Q=>x.value=Q),class:"z-10",items:C.value,placeholder:"Format"},null,8,["modelValue","items"])):ue("",!0),k.value?(E(),ne("div",OA,[M[8]||(M[8]=j("b",null,"Size: ",-1)),ke(Ce(p(zh)(k.value.size)),1)])):ue("",!0)])]),_:1}),j("button",{type:"button",class:"btn mt-auto",onClick:h},"Import Texture")])):ue("",!0)])]),_:1},8,["modelValue"])}}}),DA={class:"p-1 text-xl flex items-center gap-1 bg-header-background"},BA={class:"flex grow gap-2 p-2 overflow-hidden"},qA={class:"bg-header-background flex flex-col gap-2 basis-[20%] shrink-0"},LA={class:"h-[300px] bg-ui-box-inner border border-ui-box-outline rounded-ui-box p-2 pr-0 text-sm flex flex-col gap-1"},VA={class:"overflow-hidden bg-ui-box-inner rounded grow"},FA={class:"flex gap-1 flex-wrap p-1"},NA=["onClick"],$A={class:"w-full h-28 p-1"},UA=["src","alt"],zA={class:"text-xs text-center h-10 flex items-center justify-center overflow-hidden text-ellipsis"},HA={key:0,class:"bg-header-background flex flex-col basis-[25%] shrink-0"},jA={class:"flex flex-col gap-1 p-2 text-sm"},WA=L({__name:"ModalModelsLibrary",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=Et(n,"modelValue"),{assets:t,search:o,categories:r,fetchAssets:i,fetchCategories:s,filteredAssets:a,categoriesFilter:l,getModelData:u,selectedAsset:c,selectedAssetAuthors:d,selectAsset:f}=Uh();Te(e,x=>{!x||t.value.length>0||(s("models"),i("models"))});const h=N(),m=je([]),v=N(),g=F(()=>{if(!v.value||!h.value)return null;const x=h.value[v.value]?.gltf;if(!x)return null;const C=x.include?Object.values(x.include):[],k=x.size+C.reduce((P,R)=>R.size+P,0);return{size:zh(k)}});function y(x){if("gltf"in x){const C=x.gltf;if(!C)return;h.value=C,m.value=Object.keys(C).map(k=>({value:k,label:k})),v.value=m.value[0]?.value}}const _=at();function b(){if(!v.value||!c.value||!h.value)return;const x=u({format:"gltf",resolution:v.value,files:h.value});x&&_.importModel({...x,format:"gltf",filename:c.value.name}),e.value=!1}return(x,C)=>{const k=vt,P=pr,R=ht,M=Jr,A=$h,O=Nh,D=ts,V=Pa;return E(),B(V,{modelValue:e.value,"onUpdate:modelValue":C[3]||(C[3]=$=>e.value=$),title:"Models Library",class:"w-7xl h-[75dvh] text-ui-text-text block-border bg-window-bg flex flex-col",resize:""},{default:S(()=>[j("h1",DA,[T(k,{name:"ui/asset-browser"}),C[4]||(C[4]=ke(" Asset Browser ",-1))]),j("div",BA,[j("div",qA,[j("div",LA,[C[5]||(C[5]=j("h2",null,"Categories",-1)),T(M,null,{default:S(()=>[T(p(ip),{modelValue:p(l),"onUpdate:modelValue":C[0]||(C[0]=$=>Lt(l)?l.value=$:null)},{default:S(()=>[(E(!0),ne(Ie,null,ot(p(r),$=>(E(),ne("div",{key:"category_"+$.title,class:"flex flex-col gap-1"},[T(R,{label:$.title,reverse:"",class:"items-center"},{default:S(()=>[T(P,{value:$.title},null,8,["value"])]),_:2},1032,["label"])]))),128))]),_:1},8,["modelValue"])]),_:1})]),oo(j("input",{"onUpdate:modelValue":C[1]||(C[1]=$=>Lt(o)?o.value=$:null),type:"text",class:"input",placeholder:"Search models"},null,512),[[aa,p(o)]]),T(A,{class:"mt-auto"})]),j("div",VA,[T(M,null,{default:S(()=>[j("div",FA,[(E(!0),ne(Ie,null,ot(p(a),$=>(E(),ne("div",{key:"asset_"+$.id,class:no(["w-32 rounded p-1 cursor-pointer hover:bg-gray-500",{"bg-browser-selected":p(c)?.name===$.name}]),onClick:Y=>p(f)($,y)},[j("div",$A,[j("img",{src:$.thumbnail_url,alt:$.name,class:"object-contain object-center size-full",loading:"lazy"},null,8,UA)]),j("div",zA,Ce($.name),1)],10,NA))),128))])]),_:1})]),p(c)?(E(),ne("div",HA,[T(M,null,{default:S(()=>[j("div",jA,[T(O,{asset:p(c),authors:p(d)},null,8,["asset","authors"]),T(R,{label:"Resolution",class:"z-10 mt-2"},{default:S(()=>[T(D,{modelValue:v.value,"onUpdate:modelValue":C[2]||(C[2]=$=>v.value=$),class:"z-10",items:m.value},null,8,["modelValue","items"])]),_:1}),j("div",null,[C[6]||(C[6]=j("b",null,"Size: ",-1)),ke(Ce(g.value?.size),1)])])]),_:1}),j("button",{type:"button",class:"btn mt-auto",onClick:b},"Import model")])):ue("",!0)])]),_:1},8,["modelValue"])}}}),Hh="/favicon.svg",jh="0.8.0",GA={class:"flex max-w-xl flex-col text-ui-menu-bg-text"},KA={class:"flex items-center gap-4 p-4"},YA={class:"text-sm"},XA={class:"flex flex-1 justify-between gap-2.5 p-4"},ZA={class:"flex w-[200px] flex-col justify-end gap-1 text-sm *:rounded *:p-0.5 *:leading-none **:inline-block *:hover:bg-gray-500/50"},QA={href:"https://www.blender.org/",target:"_blank"},JA={href:"https://threejs.org/",target:"_blank"},eP={href:"https://vuejs.org/",target:"_blank"},tP={href:"https://github.com/zabastx/vue-mixeur",target:"_blank"},nP=L({__name:"ModalAbout",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(n,{expose:e}){const t=Et(n,"modelValue");return e({open:()=>t.value=!0,close:()=>t.value=!1}),(o,r)=>{const i=vt,s=Pa;return E(),B(s,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=a=>t.value=a),title:"About Mixeur",class:"max-w-xl bg-editor-border"},{default:S(()=>[j("div",GA,[j("div",KA,[r[2]||(r[2]=j("img",{class:"inline-block size-[1em] scale-125 text-5xl",src:Hh,alt:"","aria-hidden":""},null,-1)),j("div",null,[r[1]||(r[1]=j("h1",{class:"text-2xl font-bold text-white"},"Vue Mixeur",-1)),j("p",YA,"Version "+Ce(p(jh)),1)])]),j("div",XA,[r[7]||(r[7]=j("div",{class:"w-full max-w-xs space-y-4"},[j("p",{class:"text-sm"},"A Blender-like web-based 3D editor built with Vue.js and Three.js"),j("div",null,[j("h3",{class:"mb-2 text-sm font-semibold"},"Credits"),j("div",{class:"space-y-1 text-xs"},[j("div",null,[j("b",null,"Inspired by:"),ke(" Blender")]),j("div",null,[j("b",null,"Built with:"),ke(" Vue.js, Three.js")])])]),j("p",{class:"text-xs"},"Licensed under MIT License")],-1)),j("div",ZA,[j("a",QA,[T(i,{name:"misc/url"}),r[3]||(r[3]=ke(" Blender ",-1))]),j("a",JA,[T(i,{name:"misc/url"}),r[4]||(r[4]=ke(" Three.js ",-1))]),j("a",eP,[T(i,{name:"misc/url"}),r[5]||(r[5]=ke(" Vue.js ",-1))]),j("a",tP,[T(i,{name:"misc/url"}),r[6]||(r[6]=ke(" GitHub repository ",-1))])])])])]),_:1},8,["modelValue"])}}}),oP=L({__name:"ModalCollection",setup(n){return(e,t)=>{const o=nP,r=WA,i=kA,s=fA;return E(),ne(Ie,null,[T(o,{modelValue:p(Tn).about,"onUpdate:modelValue":t[0]||(t[0]=a=>p(Tn).about=a)},null,8,["modelValue"]),T(r,{modelValue:p(Tn).modelsLibrary,"onUpdate:modelValue":t[1]||(t[1]=a=>p(Tn).modelsLibrary=a)},null,8,["modelValue"]),T(i,{modelValue:p(Tn).textureLibrary,"onUpdate:modelValue":t[2]||(t[2]=a=>p(Tn).textureLibrary=a),callback:p(Fh).textureLibrary},null,8,["modelValue","callback"]),T(s,{modelValue:p(Tn).renderImage,"onUpdate:modelValue":t[3]||(t[3]=a=>p(Tn).renderImage=a)},null,8,["modelValue"])],64)}}}),rP={class:"toast-content"},sP={class:"flex items-start gap-2"},iP={class:"flex-1"},aP=L({__name:"MxToast",setup(n,{expose:e}){const t=N([]);let o=0;const r=l=>{const u=l.id||`toast-${++o}`,c={id:u,title:l.title,message:l.message,type:l.type||"info",duration:l.duration||5e3,open:!0};return t.value.push(c),u},i=l=>{const u=t.value.findIndex(c=>c.id===l);u>-1&&t.value.splice(u,1)},s=()=>{t.value=[]},a=l=>({info:"toast-icon-info",success:"toast-icon-success",warning:"toast-icon-warning",error:"toast-icon-error"})[l];return e({addToast:r,removeToast:i,clearAllToasts:s}),(l,u)=>(E(),ne(Ie,null,[T(p(iC),{class:"fixed right-4 bottom-4 z-50 flex max-w-sm flex-col gap-2"}),(E(!0),ne(Ie,null,ot(t.value,c=>(E(),B(p(tC),{key:c.id,open:c.open,duration:c.duration,"onUpdate:open":d=>!d&&i(c.id)},{default:S(()=>[j("div",rP,[j("div",sP,[j("div",{class:no(["toast-icon",a(c.type)])},null,2),j("div",iP,[c.title?(E(),B(p(oC),{key:0,class:"toast-title"},{default:S(()=>[ke(Ce(c.title),1)]),_:2},1024)):ue("",!0),T(p(JS),{class:"toast-description"},{default:S(()=>[ke(Ce(c.message),1)]),_:2},1024)]),T(p(ZS),{class:"toast-close"},{default:S(()=>[...u[0]||(u[0]=[j("span",{class:"sr-only"},"Close",-1),j("svg",{class:"h-3 w-3",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[j("path",{d:"m11.7816 4.03157c.0824-.08241.0824-.21569 0-.2981-.0824-.08241-.2157-.08241-.2981 0L7.50002 7.70792 3.51852 3.73307c-.08241-.08241-.21569-.08241-.2981 0-.08241.08241-.08241.21569 0 .2981L7.20192 7.99997 3.22002 11.9819c-.08241.0824-.08241.2157 0 .2981.08241.0824.21569.0824.2981 0L7.50002 8.30202l3.98148 3.98148c.0824.0824.2157.0824.2981 0 .0824-.0824.0824-.2157 0-.2981L7.79812 7.99997l3.98148-3.9684z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})],-1)])]),_:1})])])]),_:2},1032,["open","duration","onUpdate:open"]))),128))],64))}}),lP=hr(aP,[["__scopeId","data-v-11301831"]]),uP={key:0,class:"fixed bottom-16 left-4 z-50 w-sm space-y-2","data-testid":"loading-progress"},cP={class:"mb-2 flex items-center justify-between"},dP={class:"truncate text-sm font-medium"},fP={class:"text-xs opacity-70"},pP={class:"mb-2 h-2 w-full rounded-full bg-ui-number-inner"},hP={class:"flex justify-between text-xs opacity-70"},mP={key:0},vP=L({__name:"ModelLoadingProgress",setup(n){const e=Gs(),t=F(()=>e.getActiveLoadings());function o(i){if(i===0)return"0 B";const s=1024,a=["B","KB","MB","GB"],l=Math.floor(Math.log(i)/Math.log(s));return parseFloat((i/Math.pow(s,l)).toFixed(1))+" "+a[l]}function r(i){const s=Math.ceil(i/1e3);if(s<60)return`${s}s remaining`;const a=Math.floor(s/60),l=s%60;return`${a}m ${l}s remaining`}return(i,s)=>t.value.length>0?(E(),ne("div",uP,[(E(!0),ne(Ie,null,ot(t.value,a=>(E(),ne("div",{key:a.id,class:"rounded-lg border border-ui-menu-bg-outline bg-panel-background p-4 text-white shadow-lg"},[j("div",cP,[j("h3",dP,Ce(a.filename),1),j("span",fP,Ce(Math.round(a.percentage))+"%",1)]),j("div",pP,[j("div",{class:"h-2 rounded-full bg-ui-radio-inner-selected transition-all duration-300 ease-out",style:wt({width:`${a.percentage}%`})},null,4)]),j("div",hP,[j("span",null,Ce(o(a.loaded))+" / "+Ce(o(a.total)),1),a.estimatedTimeRemaining?(E(),ne("span",mP,Ce(r(a.estimatedTimeRemaining)),1)):ue("",!0)])]))),128))])):ue("",!0)}}),ka=Ws("app",()=>{const n=N(!1),e=N(!1),t=N(!1),o=at();function r(a){We(a,"pointerenter",()=>n.value=!0),We(a,"pointerleave",()=>n.value=!1),We(a,"pointerdown",l=>{l.button===K.MOUSE.MIDDLE&&o.controls&&(o.controls.screenSpacePanning=!l.ctrlKey)}),We(window,"keydown",l=>{if(e.value=l.ctrlKey,t.value=l.shiftKey,!!n.value)switch(l.code){case"Numpad5":o.switchCamera();break;case"Numpad1":l.preventDefault(),i({z:1,invert:l.ctrlKey});break;case"Numpad3":l.preventDefault(),i({x:1,invert:l.ctrlKey});break;case"Numpad7":l.preventDefault(),i({y:1,invert:l.ctrlKey});break;case"KeyG":o.setTransformMode("translate");break;case"KeyR":o.setTransformMode("rotate");break;case"KeyS":o.setTransformMode("scale");break;case"Delete":o.selectedObject instanceof K.Object3D&&o.deleteFromScene(o.selectedObject);break}}),We(window,"keyup",l=>{e.value=l.ctrlKey,t.value=l.shiftKey}),We(a,"wheel",l=>{l.ctrlKey&&l.preventDefault();const{activeCamera:u,controls:c}=o;if(!c)return;const d=l.deltaY*-.01;if(u instanceof K.PerspectiveCamera){const f=new K.Vector3;f.subVectors(c.target,u.position).normalize();const h=l.shiftKey?d:l.ctrlKey?d*100:d*10;u.position.addScaledVector(f,h)}else if(u instanceof K.OrthographicCamera){const f=1+d*.1;u.zoom*=f,u.updateProjectionMatrix()}c.update()})}function i({x:a=0,y:l=0,z:u=0,invert:c=!1}){const{activeCamera:d,controls:f}=o;if(!f||!d)return;const h=c?-1:1,m=d.position.distanceTo(f.target),v=new K.Vector3(a*h,l*h,u*h).multiplyScalar(m);d.position.copy(f.target).add(v),d.up.set(0,1,0),d.lookAt(f.target),f.update()}const s=N(!0);return{pointerOnCanvas:n,isCtrlDown:e,isShiftDown:t,useHotKeys:r,showStatusBar:s,setView:i}}),gP={class:"flex items-center gap-1 text-xl select-none"},yP={class:"text-xs"},_P=L({__name:"KeymapInformation",setup(n){const e=ka(),t=[{icon:"keys/lmb",text:"Select",key:null},{icon:"keys/mmb",text:"Rotate View",key:null},{icon:"keys/lmb",text:"Select Toggle",key:"shift"},{icon:"keys/mmb",text:"Screen Space Pan View",key:"shift"},{icon:"keys/mmb",text:"Pan View",key:"ctrl"}],o=F(()=>e.isCtrlDown?t.filter(r=>r.key==="ctrl"):e.isShiftDown?t.filter(r=>r.key==="shift"):t.filter(r=>!r.key));return(r,i)=>{const s=vt;return oo((E(),ne("div",gP,[(E(!0),ne(Ie,null,ot(o.value,a=>(E(),ne("div",{key:a.text,class:"align-center flex"},[T(s,{name:a.icon},null,8,["name"]),j("span",yP,Ce(a.text),1)]))),128))],512)),[[Ps,p(e).pointerOnCanvas]])}}}),bP={class:"flex h-6 items-center justify-end gap-1 bg-status-background px-2 py-1 text-xs text-header-text"},wP={class:"version"},xP=L({__name:"StatusBar",setup(n){const e=at();return(t,o)=>(E(),ne("footer",bP,[T(_P,{class:"mr-auto"}),p(e).monitor.memory?(E(),ne(Ie,{key:0},[j("div",null,"RAM: "+Ce(p(e).monitor.memory)+" MB",1),o[0]||(o[0]=j("div",{class:"divider h-full w-px bg-header-text"},null,-1))],64)):ue("",!0),j("div",null,"Geometries: "+Ce(p(e).monitor.geometries)+", Textures: "+Ce(p(e).monitor.textures),1),o[1]||(o[1]=j("div",{class:"divider h-full w-px bg-header-text"},null,-1)),j("div",wP,Ce(p(jh)),1)]))}}),SP={class:"flex justify-center p-1"},CP={class:"flex flex-col gap-1"},TP=L({__name:"ObjectVisibility",setup(n){const e=at(),t=F(()=>e.selectedObject);return(o,r)=>{const i=pr,s=ht;return E(),ne("div",SP,[j("div",CP,[T(s,{reverse:"",label:"Selectable"},{default:S(()=>[T(i,{modelValue:t.value.userData.isSelectable,"onUpdate:modelValue":r[0]||(r[0]=a=>t.value.userData.isSelectable=a)},null,8,["modelValue"])]),_:1}),T(s,{reverse:"",label:"Frustum Culled"},{default:S(()=>[T(i,{modelValue:t.value.frustumCulled,"onUpdate:modelValue":r[1]||(r[1]=a=>t.value.frustumCulled=a)},null,8,["modelValue"])]),_:1}),"isLight"in t.value?ue("",!0):(E(),ne(Ie,{key:0},[T(s,{reverse:"",label:"Cast shadow"},{default:S(()=>[T(i,{modelValue:t.value.castShadow,"onUpdate:modelValue":r[2]||(r[2]=a=>t.value.castShadow=a)},null,8,["modelValue"])]),_:1}),T(s,{reverse:"",label:"Receive shadow"},{default:S(()=>[T(i,{modelValue:t.value.receiveShadow,"onUpdate:modelValue":r[3]||(r[3]=a=>t.value.receiveShadow=a)},null,8,["modelValue"])]),_:1})],64))])])}}}),EP={key:0,class:"flex flex-col items-end gap-0.5"},MP=L({__name:"TransformScale",setup(n){const e=at(),t={minimumFractionDigits:3};return(o,r)=>{const i=pn,s=ht;return p(e).selectedObject?(E(),ne("div",EP,[T(s,{label:"Scale X"},{default:S(()=>[T(i,{modelValue:p(e).selectedObject.scale.x,"onUpdate:modelValue":r[0]||(r[0]=a=>p(e).selectedObject.scale.x=a),step:.01,"format-options":t},null,8,["modelValue"])]),_:1}),T(s,{label:"Y"},{default:S(()=>[T(i,{modelValue:p(e).selectedObject.scale.y,"onUpdate:modelValue":r[1]||(r[1]=a=>p(e).selectedObject.scale.y=a),"format-options":t,step:.01},null,8,["modelValue"])]),_:1}),T(s,{label:"Z"},{default:S(()=>[T(i,{modelValue:p(e).selectedObject.scale.z,"onUpdate:modelValue":r[2]||(r[2]=a=>p(e).selectedObject.scale.z=a),"format-options":t,step:.01},null,8,["modelValue"])]),_:1})])):ue("",!0)}}}),AP={class:"flex flex-col items-end gap-0.5"},PP=L({__name:"TransformRotation",setup(n){const e=at(),t=F({get(){return K.MathUtils.radToDeg(e.selectedObject.rotation.x)},set(s){e.selectedObject&&(e.selectedObject.rotation.x=K.MathUtils.degToRad(s))}}),o=F({get(){return K.MathUtils.radToDeg(e.selectedObject.rotation.y)},set(s){e.selectedObject&&(e.selectedObject.rotation.y=K.MathUtils.degToRad(s))}}),r=F({get(){return K.MathUtils.radToDeg(e.selectedObject.rotation.z)},set(s){e.selectedObject&&(e.selectedObject.rotation.z=K.MathUtils.degToRad(s))}}),i={style:"unit",unitDisplay:"narrow",unit:"degree"};return(s,a)=>{const l=pn,u=ht;return E(),ne("div",AP,[T(u,{label:"Rotation X"},{default:S(()=>[T(l,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=c=>t.value=c),label:"Rotation X","format-options":i},null,8,["modelValue"])]),_:1}),T(u,{label:"Y"},{default:S(()=>[T(l,{modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=c=>o.value=c),label:"Y","format-options":i},null,8,["modelValue"])]),_:1}),T(u,{label:"Z"},{default:S(()=>[T(l,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=c=>r.value=c),label:"Z","format-options":i},null,8,["modelValue"])]),_:1})])}}}),IP={key:0,class:"flex flex-col items-end gap-0.5"},RP=L({__name:"TransformLocation",setup(n){const e=at();return(t,o)=>{const r=pn,i=ht;return p(e).selectedObject?(E(),ne("div",IP,[T(i,{label:"Location X"},{default:S(()=>[T(r,{modelValue:p(e).selectedObject.position.x,"onUpdate:modelValue":o[0]||(o[0]=s=>p(e).selectedObject.position.x=s),step:.01,label:"Location X"},null,8,["modelValue"])]),_:1}),T(i,{label:"Y"},{default:S(()=>[T(r,{modelValue:p(e).selectedObject.position.y,"onUpdate:modelValue":o[1]||(o[1]=s=>p(e).selectedObject.position.y=s),step:.01,label:"Y"},null,8,["modelValue"])]),_:1}),T(i,{label:"Z"},{default:S(()=>[T(r,{modelValue:p(e).selectedObject.position.z,"onUpdate:modelValue":o[2]||(o[2]=s=>p(e).selectedObject.position.z=s),step:.01,label:"Z"},null,8,["modelValue"])]),_:1})])):ue("",!0)}}}),OP={class:"p-1"},kP=L({__name:"ObjectProperties",setup(n){const e=at();return(t,o)=>{const r=ht,i=RP,s=PP,a=MP,l=Wn,u=TP,c=fr;return p(e).selectedObject?(E(),ne(Ie,{key:0},[T(r,{label:"Name",class:"mb-2.5 text-sm"},{default:S(()=>[oo(j("input",{"onUpdate:modelValue":o[0]||(o[0]=d=>p(e).selectedObject.name=d),type:"text",class:"input",onChange:o[1]||(o[1]=(...d)=>p(e).updateScene&&p(e).updateScene(...d))},null,544),[[aa,p(e).selectedObject.name]])]),_:1}),T(c,{collapsible:"",type:"multiple",class:"flex gap-0.5 flex-col"},{default:S(()=>[T(l,{label:"Transform",item:{value:"transform"}},{default:S(()=>[j("div",OP,[T(i),T(s,{class:"my-2"}),T(a)])]),_:1}),T(l,{label:"Visibility",item:{value:"visibility"}},{default:S(()=>[T(u)]),_:1})]),_:1})],64)):ue("",!0)}}});function Wh(n,e){return(Math.round(n/e*1e3)/1e3).toPrecision(3)}const DP={class:"border border-ui-slider-outline rounded"},BP={class:"flex justify-between items-center text-ui-slider-text text-xs h-full relative z-1 p-1"},qP=L({__name:"ColorPickerRgb",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=Et(n,"modelValue"),t=F({set(a){e.value={...e.value,r:a[0]}},get(){return[e.value.r||0]}}),o=F({set(a){e.value={...e.value,g:a[0]}},get(){return[e.value.g||0]}}),r=F({set(a){e.value={...e.value,b:a[0]}},get(){return[e.value.b||0]}}),i=F({set(a){e.value={...e.value,a:a[0]}},get(){return[e.value.a||0]}}),s=[{prop:"red",title:"Red",value:t,min:0,max:255,step:1},{prop:"green",title:"Green",value:o,min:0,max:255,step:1},{prop:"blue",title:"Blue",value:r,min:0,max:255,step:1},{prop:"alpha",title:"Alpha",value:i,min:0,max:1,step:.001}];return(a,l)=>{const u=ac;return E(),ne("div",DP,[(E(),ne(Ie,null,ot(s,c=>T(u,{key:c.prop,modelValue:c.value.value,"onUpdate:modelValue":d=>c.value.value=d,root:{min:c.min,max:c.max,step:c.step},group:""},{default:S(()=>[j("div",BP,[j("span",null,Ce(c.title),1),j("span",null,Ce(p(Wh)(c.value.value[0]||0,c.max)),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","root"])),64))])}}}),LP={class:"border border-ui-slider-outline rounded"},VP={class:"flex justify-between items-center text-ui-slider-text text-xs h-full relative z-1 p-1"},FP=L({__name:"ColorPickerHsv",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=Et(n,"modelValue"),t=F({set(a){e.value={...e.value,h:a[0]}},get(){return[e.value.h||0]}}),o=F({set(a){e.value={...e.value,s:a[0]}},get(){return[e.value.s||0]}}),r=F({set(a){e.value={...e.value,v:a[0]}},get(){return[e.value.v||0]}}),i=F({set(a){e.value={...e.value,a:a[0]}},get(){return[e.value.a||0]}}),s=[{prop:"hue",title:"Hue",value:t,min:0,max:360,step:1},{prop:"saturation",title:"Saturation",value:o,min:0,max:100,step:1},{prop:"value",title:"Value",value:r,min:0,max:100,step:1},{prop:"alpha",title:"Alpha",value:i,min:0,max:1,step:.001}];return(a,l)=>{const u=ac;return E(),ne("div",LP,[(E(),ne(Ie,null,ot(s,c=>T(u,{key:c.prop,modelValue:c.value.value,"onUpdate:modelValue":d=>c.value.value=d,root:{min:c.min,max:c.max,step:c.step},group:""},{default:S(()=>[j("div",VP,[j("span",null,Ce(c.title),1),j("span",null,Ce(p(Wh)(c.value.value[0]||0,c.max)),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","root"])),64))])}}});var ct,ta,Gh,pu,Kh,To={},bc=[],NP=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function xo(n,e){for(var t in e)n[t]=e[t];return n}function Yh(n){var e=n.parentNode;e&&e.removeChild(n)}function Qe(n,e,t){var o,r,i,s,a=arguments;if(e=xo({},e),arguments.length>3)for(t=[t],o=3;o<arguments.length;o++)t.push(a[o]);if(t!=null&&(e.children=t),n!=null&&n.defaultProps!=null)for(r in n.defaultProps)e[r]===void 0&&(e[r]=n.defaultProps[r]);return s=e.key,(i=e.ref)!=null&&delete e.ref,s!=null&&delete e.key,hu(n,e,s,i)}function hu(n,e,t,o){var r={type:n,props:e,key:t,ref:o,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return ct.vnode&&ct.vnode(r),r}function Da(n){return n.children}function $P(n){if(n==null||typeof n=="boolean")return null;if(typeof n=="string"||typeof n=="number")return hu(null,n,null,null);if(n.__e!=null||n.__c!=null){var e=hu(n.type,n.props,n.key,null);return e.__e=n.__e,e}return n}function Nr(n,e){this.props=n,this.context=e}function na(n,e){if(e==null)return n.__p?na(n.__p,n.__p.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?na(n):null}function Xh(n){var e,t;if((n=n.__p)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Xh(n)}}function wl(n){(!n.__d&&(n.__d=!0)&&ta.push(n)===1||pu!==ct.debounceRendering)&&(pu=ct.debounceRendering,(ct.debounceRendering||Gh)(UP))}function UP(){var n,e,t,o,r,i,s,a;for(ta.sort(function(l,u){return u.__v.__b-l.__v.__b});n=ta.pop();)n.__d&&(t=void 0,o=void 0,i=(r=(e=n).__v).__e,s=e.__P,a=e.u,e.u=!1,s&&(t=[],o=xc(s,r,xo({},r),e.__n,s.ownerSVGElement!==void 0,null,t,a,i??na(r)),Qh(t,r),o!=i&&Xh(r)))}function Zh(n,e,t,o,r,i,s,a,l){var u,c,d,f,h,m,v,g=t&&t.__k||bc,y=g.length;if(a==To&&(a=i!=null?i[0]:y?na(t,0):null),u=0,e.__k=wc(e.__k,function(_){if(_!=null){if(_.__p=e,_.__b=e.__b+1,(d=g[u])===null||d&&_.key==d.key&&_.type===d.type)g[u]=void 0;else for(c=0;c<y;c++){if((d=g[c])&&_.key==d.key&&_.type===d.type){g[c]=void 0;break}d=null}if(f=xc(n,_,d=d||To,o,r,i,s,null,a,l),(c=_.ref)&&d.ref!=c&&(v||(v=[])).push(c,_.__c||f,_),f!=null){if(m==null&&(m=f),_.l!=null)f=_.l,_.l=null;else if(i==d||f!=a||f.parentNode==null){e:if(a==null||a.parentNode!==n)n.appendChild(f);else{for(h=a,c=0;(h=h.nextSibling)&&c<y;c+=2)if(h==f)break e;n.insertBefore(f,a)}e.type=="option"&&(n.value="")}a=f.nextSibling,typeof e.type=="function"&&(e.l=f)}}return u++,_}),e.__e=m,i!=null&&typeof e.type!="function")for(u=i.length;u--;)i[u]!=null&&Yh(i[u]);for(u=y;u--;)g[u]!=null&&em(g[u],g[u]);if(v)for(u=0;u<v.length;u++)Jh(v[u],v[++u],v[++u])}function wc(n,e,t){if(t==null&&(t=[]),n==null||typeof n=="boolean")e&&t.push(e(null));else if(Array.isArray(n))for(var o=0;o<n.length;o++)wc(n[o],e,t);else t.push(e?e($P(n)):n);return t}function zP(n,e,t,o,r){var i;for(i in t)i in e||wf(n,i,null,t[i],o);for(i in e)r&&typeof e[i]!="function"||i==="value"||i==="checked"||t[i]===e[i]||wf(n,i,e[i],t[i],o)}function bf(n,e,t){e[0]==="-"?n.setProperty(e,t):n[e]=typeof t=="number"&&NP.test(e)===!1?t+"px":t??""}function wf(n,e,t,o,r){var i,s,a,l,u;if(!((e=r?e==="className"?"class":e:e==="class"?"className":e)==="key"||e==="children"))if(e==="style")if(i=n.style,typeof t=="string")i.cssText=t;else{if(typeof o=="string"&&(i.cssText="",o=null),o)for(s in o)t&&s in t||bf(i,s,"");if(t)for(a in t)o&&t[a]===o[a]||bf(i,a,t[a])}else e[0]==="o"&&e[1]==="n"?(l=e!==(e=e.replace(/Capture$/,"")),u=e.toLowerCase(),e=(u in n?u:e).slice(2),t?(o||n.addEventListener(e,xf,l),(n.t||(n.t={}))[e]=t):n.removeEventListener(e,xf,l)):e!=="list"&&e!=="tagName"&&e!=="form"&&!r&&e in n?n[e]=t??"":typeof t!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?t==null||t===!1?n.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):n.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),t):t==null||t===!1?n.removeAttribute(e):n.setAttribute(e,t))}function xf(n){return this.t[n.type](ct.event?ct.event(n):n)}function xc(n,e,t,o,r,i,s,a,l,u){var c,d,f,h,m,v,g,y,_,b,x=e.type;if(e.constructor!==void 0)return null;(c=ct.__b)&&c(e);try{e:if(typeof x=="function"){if(y=e.props,_=(c=x.contextType)&&o[c.__c],b=c?_?_.props.value:c.__p:o,t.__c?g=(d=e.__c=t.__c).__p=d.__E:("prototype"in x&&x.prototype.render?e.__c=d=new x(y,b):(e.__c=d=new Nr(y,b),d.constructor=x,d.render=jP),_&&_.sub(d),d.props=y,d.state||(d.state={}),d.context=b,d.__n=o,f=d.__d=!0,d.__h=[]),d.__s==null&&(d.__s=d.state),x.getDerivedStateFromProps!=null&&xo(d.__s==d.state?d.__s=xo({},d.__s):d.__s,x.getDerivedStateFromProps(y,d.__s)),f)x.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&s.push(d);else{if(x.getDerivedStateFromProps==null&&a==null&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(y,b),!a&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(y,d.__s,b)===!1){for(d.props=y,d.state=d.__s,d.__d=!1,d.__v=e,e.__e=l!=null?l!==t.__e?l:t.__e:null,e.__k=t.__k,c=0;c<e.__k.length;c++)e.__k[c]&&(e.__k[c].__p=e);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(y,d.__s,b)}for(h=d.props,m=d.state,d.context=b,d.props=y,d.state=d.__s,(c=ct.__r)&&c(e),d.__d=!1,d.__v=e,d.__P=n,c=d.render(d.props,d.state,d.context),e.__k=wc(c!=null&&c.type==Da&&c.key==null?c.props.children:c),d.getChildContext!=null&&(o=xo(xo({},o),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(v=d.getSnapshotBeforeUpdate(h,m)),Zh(n,e,t,o,r,i,s,l,u),d.base=e.__e;c=d.__h.pop();)d.__s&&(d.state=d.__s),c.call(d);f||h==null||d.componentDidUpdate==null||d.componentDidUpdate(h,m,v),g&&(d.__E=d.__p=null)}else e.__e=HP(t.__e,e,t,o,r,i,s,u);(c=ct.diffed)&&c(e)}catch(C){ct.__e(C,e,t)}return e.__e}function Qh(n,e){for(var t;t=n.pop();)try{t.componentDidMount()}catch(o){ct.__e(o,t.__v)}ct.__c&&ct.__c(e)}function HP(n,e,t,o,r,i,s,a){var l,u,c,d,f=t.props,h=e.props;if(r=e.type==="svg"||r,n==null&&i!=null){for(l=0;l<i.length;l++)if((u=i[l])!=null&&(e.type===null?u.nodeType===3:u.localName===e.type)){n=u,i[l]=null;break}}if(n==null){if(e.type===null)return document.createTextNode(h);n=r?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),i=null}return e.type===null?f!==h&&(i!=null&&(i[i.indexOf(n)]=null),n.data=h):e!==t&&(i!=null&&(i=bc.slice.call(n.childNodes)),c=(f=t.props||To).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,a||(d||c)&&(d&&c&&d.__html==c.__html||(n.innerHTML=d&&d.__html||"")),zP(n,h,f,r,a),e.__k=e.props.children,d||Zh(n,e,t,o,e.type!=="foreignObject"&&r,i,s,To,a),a||("value"in h&&h.value!==void 0&&h.value!==n.value&&(n.value=h.value==null?"":h.value),"checked"in h&&h.checked!==void 0&&h.checked!==n.checked&&(n.checked=h.checked))),n}function Jh(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(o){ct.__e(o,t)}}function em(n,e,t){var o,r,i;if(ct.unmount&&ct.unmount(n),(o=n.ref)&&Jh(o,null,e),t||typeof n.type=="function"||(t=(r=n.__e)!=null),n.__e=n.l=null,(o=n.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){ct.__e(s,e)}o.base=o.__P=null}if(o=n.__k)for(i=0;i<o.length;i++)o[i]&&em(o[i],e,t);r!=null&&Yh(r)}function jP(n,e,t){return this.constructor(n,t)}function WP(n,e,t){var o,r,i;ct.__p&&ct.__p(n,e),r=(o=t===Kh)?null:e.__k,n=Qe(Da,null,[n]),i=[],xc(e,e.__k=n,r||To,To,e.ownerSVGElement!==void 0,r?null:bc.slice.call(e.childNodes),i,!1,To,o),Qh(i,n)}ct={},Nr.prototype.setState=function(n,e){var t=this.__s!==this.state&&this.__s||(this.__s=xo({},this.state));(typeof n!="function"||(n=n(t,this.props)))&&xo(t,n),n!=null&&this.__v&&(this.u=!1,e&&this.__h.push(e),wl(this))},Nr.prototype.forceUpdate=function(n){this.__v&&(n&&this.__h.push(n),this.u=!0,wl(this))},Nr.prototype.render=Da,ta=[],Gh=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pu=ct.debounceRendering,ct.__e=function(n,e,t){for(var o;e=e.__p;)if((o=e.__c)&&!o.__p)try{if(o.constructor&&o.constructor.getDerivedStateFromError!=null)o.setState(o.constructor.getDerivedStateFromError(n));else{if(o.componentDidCatch==null)continue;o.componentDidCatch(n)}return wl(o.__E=o)}catch(r){n=r}throw n},Kh=To;function GP(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function KP(n,e,t){return e&&GP(n.prototype,e),n}function tn(){return tn=Object.assign||function(n){for(var e=arguments,t=1;t<arguments.length;t++){var o=e[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])}return n},tn.apply(this,arguments)}var YP="[-\\+]?\\d+%?",XP="[-\\+]?\\d*\\.\\d+%?",Jo="(?:"+XP+")|(?:"+YP+")",tm="[\\s|\\(]+("+Jo+")[,|\\s]+("+Jo+")[,|\\s]+("+Jo+")\\s*\\)?",nm="[\\s|\\(]+("+Jo+")[,|\\s]+("+Jo+")[,|\\s]+("+Jo+")[,|\\s]+("+Jo+")\\s*\\)?",ZP=new RegExp("rgb"+tm),QP=new RegExp("rgba"+nm),JP=new RegExp("hsl"+tm),eI=new RegExp("hsla"+nm),Ba="^(?:#?|0x?)",er="([0-9a-fA-F]{1})",tr="([0-9a-fA-F]{2})",tI=new RegExp(Ba+er+er+er+"$"),nI=new RegExp(Ba+er+er+er+er+"$"),oI=new RegExp(Ba+tr+tr+tr+"$"),rI=new RegExp(Ba+tr+tr+tr+tr+"$"),sI=2e3,iI=4e4,Di=Math.log,Pr=Math.round,_s=Math.floor;function yn(n,e,t){return Math.min(Math.max(n,e),t)}function Qt(n,e){var t=n.indexOf("%")>-1,o=parseFloat(n);return t?e/100*o:o}function Jt(n){return parseInt(n,16)}function Yo(n){return n.toString(16).padStart(2,"0")}var qr=(function(){function n(t,o){this.$={h:0,s:0,v:0,a:1},t&&this.set(t),this.onChange=o,this.initialValue=tn({},this.$)}var e=n.prototype;return e.set=function(o){if(typeof o=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(o)?this.hexString=o:/^rgba?/.test(o)?this.rgbString=o:/^hsla?/.test(o)&&(this.hslString=o);else if(typeof o=="object")o instanceof n?this.hsva=o.hsva:"r"in o&&"g"in o&&"b"in o?this.rgb=o:"h"in o&&"s"in o&&"v"in o?this.hsv=o:"h"in o&&"s"in o&&"l"in o?this.hsl=o:"kelvin"in o&&(this.kelvin=o.kelvin);else throw new Error("Invalid color value")},e.setChannel=function(o,r,i){var s;this[o]=tn({},this[o],(s={},s[r]=i,s))},e.reset=function(){this.hsva=this.initialValue},e.clone=function(){return new n(this)},e.unbind=function(){this.onChange=void 0},n.hsvToRgb=function(o){var r=o.h/60,i=o.s/100,s=o.v/100,a=_s(r),l=r-a,u=s*(1-i),c=s*(1-l*i),d=s*(1-(1-l)*i),f=a%6,h=[s,c,u,u,d,s][f],m=[d,s,s,c,u,u][f],v=[u,u,d,s,s,c][f];return{r:yn(h*255,0,255),g:yn(m*255,0,255),b:yn(v*255,0,255)}},n.rgbToHsv=function(o){var r=o.r/255,i=o.g/255,s=o.b/255,a=Math.max(r,i,s),l=Math.min(r,i,s),u=a-l,c=0,d=a,f=a===0?0:u/a;switch(a){case l:c=0;break;case r:c=(i-s)/u+(i<s?6:0);break;case i:c=(s-r)/u+2;break;case s:c=(r-i)/u+4;break}return{h:c*60%360,s:yn(f*100,0,100),v:yn(d*100,0,100)}},n.hsvToHsl=function(o){var r=o.s/100,i=o.v/100,s=(2-r)*i,a=s<=1?s:2-s,l=a<1e-9?0:r*i/a;return{h:o.h,s:yn(l*100,0,100),l:yn(s*50,0,100)}},n.hslToHsv=function(o){var r=o.l*2,i=o.s*(r<=100?r:200-r)/100,s=r+i<1e-9?0:2*i/(r+i);return{h:o.h,s:yn(s*100,0,100),v:yn((r+i)/2,0,100)}},n.kelvinToRgb=function(o){var r=o/100,i,s,a;return r<66?(i=255,s=-155.25485562709179-.44596950469579133*(s=r-2)+104.49216199393888*Di(s),a=r<20?0:-254.76935184120902+.8274096064007395*(a=r-10)+115.67994401066147*Di(a)):(i=351.97690566805693+.114206453784165*(i=r-55)-40.25366309332127*Di(i),s=325.4494125711974+.07943456536662342*(s=r-50)-28.0852963507957*Di(s),a=255),{r:yn(_s(i),0,255),g:yn(_s(s),0,255),b:yn(_s(a),0,255)}},n.rgbToKelvin=function(o){for(var r=o.r,i=o.b,s=.4,a=sI,l=iI,u;l-a>s;){u=(l+a)*.5;var c=n.kelvinToRgb(u);c.b/c.r>=i/r?l=u:a=u}return u},KP(n,[{key:"hsv",get:function(){var o=this.$;return{h:o.h,s:o.s,v:o.v}},set:function(o){var r=this.$;if(o=tn({},r,o),this.onChange){var i={h:!1,v:!1,s:!1,a:!1};for(var s in r)i[s]=o[s]!=r[s];this.$=o,(i.h||i.s||i.v||i.a)&&this.onChange(this,i)}else this.$=o}},{key:"hsva",get:function(){return tn({},this.$)},set:function(o){this.hsv=o}},{key:"hue",get:function(){return this.$.h},set:function(o){this.hsv={h:o}}},{key:"saturation",get:function(){return this.$.s},set:function(o){this.hsv={s:o}}},{key:"value",get:function(){return this.$.v},set:function(o){this.hsv={v:o}}},{key:"alpha",get:function(){return this.$.a},set:function(o){this.hsv=tn({},this.hsv,{a:o})}},{key:"kelvin",get:function(){return n.rgbToKelvin(this.rgb)},set:function(o){this.rgb=n.kelvinToRgb(o)}},{key:"red",get:function(){var o=this.rgb;return o.r},set:function(o){this.rgb=tn({},this.rgb,{r:o})}},{key:"green",get:function(){var o=this.rgb;return o.g},set:function(o){this.rgb=tn({},this.rgb,{g:o})}},{key:"blue",get:function(){var o=this.rgb;return o.b},set:function(o){this.rgb=tn({},this.rgb,{b:o})}},{key:"rgb",get:function(){var o=n.hsvToRgb(this.$),r=o.r,i=o.g,s=o.b;return{r:Pr(r),g:Pr(i),b:Pr(s)}},set:function(o){this.hsv=tn({},n.rgbToHsv(o),{a:o.a===void 0?1:o.a})}},{key:"rgba",get:function(){return tn({},this.rgb,{a:this.alpha})},set:function(o){this.rgb=o}},{key:"hsl",get:function(){var o=n.hsvToHsl(this.$),r=o.h,i=o.s,s=o.l;return{h:Pr(r),s:Pr(i),l:Pr(s)}},set:function(o){this.hsv=tn({},n.hslToHsv(o),{a:o.a===void 0?1:o.a})}},{key:"hsla",get:function(){return tn({},this.hsl,{a:this.alpha})},set:function(o){this.hsl=o}},{key:"rgbString",get:function(){var o=this.rgb;return"rgb("+o.r+", "+o.g+", "+o.b+")"},set:function(o){var r,i,s,a,l=1;if((r=ZP.exec(o))?(i=Qt(r[1],255),s=Qt(r[2],255),a=Qt(r[3],255)):(r=QP.exec(o))&&(i=Qt(r[1],255),s=Qt(r[2],255),a=Qt(r[3],255),l=Qt(r[4],1)),r)this.rgb={r:i,g:s,b:a,a:l};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var o=this.rgba;return"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")"},set:function(o){this.rgbString=o}},{key:"hexString",get:function(){var o=this.rgb;return"#"+Yo(o.r)+Yo(o.g)+Yo(o.b)},set:function(o){var r,i,s,a,l=255;if((r=tI.exec(o))?(i=Jt(r[1])*17,s=Jt(r[2])*17,a=Jt(r[3])*17):(r=nI.exec(o))?(i=Jt(r[1])*17,s=Jt(r[2])*17,a=Jt(r[3])*17,l=Jt(r[4])*17):(r=oI.exec(o))?(i=Jt(r[1]),s=Jt(r[2]),a=Jt(r[3])):(r=rI.exec(o))&&(i=Jt(r[1]),s=Jt(r[2]),a=Jt(r[3]),l=Jt(r[4])),r)this.rgb={r:i,g:s,b:a,a:l/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var o=this.rgba;return"#"+Yo(o.r)+Yo(o.g)+Yo(o.b)+Yo(_s(o.a*255))},set:function(o){this.hexString=o}},{key:"hslString",get:function(){var o=this.hsl;return"hsl("+o.h+", "+o.s+"%, "+o.l+"%)"},set:function(o){var r,i,s,a,l=1;if((r=JP.exec(o))?(i=Qt(r[1],360),s=Qt(r[2],100),a=Qt(r[3],100)):(r=eI.exec(o))&&(i=Qt(r[1],360),s=Qt(r[2],100),a=Qt(r[3],100),l=Qt(r[4],1)),r)this.hsl={h:i,s,l:a,a:l};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var o=this.hsla;return"hsla("+o.h+", "+o.s+"%, "+o.l+"%, "+o.a+")"},set:function(o){this.hslString=o}}]),n})(),aI={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function Sc(n){var e,t=n.width,o=n.sliderSize,r=n.borderWidth,i=n.handleRadius,s=n.padding,a=n.sliderShape,l=n.layoutDirection==="horizontal";return o=(e=o)!=null?e:s*2+i*2,a==="circle"?{handleStart:n.padding+n.handleRadius,handleRange:t-s*2-i*2,width:t,height:t,cx:t/2,cy:t/2,radius:t/2-r/2}:{handleStart:o/2,handleRange:t-o,radius:o/2,x:0,y:0,width:l?o:t,height:l?t:o}}function lI(n,e){var t=e.hsva,o=e.rgb;switch(n.sliderType){case"red":return o.r/2.55;case"green":return o.g/2.55;case"blue":return o.b/2.55;case"alpha":return t.a*100;case"kelvin":var r=n.minTemperature,i=n.maxTemperature,s=i-r,a=(e.kelvin-r)/s*100;return Math.max(0,Math.min(a,100));case"hue":return t.h/=3.6;case"saturation":return t.s;default:return t.v}}function uI(n,e,t){var o=Sc(n),r=o.handleRange,i=o.handleStart,s;n.layoutDirection==="horizontal"?s=-1*t+r+i:s=e-i,s=Math.max(Math.min(s,r),0);var a=Math.round(100/r*s);switch(n.sliderType){case"kelvin":var l=n.minTemperature,u=n.maxTemperature,c=u-l;return l+c*(a/100);case"alpha":return a/100;case"hue":return a*3.6;case"red":case"blue":case"green":return a*2.55;default:return a}}function cI(n,e){var t=Sc(n),o=t.width,r=t.height,i=t.handleRange,s=t.handleStart,a=n.layoutDirection==="horizontal",l=lI(n,e),u=a?o/2:r/2,c=s+l/100*i;return a&&(c=-1*c+i+s*2),{x:a?u:c,y:a?c:u}}function dI(n,e){var t=e.hsv,o=e.rgb;switch(n.sliderType){case"red":return[[0,"rgb(0,"+o.g+","+o.b+")"],[100,"rgb(255,"+o.g+","+o.b+")"]];case"green":return[[0,"rgb("+o.r+",0,"+o.b+")"],[100,"rgb("+o.r+",255,"+o.b+")"]];case"blue":return[[0,"rgb("+o.r+","+o.g+",0)"],[100,"rgb("+o.r+","+o.g+",255)"]];case"alpha":return[[0,"rgba("+o.r+","+o.g+","+o.b+",0)"],[100,"rgb("+o.r+","+o.g+","+o.b+")"]];case"kelvin":for(var r=[],i=n.minTemperature,s=n.maxTemperature,a=8,l=s-i,u=i,c=0;u<s;u+=l/a,c+=1){var d=qr.kelvinToRgb(u),f=d.r,h=d.g,m=d.b;r.push([100/a*c,"rgb("+f+","+h+","+m+")"])}return r;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var v=qr.hsvToHsl({h:t.h,s:0,v:t.v}),g=qr.hsvToHsl({h:t.h,s:100,v:t.v});return[[0,"hsl("+v.h+","+v.s+"%,"+v.l+"%)"],[100,"hsl("+g.h+","+g.s+"%,"+g.l+"%)"]];default:var y=qr.hsvToHsl({h:t.h,s:t.s,v:100});return[[0,"#000"],[100,"hsl("+y.h+","+y.s+"%,"+y.l+"%)"]]}}var om=Math.PI*2,fI=function(e,t){return(e%t+t)%t},rm=function(e,t){return Math.sqrt(e*e+t*t)};function sm(n){return n.width/2-n.padding-n.handleRadius-n.borderWidth}function pI(n,e,t){var o=qa(n),r=o.cx,i=o.cy,s=n.width/2;return rm(r-e,i-t)<s}function qa(n){var e=n.width/2;return{width:n.width,radius:e-n.borderWidth,cx:e,cy:e}}function im(n,e,t){var o=n.wheelAngle,r=n.wheelDirection;return t&&r==="clockwise"?e=o+e:r==="clockwise"?e=360-o+e:t&&r==="anticlockwise"?e=o+180-e:r==="anticlockwise"&&(e=o-e),fI(e,360)}function hI(n,e){var t=e.hsv,o=qa(n),r=o.cx,i=o.cy,s=sm(n),a=(180+im(n,t.h,!0))*(om/360),l=t.s/100*s,u=n.wheelDirection==="clockwise"?-1:1;return{x:r+l*Math.cos(a)*u,y:i+l*Math.sin(a)*u}}function Sf(n,e,t){var o=qa(n),r=o.cx,i=o.cy,s=sm(n);e=r-e,t=i-t;var a=im(n,Math.atan2(-t,-e)*(360/om)),l=Math.min(rm(e,t),s);return{h:Math.round(a),s:Math.round(100/s*l)}}function Cc(n){var e=n.width,t=n.boxHeight,o=n.padding,r=n.handleRadius;return{width:e,height:t??e,radius:o+r}}function Cf(n,e,t){var o=Cc(n),r=o.width,i=o.height,s=o.radius,a=s,l=r-s*2,u=i-s*2,c=(e-a)/l*100,d=(t-a)/u*100;return{s:Math.max(0,Math.min(c,100)),v:Math.max(0,Math.min(100-d,100))}}function mI(n,e){var t=Cc(n),o=t.width,r=t.height,i=t.radius,s=e.hsv,a=i,l=o-i*2,u=r-i*2;return{x:a+s.s/100*l,y:a+(u-s.v/100*u)}}function vI(n,e){var t=e.hue;return[[[0,"#fff"],[100,"hsl("+t+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var xl;function gI(n){xl||(xl=document.getElementsByTagName("base"));var e=window.navigator.userAgent,t=/^((?!chrome|android).)*safari/i.test(e),o=/iPhone|iPod|iPad/i.test(e),r=window.location;return(t||o)&&xl.length>0?r.protocol+"//"+r.host+r.pathname+r.search+n:n}function am(n,e,t,o){for(var r=0;r<o.length;r++){var i=o[r].x-e,s=o[r].y-t,a=Math.sqrt(i*i+s*s);if(a<n.handleRadius)return r}return null}function Tc(n){return{boxSizing:"border-box",border:n.borderWidth+"px solid "+n.borderColor}}function mu(n,e,t){return n+"-gradient("+e+", "+t.map(function(o){var r=o[0],i=o[1];return i+" "+r+"%"}).join(",")+")"}function Ut(n){return typeof n=="string"?n:n+"px"}var yI={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},Tf=["mousemove","touchmove","mouseup","touchend"],La=(function(n){function e(t){n.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.render=function(o){var r=this.handleEvent.bind(this),i={onMouseDown:r,ontouchstart:r},s=o.layoutDirection==="horizontal",a=o.margin===null?o.sliderMargin:o.margin,l={overflow:"visible",display:s?"inline-block":"block"};return o.index>0&&(l[s?"marginLeft":"marginTop"]=a),Qe(Da,null,o.children(this.uid,i,l))},e.prototype.handleEvent=function(o){var r=this,i=this.props.onInput,s=this.base.getBoundingClientRect();o.preventDefault();var a=o.touches?o.changedTouches[0]:o,l=a.clientX-s.left,u=a.clientY-s.top;switch(o.type){case"mousedown":case"touchstart":var c=i(l,u,0);c!==!1&&Tf.forEach(function(d){document.addEventListener(d,r,{passive:!1})});break;case"mousemove":case"touchmove":i(l,u,1);break;case"mouseup":case"touchend":i(l,u,2),Tf.forEach(function(d){document.removeEventListener(d,r,{passive:!1})});break}},e})(Nr);function rr(n){var e=n.r,t=n.url,o=e,r=e;return Qe("svg",{className:"IroHandle IroHandle--"+n.index+" "+(n.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+Ut(n.x)+", "+Ut(n.y)+")",willChange:"transform",top:Ut(-e),left:Ut(-e),width:Ut(e*2),height:Ut(e*2),position:"absolute",overflow:"visible"}},t&&Qe("use",Object.assign({xlinkHref:gI(t)},n.props)),!t&&Qe("circle",{cx:o,cy:r,r:e,fill:"none","stroke-width":2,stroke:"#000"}),!t&&Qe("circle",{cx:o,cy:r,r:e-2,fill:n.fill,"stroke-width":2,stroke:"#fff"}))}rr.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function oa(n){var e=n.activeIndex,t=e!==void 0&&e<n.colors.length?n.colors[e]:n.color,o=Sc(n),r=o.width,i=o.height,s=o.radius,a=cI(n,t),l=dI(n,t);function u(c,d,f){var h=uI(n,c,d);n.parent.inputActive=!0,t[n.sliderType]=h,n.onInput(f,n.id)}return Qe(La,Object.assign({},n,{onInput:u}),function(c,d,f){return Qe("div",Object.assign({},d,{className:"IroSlider",style:Object.assign({},{position:"relative",width:Ut(r),height:Ut(i),borderRadius:Ut(s),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},f)}),Qe("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:Ut(s),background:mu("linear",n.layoutDirection==="horizontal"?"to top":"to right",l)},Tc(n))}),Qe(rr,{isActive:!0,index:t.index,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a.x,y:a.y}))})}oa.defaultProps=Object.assign({},aI);function _I(n){var e=Cc(n),t=e.width,o=e.height,r=e.radius,i=n.colors,s=n.parent,a=n.activeIndex,l=a!==void 0&&a<n.colors.length?n.colors[a]:n.color,u=vI(n,l),c=i.map(function(f){return mI(n,f)});function d(f,h,m){if(m===0){var v=am(n,f,h,c);v!==null?s.setActiveColor(v):(s.inputActive=!0,l.hsv=Cf(n,f,h),n.onInput(m,n.id))}else m===1&&(s.inputActive=!0,l.hsv=Cf(n,f,h));n.onInput(m,n.id)}return Qe(La,Object.assign({},n,{onInput:d}),function(f,h,m){return Qe("div",Object.assign({},h,{className:"IroBox",style:Object.assign({},{width:Ut(t),height:Ut(o),position:"relative"},m)}),Qe("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:Ut(r)},Tc(n),{background:mu("linear","to bottom",u[1])+","+mu("linear","to right",u[0])})}),i.filter(function(v){return v!==l}).map(function(v){return Qe(rr,{isActive:!1,index:v.index,fill:v.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:c[v.index].x,y:c[v.index].y})}),Qe(rr,{isActive:!0,index:l.index,fill:l.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:c[l.index].x,y:c[l.index].y}))})}var bI="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",wI="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function lm(n){var e=qa(n),t=e.width,o=n.colors;n.borderWidth;var r=n.parent,i=n.color,s=i.hsv,a=o.map(function(c){return hI(n,c)}),l={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function u(c,d,f){if(f===0){if(!pI(n,c,d))return!1;var h=am(n,c,d,a);h!==null?r.setActiveColor(h):(r.inputActive=!0,i.hsv=Sf(n,c,d),n.onInput(f,n.id))}else f===1&&(r.inputActive=!0,i.hsv=Sf(n,c,d));n.onInput(f,n.id)}return Qe(La,Object.assign({},n,{onInput:u}),function(c,d,f){return Qe("div",Object.assign({},d,{className:"IroWheel",style:Object.assign({},{width:Ut(t),height:Ut(t),position:"relative"},f)}),Qe("div",{className:"IroWheelHue",style:Object.assign({},l,{transform:"rotateZ("+(n.wheelAngle+90)+"deg)",background:n.wheelDirection==="clockwise"?bI:wI})}),Qe("div",{className:"IroWheelSaturation",style:Object.assign({},l,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),n.wheelLightness&&Qe("div",{className:"IroWheelLightness",style:Object.assign({},l,{background:"#000",opacity:1-s.v/100})}),Qe("div",{className:"IroWheelBorder",style:Object.assign({},l,Tc(n))}),o.filter(function(h){return h!==i}).map(function(h){return Qe(rr,{isActive:!1,index:h.index,fill:h.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a[h.index].x,y:a[h.index].y})}),Qe(rr,{isActive:!0,index:i.index,fill:i.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a[i.index].x,y:a[i.index].y}))})}function xI(n){var e=function(t,o){var r,i=document.createElement("div");WP(Qe(n,Object.assign({},{ref:function(a){return r=a}},o)),i);function s(){var a=t instanceof Element?t:document.querySelector(t);a.appendChild(r.base),r.onMount(a)}return document.readyState!=="loading"?s():document.addEventListener("DOMContentLoaded",s),r};return e.prototype=n.prototype,Object.assign(e,n),e.__component=n,e}var um=(function(n){function e(t){var o=this;n.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id;var r=t.colors.length>0?t.colors:[t.color];r.forEach(function(i){return o.addColor(i)}),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.addColor=function(o,r){r===void 0&&(r=this.colors.length);var i=new qr(o,this.onColorChange.bind(this));this.colors.splice(r,0,i),this.colors.forEach(function(s,a){return s.index=a}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",i)},e.prototype.removeColor=function(o){var r=this.colors.splice(o,1)[0];r.unbind(),this.colors.forEach(function(i,s){return i.index=s}),this.state&&this.setState({colors:this.colors}),r.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",r)},e.prototype.setActiveColor=function(o){this.color=this.colors[o],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},e.prototype.setColors=function(o,r){var i=this;r===void 0&&(r=0),this.colors.forEach(function(s){return s.unbind()}),this.colors=[],o.forEach(function(s){return i.addColor(s)}),this.setActiveColor(r),this.emit("color:setAll",this.colors)},e.prototype.on=function(o,r){var i=this,s=this.events;(Array.isArray(o)?o:[o]).forEach(function(a){(s[a]||(s[a]=[])).push(r),i.deferredEvents[a]&&(i.deferredEvents[a].forEach(function(l){r.apply(null,l)}),i.deferredEvents[a]=[])})},e.prototype.off=function(o,r){var i=this;(Array.isArray(o)?o:[o]).forEach(function(s){var a=i.events[s];a&&a.splice(a.indexOf(r),1)})},e.prototype.emit=function(o){for(var r=this,i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];var a=this.activeEvents,l=a.hasOwnProperty(o)?a[o]:!1;if(!l){a[o]=!0;var u=this.events[o]||[];u.forEach(function(c){return c.apply(r,i)}),a[o]=!1}},e.prototype.deferredEmit=function(o){for(var r,i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];var a=this.deferredEvents;(r=this).emit.apply(r,[o].concat(i)),(a[o]||(a[o]=[])).push(i)},e.prototype.setOptions=function(o){this.setState(o)},e.prototype.resize=function(o){this.setOptions({width:o})},e.prototype.reset=function(){this.colors.forEach(function(o){return o.reset()}),this.setState({colors:this.colors})},e.prototype.onMount=function(o){this.el=o,this.deferredEmit("mount",this)},e.prototype.onColorChange=function(o,r){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",o,r)),this.emit("color:change",o,r)},e.prototype.emitInputEvent=function(o,r){o===0?this.emit("input:start",this.color,r):o===1?this.emit("input:move",this.color,r):o===2&&this.emit("input:end",this.color,r)},e.prototype.render=function(o,r){var i=this,s=r.layout;return Array.isArray(s)||(s=[{component:lm},{component:oa}],r.transparency&&s.push({component:oa,options:{sliderType:"alpha"}})),Qe("div",{class:"IroColorPicker",id:r.id,style:{display:r.display}},s.map(function(a,l){var u=a.component,c=a.options;return Qe(u,Object.assign({},r,c,{ref:void 0,onInput:i.emitInputEvent.bind(i),parent:i,index:l}))}))},e})(Nr);um.defaultProps=Object.assign({},yI,{colors:[],display:"block",id:null,layout:"default",margin:null});var SI=xI(um),vu;(function(n){n.version="5.5.2",n.Color=qr,n.ColorPicker=SI,(function(e){e.h=Qe,e.ComponentBase=La,e.Handle=rr,e.Slider=oa,e.Wheel=lm,e.Box=_I})(n.ui||(n.ui={}))})(vu||(vu={}));var Sl=vu;const CI={class:"flex flex-col gap-2"},TI={class:"flex items-center justify-between text-ui-menu-bg-text gap-2 text-xs"},EI=["value"],MI=L({__name:"ColorPicker",props:{modelValue:{required:!0},modelModifiers:{},alpha:{},alphaModifiers:{}},emits:["update:modelValue","update:alpha"],setup(n){const e=Et(n,"modelValue"),t=Et(n,"alpha"),o=Nn("pickerRef"),r=N(),i=N("RGB"),{toast:s}=Gn(),a=F({set(f){if(r.value)try{r.value.color.hex8String=f}catch(h){const m=h;s.error(m.message)}},get(){return r.value?r.value.color.hex8String:"#fff"}});Te(r,f=>{f&&(e.value=f.color.hexString,t.value=f.color.alpha)},{deep:!0});function l(f){const h=f.target;a.value=h.value}Le(()=>{o.value&&(r.value=new Sl.ColorPicker(o.value,{color:e.value,layoutDirection:"horizontal",width:150,sliderSize:10,padding:0,layout:[{component:Sl.ui.Wheel},{component:Sl.ui.Slider,options:{sliderType:"value"}}]}),r.value?.on("color:change",()=>{_o(r)}))});const{isSupported:u,open:c}=ng();function d(){c().then(f=>{f&&(a.value=f.sRGBHex)}).catch(()=>{})}return(f,h)=>{const m=Cx,v=wx,g=FP,y=qP,_=vt;return E(),ne("div",CI,[j("div",{ref_key:"pickerRef",ref:o},null,512),T(v,{modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=b=>i.value=b),class:"rounded overflow-hidden grid grid-cols-2 text-xs text-ui-radio-text"},{default:S(()=>[(E(),ne(Ie,null,ot(["RGB","HSV"],b=>T(m,{key:b,value:b,class:"bg-ui-radio-inner data-[state='checked']:bg-ui-radio-inner-selected data-[state='checked']:text-ui-radio-text-selected p-0.5"},{default:S(()=>[ke(Ce(b),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),r.value?(E(),ne(Ie,{key:0},[i.value==="HSV"?(E(),B(g,{key:0,modelValue:r.value.color.hsva,"onUpdate:modelValue":h[1]||(h[1]=b=>r.value.color.hsva=b)},null,8,["modelValue"])):ue("",!0),i.value==="RGB"?(E(),B(y,{key:1,modelValue:r.value.color.rgba,"onUpdate:modelValue":h[2]||(h[2]=b=>r.value.color.rgba=b)},null,8,["modelValue"])):ue("",!0),j("div",TI,[h[3]||(h[3]=j("span",null,"Hex",-1)),j("input",{type:"text",class:"input w-[100px]",value:a.value,onChange:l},null,40,EI),p(u)?(E(),ne("button",{key:0,type:"button",class:"btn text-[1.25em] p-0.5",onClick:d},[T(_,{name:"misc/eye-dropper"})])):ue("",!0)])],64)):ue("",!0)])}}}),qo=L({__name:"InputColor",props:{hex:{required:!0},hexModifiers:{},alpha:{},alphaModifiers:{}},emits:["update:hex","update:alpha"],setup(n){const e=Et(n,"hex"),t=Et(n,"alpha");return(o,r)=>{const i=MI;return E(),B(p(li).Root,null,{default:S(()=>[T(p(li).Trigger,{class:"inline-grid rounded grid-cols-2 grid-rows-1 w-full checkerboard h-full overflow-hidden",style:wt({"--color-value":e.value,"--alpha":t.value})},{default:S(()=>[...r[2]||(r[2]=[j("div",{class:"bg-(--color-value)"},null,-1),j("div",{class:"bg-(--color-value) opacity-(--alpha)"},null,-1)])]),_:1},8,["style"]),T(p(li).Portal,null,{default:S(()=>[T(p(li).Content,{"avoid-collisions":"","position-strategy":"absolute",class:"bg-ui-menu-bg-inner rounded p-2"},{default:S(()=>[T(i,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=s=>e.value=s),alpha:t.value,"onUpdate:alpha":r[1]||(r[1]=s=>t.value=s)},null,8,["modelValue","alpha"])]),_:1})]),_:1})]),_:1})}}}),AI={class:"text-xs flex flex-col items-end gap-1 p-2"},PI={class:"flex flex-col items-end gap-1 p-2"},II=L({__name:"LightDataProperties",setup(n){const e=at(),t=F(()=>e.selectedObject?e.selectedObject:null),o=F({set(l){const u=e.selectedObject;u&&u instanceof K.Light&&u.color.set(new K.Color(l))},get(){return"#"+t.value?.color.getHexString()||""}}),r=F({set(l){t.value instanceof K.SpotLight&&(t.value.angle=So.degToRad(l))},get(){return t.value instanceof K.SpotLight?So.radToDeg(t.value.angle):0}});function i(l){return l instanceof K.RectAreaLight}function s(l){return l instanceof K.SpotLight}const a=new Map([["bias",{title:"Shadow map bias",text:"How much to add or subtract from the normalized depth when deciding whether a surface is in shadow"}],["normalBias",{title:"Shadow map normal bias",text:"Defines how much the position used to query the shadow map is offset along the object normal. Increasing this value can be used to reduce shadow acne especially in large scenes where light shines onto geometry at a shallow angle. The cost is that shadows may appear distorted."}],["intensity",{text:"The intensity of the shadow"}]]);return(l,u)=>{const c=qo,d=ht,f=pn,h=Wn,m=fr;return E(),B(m,{collapsible:"",type:"multiple"},{default:S(()=>[t.value?(E(),B(h,{key:0,label:"Light",item:{value:"light"}},{default:S(()=>[j("div",AI,[T(d,{label:"Color","input-width":"150px"},{default:S(()=>[T(c,{hex:o.value,"onUpdate:hex":u[0]||(u[0]=v=>o.value=v)},null,8,["hex"])]),_:1}),"power"in t.value?(E(),B(d,{key:0,label:"Power","input-width":"150px"},{default:S(()=>[T(f,{modelValue:t.value.power,"onUpdate:modelValue":u[1]||(u[1]=v=>t.value.power=v),min:0,step:.1},null,8,["modelValue"])]),_:1})):(E(),B(d,{key:1,label:"Strength","input-width":"150px"},{default:S(()=>[T(f,{modelValue:t.value.intensity,"onUpdate:modelValue":u[2]||(u[2]=v=>t.value.intensity=v),step:.1},null,8,["modelValue"])]),_:1})),"distance"in t.value?(E(),B(d,{key:2,label:"Distance","input-width":"150px"},{default:S(()=>[T(f,{modelValue:t.value.distance,"onUpdate:modelValue":u[3]||(u[3]=v=>t.value.distance=v),min:0,step:.1},null,8,["modelValue"])]),_:1})):ue("",!0),i(t.value)?(E(),ne(Ie,{key:3},[T(d,{label:"Width","input-width":"150px"},{default:S(()=>[T(f,{modelValue:t.value.width,"onUpdate:modelValue":u[4]||(u[4]=v=>t.value.width=v),step:.1,min:0},null,8,["modelValue"])]),_:1}),T(d,{label:"Height","input-width":"150px"},{default:S(()=>[T(f,{modelValue:t.value.height,"onUpdate:modelValue":u[5]||(u[5]=v=>t.value.height=v),step:.1,min:0},null,8,["modelValue"])]),_:1})],64)):ue("",!0),s(t.value)?(E(),B(d,{key:4,label:"Angle","input-width":"150px"},{default:S(()=>[T(f,{modelValue:r.value,"onUpdate:modelValue":u[6]||(u[6]=v=>r.value=v),step:.1,min:0,max:p(So).radToDeg(Math.PI/2),"format-options":{unit:"degree",unitDisplay:"narrow",style:"unit"}},null,8,["modelValue","max"])]),_:1})):ue("",!0)])]),_:1})):ue("",!0),t.value?.shadow?(E(),B(h,{key:1,modelValue:t.value.castShadow,"onUpdate:modelValue":u[10]||(u[10]=v=>t.value.castShadow=v),item:{value:"shadow"},label:"Shadow",class:"w-full mt-1","show-checkbox":""},{default:S(()=>[j("div",PI,[T(d,{label:"Bias","input-width":"150px",tooltip:p(a).get("bias")},{default:S(()=>[T(f,{modelValue:t.value.shadow.bias,"onUpdate:modelValue":u[7]||(u[7]=v=>t.value.shadow.bias=v),step:1e-4,"format-options":{minimumFractionDigits:4}},null,8,["modelValue"])]),_:1},8,["tooltip"]),T(d,{label:"Normal Bias","input-width":"150px",tooltip:p(a).get("normalBias")},{default:S(()=>[T(f,{modelValue:t.value.shadow.normalBias,"onUpdate:modelValue":u[8]||(u[8]=v=>t.value.shadow.normalBias=v),step:1e-4,"format-options":{minimumFractionDigits:4}},null,8,["modelValue"])]),_:1},8,["tooltip"]),T(d,{label:"Intensity","input-width":"150px",tooltip:p(a).get("intensity")},{default:S(()=>[T(f,{modelValue:t.value.shadow.intensity,"onUpdate:modelValue":u[9]||(u[9]=v=>t.value.shadow.intensity=v),min:0,max:1,step:.01,"format-options":{style:"percent"}},null,8,["modelValue"])]),_:1},8,["tooltip"])])]),_:1},8,["modelValue"])):ue("",!0)]),_:1})}}});async function cm(n){const e=Gs(),t=`font-${Date.now()}-${Math.random().toString(36).slice(2)}`,o=new PM;try{const i=RI.get(n)||n;return await o.loadAsync(i,r)}catch{return Gn().toast.error("Error when loading world texture"),null}finally{e.finishLoading(t)}function r(i){i.lengthComputable&&(e.loadingItems.find(s=>s.id===t)?e.updateProgress(t,i.loaded):e.startLoading(t,n,i.total))}}const RI=new Map([["gentilis-bold","/fonts/gentilis_bold.typeface.json"],["gentilis-regular","/fonts/gentilis_regular.typeface.json"],["helvetiker-regular","/fonts/helvetiker_regular.typeface.json"],["helvetiker-bold","/fonts/helvetiker_bold.typeface.json"],["optimer-regular","/fonts/optimer_regular.typeface.json"],["optimer-bold","/fonts/optimer_bold.typeface.json"]]),Cl=[{value:"helvetiker-regular",label:"Helvetiker Regular"},{value:"optimer-regular",label:"Optimer Regular"},{value:"gentilis-regular",label:"Gentilis Regular"},{value:"helvetiker-bold",label:"Helvetiker Bold"},{value:"optimer-bold",label:"Optimer Bold"},{value:"gentilis-bold",label:"Gentilis Bold"}];async function OI(){const n=await cm("helvetiker-regular");if(!n)return;const e=dm({text:"Text",params:{font:n,size:2,depth:1}}),t=new K.Mesh(e,new K.MeshPhysicalMaterial);return t.name="Text",t}function dm(n){return new ea(n.text,n.params)}const kI={class:"flex flex-col items-end gap-1 text-xs pr-2"},DI={class:"w-[150px]"},BI=L({__name:"TextDataProperties",setup(n){const e=at(),t=Mn({text:"",font:Cl.find(s=>{const a=r()?.font?.value;return s.value===a})?.value,depth:1,size:2,bevelEnabled:!1,bevelSize:8,bevelThickness:10,bevelOffset:0,bevelSegments:3});i();async function o(){if(!t.text||!t.font)return;const s=e.selectedObject;if(s&&s instanceof K.Mesh&&s.geometry instanceof ea){const a=await cm(t.font);if(!a)return;s.geometry.dispose();const l=dm({text:t.text,params:{font:a,size:t.size,depth:t.depth,bevelEnabled:t.bevelEnabled,bevelOffset:t.bevelOffset,bevelSegments:t.bevelSegments,bevelSize:t.bevelSize,bevelThickness:t.bevelThickness}});s.geometry=l,Ch(s)}}function r(){const s=e.selectedObject;if(s&&s instanceof K.Mesh&&s.geometry instanceof ea){const a=s.geometry.parameters.options,l=Cl.find(g=>g.value===a.font.data.original_font_information.postscript_name?.toLowerCase()),{bevelThickness:u,bevelSize:c,bevelEnabled:d,depth:f,size:h,bevelOffset:m,bevelSegments:v}=a;return{font:l,geometry:{bevelEnabled:d,bevelSize:c,bevelThickness:u,depth:f,size:h,bevelOffset:m,bevelSegments:v}}}return null}function i(){const s=r();s&&(t.depth=s.geometry.depth||1,t.size=s.geometry.size||2,t.bevelEnabled=s.geometry.bevelEnabled||!1,t.bevelSize=s.geometry.bevelSize||8,t.bevelThickness=s.geometry.bevelThickness||10,t.bevelOffset=s.geometry.bevelOffset||0,t.bevelSegments=s.geometry.bevelSegments||3)}return(s,a)=>{const l=ht,u=ts,c=pn,d=pr,f=Wn,h=fr;return E(),B(h,{collapsible:"",type:"multiple"},{default:S(()=>[T(f,{label:"Text",item:{value:"text"}},{default:S(()=>[j("div",kI,[T(l,{label:"Text"},{default:S(()=>[oo(j("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>t.text=m),type:"text",class:"input w-[150px]"},null,512),[[aa,t.text]])]),_:1}),T(l,{label:"Font"},{default:S(()=>[T(u,{modelValue:t.font,"onUpdate:modelValue":a[1]||(a[1]=m=>t.font=m),class:"w-[150px]",items:p(Cl),placeholder:"Select font"},null,8,["modelValue","items"])]),_:1}),T(l,{label:"Size"},{default:S(()=>[T(c,{modelValue:t.size,"onUpdate:modelValue":a[2]||(a[2]=m=>t.size=m),step:1,class:"w-[150px]"},null,8,["modelValue"])]),_:1}),T(l,{label:"Depth"},{default:S(()=>[T(c,{modelValue:t.depth,"onUpdate:modelValue":a[3]||(a[3]=m=>t.depth=m),step:1,class:"w-[150px]"},null,8,["modelValue"])]),_:1}),T(l,{label:"Bevel enabled"},{default:S(()=>[j("div",DI,[T(d,{modelValue:t.bevelEnabled,"onUpdate:modelValue":a[4]||(a[4]=m=>t.bevelEnabled=m)},null,8,["modelValue"])])]),_:1}),t.bevelEnabled?(E(),ne(Ie,{key:0},[T(l,{label:"Bevel size"},{default:S(()=>[T(c,{modelValue:t.bevelSize,"onUpdate:modelValue":a[5]||(a[5]=m=>t.bevelSize=m),class:"w-[150px]"},null,8,["modelValue"])]),_:1}),T(l,{label:"Bevel thickness"},{default:S(()=>[T(c,{modelValue:t.bevelThickness,"onUpdate:modelValue":a[6]||(a[6]=m=>t.bevelThickness=m),class:"w-[150px]"},null,8,["modelValue"])]),_:1}),T(l,{label:"Bevel offset"},{default:S(()=>[T(c,{modelValue:t.bevelOffset,"onUpdate:modelValue":a[7]||(a[7]=m=>t.bevelOffset=m),class:"w-[150px]"},null,8,["modelValue"])]),_:1}),T(l,{label:"Bevel segments"},{default:S(()=>[T(c,{modelValue:t.bevelSegments,"onUpdate:modelValue":a[8]||(a[8]=m=>t.bevelSegments=m),class:"w-[150px]"},null,8,["modelValue"])]),_:1})],64)):ue("",!0),j("button",{type:"button",class:"btn text-sm mt-2",onClick:o},"Apply")])]),_:1})]),_:1})}}});async function qI({url:n,filename:e,size:t}){const o=Gs(),r=`model-${Date.now()}-${Math.random().toString(36).slice(2)}`;try{const i=new K.TextureLoader;o.startLoading(r,e,t??0);const s=await i.loadAsync(n);return s.name=e,s}catch(i){const s=i;return console.error(`Error loading a texture (${n}):`,s.name,s.message),Gn().toast.error("",{title:"Error loading a texture",message:s.message}),null}finally{o.finishLoading(r),n.startsWith("blob:")&&URL.revokeObjectURL(n)}}function LI(n){return typeof n!="object"||n===null?!1:"url"in n&&typeof n.url=="string"&&"md5"in n&&typeof n.md5=="string"&&"size"in n&&typeof n.size=="number"}const VI={class:"group"},FI={class:"rounded border border-ui-menu-outline bg-ui-menu-inner px-1 py-0.5 text-ui-menu-text grid grid-cols-[1fr_auto] gap-1",tabindex:"0"},NI=["title"],$I={class:"hidden grid-cols-2 group-focus-within:grid"},Lo=L({__name:"InputTexture",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=Et(n,"modelValue"),{open:t,onChange:o}=dg({multiple:!1,accept:"image/*"});o(async a=>{const l=a?.[0];if(!l)return;const u=URL.createObjectURL(l),d=await new K.TextureLoader().loadAsync(u);URL.revokeObjectURL(u),d.name=l.name;const f=e.value;e.value=d,f&&f.dispose()});const{open:r}=_c();function i(){r("textureLibrary",async a=>{if(!LI(a))return;const l=a.url.match(/[^/]+$/)?.[0]??"Texture",u=await qI({url:a.url,filename:l,size:a.size});e.value=u})}function s(){if(e.value){const a=e.value;e.value=null,a.dispose()}}return(a,l)=>(E(),ne("div",VI,[j("div",FI,[j("span",{class:"overflow-hidden text-ellipsis",title:e.value?.name},Ce(e.value?.name||"None"),9,NI),e.value?(E(),ne("button",{key:0,type:"button",class:"cursor-pointer px-1",onClick:s},"x")):ue("",!0)]),j("div",$I,[j("button",{type:"button",class:"btn",onClick:i},"Library"),j("button",{type:"button",class:"btn",onClick:l[0]||(l[0]=u=>p(t)())},"File")])]))}});function uo(){const n=at(),e=Ks(),t=N(0),o=F(()=>n.selectedObject instanceof K.Mesh?n.selectedObject:null),r=F(()=>{if(o.value){const l=e.getMaterial(o.value)?.original;if(l instanceof K.Material)return l}return null});function i(l){const u=o.value;u&&(e.updateMaterial(u,l),t.value++)}function s(l){if(r.value)return t.value,r.value[l]}function a(l){const u=o.value;u&&e.changeMaterial(u,l)}return{material:r,getMaterialProp:s,updateMaterialProp:i,manualTrigger:t,changeMaterial:a,selectedObject:o}}const UI={class:"flex flex-col items-end gap-1 panel-content"},Va=L({__name:"EmissionProperties",setup(n){const{updateMaterialProp:e,getMaterialProp:t}=uo(),o=F({set(s){e({prop:"emissive",value:new K.Color(s)})},get(){return`#${t("emissive")?.getHexString()}`}}),r=F({set(s){e({prop:"emissiveMap",value:s})},get(){return t("emissiveMap")}}),i=F({set(s){e({prop:"emissiveIntensity",value:s})},get(){return t("emissiveIntensity")}});return(s,a)=>{const l=qo,u=ht,c=Lo,d=pn;return E(),ne("div",UI,[T(u,{"input-width":"150px",label:"Color"},{default:S(()=>[T(l,{hex:o.value,"onUpdate:hex":a[0]||(a[0]=f=>o.value=f)},null,8,["hex"])]),_:1}),T(u,{"input-width":"150px",label:"Map"},{default:S(()=>[T(c,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=f=>r.value=f)},null,8,["modelValue"])]),_:1}),T(u,{"input-width":"150px",label:"Intensity"},{default:S(()=>[T(d,{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=f=>i.value=f),min:0,step:.01},null,8,["modelValue"])]),_:1})])}}}),zI={key:0},HI={class:"flex flex-col items-end gap-1 p-1 pr-3"},jI=L({__name:"MatSurfaceDiffuse",setup(n){const{material:e,updateMaterialProp:t,getMaterialProp:o}=uo(),r=F({set(i){t({prop:"color",value:new K.Color(i)})},get(){return`#${o("color")?.getHexString()}`}});return(i,s)=>{const a=qo,l=ht,u=Va,c=Wn;return p(e)?(E(),ne("div",zI,[j("div",HI,[T(l,{label:"Base Color","input-width":"150px"},{default:S(()=>[T(a,{hex:r.value,"onUpdate:hex":s[0]||(s[0]=d=>r.value=d)},null,8,["hex"])]),_:1})]),T(c,{label:"Emission",item:{value:"emission"},class:"w-full",nested:""},{default:S(()=>[T(u)]),_:1})])):ue("",!0)}}}),WI={class:"flex flex-col items-end gap-1 panel-content"},GI=L({__name:"SheenProperties",setup(n){const{updateMaterialProp:e,getMaterialProp:t}=uo(),o=F({set(l){e({prop:"sheen",value:l})},get(){return t("sheen")}}),r=F({set(l){e({prop:"sheenColor",value:new K.Color(l)})},get(){return`#${t("sheenColor")?.getHexString()}`}}),i=F({set(l){e({prop:"sheenColorMap",value:l})},get(){return t("sheenColorMap")}}),s=F({set(l){e({prop:"sheenRoughness",value:l})},get(){return t("sheenRoughness")}}),a=F({set(l){e({prop:"sheenRoughnessMap",value:l})},get(){return t("sheenRoughnessMap")}});return(l,u)=>{const c=pn,d=ht,f=qo,h=Lo;return E(),ne("div",WI,[T(d,{"input-width":"150px",label:"Intensity"},{default:S(()=>[T(c,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=m=>o.value=m),min:0,max:1,step:.01},null,8,["modelValue"])]),_:1}),T(d,{"input-width":"150px",label:"Color"},{default:S(()=>[T(f,{hex:r.value,"onUpdate:hex":u[1]||(u[1]=m=>r.value=m)},null,8,["hex"])]),_:1}),T(d,{"input-width":"150px",label:"Color Map"},{default:S(()=>[T(h,{modelValue:i.value,"onUpdate:modelValue":u[2]||(u[2]=m=>i.value=m)},null,8,["modelValue"])]),_:1}),T(d,{"input-width":"150px",label:"Roughness"},{default:S(()=>[T(c,{modelValue:s.value,"onUpdate:modelValue":u[3]||(u[3]=m=>s.value=m),min:0,max:1,step:.01},null,8,["modelValue"])]),_:1}),T(d,{"input-width":"150px",label:"Roughness Map"},{default:S(()=>[T(h,{modelValue:a.value,"onUpdate:modelValue":u[4]||(u[4]=m=>a.value=m)},null,8,["modelValue"])]),_:1})])}}}),KI={class:"flex flex-col items-end gap-1 panel-content"},YI=L({__name:"ClearcoatProperties",setup(n){const{updateMaterialProp:e,getMaterialProp:t}=uo(),o=F({set(l){e({prop:"clearcoat",value:l})},get(){return t("clearcoat")}}),r=F({set(l){e({prop:"clearcoatMap",value:l})},get(){return t("clearcoatMap")}}),i=F({set(l){e({prop:"clearcoatNormalMap",value:l})},get(){return t("clearcoatNormalMap")}}),s=F({set(l){e({prop:"clearcoatRoughness",value:l})},get(){return t("clearcoatRoughness")}}),a=F({set(l){e({prop:"clearcoatRoughnessMap",value:l})},get(){return t("clearcoatRoughnessMap")}});return(l,u)=>{const c=pn,d=ht,f=Lo;return E(),ne("div",KI,[T(d,{"input-width":"150px",label:"Intensity"},{default:S(()=>[T(c,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=h=>o.value=h),min:0,max:1,step:.01},null,8,["modelValue"])]),_:1}),T(d,{"input-width":"150px",label:"Map"},{default:S(()=>[T(f,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=h=>r.value=h)},null,8,["modelValue"])]),_:1}),T(d,{"input-width":"150px",label:"Normal Map"},{default:S(()=>[T(f,{modelValue:i.value,"onUpdate:modelValue":u[2]||(u[2]=h=>i.value=h)},null,8,["modelValue"])]),_:1}),T(d,{"input-width":"150px",label:"Roughness"},{default:S(()=>[T(c,{modelValue:s.value,"onUpdate:modelValue":u[3]||(u[3]=h=>s.value=h),min:0,max:1,step:.01},null,8,["modelValue"])]),_:1}),T(d,{"input-width":"150px",label:"Roughness Map"},{default:S(()=>[T(f,{modelValue:a.value,"onUpdate:modelValue":u[4]||(u[4]=h=>a.value=h)},null,8,["modelValue"])]),_:1})])}}}),XI={class:"flex flex-col items-end gap-1 panel-content"},ZI=L({__name:"TransmissionProperties",setup(n){const{updateMaterialProp:e,getMaterialProp:t}=uo(),o=F({set(i){e({prop:"transmission",value:i})},get(){return t("transmission")}}),r=F({set(i){e({prop:"transmissionMap",value:i})},get(){return t("transmissionMap")}});return(i,s)=>{const a=pn,l=ht,u=Lo;return E(),ne("div",XI,[T(l,{"input-width":"150px",label:"Weight"},{default:S(()=>[T(a,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=c=>o.value=c),min:0,max:1,step:.01},null,8,["modelValue"])]),_:1}),T(l,{"input-width":"150px",label:"Map"},{default:S(()=>[T(u,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=c=>r.value=c)},null,8,["modelValue"])]),_:1})])}}}),QI={class:"flex flex-col items-end gap-1 panel-content"},JI=L({__name:"SpecularProperties",setup(n){const{updateMaterialProp:e,getMaterialProp:t}=uo(),o=F({set(a){e({prop:"specularColor",value:new K.Color(a)})},get(){return`#${t("specularColor")?.getHexString()}`}}),r=F({set(a){e({prop:"specularColorMap",value:a})},get(){return t("specularColorMap")}}),i=F({set(a){e({prop:"specularIntensity",value:a})},get(){return t("specularIntensity")}}),s=F({set(a){e({prop:"specularIntensityMap",value:a})},get(){return t("specularIntensityMap")}});return(a,l)=>{const u=qo,c=ht,d=Lo,f=pn;return E(),ne("div",QI,[T(c,{"input-width":"150px",label:"Color"},{default:S(()=>[T(u,{hex:o.value,"onUpdate:hex":l[0]||(l[0]=h=>o.value=h)},null,8,["hex"])]),_:1}),T(c,{"input-width":"150px",label:"Map"},{default:S(()=>[T(d,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=h=>r.value=h)},null,8,["modelValue"])]),_:1}),T(c,{"input-width":"150px",label:"Intensity"},{default:S(()=>[T(f,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=h=>i.value=h),min:0,max:1,step:.01},null,8,["modelValue"])]),_:1}),T(c,{"input-width":"150px",label:"Intensity Map"},{default:S(()=>[T(d,{modelValue:s.value,"onUpdate:modelValue":l[3]||(l[3]=h=>s.value=h)},null,8,["modelValue"])]),_:1})])}}}),eR={key:0},tR={class:"pl-1 py-1 pr-3 flex flex-col items-end gap-1"},nR=L({__name:"MatSurfacePrincipled",setup(n){const{material:e,updateMaterialProp:t,getMaterialProp:o,selectedObject:r,changeMaterial:i}=uo(),s=F({set(g){t({prop:"color",value:new K.Color(g)})},get(){return`#${o("color")?.getHexString()}`}}),a=F({set(g){t({prop:"map",value:g})},get(){return o("map")}}),l=F({set(g){t({prop:"metalness",value:g})},get(){return o("metalness")}}),u=F({set(g){t({prop:"metalnessMap",value:g})},get(){return o("metalnessMap")}}),c=F({set(g){t({prop:"roughness",value:g})},get(){return o("roughness")}}),d=F({set(g){t({prop:"roughnessMap",value:g})},get(){return o("roughnessMap")}}),f=F({set(g){t({prop:"ior",value:g})},get(){return o("ior")}}),h=F({set(g){t({prop:"transparent",value:g})},get(){return o("transparent")}}),m=F({set(g){t({prop:"opacity",value:g})},get(){return o("opacity")}});Te(e,g=>{if(!(!r.value||!g)&&g instanceof K.MeshStandardMaterial&&!(g instanceof K.MeshPhysicalMaterial)){const _=v(g);i(_)}},{immediate:!0});function v(g){const y=new K.MeshPhysicalMaterial;return y.color.copy(g.color),y.metalness=g.metalness,y.roughness=g.roughness,y.transparent=g.transparent,y.opacity=g.opacity,y.emissive.copy(g.emissive),y.emissiveIntensity=g.emissiveIntensity,y.side=g.side,y.flatShading=g.flatShading,y.wireframe=g.wireframe,y.vertexColors=g.vertexColors,y.fog=g.fog,y.dithering=g.dithering,y.map=g.map,y.normalMap=g.normalMap,y.normalMapType=g.normalMapType,y.normalScale.copy(g.normalScale),y.aoMap=g.aoMap,y.aoMapIntensity=g.aoMapIntensity,y.emissiveMap=g.emissiveMap,y.bumpMap=g.bumpMap,y.bumpScale=g.bumpScale,y.displacementMap=g.displacementMap,y.displacementScale=g.displacementScale,y.displacementBias=g.displacementBias,y.roughnessMap=g.roughnessMap,y.metalnessMap=g.metalnessMap,y.alphaMap=g.alphaMap,y.envMap=g.envMap,y.envMapIntensity=g.envMapIntensity,y.lightMap=g.lightMap,y.lightMapIntensity=g.lightMapIntensity,g.dispose(),y}return(g,y)=>{const _=qo,b=ht,x=Lo,C=pn,k=pr,P=JI,R=Wn,M=ZI,A=YI,O=GI,D=fr;return p(e)?(E(),ne("div",eR,[j("div",tR,[T(b,{"input-width":"150px",label:"Base Color"},{default:S(()=>[T(_,{hex:s.value,"onUpdate:hex":y[0]||(y[0]=V=>s.value=V)},null,8,["hex"])]),_:1}),T(b,{"input-width":"150px",label:"Map"},{default:S(()=>[T(x,{modelValue:a.value,"onUpdate:modelValue":y[1]||(y[1]=V=>a.value=V)},null,8,["modelValue"])]),_:1}),T(b,{"input-width":"150px",label:"Metallic"},{default:S(()=>[T(C,{modelValue:l.value,"onUpdate:modelValue":y[2]||(y[2]=V=>l.value=V),min:0,max:1,step:.01},null,8,["modelValue"])]),_:1}),T(b,{"input-width":"150px",label:"Metalness Map"},{default:S(()=>[T(x,{modelValue:u.value,"onUpdate:modelValue":y[3]||(y[3]=V=>u.value=V)},null,8,["modelValue"])]),_:1}),T(b,{"input-width":"150px",label:"Roughness"},{default:S(()=>[T(C,{modelValue:c.value,"onUpdate:modelValue":y[4]||(y[4]=V=>c.value=V),min:0,max:1,step:.01},null,8,["modelValue"])]),_:1}),T(b,{"input-width":"150px",label:"Roughness Map"},{default:S(()=>[T(x,{modelValue:d.value,"onUpdate:modelValue":y[5]||(y[5]=V=>d.value=V)},null,8,["modelValue"])]),_:1}),T(b,{"input-width":"150px",label:"IOR"},{default:S(()=>[T(C,{modelValue:f.value,"onUpdate:modelValue":y[6]||(y[6]=V=>f.value=V),min:1,max:2.333,step:.01},null,8,["modelValue"])]),_:1}),T(b,{"input-width":"150px",label:"Transparent"},{default:S(()=>[j("div",null,[T(k,{modelValue:h.value,"onUpdate:modelValue":y[7]||(y[7]=V=>h.value=V)},null,8,["modelValue"])])]),_:1}),h.value?(E(),B(b,{key:0,"input-width":"150px",label:"Alpha"},{default:S(()=>[T(C,{modelValue:m.value,"onUpdate:modelValue":y[8]||(y[8]=V=>m.value=V),min:0,max:1,step:.01},null,8,["modelValue"])]),_:1})):ue("",!0)]),T(D,{collapsible:"",type:"multiple"},{default:S(()=>[T(R,{label:"Specular",item:{value:"specular"},nested:""},{default:S(()=>[T(P)]),_:1}),T(R,{label:"Transmission",item:{value:"transmission"},nested:""},{default:S(()=>[T(M)]),_:1}),T(R,{label:"Coat",item:{value:"coat"},nested:""},{default:S(()=>[T(A)]),_:1}),T(R,{label:"Sheen",item:{value:"sheen"},nested:""},{default:S(()=>[T(O)]),_:1}),T(R,{label:"Emission",item:{value:"emission"},nested:""},{default:S(()=>[T(Va)]),_:1})]),_:1})])):ue("",!0)}}}),oR={key:0},rR={class:"p-1 pr-3 flex flex-col items-end gap-1"},sR=L({__name:"MatSurfaceToon",setup(n){const{material:e,updateMaterialProp:t,getMaterialProp:o}=uo(),r=F({set(a){t({prop:"color",value:new K.Color(a)})},get(){return`#${o("color")?.getHexString()}`}}),i=F({set(a){t({prop:"map",value:a})},get(){return o("map")}}),s=F({set(a){t({prop:"gradientMap",value:a})},get(){return o("gradientMap")}});return(a,l)=>{const u=qo,c=ht,d=Lo,f=Va,h=Wn;return p(e)?(E(),ne("div",oR,[j("div",rR,[T(c,{"input-width":"150px",label:"Base Color"},{default:S(()=>[T(u,{hex:r.value,"onUpdate:hex":l[0]||(l[0]=m=>r.value=m)},null,8,["hex"])]),_:1}),T(c,{"input-width":"150px",label:"Map"},{default:S(()=>[T(d,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=m=>i.value=m)},null,8,["modelValue"])]),_:1}),T(c,{"input-width":"150px",label:"Gradient Map"},{default:S(()=>[T(d,{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=m=>s.value=m)},null,8,["modelValue"])]),_:1})]),T(h,{label:"Emission",item:{value:"emission"},class:"w-full",nested:""},{default:S(()=>[T(f)]),_:1})])):ue("",!0)}}}),iR={key:0},aR={class:"flex flex-col items-end gap-1 p-1 pr-3"},lR={class:"flex flex-col items-end gap-1 p-1 pr-3"},uR=L({__name:"MatSurfaceGlossy",setup(n){const{material:e,updateMaterialProp:t,getMaterialProp:o}=uo(),r=F({set(a){t({prop:"color",value:new K.Color(a)})},get(){return`#${o("color")?.getHexString()}`}}),i=F({set(a){t({prop:"specular",value:new K.Color(a)})},get(){return`#${o("specular")?.getHexString()}`}}),s=F({set(a){t({prop:"specularMap",value:a})},get(){return o("specularMap")}});return(a,l)=>{const u=qo,c=ht,d=Lo,f=Wn,h=Va;return p(e)?(E(),ne("div",iR,[j("div",aR,[T(c,{"input-width":"150px",label:"Base Color"},{default:S(()=>[T(u,{hex:r.value,"onUpdate:hex":l[0]||(l[0]=m=>r.value=m)},null,8,["hex"])]),_:1})]),T(f,{label:"Specular",item:{value:"specular"},class:"w-full",nested:""},{default:S(()=>[j("div",lR,[T(c,{"input-width":"150px",label:"Color"},{default:S(()=>[T(u,{hex:i.value,"onUpdate:hex":l[1]||(l[1]=m=>i.value=m)},null,8,["hex"])]),_:1}),T(c,{"input-width":"150px",label:"Map"},{default:S(()=>[T(d,{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=m=>s.value=m)},null,8,["modelValue"])]),_:1})])]),_:1}),T(f,{label:"Emission",item:{value:"emission"},class:"w-full",nested:""},{default:S(()=>[T(h)]),_:1})])):ue("",!0)}}}),cR={key:0},dR={class:"pl-1 pt-1 pr-3"},fR=L({__name:"MaterialProperties",setup(n){const e=at(),t=Ks(),o=F(()=>e.selectedObject),r=F(()=>o.value instanceof K.Mesh&&t.getMaterial(o.value)?.original||null),i=[{label:"Principled BSDF",value:"principled_bsdf"},{label:"Diffuse BSDF",value:"diffuse_bsdf"},{label:"Glossy BSDF",value:"glossy_bsdf"},{label:"Toon BSDF",value:"toon_bsdf"}],s=N(a());Te(s,u=>{if(!(!u||!(o.value instanceof K.Mesh)))switch(u){case"principled_bsdf":t.changeMaterial(o.value,new K.MeshPhysicalMaterial);break;case"diffuse_bsdf":t.changeMaterial(o.value,new K.MeshLambertMaterial);break;case"toon_bsdf":t.changeMaterial(o.value,new K.MeshToonMaterial);break;case"glossy_bsdf":t.changeMaterial(o.value,new K.MeshPhongMaterial);break}});function a(){const u=Array.isArray(r.value)?r.value[0]:r.value;if(!u)return;let c;switch(u.type){case"MeshPhysicalMaterial":c="principled_bsdf";break;case"MeshStandardMaterial":c="principled_bsdf";break;case"MeshLambertMaterial":c="diffuse_bsdf";break;case"MeshToonMaterial":c="toon_bsdf";break;case"MeshPhongMaterial":c="glossy_bsdf";break}return i.find(d=>d.value===c)?.value}function l(u){switch(u){case"diffuse_bsdf":return jI;case"principled_bsdf":return nR;case"toon_bsdf":return sR;case"glossy_bsdf":return uR}}return(u,c)=>{const d=ts,f=ht,h=Wn,m=fr;return r.value?(E(),ne("div",cR,[T(m,{collapsible:"",type:"multiple"},{default:S(()=>[T(h,{label:"Surface",item:{value:"surface"}},{default:S(()=>[j("div",dR,[T(f,{label:"Surface",class:"ml-auto w-fit mb-4"},{default:S(()=>[T(d,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=v=>s.value=v),items:i,class:"w-[150px]"},null,8,["modelValue"])]),_:1})]),s.value?(E(),B(zn(l(s.value)),{key:0})):ue("",!0)]),_:1})]),_:1})])):ue("",!0)}}}),pR={class:"p-1 flex flex-col gap-0.5 items-end"},hR={class:"p-1 flex flex-col gap-0.5 items-end"},mR=L({__name:"CameraProperties",setup(n){const e=at(),t=F({set(l){l!==t.value&&e.switchCamera()},get(){return e.activeCamera.type}});function o(l){return e.activeCamera.type==="PerspectiveCamera"}const r=[{label:"Perspective",value:"PerspectiveCamera"},{label:"Orthographic",value:"OrthographicCamera"}],i=N("fov"),s=F({set(l){if("getFocalLength"in e.activeCamera)return e.activeCamera.setFocalLength(l)},get(){return"getFocalLength"in e.activeCamera?e.activeCamera.getFocalLength():0}}),a=[{label:"Field of View",value:"fov"},{label:"Millimeters",value:"focal"}];return(l,u)=>{const c=ts,d=ht,f=pn,h=Wn,m=fr;return E(),B(m,{collapsible:"",type:"multiple",class:"space-y-0.5"},{default:S(()=>[T(h,{label:"Lens",item:{value:"lens"}},{default:S(()=>[j("div",pR,[T(d,{label:"Type","input-width":"150px",class:"mb-1"},{default:S(()=>[T(c,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=v=>t.value=v),items:r},null,8,["modelValue"])]),_:1}),o(p(e).activeCamera)?(E(),ne(Ie,{key:0},[i.value==="fov"?(E(),B(d,{key:0,label:"Field of View","input-width":"150px",tooltip:{text:"The vertical field of view, from bottom to top of view"}},{default:S(()=>[T(f,{modelValue:p(e).activeCamera.fov,"onUpdate:modelValue":u[1]||(u[1]=v=>p(e).activeCamera.fov=v),"format-options":{style:"unit",unitDisplay:"narrow",unit:"degree"}},null,8,["modelValue"])]),_:1})):(E(),B(d,{key:1,label:"Focal Length","input-width":"150px"},{default:S(()=>[T(f,{modelValue:s.value,"onUpdate:modelValue":u[2]||(u[2]=v=>s.value=v),"format-options":{style:"unit",unitDisplay:"narrow",unit:"millimeter"}},null,8,["modelValue"])]),_:1})),T(d,{label:"Lens Unit","input-width":"150px"},{default:S(()=>[T(c,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=v=>i.value=v),items:a},null,8,["modelValue"])]),_:1})],64)):ue("",!0),T(d,{label:"Zoom","input-width":"150px"},{default:S(()=>[T(f,{modelValue:p(e).activeCamera.zoom,"onUpdate:modelValue":u[4]||(u[4]=v=>p(e).activeCamera.zoom=v),step:.01},null,8,["modelValue"])]),_:1}),T(d,{label:"Clip Start","input-width":"150px",class:"mt-1",tooltip:{text:"Camera near clipping distance"}},{default:S(()=>[T(f,{modelValue:p(e).activeCamera.near,"onUpdate:modelValue":u[5]||(u[5]=v=>p(e).activeCamera.near=v)},null,8,["modelValue"])]),_:1}),T(d,{label:"End","input-width":"150px",tooltip:{text:"Camera far clipping distance"}},{default:S(()=>[T(f,{modelValue:p(e).activeCamera.far,"onUpdate:modelValue":u[6]||(u[6]=v=>p(e).activeCamera.far=v)},null,8,["modelValue"])]),_:1})])]),_:1}),T(h,{label:"Transform",item:{value:"transform"}},{default:S(()=>[j("div",hR,[T(d,{label:"Position X","input-width":"150px"},{default:S(()=>[T(f,{modelValue:p(e).activeCamera.position.x,"onUpdate:modelValue":u[7]||(u[7]=v=>p(e).activeCamera.position.x=v)},null,8,["modelValue"])]),_:1}),T(d,{label:"Y","input-width":"150px"},{default:S(()=>[T(f,{modelValue:p(e).activeCamera.position.y,"onUpdate:modelValue":u[8]||(u[8]=v=>p(e).activeCamera.position.y=v)},null,8,["modelValue"])]),_:1}),T(d,{label:"Z","input-width":"150px"},{default:S(()=>[T(f,{modelValue:p(e).activeCamera.position.z,"onUpdate:modelValue":u[9]||(u[9]=v=>p(e).activeCamera.position.z=v)},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1})}}}),vR={class:"block-border flex flex-col overflow-hidden rounded bg-window-bg"},gR={class:"flex items-center gap-1 p-1 leading-0"},yR=L({__name:"DataProperties",setup(n){const e=at(),t=N("object");Te(()=>e.selectedObject,()=>{r.value.find(s=>s.value===t.value)||(t.value=r.value[0]?.value||"object")});const o=[{icon:"properties/camera-properties",value:"camera",content:mR,title:"Camera Properties"}],r=F(()=>{const i=e.selectedObject;if(!i)return o;const s=[...o,{icon:"ui/object-data",value:"object",content:kP,title:"Object Properties"}];return i instanceof K.Light&&s.push({icon:"properties/light-properties",content:II,title:"Light Properties",value:"light"}),i instanceof K.Mesh&&(i.geometry instanceof ea&&s.push({icon:"properties/text-properties",value:"textdata",content:BI,title:"Text Properties"}),"material"in i&&s.push({icon:"ui/material-data",value:"material",content:fR,title:"Material Properties"})),s});return(i,s)=>{const a=vt,l=es,u=Jr;return E(),ne("div",vR,[j("h2",gR,[T(a,{name:"properties/properties"}),s[1]||(s[1]=ke(" Properties ",-1))]),T(p(ci).Root,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=c=>t.value=c),class:"grid w-full grow grid-cols-[min-content_1fr] grid-rows-1 overflow-hidden",orientation:"vertical","default-value":"object"},{default:S(()=>[T(p(ci).List,{class:"relative flex flex-col gap-0.5 bg-ui-tab-inner pt-1 pl-1"},{default:S(()=>[(E(!0),ne(Ie,null,ot(r.value,c=>(E(),B(l,{key:c.value,tooltip:{text:c.title}},{default:S(()=>[T(p(ci).Trigger,{value:c.value,class:"cursor-pointer rounded-l-sm p-1 text-lg hover:bg-ui-tab-inner-selected data-[state='active']:bg-ui-tab-inner-selected"},{default:S(()=>[T(a,{name:c.icon,class:"m-auto"},null,8,["name"])]),_:2},1032,["value"])]),_:2},1032,["tooltip"]))),128))]),_:1}),T(u,null,{default:S(()=>[(E(!0),ne(Ie,null,ot(r.value,c=>(E(),B(p(ci).Content,{key:c.value,value:c.value,class:"p-2 pr-3"},{default:S(()=>[(E(),B(zn(c.content)))]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])}}}),_R=L({__name:"MxContextMenu",props:{root:{default:()=>{}},trigger:{default:()=>{}},content:{default:()=>{}},subContent:{default:()=>({alignOffset:-4})},items:{}},setup(n){return(e,t)=>{const o=vt;return E(),B(p(Yn).Root,Re(De(n.root)),{default:S(()=>[T(p(Yn).Trigger,J({"as-child":""},n.trigger),{default:S(()=>[U(e.$slots,"trigger",{},void 0,!0)]),_:3},16),T(p(Yn).Portal,null,{default:S(()=>[T(p(Yn).Content,J(n.content,{class:"bg-ui-menu-bg-inner text-ui-menu-bg-text text-sm *:cursor-default rounded p-1"}),{default:S(()=>[(E(!0),ne(Ie,null,ot(n.items,r=>(E(),ne(Ie,{key:r.key},[r.submenu?(E(),B(p(Yn).Sub,{key:0},{default:S(()=>[T(p(Yn).SubTrigger,{class:"context-item flex items-center gap-2"},{default:S(()=>[ke(Ce(r.label)+" ",1),T(o,{name:"base/triangle-right",class:"ml-auto text-[0.8em]"})]),_:2},1024),T(p(Yn).SubContent,J({class:"bg-ui-menu-bg-inner p-1 rounded"},{ref_for:!0},n.subContent),{default:S(()=>[(E(!0),ne(Ie,null,ot(r.submenu,i=>(E(),B(p(Yn).Item,{key:i.key,class:"context-item",onSelect:i.onSelect},{default:S(()=>[ke(Ce(i.label),1)]),_:2},1032,["onSelect"]))),128))]),_:2},1040)]),_:2},1024)):(E(),B(p(Yn).Item,{key:1,class:"context-item",onSelect:r.onSelect},{default:S(()=>[ke(Ce(r.label),1)]),_:2},1032,["onSelect"]))],64))),128))]),_:1},16)]),_:1})]),_:3},16)}}}),bR=hr(_R,[["__scopeId","data-v-445ab652"]]),wR={class:"overflow-hidden text-ellipsis whitespace-nowrap grow"},xR=L({__name:"DataOutlinerItem",props:sr({item:{},isExpanded:{type:Boolean},isSelected:{type:Boolean}},{visibility:{type:Boolean},visibilityModifiers:{}}),emits:["update:visibility"],setup(n){const e=Et(n,"visibility"),t=n;function o(a){return a===0?"0":`${a*1.5}em`}const r=at(),i=F(()=>{const l=r.sceneChildren.filter(u=>{const c=u.type==="Group",d=u.userData.isHelper;return c&&!d}).map(u=>({uuid:u.uuid,name:u.name})).map(u=>({key:u.uuid,label:u.name,onSelect(){r.moveToGroup(t.item.value.uuid,u.uuid)}}));return[{key:"movetogroup",label:"Move to group",submenu:l.length>0?l:[{key:"newgroup",label:"New group",onSelect(){const u=r.addGroup();r.moveToGroup(t.item.value.uuid,u.uuid)}}]}]}),s=new Map([["PointLight","light/light-point"],["SpotLight","light/light-spot"],["DirectionalLight","light/light-sun"],["RectAreaLight","light/light-area"],["Mesh","mesh/mesh"],["Group","outliner/group"]]);return(a,l)=>{const u=vt,c=bR,d=lp;return E(),ne("li",{style:wt({paddingLeft:o(n.item.level)}),class:no(["relative flex snap-start items-center gap-1 pr-5 hover:bg-outliner-active-highlight",{"bg-outliner-active-highlight text-outliner-active-object":n.isSelected}])},[n.item.hasChildren?(E(),B(u,{key:0,name:"ui/arrow-right",class:no([{"rotate-90":n.isExpanded},"size-[1.5em] p-0.5 shrink-0 text-xs"]),"data-toggle":""},null,8,["class"])):ue("",!0),T(u,{name:p(s).get(n.item.value.type)||"outliner/empty",class:"shrink-0"},null,8,["name"]),T(c,{items:i.value},{trigger:S(()=>[j("span",wR,Ce(n.item.value.name),1)]),_:1},8,["items"]),j("div",{class:"contents",onClick:l[1]||(l[1]=ze(()=>{},["stop"]))},[T(d,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=f=>e.value=f),class:"ml-auto"},{default:S(()=>[T(u,{name:n.item.value.visible?"misc/visibility-visible":"misc/visibility-hidden"},null,8,["name"])]),_:1},8,["modelValue"])])],6)}}}),SR={class:"block-border text-sm leading-6 flex flex-col overflow-hidden rounded bg-window-bg alternate-rows relative"},CR={class:"flex items-center gap-1 px-1 text-[1rem]"},TR={class:"flex justify-between items-center"},ER={class:"flex items-center gap-1 px-1"},MR=L({__name:"DataOutliner",setup(n){const e=at(),t=je();Te(()=>e.selectedObject,s=>{t.value=s??void 0},{immediate:!0});const o=F(()=>e.sceneChildren.filter(s=>!s.userData.isHelper).map(r));function r(s){return{uuid:s.uuid,type:s.type,name:s.name||s.type,visible:s.visible,userData:s.userData,children:s.children.length>0?s.children.map(r):void 0}}function i(s){"toggle"in s.target.dataset||s.preventDefault()}return(s,a)=>{const l=vt,u=es,c=xR,d=Jr;return E(),ne("div",SR,[j("h2",CR,[T(l,{name:"outliner/outliner"}),a[3]||(a[3]=ke(" Outliner ",-1)),T(u,{tooltip:{text:"Add Group"}},{default:S(()=>[j("button",{class:"btn ml-auto",type:"button",onClick:a[0]||(a[0]=(...f)=>p(e).addGroup&&p(e).addGroup(...f))},[T(l,{name:"ui/collection"})])]),_:1})]),T(d,null,{default:S(()=>[j("div",TR,[j("h3",ER,[T(l,{name:"ui/collection"}),a[4]||(a[4]=ke(" Scene Collection ",-1))])]),T(p(yd).Root,{modelValue:t.value,"onUpdate:modelValue":a[2]||(a[2]=f=>t.value=f),"get-key":f=>f.uuid,items:o.value,"selection-behavior":"replace"},{default:S(({flattenItems:f})=>[(E(!0),ne(Ie,null,ot(f,h=>(E(),B(p(yd).Item,J({ref_for:!0},h.bind,{key:h._id,"data-testid":h.value.uuid===t.value?.uuid?"outliner-selected":void 0,"as-child":"",onSelect:a[1]||(a[1]=ze(m=>p(e).selectObject(m.detail.value?.uuid),["prevent"])),onToggle:i}),{default:S(({isExpanded:m})=>[T(c,{item:h,"is-expanded":m,visibility:h.value.visible,"is-selected":h.value.uuid===t.value?.uuid,"onUpdate:visibility":v=>p(e).objectVisibilityUpdate(h.value.uuid,!h.value.visible)},null,8,["item","is-expanded","visibility","is-selected","onUpdate:visibility"])]),_:2},1040,["data-testid"]))),128))]),_:1},8,["modelValue","get-key","items"])]),_:1})])}}}),AR={class:"sidebar grid min-h-0 grid-rows-(--side-rows) rounded"},PR=L({__name:"MxSidebar",setup(n){kf(o=>({v50fc16c8:t.value+"px"}));const e=Nn("divider"),t=N(500);return We(e,"pointerdown",o=>{const r=o.clientY,i=t.value,a=We(window,"pointermove",l=>{const u=r-l.clientY;t.value=Math.max(200,i+u)});We(window,"pointerup",a)}),(o,r)=>{const i=MR,s=yR;return E(),ne("div",AR,[T(i),j("div",{ref_key:"divider",ref:e,class:"h-1 cursor-row-resize"},null,512),T(s)])}}}),IR=hr(PR,[["__scopeId","data-v-877e8aae"]]),RR={class:"absolute top-10 left-2.5 flex flex-col text-3xl"},OR=["title","data-testid","data-active","onClick"],kR=L({__name:"ViewportToolbar",setup(n){const e=at(),t=[{name:"translate",icon:"toolbar/tool-move",onClick:()=>{e.setTransformMode("translate")},title:"Move",tooltip:"Move selected items",footer:"G"},{name:"rotate",icon:"toolbar/tool-rotate",onClick:()=>{e.setTransformMode("rotate")},title:"Rotate",tooltip:"Rotate selected items",footer:"R"},{name:"scale",icon:"toolbar/tool-scale",onClick:()=>{e.setTransformMode("scale")},title:"Scale",tooltip:"Scale (resize) selected items",footer:"S"}];return(o,r)=>{const i=vt;return E(),ne("div",RR,[(E(),ne(Ie,null,ot(t,s=>T(es,{key:"toolbar_"+s.name,tooltip:{title:s.title,text:s.tooltip,footer:`Shortcut: ${s.footer}`},options:{content:{align:"start",side:"right",sideOffset:5}}},{default:S(()=>[j("button",{type:"button",class:no(["cursor-pointer border-[0.5px] border-ui-toolbar-outline bg-ui-toolbar-inner p-1 first:rounded-t last:rounded-b last:border-t-0 first:border-b-0",{"bg-ui-toolbar-inner-selected":s.name===p(e).currentTransformMode}]),title:s.title,"data-testid":`toolbar-btn-${s.name}`,"data-active":s.name===p(e).currentTransformMode,onClick:s.onClick},[T(i,{name:s.icon},null,8,["name"])],10,OR)]),_:2},1032,["tooltip"])),64))])}}}),DR={class:"flex"},BR=["onClick"],qR=["innerHTML"],LR={class:"text-[.9em] opacity-50"},VR=L({__name:"ViewportShadingControls",setup(n){const e=Ks(),t=[{name:"wireframe",icon:"shading/shading-wireframe",tooltip:{title:"Viewport Shading: <em>Wireframe</em>",footer:"Display only edges of geometry without surface shading"}},{name:"solid",icon:"shading/shading-solid",tooltip:{title:"Viewport Shading: <em>Solid</em>",footer:"Display objects with flat lighting and basic surface shading"}},{name:"materialPreview",icon:"shading/shading-preview",tooltip:{title:"Viewport Shading: <em>Material Preview</em>",footer:"Preview materials using predefined environment lights"}},{name:"rendered",icon:"shading/shading-rendered",tooltip:{title:"Viewport Shading: <em>Rendered</em>",footer:"Preview the final scene using the active render engine"}}];return(o,r)=>{const i=vt;return E(),ne("div",DR,[(E(),ne(Ie,null,ot(t,(s,a)=>T(es,{key:s.name,content:{align:"start",side:"bottom",alignOffset:-10,sideOffset:10}},{content:S(()=>[j("span",{innerHTML:s.tooltip.title},null,8,qR),r[0]||(r[0]=j("p",{class:"mt-1"},"Method to display/shade objects in the 3D View",-1)),j("span",LR,Ce(s.tooltip.footer),1)]),default:S(()=>[j("button",{class:no(["cursor-pointer bg-ui-radio-inner p-0.5 hover:brightness-125",{"bg-ui-radio-inner-selected":s.name===p(e).shadingMode,"rounded-l":a===0,"rounded-r":a===t.length-1}]),type:"button",onClick:l=>p(e).setMode(s.name)},[T(i,{name:s.icon},null,8,["name"])],10,BR)]),_:2},1024)),64))])}}}),FR=hr(VR,[["__scopeId","data-v-b0a7bc92"]]),NR={key:0,src:Hh,alt:"",class:"inline-block size-[1em] scale-150"},$R={key:2},UR={class:"w-[1em]"},zR={class:"w-[1em]"},HR={class:"w-[1em]"},jR=L({__name:"MenuBar",props:{items:{}},setup(n){return(e,t)=>{const o=vt;return E(),B(p(wn).Root,{loop:""},{default:S(()=>[(E(!0),ne(Ie,null,ot(n.items,r=>(E(),B(p(wn).Menu,{key:r.label},{default:S(()=>[T(p(wn).Trigger,{class:"trigger"},{default:S(()=>[r.icon==="mixeur"?(E(),ne("img",NR)):r.icon?(E(),B(o,{key:1,name:r.icon},null,8,["name"])):(E(),ne("span",$R,Ce(r.label),1))]),_:2},1024),T(p(wn).Content,{class:"menubar-content"},{default:S(()=>[(E(!0),ne(Ie,null,ot(r.items,i=>(E(),ne(Ie,{key:i.key},[i.type==="item"?(E(),B(p(wn).Item,{key:0,class:"item",onClick:i.onClick},{default:S(()=>[j("span",UR,[i.icon?(E(),B(o,{key:0,name:i.icon},null,8,["name"])):ue("",!0)]),ke(" "+Ce(i.label),1)]),_:2},1032,["onClick"])):i.type==="checkbox"?(E(),B(p(wn).CheckboxItem,{key:1,modelValue:i.model.value,"onUpdate:modelValue":s=>i.model.value=s,class:"item"},{default:S(()=>[i.model.value?(E(),B(o,{key:0,name:"ui/checkbox-checked"})):(E(),B(o,{key:1,name:"ui/checkbox-unchecked"})),ke(" "+Ce(i.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])):i.type==="sub"?(E(),B(p(wn).Sub,{key:2},{default:S(()=>[T(p(wn).SubTrigger,{class:"item"},{default:S(()=>[j("span",zR,[i.icon?(E(),B(o,{key:0,name:i.icon},null,8,["name"])):ue("",!0)]),ke(" "+Ce(i.label)+" ",1),T(o,{name:"base/triangle-right",class:"ml-auto text-[0.7em]"})]),_:2},1024),T(p(wn).SubContent,{"align-offset":-3,class:"menubar-content"},{default:S(()=>[(E(!0),ne(Ie,null,ot(i.items,s=>(E(),B(p(wn).Item,{key:s.key,class:"item",onClick:s.onClick},{default:S(()=>[j("span",HR,[s.icon?(E(),B(o,{key:0,name:s.icon},null,8,["name"])):ue("",!0)]),ke(" "+Ce(s.label),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024)):i.type==="separator"?(E(),B(p(wn).Separator,{key:3,class:"h-px bg-ui-menu-bg-outline"})):ue("",!0)],64))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})}}}),fm=hr(jR,[["__scopeId","data-v-94cee40c"]]),WR={class:"flex items-center p-1 gap-2"},GR=L({__name:"ViewportHeader",setup(n){const e=[{label:"Add",items:[{type:"sub",key:"mesh",label:"Mesh",icon:"mesh/mesh",items:[{type:"item",key:"mesh_plane",label:"Plane",icon:"mesh/mesh-plane",onClick(){o("plane")}},{type:"item",key:"mesh_cube",label:"Cube",icon:"mesh/mesh-cube",onClick(){o("cube")}},{type:"item",key:"mesh_circle",label:"Circle",icon:"mesh/mesh-circle",onClick(){o("circle")}},{type:"item",key:"mesh_sphere",label:"UV Sphere",icon:"mesh/mesh-sphere",onClick(){o("sphere")}},{type:"item",key:"mesh_icosphere",label:"Ico Sphere",icon:"mesh/mesh-icosphere",onClick(){o("icosphere")}},{type:"item",key:"mesh_cylinder",label:"Cylinder",icon:"mesh/mesh-cylinder",onClick(){o("cylinder")}},{type:"item",key:"mesh_cone",label:"Cone",icon:"mesh/mesh-cone",onClick(){o("cone")}},{type:"item",key:"mesh_torus",label:"Torus",icon:"mesh/mesh-torus",onClick(){o("torus")}}]},{type:"item",key:"text",label:"Text",icon:"misc/text",onClick(){OI().then(i=>{i&&t.addModelToScene(i)})}},{type:"separator",key:"sep1"},{type:"sub",key:"light",label:"Light",icon:"light/light",items:[{type:"item",key:"light_point",label:"Point",icon:"light/light-point",onClick(){r("point")}},{type:"item",key:"light_spot",label:"Spot",icon:"light/light-spot",onClick(){r("spot")}},{type:"item",key:"light_directional",label:"Directional",icon:"light/light-sun",onClick(){r("sun")}},{type:"item",key:"light_area",label:"Area",icon:"light/light-area",onClick(){r("area")}}]}]}],t=at();function o(i){const s=Lh(i);t.addModelToScene(s)}function r(i){const s=Bh({type:i});t.addLightToScene(s)}return(i,s)=>{const a=vt,l=FR;return E(),ne("div",WR,[T(a,{name:"ui/viewport"}),T(fm,{items:e}),T(l,{class:"ml-auto"})])}}}),KR=L({__name:"ViewNavigationWidget",setup(n){const e=at();return(t,o)=>{const r=vt,i=es;return E(),B(i,{tooltip:{text:"Switch the current view from perspective/orthographic projection",footer:"Shortcut: Numpad 5"},options:{content:{align:"start",alignOffset:-10,side:"bottom",sideOffset:5}}},{default:S(()=>[j("button",J({type:"button",class:"cursor-pointer rounded-full bg-black p-1.5 text-xl text-white opacity-50 hover:bg-gray-500"},t.$attrs,{onClick:o[0]||(o[0]=(...s)=>p(e).switchCamera&&p(e).switchCamera(...s))}),[p(e).activeCamera.type==="PerspectiveCamera"?(E(),B(r,{key:0,name:"view/view-perspective"})):(E(),B(r,{key:1,name:"view/view-orthographic"}))],16)]),_:1})}}}),YR={ref:"wrapper",class:"relative grid h-full w-full grid-rows-[1fr_min_content] overflow-hidden rounded"},XR={class:"relative overflow-hidden"},ZR={ref:"canvasRef",class:"block h-full w-full","data-testid":"viewport-canvas"},QR=L({__name:"MxViewport",setup(n){const e=ka(),t=Nn("canvasRef");e.useHotKeys(t);const o=at(),r=Nn("webglErrorRef"),i=N(!1);return Le(()=>{if(!of.isWebGL2Available()){i.value=!0;const s=of.getWebGL2ErrorMessage();s.setAttribute("style",""),r.value?.appendChild(s);return}o.initScene(t)}),(s,a)=>{const l=GR,u=kR;return E(),ne("div",YR,[p(o).isInitiated?(E(),B(l,{key:0,class:"absolute top-0 left-0 z-1 w-full bg-viewport-header-bg"})):ue("",!0),j("div",XR,[a[0]||(a[0]=j("div",{class:"gizmo-wrapper absolute top-10 right-0"},null,-1)),p(o).isInitiated?(E(),B(KR,{key:0,class:"absolute top-40 right-2.5"})):ue("",!0),oo(j("div",{ref_key:"webglErrorRef",ref:r,class:"webgl-error"},null,512),[[Ps,i.value]]),oo(j("canvas",ZR,null,512),[[Ps,!i.value]])]),p(o).isInitiated?(E(),B(u,{key:1})):ue("",!0)],512)}}}),JR={class:"flex items-center bg-topbar-background p-1 px-2"},eO={href:"https://github.com/zabastx/vue-mixeur",class:"ml-auto text-xl",target:"_blank",title:"GitHub repository"},tO=L({__name:"TopBar",setup(n){const e=ka(),t=at(),{open:o}=_c(),r=F({get(){return e.showStatusBar},set(u){e.showStatusBar=u}}),i=[{label:"mixeur",icon:"mixeur",items:[{type:"item",key:"about",label:"About Mixeur",onClick(){o("about")}}]},{label:"File",items:[{type:"sub",key:"import",label:"Import",icon:"ui/import",items:[{type:"item",key:"import_gltf",label:"glTF 2.0 (.glb)",onClick:()=>{l("glb")}},{type:"item",key:"import_obj",label:"Wavefront (.obj)",onClick:()=>{l("obj")}},{type:"item",key:"import_library",label:"Import from library",onClick:()=>{o("modelsLibrary")}}]},{type:"item",key:"export",label:"Export",icon:"misc/export",onClick(){t.exportScene()}}]},{label:"Render",items:[{type:"item",key:"render_image",label:"Render Image",icon:"ui/render-image",onClick(){o("renderImage")}}]},{label:"Window",items:[{type:"item",key:"window_fullscreen",label:"Toggle Window Fullscreen",icon:"misc/full-screen",onClick(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}},{type:"separator",key:"sep1"},{type:"checkbox",key:"window_status_bar",label:"Show Status Bar",model:r}]}],s=at(),{toast:a}=Gn();async function l(u){const{data:c}=await KM(`.${u}`);if(c)try{await s.importModel({filename:c.filename,url:c.url,format:u})}catch(d){console.error(d),a.error(`Failed to import ${u} file`)}finally{c?.cleanup()}}return(u,c)=>{const d=vt;return E(),ne("header",JR,[T(fm,{items:i}),j("a",eO,[T(d,{name:"misc/github"})])])}}}),nO={class:"flex h-full flex-col font-sans text-gray-200"},oO={class:"grid min-h-0 flex-1 grid-cols-(--main-cols) bg-editor-border p-1 select-none"},rO=L({__name:"App",setup(n){kf(a=>({ae436042:s.value+"px"}));const e=ka(),t=at(),{setToastInstance:o}=Gn(),r=Nn("toastRef");Le(()=>{r.value&&o(r.value)});const i=Nn("divider"),s=N(window.innerWidth*.25);return We(i,"pointerdown",a=>{const l=a.clientX,u=s.value,d=We(window,"pointermove",f=>{const h=l-f.clientX;s.value=Math.max(200,u+h)});We(window,"pointerup",d)}),(a,l)=>{const u=tO,c=QR,d=IR,f=xP,h=vP,m=lP,v=oP;return E(),B(p(VS),null,{default:S(()=>[T(p(uC),{"delay-duration":300,"disable-hoverable-content":""},{default:S(()=>[j("div",nO,[p(t).isInitiated?(E(),B(u,{key:0})):ue("",!0),j("main",oO,[T(c,{class:"block-border"}),j("div",{ref_key:"divider",ref:i,class:"divider w-1 cursor-col-resize"},null,512),p(t).isInitiated?(E(),B(d,{key:0})):ue("",!0)]),oo(T(f,null,null,512),[[Ps,p(e).showStatusBar]]),T(h),T(m,{ref_key:"toastRef",ref:r},null,512),T(v)])]),_:1})]),_:1})}}}),sO=hr(rO,[["__scopeId","data-v-053e051c"]]),iO=HC(),pm=Jm(sO);pm.use(iO);pm.mount("#app");
